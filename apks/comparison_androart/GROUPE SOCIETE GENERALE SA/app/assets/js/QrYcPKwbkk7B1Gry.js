$().loadJavaScript("/js/n97SlZSkkDQ7YX08.js");$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");Class.ns("Bankingapp.functions.openaccount");Bankingapp.functions.openaccount.AccountTypeSelection=Class.extend(Functions.transferfunds.AbstractAccountSelection,{progressIndicatorStepCount:Functions.transferfunds.TransferUtils.OPENACCOUNT_STEPCOUNT_D,progressIndicatorCurrentStep:2,showPageInstructions:true,showProgressIndicator:true,pageInstructionsResourceKey:"bankingapp_brd_function_finances_openaccount_chooseaccounttype",formDataFunctionAttributeId:Functions.transferfunds.TransferUtils.OPENACCOUNT_FORMDATA,formDataField:"accountType",layoutRender:function(){this.container=$("<div>",{id:this.containerId,"class":"maincontainer"});this.container.addClass(this.containerClass);if(this.showProgressIndicator){this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));}if(this.showPageInstructions){this.container.append(new Bankingapp.ui.Label(resolve(this.pageInstructionsResourceKey),{"class":"pagetitle separator textcenter"}));}return this.container;},init:function(){console.log("AccountTypeSelection init ...");this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.transferType=getFunctionAttribute("TransferType");console.log("this.transferType: ",this.transferType);Bankingapp.framework.Application.callService("/openaccount/getAccountTypes",{GetAccountTypesRequest:{AccountGroup:this.transferType,SourceAccountCurrency:this.formData.sourceAccount.currency}},$.proxy(this.handleInitResponse,this));},accountClickHandler:function(b,a){console.log("AccountTypeSelection accountClickHandler ...");loadView("view://brd/bankingapp/function/openaccount/amountselector",null);},handleInitResponse:function(a){console.log("AccountTypeSelection handleInitResponse ...");if(a==null||a==undefined||a.accountTypes==null||a.accountTypes==undefined||a.accountTypes.length<1){console.log("The response is empty");showError(resolve("bankingapp_brd_function_finances_westernunion_receive_no_response_error"));}else{this.setAccounts(a.accountTypes);}},renderAccountList:function(){this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);if((this.formData==undefined)||(this.formData==null)){this.formData={};}if(this.accountList){this.accountList.remove();}this.accountList=new Bankingapp.ui.List({baseClass:"list",idProperty:this.accountItemIdField,listData:this.listData,itemRenderer:Functions.transferfunds.AccountListItem,noresultKey:this.emptyListResourceKey,itemConfig:{ibanField:"interestRateComment",nameField:"accountTypeName",typeField:"accountType",currencyField:"currencyExt",balanceField:"minInitialAmount",baseClass:"accountListItem"}});var a=this.formData[this.formDataField]?this.formData[this.formDataField]:null;if(a){this.accountList.getItem(a[this.accountItemIdField]).addClass("state_selected");}this.container.append(this.accountList);this.accountList.bind("itemClick",$.proxy(this.itemClickHandler,this));bindFieldToView(this.formDataField);}});Bankingapp.framework.Application.setView(Bankingapp.functions.openaccount.AccountTypeSelection);