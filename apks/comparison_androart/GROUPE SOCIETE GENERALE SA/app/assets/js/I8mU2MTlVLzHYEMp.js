Class.ns("Bankingapp.functions.receivemoney.bringyourmoney");$().loadJavaScript("/js/n97SlZSkkDQ7YX08.js");$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");Bankingapp.functions.receivemoney.bringyourmoney.TargetAccountSelection=Class.extend(Functions.transferfunds.AbstractAccountSelection,{progressIndicatorCurrentStep:0,progressIndicatorStepCount:Functions.transferfunds.TransferUtils.BRINGYOURMONEY_STEPCOUNT_1,pageInstructionsResourceKey:"bankingapp_function_transferfunds_choosetarget",formDataField:"targetAccount",formDataFunctionAttributeId:Functions.transferfunds.TransferUtils.BRINGYOURMONEY_FORMDATA,initDataFunctionAttributeId:Functions.transferfunds.TransferUtils.BRINGYOURMONEY_INITDATA,layoutRender:function(){this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);if((this.formData==undefined)||(this.formData==null)){debugLog("formdata is not defined ...");this.formData={};}else{if(this.formData.progressIndicatorCurrentStep!=undefined&&this.formData.progressIndicatorCurrentStep!=null){this.progressIndicatorCurrentStep=this.formData.progressIndicatorCurrentStep+1;debugLog("new progressIndicatorCurrentStep: "+this.progressIndicatorCurrentStep);this.progressIndicatorStepCount=Functions.transferfunds.TransferUtils.BRINGYOURMONEY_STEPCOUNT_2;}}this.container=$("<div>",{id:this.containerId,"class":"maincontainer bym-targetaccountselector"});this.container.addClass(this.containerClass);if(this.showProgressIndicator){this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));}if(this.showPageInstructions){this.container.append(new Bankingapp.ui.Label(resolve(this.pageInstructionsResourceKey),{"class":"pagetitle separator"}));}this.container.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_accountinfo_title_account"),{baseClass:"listtitle"}));this.initData=getFunctionAttribute(this.initDataFunctionAttributeId);if((this.initData!=undefined)&&(this.initData!=null)){if((this.initData.targetAccounts!=undefined)&&(this.initData.targetAccounts!=null)){this.setAccounts(this.initData.targetAccounts);}}return this.container;},init:function(){Bankingapp.framework.Application.callService("/bringyourmoney/init",null,$.proxy(this.handleInitResponse,this));},accountClickHandler:function(b,a){debugLog("accountClickHandler ...");loadView("view://brd/bankingapp/function/receivemoney/bringyourmoney/transactiondetails");},handleInitResponse:function(a){debugLog("handleInitResponse ...");this.setAccounts(a.targetAccounts);var b=new Object();debugLog("customer name: "+a.customerName);b.customerName=a.customerName;b.firstName=a.firstName;b.lastName=a.lastName;b.currencies=a.currencies;b.frequencies=a.frequencies;b.targetAccounts=a.targetAccounts;b.clientId=a.clientId;b.merchant=a.merchant;b.description=a.description;b.trType=a.trType;b.terminal=a.terminal;b.transactionId=a.transactionId;setFunctionAttribute(this.initDataFunctionAttributeId,b);}});Bankingapp.framework.Application.setView(Bankingapp.functions.receivemoney.bringyourmoney.TargetAccountSelection);