Class.ns("Bankingapp.functions.deposits.create");$().loadJavaScript("/js/m40ljh8jqXEuYFHT.js");Bankingapp.functions.deposits.create.DepositTypeSelection=Class.extend(Bankingapp.framework.View,{container:null,formDataFunctionAttributeId:"DEPOSITCREATE_FORMDATA",depositDataFunctionAttributeId:"DEPOSITTYPE_DATA",progressIndicatorStepCount:8,progressIndicatorCurrentStep:2,formDataField:"depositCode",idProperty:"depositCode",layoutRender:function(){this.container=$("<div>",{id:"depositTypeMainContainer","class":"maincontainer"});this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));this.containerList=$("<div>",{id:"depositTypeListContainer","class":"list maincontainer"});this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.depositTypeInformationLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_type_information_label"),{"class":"pagetitle separator textcenter"});this.depositTypeListLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_type_list_title"),{"class":"listtitle"});this.depositTypeList=new Bankingapp.ui.List({baseClass:"list",listData:[],itemRenderer:Bankingapp.ui.DepositTypeListItem,noresultKey:"bankingapp_brd_function_deposits_create_type_list_empty",idProperty:this.idProperty,activeProperty:true,itemConfig:{depositFriendlyNameField:"depositCodeName",depositInterestTypeField:"depositInterestType"}});this.depositTypeList.bind("itemClick",$.proxy(this.clickHandler,this));this.containerList.append(this.depositTypeInformationLabel);this.containerList.append(this.depositTypeListLabel);this.containerList.append(this.depositTypeList);this.container.append(this.containerList);return this.container;},run:function(){showLoadingPopup();this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.depositProductsRequest={Currency:this.formData.sourceAccount.currency,};Bankingapp.framework.Application.callService("/deposits/getDepositProducts",{GetDepositTypesRequest:this.depositProductsRequest},$.proxy(this.handleListResult,this));},handleListResult:function(a){this.depositTypeList.appendItems(a.depositProduct);var b=this.formData[this.formDataField]?this.formData[this.formDataField]:null;if(b){if(this.depositTypeList.getItem(b)){this.depositTypeList.getItem(b).addClass("state_selected");}}hideLoadingPopup();},clickHandler:function(a,c){var b=c.depositCode;if(b){$.each(this.depositTypeList.itemsMap,function(d,e){e.removeClass("state_selected");});if(this.depositTypeList.getItem(b)){this.depositTypeList.getItem(b).addClass("state_selected");}}$.extend(this.formData,{depositCode:c.depositCode,depositCodeName:c.depositCodeName,depositInterestType:c.depositInterestType["$"]});setFunctionAttribute(this.formDataFunctionAttributeId,this.formData);setFunctionAttribute("DEPOSITTYPE_DATA",c);loadView("view://brd/bankingapp/function/deposits/create/DepositAmount",null);}});Bankingapp.framework.Application.setView(Bankingapp.functions.deposits.create.DepositTypeSelection);