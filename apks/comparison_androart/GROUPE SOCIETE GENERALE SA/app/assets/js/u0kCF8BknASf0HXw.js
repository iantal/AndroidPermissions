Class.ns("Bankingapp.functions.deposits.create");$().loadJavaScript("/js/eIOWz2lcBg85wZ1W.js");Bankingapp.functions.deposits.create.DepositInterestPaymentSelection=Class.extend(Bankingapp.framework.View,{container:null,formDataFunctionAttributeId:"DEPOSITCREATE_FORMDATA",depositDataFunctionAttributeId:"DEPOSITTYPE_DATA",pageWarningTitle:"bankingapp_brd_function_warning",progressIndicatorStepCount:8,progressIndicatorCurrentStep:4,formDataField:"interestPayment",idProperty:"depositInterestPaymentType",layoutRender:function(){this.depositData=getFunctionAttribute(this.depositDataFunctionAttributeId);this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.container=$("<div>",{id:"depositRolloverMainContainer","class":"maincontainer"});this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));this.containerList=$("<div>",{id:"depositInterestPaymentListContainer","class":"list maincontainer"});this.depositInterestPaymentTypeInformationLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_iptype_information_label"),{"class":"pagetitle separator textcenter"});this.depositInterestPaymentTypeListLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_iptype_list_title"),{"class":"listtitle"});this.depositData=getFunctionAttribute(this.depositDataFunctionAttributeId);var a=this.formData.amount;this._depositInterestPaymentList=[];for(var b=0;b<this.depositData.depositAmountIntervalList.length;b++){debugLog("amo"+a);debugLog("min"+this.depositData.depositAmountIntervalList[b].intervalMin);debugLog("max"+this.depositData.depositAmountIntervalList[b].intervalMax);if(this.depositData.depositAmountIntervalList[b].intervalMin<=a&&(!this.depositData.depositAmountIntervalList[b].intervalMax||a<=this.depositData.depositAmountIntervalList[b].intervalMax)){debugLog(1);this._depositInterestPaymentList=this.depositData.depositAmountIntervalList[b].depositInterestPaymentList;break;}}this.listData=[];for(var b=0;b<this._depositInterestPaymentList.length;b++){debugLog(this._depositInterestPaymentList[b]);this.listData.push({depositInterestPaymentType:this._depositInterestPaymentList[b].depositInterestPaymentType["$"]});}debugLog(this.listData);this.depositInterestPaymentTypeList=new Bankingapp.ui.List({baseClass:"list",listData:this.listData,itemRenderer:Bankingapp.ui.DepositInterestPaymentListItem,noresultKey:"emptyListResourceKey",idProperty:this.idProperty,activeProperty:true,itemConfig:{interestPaymentTypeField:"depositInterestPaymentType",}});var e=this.formData[this.formDataField]?this.formData[this.formDataField]:null;if(e){debugLog(this.depositInterestPaymentTypeList.itemsMap);debugLog(this.depositInterestPaymentTypeList.itemsMap[0]);if(this.depositInterestPaymentTypeList.getItem(e)){this.depositInterestPaymentTypeList.getItem(e).addClass("state_selected");}}this.depositInterestPaymentTypeList.bind("itemClick",$.proxy(this.clickHandler,this));this.containerList.append(this.depositInterestPaymentTypeInformationLabel);if(this._depositInterestPaymentList.length==1){var d=[];var c=new Object();c.title=resolve(this.pageWarningTitle);c.details=resolve("bankingapp_brd_function_deposits_create_iptype_explanation_label");d.push(c);this.containerList.append(new Bankingapp.ui.MessageBlock(d,{baseClass:"warningblock"}));}this.containerList.append(this.depositInterestPaymentTypeListLabel);this.containerList.append(this.depositInterestPaymentTypeList);this.container.append(this.containerList);return this.container;},clickHandler:function(b,f){var c=f.depositInterestPaymentType;if(c){$.each(this.depositInterestPaymentTypeList.itemsMap,function(d,e){e.removeClass("state_selected");});if(this.depositInterestPaymentTypeList.getItem(c)){this.depositInterestPaymentTypeList.getItem(c).addClass("state_selected");}}$.extend(this.formData,{interestPayment:c});setFunctionAttribute(this.formDataFunctionAttributeId,this.formData);for(var a=0;a<this._depositInterestPaymentList.length;a++){if(this._depositInterestPaymentList[a].depositInterestPaymentType["$"]==c){setFunctionAttribute("_SELECTED_INTERESTPAYMENT_",this._depositInterestPaymentList[a]);break;}}loadView("view://brd/bankingapp/function/deposits/create/DepositRolloverSelection");}});Bankingapp.framework.Application.setView(Bankingapp.functions.deposits.create.DepositInterestPaymentSelection);