$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");$().loadJavaScript("/js/CF0WiFs1SjIy0Szl.js");Class.ns("Bankingapp.functions.openaccount");Bankingapp.functions.openaccount.Result=Class.extend(Bankingapp.framework.View,{dateFormatPattern:resolve("bankingapp_common_dateFormatPattern_per"),container:null,homeButton:null,formDate:null,ct:null,layoutRender:function(){this.transferType=getFunctionAttribute("TransferType");this.container=$("<div>");this.ct=$("<div>",{"class":"formcontainer result"});this.container.append(this.ct);return this.container;},run:function(){Bankingapp.framework.event.BrdServiceMessageHandler.handleMessages();var f=getFunctionAttribute(Functions.transferfunds.TransferUtils.OPENACCOUNT_SIGN_REPLY);this.formData=getFunctionAttribute(Functions.transferfunds.TransferUtils.OPENACCOUNT_FORMDATA);this.transactionId=f.transactionId;var c=this.formData.valueDate?$().dateParserWithTimezone(this.formData.valueDate):new Date();var a=c.dateFormat(this.dateFormatPattern);var e="";e=resolve("bankingapp_brd_function_finances_openaccount_result_details_"+this.transferType);var b={status:"successful",message:resolve("bankingapp_brd_function_finances_openaccount_result_success"),title:[resolve("bankingapp_brd_function_finances_openaccount_result_bankname"),e],timestamp:f.created,id:f.transactionId,details:[]};if(this.transferType=="D"){b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_accounttype"),value:this.formData.accountType.accountTypeName});b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_currency"),value:this.formData.accountType.currency});}else{b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_accounttype"),value:this.formData.accountTypeName});b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_currency"),value:this.formData.currency});}b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_friendlyname"),value:this.formData.friendlyName});if(this.formData.sourceAccount!=undefined){b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_source_account"),value:this.formData.sourceAccount.accountName+" ("+this.formData.accountType.currency+")"});}if(this.formData.initialAmount!=undefined){b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_initial_amount"),value:this.formData.accountType.currency+" "+this.formData.initialAmount});}if(this.transferType=="D"){b.details.push({label:resolve("bankingapp_brd_function_finances_openaccount_result_interestrate"),value:this.formData.accountType.interestRate+" %"});}this.ct.append(new Bankingapp.ui.DetailsResultComponent({detailsData:b,displayDateFormatKey:"bankingapp_brd_function_transfer_result_createTimeFormat"}));this.downloadProofOfPaymentButton=new Bankingapp.ui.ComplexButton(resolve("bankingapp_brd_function_transactionhistory_downloadpdf"),{id:"downloadButton","class":"downloadProofOfPaymentButton"});this.downloadProofOfPaymentButton.bind("buttonClick",$.proxy(this.downloadPdfClickHandler,this));this.ct.append(this.downloadProofOfPaymentButton);var d=new Bankingapp.ui.ComplexButton(resolve("bankingapp_brd_function_finances_openaccount_back_to_accountlist"),{});this.ct.append(d);d.bind("buttonClick",$.proxy(this.backToPaymentsHandler,this));Bankingapp.framework.event.ButtonHandler.setButtonHandler("BACK",$.proxy(this.backBtnHandler,this));this.clearFunctionScope();},clearFunctionScope:function(){var a=getFunctionAttributeNames();if(a){for(var b=0;b<a.length;b++){removeFunctionAttribute(a[b]);}}},backToPaymentsHandler:function(){this.goToPaymentsLandingPage();},backBtnHandler:function(a){this.goToPaymentsLandingPage();},goToPaymentsLandingPage:function(){goToPreviousView("view://brd/bankingapp/function/finances/finances");},downloadPdfClickHandler:function(a,b){console.log("downloadPdfClickHandler ...");if(this.transactionId){Functions.transferfunds.TransferUtils.getDocumentDownloadKey(this.transactionId);}else{console.log("The authentication reply is not available");showError(resolve("bankingapp_brd_function_payments_download_proofofpayments_failure"));}}});Bankingapp.framework.Application.setView(Bankingapp.functions.openaccount.Result);