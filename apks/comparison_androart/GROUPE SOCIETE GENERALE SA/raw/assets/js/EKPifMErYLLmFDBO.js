Class.ns("Bankingapp.functions.deposits.create");$().loadJavaScript("/js/ZJCxVR3I5IqpC6QQ.js");$().loadJavaScript("/js/82F09eW7OW4IuVAu.js");Bankingapp.functions.deposits.create.AbstractAccountSelection=Class.extend(Bankingapp.framework.View,{container:null,containerId:"accountSelectionContainer",containerClass:"accountSelection",showProgressIndicator:true,progressIndicatorStepCount:5,progressIndicatorCurrentStep:0,showPageInstructions:true,pageInstructionsResourceKey:null,accountList:null,formDataField:null,formDataFunctionAttributeId:null,formData:null,listData:[],accountItemIdField:"accountNumber",emptyListResourceKey:"bankingapp_function_transferfunds_no_enabled_account",layoutRender:function(){this.container=$("<div>",{id:this.containerId,"class":"maincontainer"});this.container.addClass(this.containerClass);if(this.showProgressIndicator){this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));}if(this.showPageInstructions){this.container.append(new Bankingapp.ui.Label(resolve(this.pageInstructionsResourceKey),{"class":"pagetitle separator textcenter"}));}return this.container;},run:function(){Bankingapp.framework.Application.unBind("onErrorMessageReceived");$("body").bind("onErrorMessageReceived",$.proxy(this.errorMessageHandler,this));this.getAccounts();},getAccounts:function(){},setAccounts:function(a){this.listData=a;this.renderAccountList();},itemClickHandler:function(b,a){var c=this.accountList.getItem(a[this.accountItemIdField]);if(c){$.each(this.accountList.itemsMap,function(e,f){f.removeClass("state_selected");});c.removeClass("state_default");c.addClass("state_selected");}var d={};d[this.formDataField]=a;$.extend(this.formData,d);setFunctionAttribute(this.formDataFunctionAttributeId,this.formData);this.accountClickHandler(b,a);},accountClickHandler:function(b,a){},renderAccountList:function(){this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);if((this.formData==undefined)||(this.formData==null)){this.formData={};}if(this.accountList){this.accountList.remove();}this.accountList=new Bankingapp.functions.accountinfo.AccountList({idProperty:this.accountItemIdField,listData:this.listData,itemConfig:{nameField:"accountName",typeField:"accountType",currencyField:"currency",balanceField:"availableBalance",baseClass:"accountListItem"}});var a=this.formData[this.formDataField]?this.formData[this.formDataField]:null;if(a){if(this.accountList.getItem(a[this.accountItemIdField])){this.accountList.getItem(a[this.accountItemIdField]).addClass("state_selected");}}if(this.accountListLabel){this.accountListLabel.remove();}this.accountListLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_account_list_title"),{"class":"listtitle"});this.container.append(this.accountListLabel);this.container.append(this.accountList);this.accountList.bind("itemClick",$.proxy(this.itemClickHandler,this));bindFieldToView(this.formDataField);},clear:function(){removeFunctionAttribute(this.formDataField);},errorMessageHandler:function(b,a){Bankingapp.framework.event.ServiceMessageHandler.errorMessageHandler(b,a);this.renderAccountList();}});