$().loadJavaScript("/js/n97SlZSkkDQ7YX08.js");$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");Class.ns("Functions.transferfunds.domestictransfer");Functions.transferfunds.domestictransfer.SourceAccountSelection=Class.extend(Functions.transferfunds.AbstractAccountSelection,{progressIndicatorStepCount:5,progressIndicatorCurrentStep:1,pageInstructionsResourceKey:"bankingapp_function_transferfunds_choosesource",nextView:"view://brd/bankingapp/function/transferfunds/domestictransfer/partnerselection",formDataField:"sourceAccount",formDataFunctionAttributeId:Functions.transferfunds.TransferUtils.DOMESTICTRANSFER_FORMDATA,init:function(){console.log("  >>>>>>   update draftdomestictransfer function attribute ...");setFunctionAttribute("draftdomestictransfer",getSessionAttribute("draftdomestictransfer"));setSessionAttribute("draftdomestictransfer",null);console.log("  >>>>>>   draftdomestictransfer removed ...");var b=getFunctionAttribute("draftdomestictransfer");if(b){console.log("SourceAccountSelection init - draftDomesticTransferData");var a={InitRequest:{TransactionId:b.id.toString(),TargetAccountCurrency:b.transactionData.transactionRequest.currency}};Bankingapp.framework.Application.callService("/domestictransfer/initDraft",a,$.proxy(this.handleInitResponse,this));}else{console.log("SourceAccountSelection init - no draftDomesticTransferData");Bankingapp.framework.Application.callService("/domestictransfer/init",null,$.proxy(this.handleInitResponse,this));}},accountClickHandler:function(b,a){loadView(this.nextView,null);},handleInitResponse:function(b){var a=new Object();a.cUI_CNP=b.cUI_CNP;this.setAccounts(b.sourceAccounts);setFunctionAttribute(Functions.transferfunds.TransferUtils.PAYMENT_VALUEDATE_MAXDAYS,b.maxPaymentDate);setFunctionAttribute(Functions.transferfunds.TransferUtils.DOMESTICTRANSFER_INITDATA,a);var c=getFunctionAttribute("draftdomestictransfer");if(c){this.formData.amount=c.transactionData.transactionRequest.amount;this.formData.currency=c.transactionData.transactionRequest.targetAccountCurrency;this.formData.targetAccountCurrency=c.transactionData.transactionRequest.currency;this.formData.beneficiaryName=c.transactionData.transactionRequest.beneficiaryName;this.formData.beneficiaryAddress=c.transactionData.transactionRequest.beneficiaryAddress;this.formData.targetAccount=c.transactionData.transactionRequest.targetAccount;this.formData.targetAccountCurrency=c.transactionData.transactionRequest.targetAccountCurrency;this.formData.requestMoneyTransactionId=c.transactionData.transactionRequest.requestMoneyTransactionId;this.formData.splitBillTransactionId=c.transactionData.transactionRequest.splitBillTransactionId;this.formData.domesticTransactionId=c.id;this.formData.parentDescription=c.transactionData.transactionRequest.parentDescription;this.nextView="view://brd/bankingapp/function/transferfunds/domestictransfer/partnerdetails";}}});Bankingapp.framework.Application.setView(Functions.transferfunds.domestictransfer.SourceAccountSelection);