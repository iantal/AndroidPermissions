Class.ns("Bankingapp.functions.deposits.create");$().loadJavaScript("/js/cuaNaWgFOEcsiucM.js");Bankingapp.functions.deposits.create.DepositRolloverSelection=Class.extend(Bankingapp.framework.View,{container:null,formDataFunctionAttributeId:"DEPOSITCREATE_FORMDATA",depositDataFunctionAttributeId:"DEPOSITTYPE_DATA",pageWarningTitle:"bankingapp_brd_function_warning",progressIndicatorStepCount:8,progressIndicatorCurrentStep:5,formDataField:"depositRolloverType",idProperty:"depositRolloverType",layoutRender:function(){this.depositData=getFunctionAttribute(this.depositDataFunctionAttributeId);this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.container=$("<div>",{id:"depositRolloverMainContainer","class":"maincontainer"});this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));this.containerList=$("<div>",{id:"depositRolloverListContainer","class":"list maincontainer"});this.depositRolloverTypeInformationLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_rollovertype_information_label"),{"class":"pagetitle separator textcenter"});this.depositRolloverTypeListLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_deposits_create_rollovertype_list_title"),{"class":"listtitle"});this.depositData=getFunctionAttribute(this.depositDataFunctionAttributeId);this.selectedInterestPayment=getFunctionAttribute("_SELECTED_INTERESTPAYMENT_");this.listData=[];for(var a=0;a<this.selectedInterestPayment.depositRolloverList.length;a++){this.listData.push({depositRolloverType:this.selectedInterestPayment.depositRolloverList[a].depositRolloverType["$"]});}console.log(this.listData);this.depositRolloverTypeList=new Bankingapp.ui.List({baseClass:"list",listData:this.listData,itemRenderer:Bankingapp.ui.DepositRolloverListItem,idProperty:this.idProperty,noresultKey:"emptyListResourceKey",activeProperty:true,itemConfig:{depositRolloverTypeField:"depositRolloverType",}});this.depositRolloverTypeList.bind("itemClick",$.proxy(this.clickHandler,this));var d=this.formData[this.formDataField]?this.formData[this.formDataField]:null;if(d){if(this.depositRolloverTypeList.getItem(d)){this.depositRolloverTypeList.getItem(d).addClass("state_selected");}}this.containerList.append(this.depositRolloverTypeInformationLabel);if(this.selectedInterestPayment.depositRolloverList.length==1){var c=[];var b=new Object();b.title=resolve(this.pageWarningTitle);b.details=resolve("bankingapp_brd_function_deposits_create_rollovertype_explanation_label");c.push(b);this.containerList.append(new Bankingapp.ui.MessageBlock(c,{baseClass:"warningblock"}));}this.containerList.append(this.depositRolloverTypeListLabel);this.containerList.append(this.depositRolloverTypeList);this.container.append(this.containerList);return this.container;},clickHandler:function(b,f){var c=f.depositRolloverType;if(c){$.each(this.depositRolloverTypeList.itemsMap,function(d,e){e.removeClass("state_selected");});if(this.depositRolloverTypeList.getItem(c)){this.depositRolloverTypeList.getItem(c).addClass("state_selected");}}$.extend(this.formData,{depositRolloverType:c});for(var a=0;a<this.selectedInterestPayment.depositRolloverList.length;a++){if(this.selectedInterestPayment.depositRolloverList[a].depositRolloverType["$"]==c){setFunctionAttribute("_SELECTED_ROLLOVERTYPE_",this.selectedInterestPayment.depositRolloverList[a]);break;}}setFunctionAttribute(this.formDataFunctionAttributeId,this.formData);loadView("view://brd/bankingapp/function/deposits/create/DepositTimePeriodSelection");}});Bankingapp.framework.Application.setView(Bankingapp.functions.deposits.create.DepositRolloverSelection);