Class.ns("Bankingapp.functions.contacts");Bankingapp.functions.contacts.Contacts=Class.extend(Bankingapp.framework.View,{container:null,phoneContactListContainer:null,phoneContactList:null,emailContactListContainer:null,emailContactList:null,otherContactContainer:null,twitterButton:null,facebookButton:null,indButton:null,layoutRender:function(){this.container=$("<div>").attr("id","contactsMainContainer");return this.container;},run:function(){this.contactsViewAuth=this.isAuthorized();if(this.contactsViewAuth===false){console.log("authority check [contacts/view] failed");}else{var a=getFunctionAttribute("CONTACTS_INFO");if(a==null){Bankingapp.framework.Application.callService("/contacts/contactList",{GetContactListRequest:{}},$.proxy(this.handleResult,this));}else{this.handleResult(a);}}},isAuthorized:function(){return true;},handleResult:function(a){setFunctionAttribute("CONTACTS_INFO",a);this.phoneContactListContainer=$("<div>",{id:"phoneContactListMainContainer"});this.phoneContactListContainer.append(new Bankingapp.ui.Label(resolve("bankingapp_brd_function_contacts_phonecontact_title"),{"class":"listtitle"}));var b=[{contactName:a.phoneNumberList.contactList.contactItem[0].contactTitle,contactPhone:a.phoneNumberList.contactList.contactItem[0].contactValue}];this.phoneContactList1=new Bankingapp.ui.ContactList(b,{itemConfig:{baseClass:"phoneContactListItem"},"class":"titledlist"});this.phoneContactListContainer.append(this.phoneContactList1);b=[{contactName:a.phoneNumberList.contactList.contactItem[1].contactTitle,contactPhone:a.phoneNumberList.contactList.contactItem[1].contactValue}];this.phoneContactList2=new Bankingapp.ui.ContactList(b,{itemConfig:{baseClass:"phoneContactListItem"},"class":"titledlist"});this.phoneContactListContainer.append(this.phoneContactList2);b=[{contactName:a.phoneNumberList.contactList.contactItem[2].contactTitle,contactPhone:a.phoneNumberList.contactList.contactItem[2].contactValue}];this.phoneContactList3=new Bankingapp.ui.ContactList(b,{itemConfig:{baseClass:"phoneContactListItem"},"class":"titledlist"});this.phoneContactListContainer.append(this.phoneContactList3);this.phoneContactList1.bind("itemClick",$.proxy(this.itemClickHandlerPhone,this));this.phoneContactList2.bind("itemClick",$.proxy(this.itemClickHandlerPhone,this));this.phoneContactList3.bind("itemClick",$.proxy(this.itemClickHandlerPhone,this));this.container.append(this.phoneContactListContainer);this.emailContactListContainer=$("<div>").attr("id","emailContactListMainContainer");this.emailContactListContainer.append(new Bankingapp.ui.Label(resolve("bankingapp_brd_function_contacts_emailcontact_title"),{"class":"listtitle"}));b=[{contactName:a.emailAddressList.contactList.contactItem[0].contactTitle,contactEmail:a.emailAddressList.contactList.contactItem[0].contactValue}];this.emailContactList=new Bankingapp.ui.ContactList(b,{itemConfig:{baseClass:"emailContactListItem"},"class":"titledlist"});this.emailContactListContainer.append(this.emailContactList);this.container.append(this.emailContactListContainer);this.emailContactList.bind("itemClick",$.proxy(this.itemClickHandlerEMail,this));this.webContactListContainer=$("<div>").attr("id","otherContactListMainContainer");this.webContactListContainer.append(new Bankingapp.ui.Label(resolve("bankingapp_brd_function_contacts_webcontact_title"),{"class":"listtitle"}));b=[{contactName:a.webURLList.contactList.contactItem[0].contactTitle,contactPage:a.webURLList.contactList.contactItem[0].contactValue,contactClass:"websiteContactListItem"}];this.webContactListWebSite=new Bankingapp.ui.ContactList(b,{"class":"titledlist"});this.webContactListContainer.append(this.webContactListWebSite);b=[{contactName:a.webURLList.contactList.contactItem[1].contactTitle,contactPage:a.webURLList.contactList.contactItem[1].contactValue,contactClass:"facebookContactListItem"}];this.webContactListFacebook=new Bankingapp.ui.ContactList(b,{"class":"titledlist"});this.webContactListContainer.append(this.webContactListFacebook);this.webContactListWebSite.bind("itemClick",$.proxy(this.itemClickHandlerWeb,this));this.webContactListFacebook.bind("itemClick",$.proxy(this.itemClickHandlerWeb,this));this.container.append(this.webContactListContainer);},itemClickHandlerWeb:function(b,a){console.log("WebItemClickHandler.aData: "+JSON.stringify(a));openBrowser(a.contactPage);return false;},itemClickHandlerEMail:function(b,a){sendEMail(a.contactEmail,"","");return false;},itemClickHandlerPhone:function(b,a){callPhoneNumber(a.contactPhone);return false;}});Bankingapp.framework.Application.setView(Bankingapp.functions.contacts.Contacts);