$().loadJavaScript("/js/yjuDMlY6mIjPXsqj.js");$().loadJavaScript("/js/8vEnLjs4AoxGthNc.js");Class.ns("Bankingapp.functions.bankfeed");Bankingapp.functions.bankfeed.MarkAsUnread=Class.extend(Bankingapp.functions.bankfeed.BankFeedBase,{container:null,bankFeedList:null,bankFeedListContainer:null,form:null,layoutRender:function(){this.container=$("<div>",{id:"markAsUnreadListMainContainer","class":"maincontainer"});var b=getFunctionAttribute("READ_FEED_LIST");this.bankFeedListContainer=$("<div>");this.container.append(this.bankFeedListContainer);this.bankFeedList=new Bankingapp.functions.bankfeed.MarkAsUnreadList(b,{id:"messageId",dateField:"createTs",dataDateFormat:resolve("bankingapp_common_parsedatepattern_withouttimezone"),displayDateFormat:resolve("bankingapp_common_dateFormatPattern"),dataOrder:"desc"});this.bankFeedListContainer.append(this.bankFeedList);this.bankFeedList.bind("itemClick",$.proxy(this.itemClickHandler,this));this.form=new Bankingapp.ui.Form({id:"markasunreadform",submitHandler:$.proxy(this.submitHandler,this)});this.container.append(this.form);var a=new Bankingapp.ui.SubmitButton(resolve("bankingapp_function_bankfeed_markasunread"),null);this.form.append(a);return this.container;},submitHandler:function(){getCacheItem(this.getBankFeedCacheItemId(),Bankingapp.framework.Application.proxy(this.cachedMarkAsUnRead,this,true));},handleMarkAsUnreadResult:function(a){goToHomeView();},itemClickHandler:function(d,c){var a=c.messageId;var e=this.bankFeedList.itemsArray;for(var b=0;b<e.length;b++){if(e[b].itemData.messageId==a){e[b].toggleSelection();break;}}},cachedMarkAsUnRead:function(a){var e=null;if(a!=null){e=a.data;}else{e=getFunctionAttribute("BANK_FEED_LIST");}var d=this.bankFeedList.getSelectedItems();if((e!=null)&&(d.length>0)){var c=[];for(var b=0;b<d.length;b++){c.push(d[b]["messageId"]);}for(var b=0;b<e.length;b++){if($.inArray(e[b]["messageId"],c)!=-1){e[b]["status"]={"@name":"UNREAD","$":"U"};}}if(a!=null){a.data=e;setCacheItem(this.getBankFeedCacheItemId(),a);}setFunctionAttribute("BANK_FEED_LIST",e);if(isLoggedIn().valueOf()){Bankingapp.framework.Application.callService("/feed/markAsUnreadMessages",{MarkAsReadRequest:{MessageId:c}},$.proxy(this.handleMarkAsUnreadResult,this));}else{goToHomeView();}}}});Bankingapp.framework.Application.setView(Bankingapp.functions.bankfeed.MarkAsUnread);