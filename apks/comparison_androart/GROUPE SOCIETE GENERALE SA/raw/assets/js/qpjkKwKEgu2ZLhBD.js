$().loadJavaScript("/js/CF0WiFs1SjIy0Szl.js");Class.ns("Bankingapp.ui");Bankingapp.ui.HistoricalRateBase=Class.extend(Bankingapp.ui.DetailsComponent,{baseClass:"historicalRateBase",displayDateFormat:"d/m/Y",displayTimeFormat:"d/m/Y h:i:s",separator:" - ",imageDataField:"image",imageTypeField:"imageType",currencyField:"currency",currencyNameField:"name",unitField:"unit",minorUnitsField:"minorUnits",fixingTimestampField:"fixingTimestamp",latestRateInformation:null,currencyInformation:null,initComponent:function(){var r=$("<div>",{"class":"historicalRateBaseContainer"});this.append(r);var u=$("<div>",{"class":"mainDetailContainer"});r.append(u);var t=$("<div>",{"class":"groupDetailContainer"});r.append(t);var i=$("<div>",{"class":"groupContainer"});var f=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(u);var v=$("<div>",{"class":this.baseClass+"-inner"});f.append(v);var j=$("<div>",{"class":this.baseClass+"-cell"});var m=$("<div>",{"class":this.baseClass+"-cell "+this.baseClass+"-text"});v.append(j);v.append(m);debugLog(this.latestRateInformation);debugLog(this.currencyInformation);var b=$().dateParserWithoutTime(this.getValue(this.fixingTimestampField,this.latestRateInformation[0]));b.dateFormat(this.displayDateFormat);var g=b.dateFormat(this.displayTimeFormat);this.rateInformationLabelText=resolve("bankingapp_brd_function_fxrate_historicalrates_dateinformation",{date:g});this.rateInformationLabel=new Bankingapp.ui.Label(this.rateInformationLabelText,{"class":"pagetitle separator textcenter"});u.append(this.rateInformationLabel);var q=this.currencyInformation[this.imageDataField];var a=this.currencyInformation[this.imageTypeField];var e=this.currencyInformation[this.currencyField];var l=this.getValue(this.unitField,this.latestRateInformation[0]);var d=this.currencyInformation[this.currencyNameField];var p=this.currencyInformation[this.minorUnitsField];var n=$("<img>").attr({src:"data:image/"+a+";base64,"+$.encoder.encodeForURL(q)});j.append(n);$('<div class="fxcurrency">'+$.encoder.encodeForHTML(l)+" "+$.encoder.encodeForHTML(e)+"</div>").appendTo(m);if(d){m.append(new Bankingapp.ui.Label(d,{"class":"fxcurrencyname"}));}var o=new Bankingapp.functions.util.component.Amount({"class":"fxsell",amount:this.getRateValue("FIXINGS","MIDDLE"),decimals:p});var c=new Bankingapp.functions.util.component.Amount({"class":"fxsell",amount:this.getRateValue("DEFAULT","BUY"),decimals:p});var s=new Bankingapp.functions.util.component.Amount({"class":"fxsell",amount:this.getRateValue("DEFAULT","SELL"),decimals:p});var k=new Bankingapp.functions.util.component.Amount({"class":"fxsell",amount:this.getRateValue("CHEQUES","BUY"),decimals:p});var h=new Bankingapp.functions.util.component.Amount({"class":"fxsell",amount:this.getRateValue("CHEQUES","SELL"),decimals:p});i.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("bankingapp_brd_function_fxrate_historicalrates_fixingsmiddlerate"),"class":"inactive"},valueComponent:o,valueConfig:{"class":""}}));i.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("bankingapp_brd_function_fxrate_historicalrates_notesbuyrate"),"class":"inactive"},valueComponent:c,valueConfig:{"class":""}}));i.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("bankingapp_brd_function_fxrate_historicalrates_notessellrate"),"class":"inactive"},valueComponent:s,valueConfig:{"class":""}}));i.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("bankingapp_brd_function_fxrate_historicalrates_chequesbuyrate"),"class":"inactive"},valueComponent:k,valueConfig:{"class":""}}));i.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("bankingapp_brd_function_fxrate_historicalrates_chequessellrate"),"class":"inactive"},valueComponent:h,valueConfig:{"class":""}}));t.append(i);},getValue:function(b,c){debugLog(c);b=$.isArray(b)?b:[b];for(var a in b){c=c[b[a]];if(!c){return null;}}return c;},getRateValue:function(b,f){for(var a=0;a<this.latestRateInformation.length;a++){var e=this.latestRateInformation[a];var d=e.rateSubType["@name"];var c=e.rateType["@name"];if(c==b&&d==f){return e.value;}}}});