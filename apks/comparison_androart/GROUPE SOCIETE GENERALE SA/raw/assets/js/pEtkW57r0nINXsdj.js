$().loadJavaScript("/js/gky1ne4Ky6SW7hv8.js");Class.ns("Bankingapp.functions.interestrate");Bankingapp.functions.interestrate.InterestRates=Class.extend(Bankingapp.framework.View,{container:null,layoutRender:function(){this.interestRateAuth=this.isAuthorized();this.container=$("<div>",{id:"interestRateMainContainer","class":"interestRateMainContainer"});return this.container;},run:function(){if(this.interestRateAuth===true){console.log("auth ok");Bankingapp.framework.Application.callService("/interestrate/getInterestRateTypes",{GetInterestRateTypesRequest:{}},$.proxy(this.handleListResult,this));}},handleListResult:function(a){console.log("resu",a);this.containerInterestRateTypeList=$("<div>",{id:"interestRateTypeListContainer","class":"list maincontainer"});this.interestRateTypeListLabelEURIBOR=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_interestrate_euribor_title"),{"class":"listtitle"});this.interestRateTypeListEURIBOR=new Bankingapp.ui.List({baseClass:"list",listData:[],itemRenderer:Bankingapp.ui.InterestRateItem,noresultKey:"bankingapp_brd_function_interestrate_interest_rate",activeProperty:true,itemConfig:{baseClass:"accountListItem",interestCategoryField:"interestCategory",interestTypeField:"interestType",interestRateField:"interestRate"}});this.containerInterestRateTypeList.append(this.interestRateTypeListLabelEURIBOR);this.containerInterestRateTypeList.append(this.interestRateTypeListEURIBOR);this.interestRateTypeListEURIBOR.bind("itemClick",$.proxy(this.clickHandler,this));this.interestRateTypeListLabelROBOR=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_interestrate_robor_title"),{"class":"listtitle"});this.interestRateTypeListROBOR=new Bankingapp.ui.List({baseClass:"list",listData:[],itemRenderer:Bankingapp.ui.InterestRateItem,noresultKey:"bankingapp_brd_function_interestrate_interest_rate",activeProperty:true,itemConfig:{baseClass:"accountListItem",interestCategoryField:"interestCategory",interestTypeField:"interestType",interestRateField:"interestRate"}});this.containerInterestRateTypeList.append(this.interestRateTypeListLabelROBOR);this.containerInterestRateTypeList.append(this.interestRateTypeListROBOR);this.interestRateTypeListROBOR.bind("itemClick",$.proxy(this.clickHandler,this));this.interestRateTypeListLabelLIBOR=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_interestrate_libor_title"),{"class":"listtitle"});this.interestRateTypeListLIBOR=new Bankingapp.ui.List({baseClass:"list",listData:[],itemRenderer:Bankingapp.ui.InterestRateItem,noresultKey:"bankingapp_brd_function_interestrate_interest_rate",activeProperty:true,itemConfig:{baseClass:"accountListItem",interestCategoryField:"interestCategory",interestTypeField:"interestType",interestRateField:"interestRate"}});this.containerInterestRateTypeList.append(this.interestRateTypeListLabelLIBOR);this.containerInterestRateTypeList.append(this.interestRateTypeListLIBOR);this.interestRateTypeListLIBOR.bind("itemClick",$.proxy(this.clickHandler,this));this.refreshInterestRateLists(a.interestRateList.interestRateItem);},clickHandler:function(b,a){setFunctionAttribute("rateItem",a);loadView("view://brd/bankingapp/function/interestrate/historicalinterestrate",{rateItem:a});},refreshInterestRateLists:function(d){this.interestRateTypeListEURIBOR.empty();this.interestRateTypeListROBOR.empty();this.interestRateTypeListLIBOR.empty();var a=[];var e=[];var b=[];for(var c in d){if(d[c].interestCategory=="EURIBOR"){a.push(d[c]);}if(d[c].interestCategory=="ROBOR"){e.push(d[c]);}if(d[c].interestCategory=="LIBOR"){b.push(d[c]);}}this.interestRateTypeListEURIBOR.appendItems(a);this.interestRateTypeListROBOR.appendItems(e);this.interestRateTypeListLIBOR.appendItems(b);this.container.append(this.containerInterestRateTypeList);},isAuthorized:function(){return true;}});Bankingapp.framework.Application.setView(Bankingapp.functions.interestrate.InterestRates);