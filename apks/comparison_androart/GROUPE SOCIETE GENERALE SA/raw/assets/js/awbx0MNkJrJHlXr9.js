$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");Class.ns("Bankingapp.functions.transferfunds.qrpayment");$().loadJavaScript("/js/rPGnfc8vunoDnryR.js");Bankingapp.functions.transferfunds.qrpayment.SourceAccountSelection=Class.extend(Bankingapp.functions.transferfunds.qrpayment.AbstractAccountSelection,{showProgressIndicator:true,progressIndicatorStepCount:Functions.transferfunds.TransferUtils.QRTRANSFER_STEPCOUNT,progressIndicatorCurrentStep:2,pageInstructionsResourceKey:"bankingapp_brd_function_qrpayment_sourceaccountselection_title",emptyListResourceKey:"bankingapp_brd_function_qrpayment_sourceaccountselection_emptylist",accountListTitleResource:"bankingapp_brd_function_qrpayment_sourceaccountselection_accountlist_title",formData:null,getAccounts:function(){debugLog(getFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORMDATA));Bankingapp.framework.Application.callService("/qrtransfer/init",null,$.proxy(this.handleInitResponse,this));},handleInitResponse:function(a){setFunctionAttribute("QRPAYMENT_INITRESPONSE",a);this.setAccounts(a.sourceAccounts);},renderAccountList:function(){this.accountList=new Bankingapp.ui.List({baseClass:"list",idProperty:this.accountItemIdField,listData:this.listData,itemRenderer:Functions.transferfunds.AccountListItem,noresultKey:this.emptyListResourceKey,itemConfig:{nameField:"accountName",typeField:"accountType",currencyField:"currency",balanceField:"availableBalance",baseClass:"accountListItem"}});this.container.append(this.accountList);this.accountList.bind("itemClick",$.proxy(this.itemClickHandler,this));},itemClickHandler:function(b,a){var c=this.accountList.getItem(a.accountNumber);if(c){$.each(this.accountList.itemsMap,function(d,e){e.removeClass("state_selected");});c.removeClass("state_default");c.addClass("state_selected");}this.accountClickHandler(b,a);},accountClickHandler:function(b,a){debugLog(a);this.formData=getFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORMDATA);setFunctionAttribute("QRPAYMENT_SOURCEACCOUNT",a);this.formData.forecastRequest["sourceAccount"]=a.accountNumber;setFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORMDATA,this.formData);setFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORECAST_REQUEST,this.formData.forecastRequest);debugLog("this.formData");debugLog(this.formData);loadView("view://brd/bankingapp/function/transferfunds/qrpayment/transferdetails",null);}});Bankingapp.framework.Application.setView(Bankingapp.functions.transferfunds.qrpayment.SourceAccountSelection);