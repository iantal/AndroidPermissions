package com.umeng.common.net;

import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.Messenger;

public class a
{
  private static final String b = a.class.getName();
  final Messenger a = new Messenger(new b());
  private Context c;
  private e d;
  private Messenger e;
  private String f;
  private String g;
  private String h;
  private ServiceConnection i = new b(this);
  
  public a(Context paramContext, String paramString1, String paramString2, String paramString3, e paramE)
  {
    this.c = paramContext;
    this.f = paramString1;
    this.g = paramString2;
    this.h = paramString3;
    this.d = paramE;
  }
  
  public void a()
  {
    this.c.bindService(new Intent(this.c, DownloadingService.class), this.i, 1);
  }
  
  static class a
  {
    public String a;
    public String b;
    public String c;
    
    public a(String paramString1, String paramString2, String paramString3)
    {
      this.a = paramString1;
      this.b = paramString2;
      this.c = paramString3;
    }
    
    public static a a(Bundle paramBundle)
    {
      return new a(paramBundle.getString("mComponentName"), paramBundle.getString("mTitle"), paramBundle.getString("mUrl"));
    }
    
    public Bundle a()
    {
      Bundle localBundle = new Bundle();
      localBundle.putString("mComponentName", this.a);
      localBundle.putString("mTitle", this.b);
      localBundle.putString("mUrl", this.c);
      return localBundle;
    }
  }
  
  class b
    extends Handler
  {
    b() {}
    
    public void handleMessage(Message paramMessage)
    {
      for (;;)
      {
        try
        {
          switch (paramMessage.what)
          {
          case 4: 
            super.handleMessage(paramMessage);
            return;
          }
        }
        catch (Exception localException)
        {
          localException.printStackTrace();
          a.b();
          new StringBuilder("DownloadAgent.handleMessage(").append(paramMessage.what).append("): ").append(localException.getMessage()).toString();
          return;
        }
        if (a.a(a.this) == null) {
          break;
        }
        a.a(a.this).a(paramMessage.arg1);
        return;
        a.f(a.this).unbindService(a.g(a.this));
        if (a.a(a.this) == null) {
          break;
        }
        if (paramMessage.arg1 == 1)
        {
          a.a(a.this).a(paramMessage.arg1, paramMessage.getData().getString("filename"));
          return;
        }
        a.a(a.this).a(0, null);
        return;
      }
    }
  }
}
