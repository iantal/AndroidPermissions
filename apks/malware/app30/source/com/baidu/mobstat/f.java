package com.baidu.mobstat;

import android.content.Context;
import android.content.pm.PackageManager;
import android.graphics.Point;
import android.location.Location;
import android.location.LocationManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Build;
import android.os.Build.VERSION;
import android.telephony.TelephonyManager;
import android.util.DisplayMetrics;
import android.view.Display;
import android.view.WindowManager;
import com.baidu.kirin.objects.LatitudeAndLongitude;
import com.baidu.kirin.objects.NetworkStatus;
import java.io.PrintStream;
import java.lang.reflect.Method;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Iterator;
import java.util.List;

public class f
{
  public static String a()
  {
    Date localDate = new Date();
    return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(localDate);
  }
  
  public static String a(Context paramContext)
  {
    return CooperService.getAppChannel(paramContext);
  }
  
  public static String a(Context paramContext, boolean paramBoolean)
  {
    LatitudeAndLongitude localLatitudeAndLongitude = new LatitudeAndLongitude();
    if (paramBoolean)
    {
      paramContext = (LocationManager)paramContext.getSystemService("location");
      Iterator localIterator = paramContext.getAllProviders().iterator();
      while (localIterator.hasNext())
      {
        Object localObject = (String)localIterator.next();
        System.out.println((String)localObject);
        localObject = paramContext.getLastKnownLocation((String)localObject);
        if (localObject != null)
        {
          localLatitudeAndLongitude.latitude = (((Location)localObject).getLatitude() + "");
          localLatitudeAndLongitude.longitude = (((Location)localObject).getLongitude() + "");
        }
        else
        {
          localLatitudeAndLongitude.latitude = "";
          localLatitudeAndLongitude.longitude = "";
        }
      }
    }
    localLatitudeAndLongitude.latitude = "";
    localLatitudeAndLongitude.longitude = "";
    return localLatitudeAndLongitude.latitude + "," + localLatitudeAndLongitude.longitude;
  }
  
  public static boolean a(Context paramContext, String paramString)
  {
    return paramContext.getPackageManager().checkPermission(paramString, paramContext.getPackageName()) == 0;
  }
  
  public static String b(Context paramContext)
  {
    return CooperService.getAppKey(paramContext);
  }
  
  public static String c(Context paramContext)
  {
    return CooperService.getAppVersionName(paramContext);
  }
  
  public static int d(Context paramContext)
  {
    return CooperService.getAppVersionCode(paramContext);
  }
  
  public static String e(Context paramContext)
  {
    if (o(paramContext))
    {
      paramContext = Build.VERSION.RELEASE;
      m.a().a(new Object[] { "android_osVersion : " + paramContext });
      return paramContext;
    }
    m.a().b("android OsVerson get failed");
    return "";
  }
  
  public static String f(Context paramContext)
  {
    return "Android" + CooperService.getOSVersion();
  }
  
  public static String g(Context paramContext)
  {
    if (o(paramContext))
    {
      paramContext = Build.MANUFACTURER;
      m.a().a(new Object[] { "manufacturer_info : " + paramContext });
      return paramContext;
    }
    m.a().b("android manufacturer get failed!");
    return "";
  }
  
  public static String h(Context paramContext)
  {
    return CooperService.getDeviceId((TelephonyManager)paramContext.getSystemService("phone"), paramContext);
  }
  
  public static String i(Context paramContext)
  {
    String str = "";
    Object localObject = str;
    try
    {
      if (ar.e(paramContext, "android.permission.ACCESS_WIFI_STATE"))
      {
        localObject = str;
        paramContext = ((WifiManager)paramContext.getSystemService("wifi")).getConnectionInfo().getMacAddress();
        localObject = paramContext;
        return CooperService.getSecretValue(paramContext);
      }
      localObject = str;
      m.a().b("You need the android.Manifest.permission.ACCESS_WIFI_STATE permission. Open AndroidManifest.xml and just before the final </manifest> tag add:android.permission.ACCESS_WIFI_STATE");
      return "";
    }
    catch (Exception paramContext) {}
    return localObject;
  }
  
  public static String j(Context paramContext)
  {
    if (a(paramContext, "android.permission.READ_PHONE_STATE"))
    {
      String str = "";
      if (o(paramContext))
      {
        paramContext = (TelephonyManager)paramContext.getSystemService("phone");
        str = paramContext.getPhoneType() + "";
      }
      if (str.length() != 0)
      {
        m.a().a(new Object[] { "phoneType : " + str });
        return str;
      }
      m.a().a("phoneType get nothing");
      return "";
    }
    m.a().b("lost permissioin : android.permission.READ_PHONE_STATE");
    return "";
  }
  
  public static String k(Context paramContext)
  {
    return CooperService.getCUID(paramContext, true);
  }
  
  public static String l(Context paramContext)
  {
    if (a(paramContext, "android.permission.READ_PHONE_STATE"))
    {
      String str = "";
      if (o(paramContext)) {
        str = ((TelephonyManager)paramContext.getSystemService("phone")).getDeviceId();
      }
      if (str != null)
      {
        m.a().a(new Object[] { "Imei:" + str });
        return CooperService.getSecretValue(str);
      }
      m.a().a("Imei is null");
      return "";
    }
    m.a().b("lost permissioin : android.permission.READ_PHONE_STATE");
    return "";
  }
  
  public static NetworkStatus m(Context paramContext)
  {
    ConnectivityManager localConnectivityManager = (ConnectivityManager)paramContext.getSystemService("connectivity");
    if (localConnectivityManager == null) {
      return NetworkStatus.NotReachable;
    }
    NetworkInfo localNetworkInfo = localConnectivityManager.getActiveNetworkInfo();
    if ((localNetworkInfo == null) || (!localNetworkInfo.isAvailable())) {
      return NetworkStatus.NotReachable;
    }
    paramContext = (TelephonyManager)paramContext.getSystemService("phone");
    if (localConnectivityManager.getActiveNetworkInfo().getType() == 1) {
      return NetworkStatus.Wifi;
    }
    switch (paramContext.getNetworkType())
    {
    case 8: 
    case 9: 
    case 10: 
    default: 
      return NetworkStatus.TwoG;
    case 7: 
      return NetworkStatus.TwoG;
    case 4: 
      return NetworkStatus.TwoG;
    case 2: 
      return NetworkStatus.TwoG;
    case 5: 
      return NetworkStatus.ThreeG;
    case 6: 
      return NetworkStatus.ThreeG;
    case 1: 
      return NetworkStatus.TwoG;
    case 3: 
      return NetworkStatus.ThreeG;
    case 14: 
      return NetworkStatus.ThreeG;
    case 12: 
      return NetworkStatus.ThreeG;
    case 15: 
      return NetworkStatus.ThreeG;
    case 11: 
      return NetworkStatus.TwoG;
    case 13: 
      return NetworkStatus.ThreeG;
    }
    return NetworkStatus.TwoG;
  }
  
  public static String n(Context paramContext)
  {
    k = Build.VERSION.SDK_INT;
    Object localObject = new DisplayMetrics();
    paramContext = ((WindowManager)paramContext.getSystemService("window")).getDefaultDisplay();
    paramContext.getMetrics((DisplayMetrics)localObject);
    i = ((DisplayMetrics)localObject).widthPixels;
    int j = ((DisplayMetrics)localObject).heightPixels;
    m.a().a(new Object[] { "Run1 first get resolution:" + i + " * " + j + ",ver " + k });
    if (k < 13) {
      j = ((DisplayMetrics)localObject).heightPixels;
    }
    for (;;)
    {
      m.a().a(new Object[] { "Run2 Calibration resolution:" + i + " * " + j });
      return i + "*" + j;
      if (k == 13) {
        try
        {
          k = ((Integer)paramContext.getClass().getMethod("getRealHeight", new Class[0]).invoke(paramContext, new Object[0])).intValue();
          j = k;
        }
        catch (Exception paramContext)
        {
          paramContext.printStackTrace();
        }
      } else if (k > 13) {
        for (;;)
        {
          try
          {
            localObject = paramContext.getClass().getMethod("getSize", new Class[] { Point.class });
            localPoint = new Point();
            ((Method)localObject).invoke(paramContext, new Object[] { localPoint });
            k = localPoint.x;
          }
          catch (Exception paramContext)
          {
            try
            {
              Point localPoint;
              int m = localPoint.y;
              try
              {
                m.a().a(new Object[] { "ver>13 resolution : " + k + " * " + m });
                i = k;
                j = m;
              }
              catch (Exception paramContext)
              {
                j = m;
                i = k;
              }
              paramContext.printStackTrace();
            }
            catch (Exception paramContext)
            {
              for (;;)
              {
                i = k;
              }
            }
            paramContext = paramContext;
          }
        }
      }
    }
  }
  
  public static boolean o(Context paramContext)
  {
    return paramContext.getPackageManager().checkPermission("android.permission.READ_PHONE_STATE", paramContext.getPackageName()) == 0;
  }
  
  public static boolean p(Context paramContext)
  {
    if (a(paramContext, "android.permission.INTERNET"))
    {
      paramContext = ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
      if ((paramContext != null) && (paramContext.isAvailable())) {
        return true;
      }
      m.a().b("Network error");
      return false;
    }
    m.a().b(" lost  permission : android.permission.INTERNET");
    return false;
  }
}
