package com.lepeng.utils.datastorage.db;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import com.lepeng.utils.L;

class a
  extends SQLiteOpenHelper
{
  private DbUpdateListener b;
  
  public a(Context paramContext, String paramString, int paramInt, DbUpdateListener paramDbUpdateListener)
  {
    super(paramContext, paramString, null, paramInt);
    this.b = paramDbUpdateListener;
  }
  
  public void onCreate(SQLiteDatabase paramSQLiteDatabase) {}
  
  public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    L.i("onUpgrade: " + paramInt1 + " " + paramInt2);
    if (this.b != null)
    {
      this.b.onUpgrade(paramSQLiteDatabase, paramInt1, paramInt2);
      return;
    }
    L.e("清空所有的数据信息...");
    Cursor localCursor = paramSQLiteDatabase.rawQuery("SELECT name FROM sqlite_master WHERE type ='table' ", null);
    if (localCursor != null) {}
    for (;;)
    {
      if (!localCursor.moveToNext())
      {
        if (localCursor == null) {
          break;
        }
        localCursor.close();
        return;
      }
      paramSQLiteDatabase.execSQL("DROP TABLE " + localCursor.getString(0));
    }
  }
}
