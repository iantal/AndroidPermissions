package com.zhangzhifu.sdk.ui;

import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.TextView;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.util.ImageUtil;
import com.zhangzhifu.sdk.util.NinePatchUtils;
import java.math.BigDecimal;

public class FeeView
  extends RelativeLayout
  implements View.OnClickListener
{
  public static final String ADV_PIC = "zhangpay_pic/";
  public static final int TEXT_SIZE = 16;
  public static String htmlString;
  public static String showString;
  private RelativeLayout br = new RelativeLayout(getContext(), null);
  private ImageView bs;
  private TextView bt;
  private WebView bu;
  private FeeView.OnButtonClick bv;
  public Button concle;
  public Button confirm;
  public TextView tv_Version;
  
  public FeeView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
    setBackgroundColor(Color.argb(102, 0, 0, 0));
    paramContext = NinePatchUtils.decodeDrawableFromAsset(getContext(), "zhangpay_pic/zhangpay_bg.9.png");
    this.br.setBackgroundDrawable(paramContext);
    int i = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    int j = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    ImageUtil.getScreenDensity(getContext());
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(13, -1);
    this.br.setId(1996);
    addView(this.br, paramContext);
    i = (int)(50.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    ImageUtil.getScreenDensity(getContext());
    paramContext = new RelativeLayout.LayoutParams(j, i);
    paramContext.addRule(13, -1);
    paramContext.addRule(10, -1);
    this.bs = new ImageView(getContext());
    this.bs.setImageBitmap(ImageUtil.getImageFromAssetsFile("zhangpay_pic/zhangpay_top_title.png", getContext(), j, i));
    this.bs.setId(1997);
    this.br.addView(this.bs, paramContext);
    i = (int)(220.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(ImageUtil.getScreenDensity(getContext()) * 100.0F);
    int k = (int)(5.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(3, this.bs.getId());
    paramContext.topMargin = k;
    paramContext.addRule(14, -1);
    this.bt = new TextView(getContext());
    this.bt.setTextSize(15.0F);
    Integer.valueOf(SharePreferUtil.getInstance().getMoney(getContext())).intValue();
    this.bt.setTextColor(-16777216);
    paramAttributeSet = SharePreferUtil.getPriciePointDec(getContext()).replace("X.XX", SharePreferUtil.getFee(getContext()).subSequence(0, SharePreferUtil.getFee(getContext()).length() - 1) + ".00");
    this.bt.setText("商品名称:" + SharePreferUtil.getProdName(getContext()) + "\n商品价格:" + SharePreferUtil.getFee(getContext()) + "\n商品概述:" + paramAttributeSet);
    this.bt.setTextColor(-1728053248);
    this.bt.setId(1998);
    this.br.addView(this.bt, paramContext);
    i = (int)(220.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(170.0F * ImageUtil.getScreenDensity(getContext()));
    k = (int)(75.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(3, this.bs.getId());
    paramContext.topMargin = k;
    paramContext.addRule(14, -1);
    this.bt = new TextView(getContext());
    this.bt.setTextSize(14.0F);
    this.bt.setTextColor(Color.rgb(82, 161, 232));
    this.bt.setId(2000);
    this.br.addView(this.bt, paramContext);
    i = (int)(20.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(150.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams((int)(200.0F * ImageUtil.getScreenDensity(getContext())), j);
    paramContext.addRule(12, -1);
    paramContext.addRule(13, -1);
    paramContext.leftMargin = i;
    paramContext.rightMargin = i;
    paramContext.bottomMargin = i;
    this.bu = new WebView(getContext());
    this.bu.setId(2001);
    this.bu.setScrollBarStyle(0);
    i = (int)(40.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(180.0F * ImageUtil.getScreenDensity(getContext()));
    k = (int)(10.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams(j, i);
    paramContext.addRule(13, -1);
    paramContext.bottomMargin = ((int)(6.0F * ImageUtil.getScreenDensity(getContext())));
    paramContext.addRule(12, this.bu.getId());
    paramContext.topMargin = k;
    this.confirm = new Button(getContext());
    this.confirm.setOnClickListener(this);
    this.confirm.setBackgroundDrawable(ImageUtil.newSelector(getContext(), "zhangpay_pic/button_normal.9.png", "zhangpay_pic/button_on.9.png", "zhangpay_pic/button_on.9.png", "zhangpay_pic/button_on.9.png"));
    this.confirm.setId(2002);
    this.confirm.setText("确认");
    this.confirm.setTextColor(-1);
    this.confirm.setTextSize(22.0F);
    this.br.addView(this.confirm, paramContext);
    paramContext = new RelativeLayout.LayoutParams((int)(ImageUtil.getScreenDensity(getContext()) * 100.0F), (int)(ImageUtil.getScreenDensity(getContext()) * 100.0F));
    paramContext.addRule(11, this.confirm.getId());
    paramContext.leftMargin = ((int)(213.0F * ImageUtil.getScreenDensity(getContext())));
    paramContext.topMargin = ((int)(230.0F * ImageUtil.getScreenDensity(getContext())));
    this.tv_Version = new TextView(getContext());
    this.tv_Version.setTextSize(8.0F);
    this.tv_Version.setTextColor(-7829368);
    this.confirm.setId(2004);
    this.tv_Version.setText("v3.7.14");
    this.br.addView(this.tv_Version, paramContext);
    i = (int)(1.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(40.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams(j, j);
    paramContext.addRule(10, -1);
    paramContext.addRule(11, -1);
    paramContext.rightMargin = i;
    paramContext.topMargin = i;
    this.concle = new Button(getContext());
    this.concle.setOnClickListener(this);
    this.concle.setBackgroundDrawable(ImageUtil.newSelector(getContext(), "zhangpay_pic/close_normal.9.png", "zhangpay_pic/close_pressed.9.png", "zhangpay_pic/close_pressed.9.png", "zhangpay_pic/close_pressed.9.png"));
    this.concle.setId(2003);
    this.br.addView(this.concle, paramContext);
  }
  
  public static String changeF2Y(String paramString)
  {
    return BigDecimal.valueOf(Long.valueOf(paramString).longValue()).divide(new BigDecimal(100)).toString();
  }
  
  public static String changeY2F(String paramString)
  {
    paramString = paramString.replaceAll("\\$|\\￥|\\,", "");
    int i = paramString.indexOf(".");
    int j = paramString.length();
    if (i == -1) {
      paramString = Long.valueOf(paramString + "00");
    }
    for (;;)
    {
      return paramString.toString();
      if (j - i >= 3) {
        paramString = Long.valueOf(paramString.substring(0, i + 3).replace(".", ""));
      } else if (j - i == 2) {
        paramString = Long.valueOf(paramString.substring(0, i + 2).replace(".", "") + 0);
      } else {
        paramString = Long.valueOf(paramString.substring(0, i + 1).replace(".", "") + "00");
      }
    }
  }
  
  public void onClick(View paramView)
  {
    if (paramView == this.concle) {
      if (this.bv != null) {
        this.bv.onConcleBtnClick();
      }
    }
    while ((paramView != this.confirm) || (this.bv == null)) {
      return;
    }
    this.bv.onConfirmBtnClick();
  }
  
  public void setBtnClick(FeeView.OnButtonClick paramOnButtonClick)
  {
    this.bv = paramOnButtonClick;
  }
  
  public void setFeeViewText(String paramString)
  {
    this.bt.setText(paramString);
  }
  
  public void updateUI()
  {
    if (showString != null) {
      this.bt.setText(showString);
    }
    if (htmlString != null)
    {
      this.bu.getSettings().setDefaultTextEncodingName("utf-8");
      this.bu.loadDataWithBaseURL(null, htmlString, "text/html", "utf-8", null);
    }
  }
}
