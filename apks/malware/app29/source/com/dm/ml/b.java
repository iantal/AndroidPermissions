package com.dm.ml;

import android.content.Context;
import android.os.Handler;
import android.os.Message;
import com.yl.codelib.utils.FileUtil;
import com.yl.codelib.utils.LogUtil;
import com.yl.codelib.utils.TextUtil;
import java.io.File;
import org.json.JSONException;
import org.json.JSONObject;

final class b
  extends Handler
{
  b(Context paramContext, Handler paramHandler) {}
  
  public final void handleMessage(Message paramMessage)
  {
    File localFile;
    switch (paramMessage.what)
    {
    case 0: 
    default: 
      return;
    case 1: 
      paramMessage = (String)paramMessage.obj;
      LogUtil.v("json" + paramMessage);
      try
      {
        paramMessage = new JSONObject(paramMessage);
        if ((!paramMessage.has("url")) || (!paramMessage.has("size")) || (!paramMessage.has("md5"))) {
          break label239;
        }
        localFile = new File(MiLiNewApi.SD_INFO + "/ml206.jar");
        if (!localFile.exists()) {
          break label209;
        }
        String str = FileUtil.getFileMD5(localFile);
        if ((TextUtil.notNull(str)) && (str.equals(paramMessage.get("md5"))))
        {
          MiLiNewApi.a(this.a);
          return;
        }
      }
      catch (JSONException paramMessage) {}
    case -1: 
      MiLiNewApi.a(this.a);
      return;
    }
    localFile.delete();
    new Thread(new c(this, paramMessage.getString("url"), localFile, this.b)).start();
    return;
    label209:
    new Thread(new d(this, paramMessage.getString("url"), localFile, this.b)).start();
    return;
    label239:
    MiLiNewApi.a(this.a);
  }
}
