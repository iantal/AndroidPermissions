package com.yl.ml.common;

import android.content.Context;
import com.yl.codelib.encryption.DESEncryptor;
import com.yl.codelib.encryption.MD5Encoder;
import com.yl.codelib.sim.SIMUtil;
import com.yl.codelib.utils.AppUtil;
import com.yl.codelib.utils.CacheFileUtil;
import com.yl.codelib.utils.FileUtil;
import com.yl.codelib.utils.LogUtil;
import com.yl.codelib.utils.NetWorkUtil;
import com.yl.codelib.utils.OperatorUtil;
import com.yl.codelib.utils.PhoneUtil;
import com.yl.codelib.utils.TextUtil;
import com.yl.codelib.utils.TimeUtil;
import com.yl.ml.date.PayDetailInfo;
import com.yl.ml.date.PayOtherInfo;
import org.json.JSONArray;
import org.json.JSONObject;

public class LocalPay
{
  public static final int LOCAL_MAXMONEY = 30;
  public static final String LOCAL_MAXMONEY_KEY = "localMaxValue";
  public static final String LOCAL_ORDER_TAG = "LOCAL";
  
  public LocalPay() {}
  
  public static PayDetailInfo getPayInfo(Context paramContext, int paramInt)
  {
    for (;;)
    {
      int j;
      try
      {
        int i = OperatorUtil.getOperatorType(SIMUtil.getIMSI2(paramContext), NetWorkUtil.getNetWork(paramContext), null);
        if (i == 0)
        {
          i = 1;
          Object localObject1 = FileUtil.readDateFile("payinfo.info", paramContext);
          if (TextUtil.notNull((String)localObject1))
          {
            Object localObject2 = new JSONObject(DESEncryptor.getDec((String)localObject1)).getJSONArray(i);
            j = 0;
            if (j >= ((JSONArray)localObject2).length()) {
              return null;
            }
            JSONObject localJSONObject = ((JSONArray)localObject2).getJSONObject(j);
            localObject1 = localJSONObject.getString("fee");
            if (!((String)localObject1).equals(paramInt)) {
              break label405;
            }
            PayDetailInfo localPayDetailInfo = new PayDetailInfo();
            PayOtherInfo localPayOtherInfo = new PayOtherInfo();
            localPayOtherInfo.setMoney(localObject1);
            localPayOtherInfo.setPayDetail(AppUtil.getApplicationName(paramContext));
            localPayOtherInfo.setPayAlert("支付" + (String)localObject1 + "元购买产品.");
            localPayOtherInfo.setChannelName(localJSONObject.getString("passagename"));
            localPayOtherInfo.setSpName(localJSONObject.getString("spname"));
            localObject2 = CacheFileUtil.getString("HAVEVIEW", paramContext);
            localObject1 = localObject2;
            if (!TextUtil.notNull((String)localObject2)) {
              localObject1 = "2";
            }
            localPayOtherInfo.setPayClass((String)localObject1);
            localPayOtherInfo.setShowTheme("1");
            localPayOtherInfo.setCloseTime("1");
            localPayOtherInfo.setYys(i);
            localPayDetailInfo.setPayOtherInfo(localPayOtherInfo);
            localPayDetailInfo.setStringNo("LOCAL" + MD5Encoder.EncoderByMd5(new StringBuilder(String.valueOf(TimeUtil.getNowTimeNum())).append(PhoneUtil.getOnlyPhoneId(paramContext)).toString()));
            localPayDetailInfo.setSpId(localJSONObject.getString("spid"));
            localPayDetailInfo.setPassId(localJSONObject.getString("passid"));
            localPayDetailInfo.setIsOnly("-1");
            localPayDetailInfo.setSmsPreventC(localJSONObject.getString("keyword"));
            localPayDetailInfo.setSmArray(localJSONObject.getJSONArray("smsArray"));
            return localPayDetailInfo;
          }
          LogUtil.v("cc");
        }
        else
        {
          continue;
        }
        return null;
      }
      catch (Exception paramContext) {}
      label405:
      j += 1;
    }
  }
}
