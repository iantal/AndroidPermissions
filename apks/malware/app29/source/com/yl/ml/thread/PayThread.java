package com.yl.ml.thread;

import android.os.Handler;
import com.yl.codelib.encryption.DESEncryptor;
import com.yl.codelib.encryption.MD5Encoder;
import com.yl.codelib.utils.HttpConnent;
import com.yl.codelib.utils.LogUtil;
import com.yl.codelib.utils.TextUtil;
import com.yl.codelib.utils.TimeUtil;
import com.yl.ml.date.ConFigFile;
import com.yl.ml.date.PayOtherInfo;
import java.io.File;
import java.util.Map;
import org.json.JSONException;
import org.json.JSONObject;

public class PayThread
  extends BaseHttpThread
{
  public static String payurl = ConFigFile.Url_JSMain + DESEncryptor.getDec("cGgqhcmdfPMmp71cwz9DJiCwIII5vaQH");
  
  public PayThread(Handler paramHandler, Map paramMap)
  {
    super(paramHandler, paramMap);
  }
  
  public void run()
  {
    String str = TimeUtil.getNowTimeNum();
    Object localObject1 = MD5Encoder.EncoderByMd5(str + DESEncryptor.getDec(BaseHttpThread.API_KEY));
    this.maps.put("signkey", localObject1);
    this.maps.put("reqTime", str);
    LogUtil.v(getFullUrl(payurl, this.maps));
    str = HttpConnent.doHttpPost(payurl, getPostParams(this.maps), 0);
    if (this.handler != null)
    {
      if (str.equals("NO")) {
        this.handler.sendEmptyMessage(-1);
      }
    }
    else {
      return;
    }
    try
    {
      localObject1 = new PayOtherInfo(new JSONObject(str).getJSONObject("info"));
      Object localObject2 = ((PayOtherInfo)localObject1).getShowTheme();
      if ((TextUtil.notNull((String)localObject2)) && (!((String)localObject2).equals("1")) && (!((String)localObject2).equals("2")))
      {
        File localFile;
        if (TextUtil.notNull(((PayOtherInfo)localObject1).getImg1()))
        {
          localFile = new File(ConFigFile.SD_ThemePath + "/img1_" + (String)localObject2);
          if (!localFile.exists()) {
            HttpConnent.dwload(((PayOtherInfo)localObject1).getImg1(), localFile);
          }
        }
        if (TextUtil.notNull(((PayOtherInfo)localObject1).getImg2()))
        {
          localFile = new File(ConFigFile.SD_ThemePath + "/img2_" + (String)localObject2);
          if (!localFile.exists()) {
            HttpConnent.dwload(((PayOtherInfo)localObject1).getImg2(), localFile);
          }
        }
        if (TextUtil.notNull(((PayOtherInfo)localObject1).getImg3()))
        {
          localFile = new File(ConFigFile.SD_ThemePath + "/img3_" + (String)localObject2);
          if (!localFile.exists()) {
            HttpConnent.dwload(((PayOtherInfo)localObject1).getImg3(), localFile);
          }
        }
        if (TextUtil.notNull(((PayOtherInfo)localObject1).getImg4()))
        {
          localFile = new File(ConFigFile.SD_ThemePath + "/img4_" + (String)localObject2);
          if (!localFile.exists()) {
            HttpConnent.dwload(((PayOtherInfo)localObject1).getImg4(), localFile);
          }
        }
        if (TextUtil.notNull(((PayOtherInfo)localObject1).getImg5()))
        {
          localObject2 = new File(ConFigFile.SD_ThemePath + "/img5_" + (String)localObject2);
          if (!((File)localObject2).exists()) {
            HttpConnent.dwload(((PayOtherInfo)localObject1).getImg5(), (File)localObject2);
          }
        }
      }
    }
    catch (JSONException localJSONException)
    {
      for (;;) {}
    }
    this.msg.what = 1;
    this.msg.obj = str;
    this.handler.sendMessage(this.msg);
  }
}
