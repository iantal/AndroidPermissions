package com.jx.night.ui;

import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.TextView;
import com.jx.night.ad.b;
import com.jx.night.unit.MyConst;
import com.jx.night.unit.MyWebInterface;
import com.jx.night.unit.n;
import com.litesuits.http.LiteHttp;
import com.litesuits.http.request.AbstractRequest;
import com.litesuits.http.request.FileRequest;

public class All_2_Frag
  extends Fragment
  implements View.OnClickListener
{
  private static String e = MyConst.S;
  TextView a;
  ProgressBar b;
  private WebView c;
  private Context d;
  private String f = "";
  private boolean g = false;
  private int h = 1;
  private String i = "1111";
  private TextView j;
  private TextView k;
  private LinearLayout l;
  private Dialog m;
  private Handler n = new f(this);
  private int o = 0;
  
  public All_2_Frag() {}
  
  private void a(long paramLong1, long paramLong2)
  {
    int i1 = (int)((float)paramLong2 / (float)paramLong1 * 100.0F);
    String str;
    if (this.o != i1)
    {
      this.o = i1;
      str = "正在加载爱爱同城交友,已完成" + this.o + "%";
      if (this.a != null)
      {
        this.a.setText(str);
        this.b.setProgress(this.o);
      }
    }
    else
    {
      return;
    }
    n.a(this.d, str);
  }
  
  private void c()
  {
    if (!MyConst.n) {}
    while (this.g) {
      return;
    }
    this.g = true;
    b.a().f();
  }
  
  private void d()
  {
    Object localObject = com.jx.night.ad.a.a("AiAi");
    if (com.jx.night.unit.g.c((String)localObject)) {
      com.jx.night.unit.g.b((String)localObject);
    }
    localObject = (FileRequest)new FileRequest(MyConst.A, (String)localObject + ".tmp").setHttpListener(new h(this, true, true, false));
    MyConst.y.executeAsync((AbstractRequest)localObject);
  }
  
  private void e()
  {
    WebSettings localWebSettings = this.c.getSettings();
    localWebSettings.supportMultipleWindows();
    localWebSettings.setJavaScriptEnabled(true);
    localWebSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    localWebSettings.setAllowFileAccess(true);
    this.c.setWebChromeClient(new WebChromeClient());
    this.c.loadUrl(e);
    this.c.requestFocus();
  }
  
  public void a()
  {
    if (this.c != null) {
      this.c.loadUrl(e);
    }
    c();
  }
  
  public void a(View paramView)
  {
    this.c = ((WebView)paramView.findViewById(2131361834));
    this.j = ((TextView)paramView.findViewById(2131361836));
    this.k = ((TextView)paramView.findViewById(2131361837));
    this.k.setOnClickListener(this);
    this.l = ((LinearLayout)paramView.findViewById(2131361835));
    this.l.setVisibility(8);
    this.c.setScrollBarStyle(0);
    this.c.addJavascriptInterface(new MyWebInterface(this.d), "APP");
    e();
  }
  
  public void a(String paramString)
  {
    if (com.jx.night.unit.a.c(this.d, MyConst.F))
    {
      com.jx.night.unit.a.e(this.d, MyConst.F);
      return;
    }
    MyConst.A = paramString;
    paramString = new Dialog(this.d, 2131099660);
    View localView = LayoutInflater.from(this.d).inflate(2130903040, null);
    TextView localTextView = (TextView)localView.findViewById(2131361793);
    ((TextView)localView.findViewById(2131361792)).setText("本服务由“爱爱同城交友”提供，请安装爱爱同城交友开始泡美女!");
    localTextView.setText("立即安装爱爱同城交友");
    localTextView.setOnClickListener(new g(this, paramString));
    paramString.setContentView(localView);
    paramString.show();
  }
  
  public void b()
  {
    Dialog localDialog = new Dialog(this.d, 2131099660);
    View localView = LayoutInflater.from(this.d).inflate(2130903041, null);
    this.a = ((TextView)localView.findViewById(2131361794));
    this.b = ((ProgressBar)localView.findViewById(2131361795));
    localDialog.setContentView(localView);
    this.m = localDialog;
    localDialog.show();
  }
  
  public void onClick(View paramView)
  {
    switch (paramView.getId())
    {
    default: 
      return;
    }
    d();
    this.l.setVisibility(8);
  }
  
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    this.d = getActivity();
    MyConst.D = this;
    this.f = "";
  }
  
  public View onCreateView(LayoutInflater paramLayoutInflater, ViewGroup paramViewGroup, Bundle paramBundle)
  {
    paramLayoutInflater = paramLayoutInflater.inflate(2130903051, null);
    a(paramLayoutInflater);
    e();
    return paramLayoutInflater;
  }
}
