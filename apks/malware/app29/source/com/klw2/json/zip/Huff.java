package com.klw2.json.zip;

import com.klw2.json.JSONException;

public class Huff
  implements None, PostMortem
{
  public static final int education = 1000000;
  private final int domain;
  private final a[] symbols;
  private a table;
  private int toLearn;
  private boolean upToDate = false;
  private int width;
  
  public Huff(int paramInt)
  {
    this.domain = paramInt;
    this.toLearn = 1000000;
    int j = paramInt * 2 - 1;
    this.symbols = new a[j];
    if (i >= paramInt) {}
    for (;;)
    {
      if (paramInt >= j)
      {
        return;
        this.symbols[i] = new a(i);
        i += 1;
        break;
      }
      this.symbols[paramInt] = new a(-1);
      paramInt += 1;
    }
  }
  
  private boolean postMortem(int paramInt)
  {
    int[] arrayOfInt = new int[this.domain];
    Object localObject = this.symbols[paramInt];
    if (((a)localObject).b != paramInt) {}
    int i;
    label27:
    a localA;
    do
    {
      return false;
      i = 0;
      localA = ((a)localObject).a;
      if (localA != null) {
        break;
      }
    } while (localObject != this.table);
    this.width = 0;
    localObject = this.table;
    for (;;)
    {
      if (((a)localObject).b != -1)
      {
        if ((((a)localObject).b != paramInt) || (i != 0)) {
          break;
        }
        return true;
        if (localA.f == localObject) {
          arrayOfInt[i] = 0;
        }
        for (;;)
        {
          i += 1;
          localObject = localA;
          break label27;
          if (localA.d != localObject) {
            break;
          }
          arrayOfInt[i] = 1;
        }
      }
      i -= 1;
      if (arrayOfInt[i] != 0) {
        localObject = ((a)localObject).d;
      } else {
        localObject = ((a)localObject).f;
      }
    }
  }
  
  private void write(a paramA, BitWriter paramBitWriter)
  {
    try
    {
      a localA = paramA.a;
      if (localA != null)
      {
        this.width += 1;
        write(localA, paramBitWriter);
        if (localA.f == paramA)
        {
          paramBitWriter.zero();
          return;
        }
        paramBitWriter.one();
        return;
      }
    }
    catch (Throwable paramA)
    {
      throw new JSONException(paramA);
    }
  }
  
  public void generate()
  {
    Object localObject2;
    Object localObject1;
    int i;
    Object localObject3;
    if (!this.upToDate)
    {
      localObject2 = this.symbols[0];
      this.table = null;
      ((a)localObject2).c = null;
      localObject1 = localObject2;
      i = 1;
      if (i < this.domain) {
        break label129;
      }
      i = this.domain;
      localObject3 = localObject1;
    }
    for (;;)
    {
      a localA2 = ((a)localObject3).c;
      a localA1 = localA2.c;
      localObject2 = this.symbols[i];
      i += 1;
      ((a)localObject3).e += localA2.e;
      ((a)localObject2).f = ((a)localObject3);
      ((a)localObject2).d = localA2;
      ((a)localObject2).a = null;
      ((a)localObject3).a = ((a)localObject2);
      localA2.a = ((a)localObject2);
      if (localA1 == null)
      {
        this.table = ((a)localObject2);
        this.upToDate = true;
        return;
        label129:
        localA1 = this.symbols[i];
        if (localA1.e < localObject1.e)
        {
          localA1.c = localObject1;
          localObject1 = localA1;
          i += 1;
          break;
        }
        localObject3 = localObject2;
        if (localA1.e < ((a)localObject2).e) {}
        for (localObject3 = localObject1;; localObject3 = localObject2)
        {
          localObject2 = ((a)localObject3).c;
          if ((localObject2 == null) || (localA1.e < ((a)localObject2).e))
          {
            localA1.c = ((a)localObject2);
            ((a)localObject3).c = localA1;
            localObject2 = localA1;
            break;
          }
        }
      }
      if (((a)localObject2).e < localA1.e)
      {
        ((a)localObject2).c = localA1;
        localObject1 = localObject2;
        localObject3 = localObject2;
      }
      else
      {
        do
        {
          localObject1 = localObject3;
          localObject3 = localObject1.c;
        } while ((localObject3 != null) && (((a)localObject2).e >= ((a)localObject3).e));
        ((a)localObject2).c = ((a)localObject3);
        localObject1.c = ((a)localObject2);
        localObject1 = localObject2;
        localObject3 = localA1;
      }
    }
  }
  
  public boolean postMortem(PostMortem paramPostMortem)
  {
    int i = 0;
    for (;;)
    {
      if (i >= this.domain) {
        return this.table.postMortem(((Huff)paramPostMortem).table);
      }
      if (!postMortem(i))
      {
        JSONzip.log("\nBad huff ");
        JSONzip.logchar(i, i);
        return false;
      }
      i += 1;
    }
  }
  
  /* Error */
  public int read(BitReader paramBitReader)
  {
    // Byte code:
    //   0: aload_0
    //   1: iconst_0
    //   2: putfield 50	com/klw2/json/zip/Huff:width	I
    //   5: aload_0
    //   6: getfield 48	com/klw2/json/zip/Huff:table	Lcom/klw2/json/zip/a;
    //   9: astore_2
    //   10: aload_2
    //   11: getfield 43	com/klw2/json/zip/a:b	I
    //   14: iconst_m1
    //   15: if_icmpeq +16 -> 31
    //   18: aload_0
    //   19: aload_2
    //   20: getfield 43	com/klw2/json/zip/a:b	I
    //   23: invokevirtual 105	com/klw2/json/zip/Huff:tick	(I)V
    //   26: aload_2
    //   27: getfield 43	com/klw2/json/zip/a:b	I
    //   30: ireturn
    //   31: aload_0
    //   32: aload_0
    //   33: getfield 50	com/klw2/json/zip/Huff:width	I
    //   36: iconst_1
    //   37: iadd
    //   38: putfield 50	com/klw2/json/zip/Huff:width	I
    //   41: aload_1
    //   42: invokeinterface 111 1 0
    //   47: ifeq +11 -> 58
    //   50: aload_2
    //   51: getfield 56	com/klw2/json/zip/a:d	Lcom/klw2/json/zip/a;
    //   54: astore_2
    //   55: goto -45 -> 10
    //   58: aload_2
    //   59: getfield 53	com/klw2/json/zip/a:f	Lcom/klw2/json/zip/a;
    //   62: astore_2
    //   63: goto -53 -> 10
    //   66: astore_1
    //   67: new 72	com/klw2/json/JSONException
    //   70: dup
    //   71: aload_1
    //   72: invokespecial 75	com/klw2/json/JSONException:<init>	(Ljava/lang/Throwable;)V
    //   75: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	76	0	this	Huff
    //   0	76	1	paramBitReader	BitReader
    //   9	54	2	localA	a
    // Exception table:
    //   from	to	target	type
    //   0	10	66	java/lang/Throwable
    //   10	31	66	java/lang/Throwable
    //   31	55	66	java/lang/Throwable
    //   58	63	66	java/lang/Throwable
  }
  
  public void tick(int paramInt)
  {
    if (this.toLearn > 0)
    {
      this.toLearn -= 1;
      a localA = this.symbols[paramInt];
      localA.e = (1L + localA.e);
      this.upToDate = false;
    }
  }
  
  public void write(int paramInt, BitWriter paramBitWriter)
  {
    this.width = 0;
    write(this.symbols[paramInt], paramBitWriter);
    tick(paramInt);
  }
}
