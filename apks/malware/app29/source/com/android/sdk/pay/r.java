package com.android.sdk.pay;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.ProgressDialog;
import android.os.Handler;
import android.os.Message;
import java.util.HashMap;
import java.util.Map;

class r
  extends Handler
{
  r(p paramP) {}
  
  public void handleMessage(Message paramMessage)
  {
    ActivityTool.b(p.c(), String.valueOf(paramMessage.what));
    if (p.c(this.a)) {
      return;
    }
    switch (paramMessage.what)
    {
    default: 
      return;
    case -505: 
      Map localMap = (Map)paramMessage.obj;
      paramMessage = localMap;
      if (localMap == null)
      {
        paramMessage = new HashMap();
        paramMessage.put("result", "error");
        paramMessage.put("msg", "支付异常！");
      }
      p.d(this.a).sendMessage(Message.obtain(p.d(this.a), 703, paramMessage));
      return;
    case -2: 
      if ((p.b(this.a) != null) && (p.b(this.a).isShowing())) {
        p.b(this.a).dismiss();
      }
      try
      {
        this.a.a = ActivityTool.a((byte[])paramMessage.obj);
        if ((this.a.a == null) || (this.a.a.f == null))
        {
          paramMessage = new HashMap();
          paramMessage.put("result", "error");
          paramMessage.put("msg", "支付失败，没有支付参数！");
          p.d(this.a).sendMessage(Message.obtain(p.d(this.a), 703, paramMessage));
          return;
        }
      }
      catch (Exception paramMessage)
      {
        paramMessage.printStackTrace();
        paramMessage = new HashMap();
        paramMessage.put("result", "error");
        paramMessage.put("msg", "支付异常！");
        p.d(this.a).sendMessage(Message.obtain(p.d(this.a), 703, paramMessage));
        return;
      }
      ActivityTool.b(p.c(), this.a.a.toString());
      if (this.a.a.a == 1)
      {
        paramMessage = new AlertDialog.Builder(p.e(this.a));
        paramMessage.setTitle("提示信息");
        paramMessage.setCancelable(false);
        paramMessage.setMessage(this.a.a.d);
        if (this.a.a.b == 0) {
          paramMessage.setNegativeButton("取消", new s(this));
        }
        paramMessage.setPositiveButton("确定", new t(this));
        p.a(this.a, paramMessage.create());
        p.f(this.a).show();
        return;
      }
      this.a.a();
      return;
    }
    if ((p.b(this.a) != null) && (p.b(this.a).isShowing())) {
      p.b(this.a).dismiss();
    }
    paramMessage = new HashMap();
    paramMessage.put("result", "error");
    paramMessage.put("msg", "支付失败，请联系支付商！");
    p.d(this.a).sendMessage(Message.obtain(p.d(this.a), 703, paramMessage));
  }
}
