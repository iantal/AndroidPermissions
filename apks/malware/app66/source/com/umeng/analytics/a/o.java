package com.umeng.analytics.a;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.location.Location;
import com.umeng.analytics.j;
import com.umeng.common.b;
import org.json.JSONObject;

public final class o
  implements g
{
  public static final String d = "lng";
  public static final String e = "lat";
  public static final String f = "gps_time";
  private static final String g = "last_gps_change_time";
  public double a;
  public double b;
  public long c;
  
  public o() {}
  
  public o(Location paramLocation)
  {
    if (paramLocation == null) {
      return;
    }
    this.a = paramLocation.getLongitude();
    this.b = paramLocation.getLatitude();
    this.c = paramLocation.getTime();
  }
  
  public static SharedPreferences.Editor a(Context paramContext, SharedPreferences paramSharedPreferences)
  {
    if (!com.umeng.analytics.g.i) {}
    do
    {
      return null;
      paramContext = b.m(paramContext);
    } while (!a(paramContext, paramSharedPreferences));
    paramSharedPreferences = paramSharedPreferences.edit();
    paramSharedPreferences.putFloat("lng", (float)paramContext.getLongitude());
    paramSharedPreferences.putFloat("lat", (float)paramContext.getLatitude());
    paramSharedPreferences.putLong("gps_time", paramContext.getTime());
    paramSharedPreferences.commit();
    return paramSharedPreferences;
  }
  
  public static o a(Context paramContext)
  {
    if (!com.umeng.analytics.g.i) {}
    SharedPreferences localSharedPreferences;
    do
    {
      return null;
      localSharedPreferences = j.e(paramContext);
      paramContext = b.m(paramContext);
    } while (!a(paramContext, localSharedPreferences));
    return new o(paramContext);
  }
  
  static boolean a(Location paramLocation, SharedPreferences paramSharedPreferences)
  {
    if ((paramLocation != null) && (paramLocation.getTime() > paramSharedPreferences.getLong("last_gps_change_time", 0L)))
    {
      paramSharedPreferences.edit().putLong("last_gps_change_time", paramLocation.getTime()).commit();
      return true;
    }
    return false;
  }
  
  public static o b(Context paramContext)
  {
    if (!com.umeng.analytics.g.i) {}
    o localO;
    do
    {
      return null;
      paramContext = j.e(paramContext);
      localO = new o();
    } while (!paramContext.contains("gps_time"));
    localO.b = paramContext.getFloat("lat", 0.0F);
    localO.a = paramContext.getFloat("lng", 0.0F);
    localO.c = paramContext.getLong("gps_time", 0L);
    paramContext.edit().remove("gps_time").commit();
    return localO;
  }
  
  public void a(JSONObject paramJSONObject)
  {
    if (paramJSONObject == null) {}
    do
    {
      return;
      if (paramJSONObject.has("lng")) {
        this.a = paramJSONObject.getDouble("lng");
      }
      if (paramJSONObject.has("lat")) {
        this.b = paramJSONObject.getDouble("lat");
      }
    } while (!paramJSONObject.has("gps_time"));
    this.c = paramJSONObject.getLong("gps_time");
  }
  
  public boolean a()
  {
    return (this.a != 0.0D) || (this.b != 0.0D) || (this.c != 0L);
  }
  
  public void b(JSONObject paramJSONObject)
  {
    paramJSONObject.put("lng", this.a);
    paramJSONObject.put("lat", this.b);
    paramJSONObject.put("gps_time", this.c);
  }
}
