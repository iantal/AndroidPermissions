package com.zhangzhifu.sdk.ui;

import android.content.Context;
import android.os.Build.VERSION;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.AnimationSet;
import android.view.animation.RotateAnimation;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.TextView;
import com.romainpiel.shimmer.Shimmer;
import com.romainpiel.shimmer.ShimmerTextView;
import com.zhangzhifu.sdk.util.ImageUtil;

public class LoadingView
  extends RelativeLayout
  implements View.OnClickListener
{
  public static final String ADV_PIC = "zhangpay_pic/";
  ProgressBar bA;
  private ImageView bB;
  private LoadingView.OnLoadingButtonClick bC;
  private ShimmerTextView bw;
  private TextView bx;
  private RelativeLayout by = new RelativeLayout(getContext(), null);
  RelativeLayout bz;
  public Button concle;
  public Button enterButton;
  public Shimmer shimmer;
  public ShimmerTextView tv;
  
  public LoadingView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
    this.by.setBackgroundDrawable(ImageUtil.getDrawableFromAssetsFile("zhangpay_pic/loading_bg.png", getContext()));
    int i = (int)(290.0F * ImageUtil.getScreenDensity(getContext()));
    int j = (int)(110.0F * ImageUtil.getScreenDensity(getContext()));
    ImageUtil.getScreenDensity(getContext());
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(13, -1);
    this.by.setId(1000);
    addView(this.by, paramContext);
    this.bA = new ProgressBar(getContext());
    i = (int)(ImageUtil.getScreenDensity(getContext()) * 60.0F);
    j = (int)(ImageUtil.getScreenDensity(getContext()) * 60.0F);
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(11, -1);
    paramContext.topMargin = ((int)(ImageUtil.getScreenDensity(getContext()) * 10.0F));
    this.bz = new RelativeLayout(getContext());
    this.bz.setId(4000);
    this.by.addView(this.bz, paramContext);
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(11, -1);
    this.bB = new ImageView(getContext());
    this.bB.setBackgroundDrawable(ImageUtil.getDrawableFromAssetsFile("zhangpay_pic/loading_360.png", getContext()));
    paramAttributeSet = new AnimationSet(true);
    RotateAnimation localRotateAnimation = new RotateAnimation(0.0F, 360.0F, 1, 0.5F, 1, 0.5F);
    localRotateAnimation.setDuration(1000L);
    localRotateAnimation.setRepeatCount(120);
    paramAttributeSet.addAnimation(localRotateAnimation);
    this.bB.startAnimation(paramAttributeSet);
    this.bz.addView(this.bB, paramContext);
    i = (int)(ImageUtil.getScreenDensity(getContext()) * 10.0F);
    paramContext = new RelativeLayout.LayoutParams(-1, -2);
    paramContext.addRule(9, -1);
    paramContext.topMargin = i;
    this.bw = new ShimmerTextView(getContext());
    this.bw.getPaint().setFakeBoldText(true);
    this.bw.setId(3009);
    this.bw.setTextSize(18.0F);
    this.bw.setTextColor(-1);
    this.bw.setText("安全加载中");
    if (Build.VERSION.SDK_INT > 10)
    {
      if ((this.shimmer == null) || (!this.shimmer.isAnimating())) {
        break label598;
      }
      this.shimmer.cancel();
    }
    for (;;)
    {
      this.by.addView(this.bw, paramContext);
      i = (int)(20.0F * ImageUtil.getScreenDensity(getContext()));
      paramContext = new RelativeLayout.LayoutParams(-1, -2);
      paramContext.addRule(9, -1);
      paramContext.addRule(3, this.bw.getId());
      paramContext.topMargin = i;
      this.bx = new TextView(getContext());
      this.bx.setId(3010);
      this.bx.getPaint().setFakeBoldText(true);
      this.bx.setTextSize(11.0F);
      this.bx.setTextColor(-1);
      this.bx.setText("   提醒：为保障计费结果的准确性，请勿进行其他操作，\n   如有疑问请致电0755-86700489");
      this.by.addView(this.bx, paramContext);
      return;
      label598:
      this.shimmer = new Shimmer();
      this.shimmer.start(this.bw);
    }
  }
  
  public void displayButton()
  {
    this.enterButton.setVisibility(0);
  }
  
  public void hideButton()
  {
    this.enterButton.setVisibility(8);
  }
  
  public void onClick(View paramView)
  {
    if (paramView == this.concle) {
      if (this.bC != null) {
        this.bC.onConcleBtnClick();
      }
    }
    while ((paramView != this.enterButton) || (this.bC == null)) {
      return;
    }
    this.bC.onConfirmBtnClick();
  }
  
  public void setBtnClick(LoadingView.OnLoadingButtonClick paramOnLoadingButtonClick)
  {
    this.bC = paramOnLoadingButtonClick;
  }
  
  public void setLoadingText(String paramString)
  {
    this.bw.setText(paramString);
  }
}
