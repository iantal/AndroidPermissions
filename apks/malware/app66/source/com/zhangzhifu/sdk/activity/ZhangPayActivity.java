package com.zhangzhifu.sdk.activity;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.FrameLayout;
import com.zhangzhifu.sdk.ZhangPayEngine;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.ui.FeeView;
import com.zhangzhifu.sdk.ui.LoadingView;
import com.zhangzhifu.sdk.util.SystemInfo;
import com.zhangzhifu.sdk.util.ZhangPayLog;
import com.zhangzhifu.sdk.util.json.MsgResponse_init;
import java.io.PrintStream;
import java.util.HashMap;

public class ZhangPayActivity
  extends Activity
  implements View.OnClickListener
{
  public static final String TAG = "ZhangPayActivity";
  public static String errorCode;
  public static boolean isBack;
  public static boolean isLiadong;
  public static boolean isMM;
  public static MsgResponse_init response;
  public static int sendsms;
  private FrameLayout G;
  private FeeView H;
  private boolean I = false;
  private LoadingView J;
  public String appName;
  public String cpOrderId;
  public String cpPrivateKeyString;
  public int cpidString;
  public int feeIdString;
  public int feeString;
  private int flags;
  public Context mContext;
  private Handler mHandler = new a(this);
  public String order;
  public int textViewCode;
  
  public ZhangPayActivity() {}
  
  private void b()
  {
    this.G.removeAllViews();
    this.J = new LoadingView(this, null);
    this.J.setLoadingText("    正在进行数据处理，请您耐\n   心等候...");
    this.G.addView(this.J);
  }
  
  private void c()
  {
    this.G.invalidate();
    SystemInfo.updateIMSI(this);
    this.H.updateUI();
    this.H.setVisibility(0);
    this.G.invalidate();
  }
  
  private void d()
  {
    this.G.removeAllViews();
    this.H = new FeeView(this, null);
    this.H.setVisibility(8);
    this.H.setBtnClick(new c(this));
    this.G.addView(this.H);
  }
  
  private void e()
  {
    ZhangPayLog.d("ZhangPayActivity", "关闭界面");
    if (!this.I)
    {
      ZhangPayLog.d("ZhangPayActivity", "未计费，付费结果写入sharedPreferences中！");
      SharePreferUtil.getInstance().setSmsResult(this, 1002);
    }
    finish();
  }
  
  public void onClick(View paramView) {}
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    requestWindowFeature(1);
    this.mContext = this;
    this.G = new FrameLayout(this);
    setContentView(this.G);
    this.flags = getIntent().getIntExtra("enterType", 0);
    if (this.flags == 1111)
    {
      d();
      c();
    }
    for (;;)
    {
      paramBundle = System.out;
      StringBuilder localStringBuilder = new StringBuilder("总共发了多少条短信");
      SharePreferUtil.getInstance();
      paramBundle.println(SharePreferUtil.getSendSMSCountDD(this));
      return;
      b();
      try
      {
        new Thread(new b(this, (HashMap)getIntent().getSerializableExtra("map"))).start();
      }
      catch (Exception paramBundle)
      {
        ZhangPayLog.e("zhangPay_log", "map is null? or map is not HashMap?");
      }
    }
  }
  
  public boolean onKeyDown(int paramInt, KeyEvent paramKeyEvent)
  {
    if (paramInt == 4)
    {
      ZhangPayLog.d("ZhangPayActivity", "是否正在计费中？" + this.I);
      if (!this.I) {
        ZhangPayEngine.getInstance().getSmsSendResult(this);
      }
      return false;
    }
    return super.onKeyDown(paramInt, paramKeyEvent);
  }
  
  public boolean onKeyUp(int paramInt, KeyEvent paramKeyEvent)
  {
    return super.onKeyUp(paramInt, paramKeyEvent);
  }
}
