package com.baidu.mobstat;

import android.content.Context;
import android.support.v4.app.Fragment;
import java.lang.ref.WeakReference;
import org.json.JSONObject;

class an
  implements Runnable
{
  private long b;
  private long c;
  private WeakReference d;
  private WeakReference e;
  private WeakReference f;
  private int g = 1;
  
  public an(ag paramAg, long paramLong1, long paramLong2, Context paramContext, Fragment paramFragment, Object paramObject, int paramInt)
  {
    this.b = paramLong1;
    this.c = paramLong2;
    this.d = new WeakReference(paramContext);
    this.e = new WeakReference(paramFragment);
    this.f = new WeakReference(paramObject);
    this.g = paramInt;
  }
  
  public void run()
  {
    Context localContext = null;
    if ((this.c - this.b >= this.a.a()) && (this.b > 0L) && ((this.d.get() != null) || (this.e.get() != null) || (this.f.get() != null)))
    {
      ag.a(this.a).b(this.b);
      String str = ag.a(this.a).c().toString();
      au.a().a("statsdk", "new session:" + str);
      DataCore.getInstance().putSession(str);
      if (this.g != 1) {
        break label194;
      }
      localContext = (Context)this.d.get();
      DataCore.getInstance().flush(localContext);
      ag.a(this.a).b();
      if (this.g != 1) {
        break label253;
      }
      ag.a(this.a, (Context)this.d.get());
    }
    for (;;)
    {
      aa.a().b(localContext);
      return;
      label194:
      if (this.g == 2)
      {
        DataCore.getInstance().flush(((Fragment)this.e.get()).getActivity());
        break;
      }
      if (this.g != 3) {
        break;
      }
      localContext = ag.a(this.f.get());
      DataCore.getInstance().flush(localContext);
      break;
      label253:
      if (this.g == 2) {
        ag.a(this.a, ((Fragment)this.e.get()).getActivity());
      } else {
        ag.a(this.a, localContext);
      }
    }
  }
}
