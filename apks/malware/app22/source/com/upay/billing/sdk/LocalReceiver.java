package com.upay.billing.sdk;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import com.upay.billing.utils.Json;
import java.util.HashMap;

public class LocalReceiver
  extends BroadcastReceiver
{
  private Upay ie;
  
  public LocalReceiver(Upay paramUpay)
  {
    this.ie = paramUpay;
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    int j = 0;
    int i = 1;
    if (paramIntent != null)
    {
      paramContext = paramIntent.getStringExtra("appKey");
      if ((paramContext != null) && (paramContext.equals(this.ie.appKey))) {
        break label35;
      }
    }
    for (;;)
    {
      return;
      label35:
      paramIntent = Json.parse(paramIntent.getStringExtra("data"));
      String str1 = paramIntent.getStr("action", null);
      String str2 = paramIntent.getStr("goodsKey", null);
      String str3 = paramIntent.getStr("tradeId", null);
      String str4 = paramIntent.getStr("extra", null);
      int k = paramIntent.getInt("result", Integer.valueOf(0)).intValue();
      UpayCallback localUpayCallback = (UpayCallback)this.ie.mapCallbacks.get(str3);
      UpayInitCallback localUpayInitCallback = (UpayInitCallback)this.ie.mapInitCallbacks.get(paramContext);
      if ((localUpayCallback != null) || (localUpayInitCallback != null))
      {
        if ("onPaymentResult".equals(str1))
        {
          i = paramIntent.getInt("resultCode", Integer.valueOf(0)).intValue();
          localUpayCallback.onPaymentResult(str2, str3, i, paramIntent.getStr("errorMsg", null), str4);
          if (i != 200) {
            i = 1;
          }
        }
        while (i != 0)
        {
          this.ie.mapCallbacks.remove(str3);
          this.ie.mapInitCallbacks.remove(paramContext);
          return;
          i = 0;
          continue;
          if ("onTradeProgress".equals(str1))
          {
            j = paramIntent.getInt("price", Integer.valueOf(0)).intValue();
            int m = paramIntent.getInt("paid", Integer.valueOf(0)).intValue();
            localUpayCallback.onTradeProgress(str2, str3, j, m, str4, k);
            if ((j == 0) || (j != m)) {
              for (;;)
              {
                i = 0;
              }
            }
          }
          else
          {
            i = j;
            if ("onInitResult".equals(str1))
            {
              localUpayInitCallback.onInitResult(paramIntent.getInt("resultCode", Integer.valueOf(0)).intValue(), paramIntent.getStr("errorMsg", null));
              i = j;
            }
          }
        }
      }
    }
  }
}
