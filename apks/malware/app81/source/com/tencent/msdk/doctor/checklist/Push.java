package com.tencent.msdk.doctor.checklist;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.ResolveInfo;
import android.content.pm.ServiceInfo;
import com.tencent.msdk.config.ConfigManager;
import com.tencent.msdk.doctor.CheckBase;
import com.tencent.msdk.tools.Logger;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Push
  extends CheckBase
{
  public Push(Activity paramActivity)
  {
    super(paramActivity);
  }
  
  public ArrayList<String> check()
  {
    localArrayList = new ArrayList();
    String str = this.mContext.getPackageName();
    if (!ConfigManager.needPush(this.mContext)) {
      Logger.d("push closed, no need check");
    }
    for (;;)
    {
      return localArrayList;
      for (;;)
      {
        try
        {
          Class.forName("com.tencent.android.tpush.XGPushActivity");
        }
        catch (ClassNotFoundException localClassNotFoundException)
        {
          Object localObject1;
          localArrayList.add("Xg_sdk.jar is not contained in your library");
          return localArrayList;
        }
        try
        {
          localObject1 = this.mContext.getPackageManager().getActivityInfo(new ComponentName(str, "com.tencent.android.tpush.XGPushActivity"), 128);
          if (((ActivityInfo)localObject1).exported != true) {
            localArrayList.add("the exported of " + "com.tencent.android.tpush.XGPushActivity" + " must be true");
          }
          if (((ActivityInfo)localObject1).theme != 16973909) {
            localArrayList.add("the theme of " + "com.tencent.android.tpush.XGPushActivity" + " need to fill in android:style/Theme.NoDisplay");
          }
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException2)
        {
          localArrayList.add("XGPushActivity must be defined in AndroidManifest.xml");
          continue;
        }
        try
        {
          localObject1 = this.mContext.getPackageManager().getServiceInfo(new ComponentName(str, "com.tencent.android.tpush.service.XGPushService"), 128);
          if (((ServiceInfo)localObject1).exported != true) {
            localArrayList.add("the exported of " + "com.tencent.android.tpush.service.XGPushService" + " must be true");
          }
          if (!((ServiceInfo)localObject1).processName.contains(":xg_service_v2")) {
            localArrayList.add("the process of " + "com.tencent.android.tpush.service.XGPushService" + " must be " + ":xg_service_v2");
          }
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException3)
        {
          localArrayList.add("Lack of recevice: " + "com.tencent.android.tpush.XGPushReceiver");
          continue;
          int j = 0;
          localObject2 = ((List)localObject2).iterator();
          ResolveInfo localResolveInfo;
          do
          {
            i = j;
            if (!((Iterator)localObject2).hasNext()) {
              break;
            }
            localResolveInfo = (ResolveInfo)((Iterator)localObject2).next();
          } while ((localResolveInfo.serviceInfo == null) || (!"com.tencent.android.tpush.rpc.XGRemoteService".equals(localResolveInfo.serviceInfo.name)));
          int i = 1;
          if (i != 0) {
            continue;
          }
          localArrayList.add("the action of " + "com.tencent.android.tpush.rpc.XGRemoteService" + " must be" + localNameNotFoundException3);
          continue;
        }
        try
        {
          if (this.mContext.getPackageManager().getServiceInfo(new ComponentName(str, "com.tencent.android.tpush.rpc.XGRemoteService"), 128).exported != true) {
            localArrayList.add("the exported of " + "com.tencent.android.tpush.rpc.XGRemoteService" + " must be true");
          }
          localObject1 = str + ".PUSH_ACTION";
          localObject2 = this.mContext.getPackageManager().queryIntentServices(new Intent((String)localObject1), 0);
          if ((localObject2 != null) && (((List)localObject2).size() != 0)) {
            break label567;
          }
          localArrayList.add("the action of " + "com.tencent.android.tpush.rpc.XGRemoteService" + " must be " + (String)localObject1);
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException4)
        {
          localArrayList.add("Lack of recevice: " + "com.tencent.android.tpush.rpc.XGRemoteService");
          continue;
        }
        try
        {
          if (this.mContext.getPackageManager().getReceiverInfo(new ComponentName(str, "com.tencent.android.tpush.XGPushReceiver"), 128).processName.contains(":xg_service_v2")) {
            break;
          }
          localArrayList.add("the process of " + "com.tencent.android.tpush.XGPushReceiver" + " must be " + ":xg_service_v2");
          return localArrayList;
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException1)
        {
          localArrayList.add("Lack of recevice: " + "com.tencent.android.tpush.XGPushReceiver");
          return localArrayList;
        }
      }
    }
  }
}
