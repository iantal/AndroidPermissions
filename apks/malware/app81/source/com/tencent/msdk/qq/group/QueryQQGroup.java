package com.tencent.msdk.qq.group;

import com.tencent.msdk.WeGame;
import com.tencent.msdk.WeGameNotifyGame;
import com.tencent.msdk.api.GroupRet;
import com.tencent.msdk.remote.api.RemoteApiBase;
import com.tencent.msdk.remote.api.RemoteApiWhat;
import com.tencent.msdk.remote.api.SafeJSONObject;
import com.tencent.msdk.tools.Logger;
import org.json.JSONException;
import org.json.JSONObject;

public class QueryQQGroup
  extends RemoteApiBase
{
  private static final String EVENT_NAME = "QueryQQGroup";
  private static final String PATH = "/relation/get_group_detail";
  
  public QueryQQGroup(String paramString1, String paramString2)
  {
    Logger.d("appid" + this.appId + ";openid" + this.openId + ";unionid" + paramString1 + ";zoneid" + paramString2);
    try
    {
      this.jsonBody.put("appid", this.appId);
      this.jsonBody.put("openid", this.openId);
      this.jsonBody.put("accessToken", this.accessToken);
      this.jsonBody.put("opt", 0);
      this.jsonBody.put("unionid", paramString1);
      this.jsonBody.put("zoneid", paramString2);
      return;
    }
    catch (JSONException paramString1)
    {
      paramString1.printStackTrace();
    }
  }
  
  protected int getMyId()
  {
    return RemoteApiWhat.QueryQQGroup.ordinal();
  }
  
  protected String getPath()
  {
    return "/relation/get_group_detail";
  }
  
  public void onFailure(String paramString, int paramInt1, int paramInt2)
  {
    if (paramInt2 != getMyId())
    {
      Logger.d("a wrong callback");
      return;
    }
    Logger.d("onFailure " + paramString + " statusCode: " + paramInt1);
    reportEventToBeacon("QueryQQGroup", false, paramInt1, false);
    GroupRet localGroupRet = new GroupRet();
    localGroupRet.flag = -1;
    localGroupRet.errorCode = paramInt1;
    localGroupRet.desc = paramString;
    localGroupRet.platform = WeGame.QQPLATID;
    WeGameNotifyGame.getInstance().NotifyGameQueryQQGroupInfo(localGroupRet);
  }
  
  public void onSuccess(String paramString, int paramInt1, int paramInt2)
  {
    if (paramInt2 != getMyId())
    {
      Logger.d("a wrong callback");
      return;
    }
    if (paramString == null)
    {
      Logger.d("onsuccess response data is null");
      reportEventToBeacon("QueryQQGroup", false, 1002, false);
      return;
    }
    Logger.d("onSuccess " + paramString);
    GroupRet localGroupRet = new GroupRet();
    for (;;)
    {
      try
      {
        localObject = new SafeJSONObject(paramString);
        if (localObject != null)
        {
          paramInt2 = ((JSONObject)localObject).getInt("ret");
          localGroupRet.errorCode = ((JSONObject)localObject).getInt("platCode");
          localGroupRet.desc = getNetDesc((JSONObject)localObject, getClass().getName());
          localGroupRet.platform = WeGame.QQPLATID;
          if (paramInt2 != 0) {
            continue;
          }
          localGroupRet.flag = 0;
          if (((JSONObject)localObject).getString("groupName") != null)
          {
            str1 = ((JSONObject)localObject).getString("groupName");
            if (((JSONObject)localObject).getString("fingerMemo") == null) {
              break label487;
            }
            str2 = ((JSONObject)localObject).getString("fingerMemo");
            if (((JSONObject)localObject).getString("memberNum") == null) {
              break label494;
            }
            str3 = ((JSONObject)localObject).getString("memberNum");
            if (((JSONObject)localObject).getString("maxNum") == null) {
              break label501;
            }
            str4 = ((JSONObject)localObject).getString("maxNum");
            if (((JSONObject)localObject).getString("ownerOpenid") == null) {
              break label508;
            }
            str5 = ((JSONObject)localObject).getString("ownerOpenid");
            if (((JSONObject)localObject).getString("unionid") == null) {
              break label515;
            }
            str6 = ((JSONObject)localObject).getString("unionid");
            if (((JSONObject)localObject).getString("zoneid") == null) {
              break label522;
            }
            str7 = ((JSONObject)localObject).getString("zoneid");
            if (((JSONObject)localObject).getString("adminOpenids") == null) {
              break label529;
            }
            str8 = ((JSONObject)localObject).getString("adminOpenids");
            if (((JSONObject)localObject).getString("groupOpenid") == null) {
              break label536;
            }
            str9 = ((JSONObject)localObject).getString("groupOpenid");
            if (((JSONObject)localObject).getString("joinGroupKey") == null) {
              break label543;
            }
            localObject = ((JSONObject)localObject).getString("joinGroupKey");
            localGroupRet.mGroupInfo = new QQGroupInfo(str1, str2, str3, str4, str5, str6, str7, str8, str9, (String)localObject);
            reportEventToBeacon("QueryQQGroup", true, 0, false);
          }
        }
        else
        {
          return;
        }
        String str1 = "";
        continue;
        Logger.d("QueryQQGroup onsuccess, ret:" + paramInt2);
        reportEventToBeacon("QueryQQGroup", false, paramInt2, true);
        continue;
        String str2 = "";
      }
      catch (JSONException localJSONException)
      {
        localJSONException.printStackTrace();
        Logger.d("json error(QueryQQGroup): " + paramString + " statusCode: " + paramInt1);
        reportEventToBeacon("QueryQQGroup", false, 1001, false);
        return;
      }
      finally
      {
        WeGameNotifyGame.getInstance().NotifyGameQueryQQGroupInfo(localGroupRet);
      }
      label487:
      continue;
      label494:
      String str3 = "";
      continue;
      label501:
      String str4 = "";
      continue;
      label508:
      String str5 = "";
      continue;
      label515:
      String str6 = "";
      continue;
      label522:
      String str7 = "";
      continue;
      label529:
      String str8 = "";
      continue;
      label536:
      String str9 = "";
      continue;
      label543:
      Object localObject = "";
    }
  }
}
