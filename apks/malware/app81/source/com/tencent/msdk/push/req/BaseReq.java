package com.tencent.msdk.push.req;

import android.os.Handler;
import android.os.Looper;
import com.tencent.msdk.WeGame;
import com.tencent.msdk.communicator.HttpRequestManager;
import com.tencent.msdk.communicator.IHttpRequestListener;
import com.tencent.msdk.remote.api.SafeJSONObject;
import com.tencent.msdk.tools.Logger;
import org.json.JSONObject;

public abstract class BaseReq
  implements IHttpRequestListener
{
  protected JSONObject jsonBody = new SafeJSONObject();
  
  public BaseReq() {}
  
  protected String getCustomDomain()
  {
    return WeGame.getInstance().getApiDomain();
  }
  
  protected String getExtUrlParams()
  {
    return "";
  }
  
  protected abstract int getMyId();
  
  protected String getPath()
  {
    return "";
  }
  
  public void send()
  {
    send(this.jsonBody.toString());
  }
  
  protected void send(final String paramString)
  {
    final String str = getCustomDomain() + getPath();
    Logger.d("url: " + str);
    Logger.d("body: " + paramString);
    new Handler(Looper.getMainLooper()).post(new Runnable()
    {
      public void run()
      {
        new HttpRequestManager(BaseReq.this).postTextAsync(str, paramString, BaseReq.this.getMyId());
      }
    });
  }
}
