package com.tencent.tpshell;

import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.IBinder;
import android.os.Messenger;

public class WaitingBarServiceManager
{
  private static WaitingBarServiceManager mInstance = new WaitingBarServiceManager();
  boolean mBound = false;
  boolean mCanceled = false;
  private ServiceConnection mConnection = new ServiceConnection()
  {
    public void onServiceConnected(ComponentName paramAnonymousComponentName, IBinder paramAnonymousIBinder)
    {
      try
      {
        WaitingBarServiceManager.this.mService = new Messenger(paramAnonymousIBinder);
        WaitingBarServiceManager.this.mBound = true;
        if (WaitingBarServiceManager.this.mCanceled) {
          WaitingBarServiceManager.this.mContext.unbindService(WaitingBarServiceManager.this.mConnection);
        }
        return;
      }
      finally {}
    }
    
    public void onServiceDisconnected(ComponentName paramAnonymousComponentName)
    {
      WaitingBarServiceManager.this.mService = null;
      WaitingBarServiceManager.this.mBound = false;
    }
  };
  Context mContext = null;
  Messenger mService = null;
  
  public WaitingBarServiceManager() {}
  
  public static WaitingBarServiceManager getInstance()
  {
    return mInstance;
  }
  
  public void bindService(Context paramContext, Intent paramIntent)
  {
    this.mContext = paramContext;
    paramContext.bindService(paramIntent, this.mConnection, 1);
  }
  
  public void unbindService()
  {
    try
    {
      if (this.mContext == null) {
        return;
      }
      this.mCanceled = true;
      if (this.mBound) {
        this.mContext.unbindService(this.mConnection);
      }
      return;
    }
    finally {}
  }
}
