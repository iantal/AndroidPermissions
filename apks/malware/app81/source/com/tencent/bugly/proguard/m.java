package com.tencent.bugly.proguard;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import com.tencent.bugly.crashreport.common.strategy.c;

public final class m
  extends SQLiteOpenHelper
{
  private Context a;
  
  public m(Context paramContext)
  {
    super(paramContext, "bugly_db", null, 2);
    this.a = paramContext;
  }
  
  /* Error */
  private boolean a(SQLiteDatabase paramSQLiteDatabase)
  {
    // Byte code:
    //   0: iconst_1
    //   1: istore 5
    //   3: aload_0
    //   4: monitorenter
    //   5: iconst_3
    //   6: anewarray 23	java/lang/String
    //   9: astore 6
    //   11: aload 6
    //   13: iconst_0
    //   14: ldc 25
    //   16: aastore
    //   17: aload 6
    //   19: iconst_1
    //   20: ldc 27
    //   22: aastore
    //   23: aload 6
    //   25: iconst_2
    //   26: ldc 29
    //   28: aastore
    //   29: aload 6
    //   31: arraylength
    //   32: istore_3
    //   33: iconst_0
    //   34: istore_2
    //   35: iload 5
    //   37: istore 4
    //   39: iload_2
    //   40: iload_3
    //   41: if_icmpge +52 -> 93
    //   44: aload 6
    //   46: iload_2
    //   47: aaload
    //   48: astore 7
    //   50: aload_1
    //   51: new 31	java/lang/StringBuilder
    //   54: dup
    //   55: ldc 33
    //   57: invokespecial 36	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   60: aload 7
    //   62: invokevirtual 40	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   65: invokevirtual 44	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   68: invokevirtual 49	android/database/sqlite/SQLiteDatabase:execSQL	(Ljava/lang/String;)V
    //   71: iload_2
    //   72: iconst_1
    //   73: iadd
    //   74: istore_2
    //   75: goto -40 -> 35
    //   78: astore_1
    //   79: aload_1
    //   80: invokestatic 55	com/tencent/bugly/proguard/u:b	(Ljava/lang/Throwable;)Z
    //   83: ifne +7 -> 90
    //   86: aload_1
    //   87: invokevirtual 59	java/lang/Throwable:printStackTrace	()V
    //   90: iconst_0
    //   91: istore 4
    //   93: aload_0
    //   94: monitorexit
    //   95: iload 4
    //   97: ireturn
    //   98: astore_1
    //   99: aload_0
    //   100: monitorexit
    //   101: aload_1
    //   102: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	103	0	this	m
    //   0	103	1	paramSQLiteDatabase	SQLiteDatabase
    //   34	41	2	i	int
    //   32	10	3	j	int
    //   37	59	4	bool1	boolean
    //   1	35	5	bool2	boolean
    //   9	36	6	arrayOfString	String[]
    //   48	13	7	str	String
    // Exception table:
    //   from	to	target	type
    //   5	11	78	java/lang/Throwable
    //   29	33	78	java/lang/Throwable
    //   50	71	78	java/lang/Throwable
    //   5	11	98	finally
    //   29	33	98	finally
    //   50	71	98	finally
    //   79	90	98	finally
  }
  
  public final SQLiteDatabase getReadableDatabase()
  {
    int i = 0;
    Object localObject = null;
    while ((localObject == null) && (i < 5))
    {
      i += 1;
      try
      {
        SQLiteDatabase localSQLiteDatabase2 = super.getReadableDatabase();
        localObject = localSQLiteDatabase2;
      }
      catch (Throwable localThrowable)
      {
        u.b("try db count %d", new Object[] { Integer.valueOf(i) });
        if (i == 5) {
          u.c("get db fail!", new Object[0]);
        }
        try
        {
          Thread.sleep(200L);
        }
        catch (InterruptedException localInterruptedException)
        {
          localInterruptedException.printStackTrace();
        }
      }
      finally {}
    }
    return localSQLiteDatabase1;
  }
  
  public final SQLiteDatabase getWritableDatabase()
  {
    Object localObject2 = null;
    int i = 0;
    Object localObject1 = null;
    while ((localObject1 == null) && (i < 5))
    {
      i += 1;
      try
      {
        SQLiteDatabase localSQLiteDatabase2 = super.getWritableDatabase();
        localObject1 = localSQLiteDatabase2;
      }
      catch (Throwable localThrowable)
      {
        u.b("try db %d", new Object[] { Integer.valueOf(i) });
        if (i == 5) {
          u.c("get db fail!", new Object[0]);
        }
        try
        {
          Thread.sleep(200L);
        }
        catch (InterruptedException localInterruptedException)
        {
          localInterruptedException.printStackTrace();
        }
      }
      finally {}
    }
    if (localSQLiteDatabase1 == null)
    {
      u.b("db error delay error record 1min", new Object[0]);
      if (localThrowable != null) {
        break label134;
      }
    }
    label134:
    for (final String str = "";; str = str.getClass().getName() + ":" + str.getMessage())
    {
      t.a().a(new Runnable()
      {
        public final void run()
        {
          c.a().a(str);
        }
      }, 60000L);
      return localSQLiteDatabase1;
    }
  }
  
  public final void onCreate(SQLiteDatabase paramSQLiteDatabase)
  {
    try
    {
      Object localObject = new StringBuilder();
      ((StringBuilder)localObject).append(" CREATE TABLE t_cr").append(" ( _id").append(" INTEGER PRIMARY KEY").append(" , _tm").append(" int").append(" , _s1").append(" text").append(" , _up").append(" int").append(" , _me").append(" int").append(" , _uc").append(" int").append(" , _dt").append(" blob").append(" ) ");
      String str = ((StringBuilder)localObject).toString();
      u.a();
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE t_ui").append(" ( _id").append(" INTEGER PRIMARY KEY").append(" , _tm").append(" int").append(" , _ut").append(" int").append(" , _tp").append(" int").append(" , _dt").append(" blob").append(" , _pc").append(" text").append(" ) ");
      str = ((StringBuilder)localObject).toString();
      u.a();
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE t_lr").append(" ( _id").append(" INTEGER PRIMARY KEY").append(" , _tp").append(" int").append(" , _tm").append(" int").append(" , _pc").append(" text").append(" , _th").append(" text").append(" , _dt").append(" blob").append(" ) ");
      localObject = ((StringBuilder)localObject).toString();
      u.a();
      paramSQLiteDatabase.execSQL((String)localObject);
      return;
    }
    catch (Throwable paramSQLiteDatabase)
    {
      for (;;)
      {
        if (!u.b(paramSQLiteDatabase)) {
          paramSQLiteDatabase.printStackTrace();
        }
      }
    }
    finally {}
  }
  
  /* Error */
  @android.annotation.TargetApi(11)
  public final void onDowngrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: invokestatic 188	com/tencent/bugly/proguard/a:d	()I
    //   5: bipush 11
    //   7: if_icmplt +40 -> 47
    //   10: ldc -66
    //   12: iconst_2
    //   13: anewarray 69	java/lang/Object
    //   16: dup
    //   17: iconst_0
    //   18: iload_2
    //   19: invokestatic 75	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   22: aastore
    //   23: dup
    //   24: iconst_1
    //   25: iload_3
    //   26: invokestatic 75	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   29: aastore
    //   30: invokestatic 78	com/tencent/bugly/proguard/u:b	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   33: pop
    //   34: aload_0
    //   35: aload_1
    //   36: invokespecial 192	com/tencent/bugly/proguard/m:a	(Landroid/database/sqlite/SQLiteDatabase;)Z
    //   39: ifeq +11 -> 50
    //   42: aload_0
    //   43: aload_1
    //   44: invokevirtual 194	com/tencent/bugly/proguard/m:onCreate	(Landroid/database/sqlite/SQLiteDatabase;)V
    //   47: aload_0
    //   48: monitorexit
    //   49: return
    //   50: ldc -60
    //   52: iconst_0
    //   53: anewarray 69	java/lang/Object
    //   56: invokestatic 78	com/tencent/bugly/proguard/u:b	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   59: pop
    //   60: aload_0
    //   61: getfield 17	com/tencent/bugly/proguard/m:a	Landroid/content/Context;
    //   64: ldc 12
    //   66: invokevirtual 202	android/content/Context:getDatabasePath	(Ljava/lang/String;)Ljava/io/File;
    //   69: astore_1
    //   70: aload_1
    //   71: ifnull -24 -> 47
    //   74: aload_1
    //   75: invokevirtual 207	java/io/File:canWrite	()Z
    //   78: ifeq -31 -> 47
    //   81: aload_1
    //   82: invokevirtual 210	java/io/File:delete	()Z
    //   85: pop
    //   86: goto -39 -> 47
    //   89: astore_1
    //   90: aload_0
    //   91: monitorexit
    //   92: aload_1
    //   93: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	94	0	this	m
    //   0	94	1	paramSQLiteDatabase	SQLiteDatabase
    //   0	94	2	paramInt1	int
    //   0	94	3	paramInt2	int
    // Exception table:
    //   from	to	target	type
    //   2	47	89	finally
    //   50	70	89	finally
    //   74	86	89	finally
  }
  
  /* Error */
  public final void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc -42
    //   4: iconst_2
    //   5: anewarray 69	java/lang/Object
    //   8: dup
    //   9: iconst_0
    //   10: iload_2
    //   11: invokestatic 75	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   14: aastore
    //   15: dup
    //   16: iconst_1
    //   17: iload_3
    //   18: invokestatic 75	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   21: aastore
    //   22: invokestatic 78	com/tencent/bugly/proguard/u:b	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   25: pop
    //   26: aload_0
    //   27: aload_1
    //   28: invokespecial 192	com/tencent/bugly/proguard/m:a	(Landroid/database/sqlite/SQLiteDatabase;)Z
    //   31: ifeq +11 -> 42
    //   34: aload_0
    //   35: aload_1
    //   36: invokevirtual 194	com/tencent/bugly/proguard/m:onCreate	(Landroid/database/sqlite/SQLiteDatabase;)V
    //   39: aload_0
    //   40: monitorexit
    //   41: return
    //   42: ldc -60
    //   44: iconst_0
    //   45: anewarray 69	java/lang/Object
    //   48: invokestatic 78	com/tencent/bugly/proguard/u:b	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   51: pop
    //   52: aload_0
    //   53: getfield 17	com/tencent/bugly/proguard/m:a	Landroid/content/Context;
    //   56: ldc 12
    //   58: invokevirtual 202	android/content/Context:getDatabasePath	(Ljava/lang/String;)Ljava/io/File;
    //   61: astore_1
    //   62: aload_1
    //   63: ifnull -24 -> 39
    //   66: aload_1
    //   67: invokevirtual 207	java/io/File:canWrite	()Z
    //   70: ifeq -31 -> 39
    //   73: aload_1
    //   74: invokevirtual 210	java/io/File:delete	()Z
    //   77: pop
    //   78: goto -39 -> 39
    //   81: astore_1
    //   82: aload_0
    //   83: monitorexit
    //   84: aload_1
    //   85: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	86	0	this	m
    //   0	86	1	paramSQLiteDatabase	SQLiteDatabase
    //   0	86	2	paramInt1	int
    //   0	86	3	paramInt2	int
    // Exception table:
    //   from	to	target	type
    //   2	39	81	finally
    //   42	62	81	finally
    //   66	78	81	finally
  }
}
