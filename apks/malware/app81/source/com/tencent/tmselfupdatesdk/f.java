package com.tencent.tmselfupdatesdk;

import android.os.Handler;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmdownloader.ITMAssistantDownloadClientListener;
import com.tencent.tmdownloader.TMAssistantDownloadClient;
import java.lang.ref.WeakReference;
import java.util.ArrayList;
import java.util.Iterator;

class f
  implements ITMAssistantDownloadClientListener
{
  f(TMSelfUpdateManager paramTMSelfUpdateManager) {}
  
  public void OnDownloadSDKTaskProgressChanged(TMAssistantDownloadClient paramTMAssistantDownloadClient, String paramString, long paramLong1, long paramLong2)
  {
    TMLog.i("TMSelfUpdateManager", "enter");
    TMLog.i("TMSelfUpdateManager", "client: " + paramTMAssistantDownloadClient + "; url: " + paramString + "; receiveDataLen: " + paramLong1 + "; totalDataLen: " + paramLong2);
    paramTMAssistantDownloadClient = this.a.b.iterator();
    while (paramTMAssistantDownloadClient.hasNext())
    {
      paramString = ((WeakReference)paramTMAssistantDownloadClient.next()).get();
      if (paramString == null) {
        TMLog.i("TMSelfUpdateManager", "listener = null");
      } else if ((paramString instanceof ITMSelfUpdateListener)) {
        ((ITMSelfUpdateListener)paramString).onDownloadAppProgressChanged(paramLong1, paramLong2);
      }
    }
    TMLog.i("TMSelfUpdateManager", "exit");
  }
  
  public void OnDownloadSDKTaskStateChanged(TMAssistantDownloadClient paramTMAssistantDownloadClient, String paramString1, int paramInt1, int paramInt2, String paramString2)
  {
    TMLog.i("TMSelfUpdateManager", "enter");
    TMLog.i("TMSelfUpdateManager", "clientKey:" + paramTMAssistantDownloadClient + ",state:" + paramInt1 + ",url:" + paramString1);
    if (paramInt1 == 2) {
      this.a.a(1, 0, "SelfUpdate DownloadSDKTaskState_DOWNLOADING!");
    }
    for (;;)
    {
      TMLog.i("TMSelfUpdateManager", "exit");
      return;
      if (paramInt1 == 4) {
        this.a.c.post(new g(this, paramString1, paramInt1));
      } else if (paramInt1 == 5) {
        this.a.a(2, -17, "mClientSDKListener,OnDownloadSDKTaskStateChanged,DownloadSDKTaskState_FAILED!");
      }
    }
  }
  
  public void OnDwonloadSDKServiceInvalid(TMAssistantDownloadClient paramTMAssistantDownloadClient)
  {
    TMLog.i("TMSelfUpdateManager", "enter");
    TMLog.i("TMSelfUpdateManager", "clientKey:" + paramTMAssistantDownloadClient);
    this.a.a(2, -16, "SelfUpdate DwonloadSDKServiceInvalid!");
    TMLog.i("TMSelfUpdateManager", "exit");
  }
}
