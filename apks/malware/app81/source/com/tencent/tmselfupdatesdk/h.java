package com.tencent.tmselfupdatesdk;

import com.tencent.tmapkupdatesdk.ApkUpdateListener;
import com.tencent.tmapkupdatesdk.model.ApkUpdateDetail;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmselfupdatesdk.model.TMSelfUpdateUpdateInfo;
import java.util.ArrayList;

class h
  implements ApkUpdateListener
{
  h(TMSelfUpdateManager paramTMSelfUpdateManager) {}
  
  public void onCheckUpdateFailed(String paramString)
  {
    TMLog.i("TMSelfUpdateManager", "enter");
    TMLog.i("TMSelfUpdateManager", "arg0: " + paramString);
    if (TMSelfUpdateManager.isMergeApk)
    {
      TMSelfUpdateManager localTMSelfUpdateManager = this.a;
      StringBuilder localStringBuilder = new StringBuilder().append("onCheckUpdateFailed; message=");
      if (paramString != null) {
        localTMSelfUpdateManager.a(2, -12, paramString);
      }
    }
    for (;;)
    {
      TMLog.i("TMSelfUpdateManager", "exit");
      return;
      paramString = "";
      break;
      paramString = new TMSelfUpdateUpdateInfo(1, 0, 0L, 0L, "", "", (byte)0);
      TMSelfUpdateManager.a(this.a, paramString);
    }
  }
  
  public void onCheckUpdateSucceed(ArrayList paramArrayList)
  {
    TMLog.i("TMSelfUpdateManager", "enter");
    ApkUpdateDetail localApkUpdateDetail;
    label139:
    label219:
    int i;
    if ((paramArrayList != null) && (paramArrayList.size() > 0))
    {
      TMLog.i("TMSelfUpdateManager", "onCheckUpdateSucceed apkUpdateDetailList size: " + paramArrayList.size());
      localApkUpdateDetail = (ApkUpdateDetail)paramArrayList.get(0);
      if (TMSelfUpdateManager.isMergeApk)
      {
        if (localApkUpdateDetail != null)
        {
          StringBuilder localStringBuilder = new StringBuilder().append("selfUpdateDetail:pakgname=");
          if (localApkUpdateDetail.packageName != null)
          {
            paramArrayList = localApkUpdateDetail.packageName;
            localStringBuilder = localStringBuilder.append(paramArrayList).append("; versioncode=").append(localApkUpdateDetail.versioncode).append("; updatemethod=").append(localApkUpdateDetail.updatemethod).append("; url=");
            if (localApkUpdateDetail.url == null) {
              break label219;
            }
            paramArrayList = localApkUpdateDetail.url;
            TMLog.i("TMSelfUpdateManager", paramArrayList + "; overwriteChannelid=" + localApkUpdateDetail.overwriteChannelid);
            this.a.h = localApkUpdateDetail.updatemethod;
            this.a.i = localApkUpdateDetail.url;
            this.a.overwriteChannelid = localApkUpdateDetail.overwriteChannelid;
            TMSelfUpdateManager.a(this.a);
          }
        }
        for (;;)
        {
          TMLog.i("TMSelfUpdateManager", "exit");
          return;
          paramArrayList = "";
          break;
          paramArrayList = "";
          break label139;
          this.a.a(2, -13, "onCheckUpdateSucceed,but apkUpdateDetailList is null!");
        }
      }
      if (localApkUpdateDetail != null) {
        if (localApkUpdateDetail.updatemethod == 1) {
          i = 0;
        }
      }
    }
    for (;;)
    {
      paramArrayList = new TMSelfUpdateUpdateInfo(0, i, localApkUpdateDetail.newapksize, localApkUpdateDetail.patchsize, localApkUpdateDetail.newFeature, localApkUpdateDetail.url, localApkUpdateDetail.overwriteChannelid);
      TMSelfUpdateManager.a(this.a, paramArrayList);
      break;
      if (localApkUpdateDetail.updatemethod == 2)
      {
        i = 1;
      }
      else
      {
        if (localApkUpdateDetail.updatemethod == 4)
        {
          i = 2;
          continue;
          paramArrayList = new TMSelfUpdateUpdateInfo(2, 0, 0L, 0L, "", "", (byte)0);
          TMSelfUpdateManager.a(this.a, paramArrayList);
          break;
          TMLog.i("TMSelfUpdateManager", "apkUpdateDetailList == null || apkUpdateDetailList.size() <=0");
          if (TMSelfUpdateManager.isMergeApk)
          {
            this.a.a(0, -15, "SelfUpdate success, NO Update!");
            break;
          }
          paramArrayList = new TMSelfUpdateUpdateInfo(0, 0, 0L, 0L, "", "", (byte)0);
          TMSelfUpdateManager.a(this.a, paramArrayList);
          break;
        }
        i = 0;
      }
    }
  }
}
