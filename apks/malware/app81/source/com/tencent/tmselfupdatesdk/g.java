package com.tencent.tmselfupdatesdk;

import android.text.TextUtils;
import com.tencent.tmassistant.aidl.TMAssistantDownloadTaskInfo;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmdownloader.TMAssistantDownloadClient;

class g
  implements Runnable
{
  g(f paramF, String paramString, int paramInt) {}
  
  public void run()
  {
    try
    {
      if (this.c.a.a(true) == null) {
        break label354;
      }
      Object localObject = this.c.a.a(true).getDownloadTaskState(this.a);
      if (localObject == null) {
        break label338;
      }
      localObject = ((TMAssistantDownloadTaskInfo)localObject).mSavePath;
      TMLog.i("TMSelfUpdateManager", "mClientSDKListener,url:" + this.a + "; state:" + this.b + "; patchPath:" + (String)localObject);
      if (TextUtils.isEmpty((CharSequence)localObject)) {
        break label322;
      }
      if (this.c.a.h == 4)
      {
        TMSelfUpdateManager.a(this.c.a, (String)localObject);
        return;
      }
      if (this.c.a.h == 2)
      {
        TMLog.i("TMSelfUpdateManager", "OnDownloadSDKTaskStateChanged download finished overwriteChannelid = " + this.c.a.overwriteChannelid);
        this.c.a.writeChannelIdAfterUpdate((String)localObject);
        TMSelfUpdateManager.a(this.c.a, (String)localObject, this.c.a.hostPackageName, this.c.a.updateType);
        this.c.a.a(0, 0, "SelfUpdate success !");
        return;
      }
    }
    catch (Exception localException)
    {
      this.c.a.a(2, -20, "mClientSDKListener," + localException.getMessage());
      TMLog.e("TMSelfUpdateManager", "exception:", localException);
      localException.printStackTrace();
      return;
    }
    if (this.c.a.h == 1)
    {
      this.c.a.a(0, -15, "SelfUpdate success, NO Update!");
      return;
    }
    this.c.a.a(2, -20, "OnDownloadSDKTaskStateChanged,OnDownloadSDKTaskStateChanged,unknown exception!");
    return;
    label322:
    this.c.a.a(2, -19, "SelfUpdate failure,OnDownloadSDKTaskStateChanged SelfUpdateSDKErrorCode_getSavePath_IS_NULL!");
    return;
    label338:
    this.c.a.a(2, -19, "SelfUpdate failure,OnDownloadSDKTaskStateChanged SelfUpdateSDKErrorCode_GetDownloadTaskState_IS_NULL!");
    return;
    label354:
    this.c.a.a(2, -18, "SelfUpdate failure, TMAssistantDownloadSDKClient_IS_NULL!");
  }
}
