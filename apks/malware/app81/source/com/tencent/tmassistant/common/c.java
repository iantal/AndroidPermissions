package com.tencent.tmassistant.common;

import android.os.Bundle;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.Looper;
import android.os.Message;
import com.tencent.tmassistantbase.util.ParamPair;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmdownloader.ITMAssistantDownloadClientListener;
import com.tencent.tmdownloader.TMAssistantDownloadClient;

public class c
  extends Handler
{
  protected static c a = null;
  protected static HandlerThread b = null;
  
  private c(Looper paramLooper)
  {
    super(paramLooper);
  }
  
  public static c a()
  {
    try
    {
      if (a == null)
      {
        b = new HandlerThread("TMAssistantDownloadSDKMessageThread");
        b.start();
        a = new c(b.getLooper());
      }
      c localC = a;
      return localC;
    }
    finally {}
  }
  
  public void a(TMAssistantDownloadClient paramTMAssistantDownloadClient, ITMAssistantDownloadClientListener paramITMAssistantDownloadClientListener)
  {
    if ((paramITMAssistantDownloadClientListener == null) || (paramTMAssistantDownloadClient == null)) {
      return;
    }
    Message localMessage = a().obtainMessage();
    localMessage.what = 3;
    localMessage.obj = new ParamPair(paramTMAssistantDownloadClient, paramITMAssistantDownloadClientListener);
    localMessage.sendToTarget();
  }
  
  public void a(TMAssistantDownloadClient paramTMAssistantDownloadClient, ITMAssistantDownloadClientListener paramITMAssistantDownloadClientListener, String paramString1, int paramInt1, int paramInt2, String paramString2)
  {
    if ((paramITMAssistantDownloadClientListener == null) || (paramTMAssistantDownloadClient == null)) {
      return;
    }
    Message localMessage = a().obtainMessage();
    localMessage.what = 1;
    localMessage.obj = new ParamPair(paramTMAssistantDownloadClient, paramITMAssistantDownloadClientListener);
    paramTMAssistantDownloadClient = new Bundle();
    paramTMAssistantDownloadClient.putString("url", paramString1);
    paramTMAssistantDownloadClient.putInt("state", paramInt1);
    paramTMAssistantDownloadClient.putInt("errorCode", paramInt2);
    paramTMAssistantDownloadClient.putString("errorMsg", paramString2);
    localMessage.setData(paramTMAssistantDownloadClient);
    localMessage.sendToTarget();
  }
  
  public void a(TMAssistantDownloadClient paramTMAssistantDownloadClient, ITMAssistantDownloadClientListener paramITMAssistantDownloadClientListener, String paramString, long paramLong1, long paramLong2)
  {
    if ((paramITMAssistantDownloadClientListener == null) || (paramTMAssistantDownloadClient == null))
    {
      TMLog.i("TMAssistantDownloadSDKMessageThread", "listenr:" + paramITMAssistantDownloadClientListener + " === sdkClient" + paramTMAssistantDownloadClient);
      return;
    }
    Message localMessage = a().obtainMessage();
    localMessage.what = 2;
    localMessage.obj = new ParamPair(paramTMAssistantDownloadClient, paramITMAssistantDownloadClientListener);
    paramTMAssistantDownloadClient = new Bundle();
    paramTMAssistantDownloadClient.putString("url", paramString);
    paramTMAssistantDownloadClient.putLong("receiveDataLen", paramLong1);
    paramTMAssistantDownloadClient.putLong("totalDataLen", paramLong2);
    localMessage.setData(paramTMAssistantDownloadClient);
    localMessage.sendToTarget();
  }
  
  public void handleMessage(Message paramMessage)
  {
    super.handleMessage(paramMessage);
    switch (paramMessage.what)
    {
    }
    Object localObject1;
    do
    {
      Object localObject2;
      Object localObject3;
      long l1;
      long l2;
      do
      {
        int i;
        int j;
        do
        {
          return;
          localObject2 = (ParamPair)paramMessage.obj;
          localObject1 = (TMAssistantDownloadClient)((ParamPair)localObject2).mFirstParam;
          localObject2 = (ITMAssistantDownloadClientListener)((ParamPair)localObject2).mSecondParam;
          localObject3 = paramMessage.getData();
          paramMessage = ((Bundle)localObject3).getString("url");
          i = ((Bundle)localObject3).getInt("state");
          j = ((Bundle)localObject3).getInt("errorCode");
          localObject3 = ((Bundle)localObject3).getString("errorMsg");
        } while (localObject2 == null);
        ((ITMAssistantDownloadClientListener)localObject2).OnDownloadSDKTaskStateChanged((TMAssistantDownloadClient)localObject1, paramMessage, i, j, (String)localObject3);
        return;
        localObject2 = (ParamPair)paramMessage.obj;
        localObject1 = (TMAssistantDownloadClient)((ParamPair)localObject2).mFirstParam;
        localObject2 = (ITMAssistantDownloadClientListener)((ParamPair)localObject2).mSecondParam;
        paramMessage = paramMessage.getData();
        localObject3 = paramMessage.getString("url");
        l1 = paramMessage.getLong("receiveDataLen");
        l2 = paramMessage.getLong("totalDataLen");
      } while (localObject2 == null);
      ((ITMAssistantDownloadClientListener)localObject2).OnDownloadSDKTaskProgressChanged((TMAssistantDownloadClient)localObject1, (String)localObject3, l1, l2);
      return;
      localObject1 = (ParamPair)paramMessage.obj;
      paramMessage = (TMAssistantDownloadClient)((ParamPair)localObject1).mFirstParam;
      localObject1 = (ITMAssistantDownloadClientListener)((ParamPair)localObject1).mSecondParam;
    } while (localObject1 == null);
    ((ITMAssistantDownloadClientListener)localObject1).OnDwonloadSDKServiceInvalid(paramMessage);
  }
}
