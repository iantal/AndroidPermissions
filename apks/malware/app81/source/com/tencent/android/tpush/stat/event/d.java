package com.tencent.android.tpush.stat.event;

import android.content.Context;
import com.tencent.android.tpush.XGPushConfig;
import com.tencent.android.tpush.stat.a.a;
import com.tencent.android.tpush.stat.a.g;
import com.tencent.android.tpush.stat.a.k;
import com.tencent.android.tpush.stat.t;
import org.json.JSONObject;

public abstract class d
{
  public static String i = "xgsdk";
  protected static String k = null;
  protected String b = null;
  protected long c = 0L;
  protected long d;
  protected int e;
  protected a f = null;
  protected int g;
  protected String h = null;
  protected String j = null;
  protected boolean l = false;
  protected long m = 0L;
  protected Context n;
  
  d(Context paramContext, int paramInt, long paramLong)
  {
    this.n = paramContext;
    this.c = paramLong;
    this.b = ("Axg" + paramLong);
    this.d = (System.currentTimeMillis() / 1000L);
    this.e = paramInt;
    this.j = g.b(paramContext, paramLong);
    this.f = t.a(paramContext).b(paramContext);
    if (b() != EventType.NETWORK_DETECTOR) {}
    for (this.g = g.n(paramContext).intValue();; this.g = (-EventType.NETWORK_DETECTOR.a()))
    {
      if ((k == null) || (k.trim().length() < 40))
      {
        k = XGPushConfig.getToken(paramContext);
        if (!g.c(k)) {
          k = "0";
        }
      }
      return;
    }
  }
  
  public abstract boolean a(JSONObject paramJSONObject);
  
  public abstract EventType b();
  
  public boolean b(JSONObject paramJSONObject)
  {
    try
    {
      k.a(paramJSONObject, "ky", this.b);
      paramJSONObject.put("et", b().a());
      if (this.f != null)
      {
        paramJSONObject.put("ui", this.f.b());
        k.a(paramJSONObject, "mc", this.f.c());
        int i1 = this.f.d();
        paramJSONObject.put("ut", i1);
        if ((i1 == 0) && (g.p(this.n) == 1)) {
          paramJSONObject.put("ia", 1);
        }
      }
      k.a(paramJSONObject, "cui", this.h);
      if (b() != EventType.SESSION_ENV)
      {
        k.a(paramJSONObject, "av", this.j);
        k.a(paramJSONObject, "ch", i);
      }
      if (this.l) {
        paramJSONObject.put("impt", 1);
      }
      k.a(paramJSONObject, "mid", k);
      paramJSONObject.put("idx", this.g);
      paramJSONObject.put("si", this.e);
      if (b() == EventType.CUSTOM)
      {
        paramJSONObject.put("ts", this.m);
        paramJSONObject.put("cts", this.d);
      }
      for (;;)
      {
        paramJSONObject.put("sv", g.a(this.n, this.c));
        paramJSONObject.put("dts", g.a(this.n, false));
        return a(paramJSONObject);
        paramJSONObject.put("ts", this.d);
      }
      return false;
    }
    catch (Throwable paramJSONObject) {}
  }
  
  public long c()
  {
    return this.d;
  }
  
  public Context d()
  {
    return this.n;
  }
  
  public boolean e()
  {
    return this.l;
  }
  
  public String f()
  {
    try
    {
      Object localObject = new JSONObject();
      b((JSONObject)localObject);
      localObject = ((JSONObject)localObject).toString();
      return localObject;
    }
    catch (Throwable localThrowable) {}
    return "";
  }
}
