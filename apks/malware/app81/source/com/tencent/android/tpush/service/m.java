package com.tencent.android.tpush.service;

import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.os.Process;
import com.tencent.android.tpush.logging.TLog;
import com.tencent.android.tpush.service.channel.b;
import com.tencent.android.tpush.service.d.d;

class m
  extends Handler
{
  m(l paramL, Looper paramLooper)
  {
    super(paramLooper);
  }
  
  public void handleMessage(Message paramMessage)
  {
    super.handleMessage(paramMessage);
    if (paramMessage != null) {}
    switch (paramMessage.what)
    {
    default: 
      return;
    }
    if (!l.a(this.a))
    {
      paramMessage = new Intent();
      paramMessage.setClass(l.h(), XGPushService.class);
      l.h().stopService(paramMessage);
      return;
    }
    if (!l.i())
    {
      TLog.i("XGService", ">> Service's first running @@" + l.h().getPackageName());
      l.a(true);
      if (!com.tencent.android.tpush.common.l.a(l.h()))
      {
        TLog.e("XGService", "permission check failed, kill service!");
        this.a.e();
        Process.killProcess(Process.myPid());
      }
      d.b(l.h());
      a.a().a(l.h());
    }
    b.b().c();
  }
}
