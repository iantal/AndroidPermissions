package com.tencent.android.tpush.service;

import com.qq.taf.jce.JceStruct;
import com.tencent.android.tpush.logging.TLog;
import com.tencent.android.tpush.service.cache.CacheManager;
import com.tencent.android.tpush.service.channel.exception.ChannelException;
import com.tencent.android.tpush.service.channel.protocol.TpnsReconnectReq;
import com.tencent.android.tpush.service.channel.protocol.TpnsReconnectRsp;
import java.util.ArrayList;

class p
  implements com.tencent.android.tpush.service.channel.o
{
  p(o paramO) {}
  
  public void a(JceStruct paramJceStruct1, int paramInt, JceStruct paramJceStruct2, com.tencent.android.tpush.service.channel.a paramA)
  {
    int i = 0;
    TLog.v("XGService", "@@ TpnsMessage.IEventListener.onResponse reponseCode:" + paramInt);
    if (paramInt == 0)
    {
      TLog.i("XGService", ">> reconn success rsp=" + paramA.c() + " @host=" + paramA.f() + " @http=" + paramA.b());
      if (paramJceStruct1 != null)
      {
        StringBuilder localStringBuilder = new StringBuilder().append(">> unregInfoList size=");
        if ((paramJceStruct1 == null) || (((TpnsReconnectReq)paramJceStruct1).unregInfoList == null))
        {
          paramInt = 0;
          TLog.i("XGService", paramInt);
          CacheManager.updateUnregUninList(l.f(), ((TpnsReconnectReq)paramJceStruct1).unregInfoList);
          localStringBuilder = new StringBuilder().append(">> recvMsgList size=");
          if ((paramJceStruct1 != null) && (((TpnsReconnectReq)paramJceStruct1).recvMsgList != null)) {
            break label342;
          }
          paramInt = 0;
          label176:
          TLog.i("XGService", paramInt);
          com.tencent.android.tpush.service.b.a.a().c(l.f(), ((TpnsReconnectReq)paramJceStruct1).recvMsgList);
          com.tencent.android.tpush.service.b.a.a().b(l.f(), ((TpnsReconnectReq)paramJceStruct1).msgClickList);
        }
      }
      else
      {
        paramJceStruct1 = (TpnsReconnectRsp)paramJceStruct2;
        if ((paramJceStruct1 != null) && (paramJceStruct1.appOfflinePushMsgList != null) && (paramJceStruct1.appOfflinePushMsgList.size() > 0))
        {
          paramJceStruct2 = new StringBuilder().append(">> appOfflinePushMsgList size=");
          paramInt = i;
          if (paramJceStruct1 != null) {
            if (paramJceStruct1.appOfflinePushMsgList != null) {
              break label356;
            }
          }
        }
      }
      label342:
      label356:
      for (paramInt = i;; paramInt = paramJceStruct1.appOfflinePushMsgList.size())
      {
        TLog.i("XGService", paramInt);
        com.tencent.android.tpush.service.b.a.a().a(paramJceStruct1.appOfflinePushMsgList, paramJceStruct1.timeUs, paramA);
        if (paramJceStruct1 != null) {
          this.a.a(paramA.b(), paramJceStruct1.confVersion);
        }
        return;
        paramInt = ((TpnsReconnectReq)paramJceStruct1).unregInfoList.size();
        break;
        paramInt = ((TpnsReconnectReq)paramJceStruct1).recvMsgList.size();
        break label176;
      }
    }
    TLog.e("XGService", ">> reconn failed responseCode=" + paramInt);
  }
  
  public void a(JceStruct paramJceStruct, com.tencent.android.tpush.service.channel.a paramA) {}
  
  public void a(JceStruct paramJceStruct, ChannelException paramChannelException, com.tencent.android.tpush.service.channel.a paramA)
  {
    TLog.v("XGService", "@@ TpnsMessage.IEventListener.onMessageSendFailed " + paramChannelException.errorCode + "," + paramChannelException.getMessage());
  }
}
