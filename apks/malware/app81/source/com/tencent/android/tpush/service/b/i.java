package com.tencent.android.tpush.service.b;

import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import com.tencent.android.tpush.logging.TLog;
import com.tencent.android.tpush.rpc.g;
import com.tencent.android.tpush.service.l;

class i
  implements Runnable
{
  private com.tencent.android.tpush.rpc.a c;
  private g d = new g();
  private ServiceConnection e = new j(this);
  
  i(a paramA, Intent paramIntent) {}
  
  public void run()
  {
    try
    {
      this.a.removeCategory("android.intent.category.BROWSABLE");
      this.a.setAction(this.a.getPackage() + ".PUSH_ACTION");
      this.d.a(this.e);
      TLog.tf("XGService", "SendBroadcastByRPC pkg:" + this.a.getPackage() + ",intent:" + this.a);
      l.f().bindService(this.a, this.e, 1);
      return;
    }
    catch (Throwable localThrowable)
    {
      do
      {
        TLog.e("XGService", "SendBroadcastByRPC -> bindService", localThrowable);
      } while (!(localThrowable instanceof SecurityException));
      try
      {
        this.a.setAction("com.tencent.android.tpush.action.INTERNAL_PUSH_MESSAGE");
        TLog.i("XGService", "SendBroadcastByIntent -> PushServiceManager.getContext().sendBroadcast" + this.a);
        l.f().sendBroadcast(this.a);
        return;
      }
      catch (Exception localException)
      {
        TLog.e("XGService", "SendBroadcastByRPC -> sendBroadcast", localException);
      }
    }
  }
}
