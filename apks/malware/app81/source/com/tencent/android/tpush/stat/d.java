package com.tencent.android.tpush.stat;

import android.content.Context;
import com.tencent.android.tpush.stat.a.i;
import com.tencent.android.tpush.stat.a.j;
import java.util.Iterator;
import org.json.JSONException;
import org.json.JSONObject;

public class d
{
  static e a;
  static e b;
  static String c;
  static String d;
  static boolean e;
  public static boolean f;
  static volatile String g;
  static int h = 0;
  private static i i = ;
  private static StatReportStrategy j;
  private static boolean k;
  private static boolean l;
  private static int m;
  private static int n;
  private static int o;
  private static int p;
  private static int q;
  private static volatile String r;
  private static boolean s;
  
  static
  {
    a = new e(2);
    b = new e(1);
    j = StatReportStrategy.APP_LAUNCH;
    k = false;
    l = true;
    m = 100000;
    n = 30;
    o = 10;
    p = 100;
    q = 30;
    c = "__HIBERNATE__";
    d = "__HIBERNATE__TIME";
    e = true;
    f = true;
    g = "pingma.qq.com:80";
    r = "http://pingma.qq.com:80/mstat/report";
    s = false;
  }
  
  public static StatReportStrategy a()
  {
    return j;
  }
  
  public static void a(int paramInt)
  {
    if (!a(paramInt, 2, 1000))
    {
      i.e("setMaxBatchReportCount can not exceed the range of [2,1000].");
      return;
    }
    q = paramInt;
  }
  
  static void a(long paramLong)
  {
    j.b(g.a(), c, paramLong);
    b(false);
    i.c("MTA is disable for current SDK version");
  }
  
  static void a(Context paramContext, e paramE)
  {
    if (paramE.a == b.a)
    {
      b = paramE;
      a(b.b);
    }
    while (paramE.a != a.a) {
      return;
    }
    a = paramE;
  }
  
  static void a(Context paramContext, e paramE, JSONObject paramJSONObject)
  {
    int i1 = 0;
    for (;;)
    {
      try
      {
        Iterator localIterator = paramJSONObject.keys();
        if (localIterator.hasNext())
        {
          String str = (String)localIterator.next();
          if (str.equalsIgnoreCase("v"))
          {
            int i2 = paramJSONObject.getInt(str);
            if (paramE.d != i2)
            {
              i1 = 1;
              paramE.d = i2;
              break;
            }
          }
          else
          {
            if (str.equalsIgnoreCase("c"))
            {
              str = paramJSONObject.getString("c");
              if (str.length() <= 0) {
                break label211;
              }
              paramE.b = new JSONObject(str);
              break label211;
            }
            if (!str.equalsIgnoreCase("m")) {
              break label214;
            }
            paramE.c = paramJSONObject.getString("m");
            break label214;
          }
        }
        else
        {
          if (i1 == 1)
          {
            paramJSONObject = t.a(g.a());
            if (paramJSONObject != null) {
              paramJSONObject.a(paramE);
            }
            if (paramE.a == b.a)
            {
              a(paramE.b);
              b(paramE.b);
            }
          }
          a(paramContext, paramE);
          return;
        }
      }
      catch (JSONException paramContext)
      {
        i.b(paramContext);
        return;
      }
      catch (Throwable paramContext)
      {
        i.b(paramContext);
        return;
      }
    }
    label211:
    label214:
    for (;;)
    {
      break;
    }
  }
  
  static void a(Context paramContext, JSONObject paramJSONObject)
  {
    for (;;)
    {
      try
      {
        Iterator localIterator = paramJSONObject.keys();
        if (localIterator.hasNext())
        {
          localObject = (String)localIterator.next();
          if (((String)localObject).equalsIgnoreCase(Integer.toString(b.a)))
          {
            localObject = paramJSONObject.getJSONObject((String)localObject);
            a(paramContext, b, (JSONObject)localObject);
          }
        }
        else
        {
          return;
        }
      }
      catch (JSONException paramContext)
      {
        i.b(paramContext);
      }
      do
      {
        if (((String)localObject).equalsIgnoreCase(Integer.toString(a.a)))
        {
          localObject = paramJSONObject.getJSONObject((String)localObject);
          a(paramContext, a, (JSONObject)localObject);
          break;
        }
      } while (!((String)localObject).equalsIgnoreCase("rs"));
      Object localObject = StatReportStrategy.a(paramJSONObject.getInt((String)localObject));
      if (localObject != null)
      {
        j = (StatReportStrategy)localObject;
        if (b()) {
          i.h("Change to ReportStrategy:" + ((StatReportStrategy)localObject).name());
        }
      }
    }
  }
  
  public static void a(StatReportStrategy paramStatReportStrategy)
  {
    j = paramStatReportStrategy;
    if (b()) {
      i.h("Change to statSendStrategy: " + paramStatReportStrategy);
    }
  }
  
  static void a(JSONObject paramJSONObject)
  {
    try
    {
      paramJSONObject = StatReportStrategy.a(paramJSONObject.getInt("rs"));
      if (paramJSONObject != null) {
        a(paramJSONObject);
      }
      return;
    }
    catch (JSONException paramJSONObject)
    {
      while (!b()) {}
      i.b("rs not found.");
    }
  }
  
  public static void a(boolean paramBoolean)
  {
    k = paramBoolean;
    com.tencent.android.tpush.stat.a.g.b().a(paramBoolean);
  }
  
  static boolean a(int paramInt1, int paramInt2, int paramInt3)
  {
    return (paramInt1 >= paramInt2) && (paramInt1 <= paramInt3);
  }
  
  public static void b(int paramInt)
  {
    if (paramInt >= 0) {
      h = paramInt;
    }
  }
  
  static void b(JSONObject paramJSONObject)
  {
    if ((paramJSONObject == null) || (paramJSONObject.length() == 0)) {}
    for (;;)
    {
      return;
      try
      {
        paramJSONObject = paramJSONObject.getString(c);
        if (b()) {
          i.h("hibernateVer:" + paramJSONObject + ", current version:" + "2.0.4");
        }
        long l1 = com.tencent.android.tpush.stat.a.g.b(paramJSONObject);
        if (com.tencent.android.tpush.stat.a.g.b("2.0.4") <= l1)
        {
          a(l1);
          return;
        }
      }
      catch (JSONException paramJSONObject)
      {
        i.h("__HIBERNATE__ not found.");
      }
    }
  }
  
  public static void b(boolean paramBoolean)
  {
    l = paramBoolean;
    if (!paramBoolean) {
      i.c("!!!!!!MTA StatService has been disabled!!!!!!");
    }
  }
  
  public static boolean b()
  {
    return k;
  }
  
  public static void c(boolean paramBoolean)
  {
    e = paramBoolean;
  }
  
  public static boolean c()
  {
    return l;
  }
  
  public static int d()
  {
    return p;
  }
  
  public static void d(boolean paramBoolean)
  {
    f = paramBoolean;
  }
  
  public static int e()
  {
    return q;
  }
  
  public static void e(boolean paramBoolean)
  {
    s = paramBoolean;
  }
  
  public static int f()
  {
    return o;
  }
  
  static int g()
  {
    return n;
  }
  
  public static int h()
  {
    return m;
  }
  
  public static boolean i()
  {
    return f;
  }
  
  public static String j()
  {
    return r;
  }
  
  public static boolean k()
  {
    return s;
  }
}
