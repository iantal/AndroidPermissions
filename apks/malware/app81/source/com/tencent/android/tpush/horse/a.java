package com.tencent.android.tpush.horse;

import com.tencent.android.tpush.logging.TLog;
import java.util.Iterator;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.atomic.AtomicInteger;

public abstract class a
{
  private static final Object a = new Object();
  private LinkedBlockingQueue b = new LinkedBlockingQueue();
  private ConcurrentHashMap c = new ConcurrentHashMap();
  private b d;
  private AtomicInteger e = new AtomicInteger(0);
  private volatile boolean f = false;
  
  public a() {}
  
  public int a()
  {
    return this.e.get();
  }
  
  public void a(int paramInt)
  {
    TLog.v("XGHorse", "@@ stopOtherHorse(" + paramInt + ")");
    try
    {
      if (!this.c.isEmpty())
      {
        Iterator localIterator = this.c.keySet().iterator();
        while (localIterator.hasNext())
        {
          int i = ((Integer)localIterator.next()).intValue();
          if (i != paramInt)
          {
            c localC = (c)this.c.get(Integer.valueOf(i));
            if ((localC != null) && (localC.a() != null)) {
              localC.a().c();
            }
          }
        }
      }
      return;
    }
    catch (Exception localException)
    {
      TLog.e("XGHorse", localException.getMessage());
    }
    ((c)this.c.remove(Integer.valueOf(paramInt))).interrupt();
  }
  
  public void a(b paramB)
  {
    this.d = paramB;
  }
  
  /* Error */
  void a(java.util.List paramList)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc 60
    //   4: ldc -114
    //   6: invokestatic 84	com/tencent/android/tpush/logging/TLog:v	(Ljava/lang/String;Ljava/lang/String;)V
    //   9: aload_1
    //   10: ifnull +13 -> 23
    //   13: iconst_1
    //   14: aload_1
    //   15: invokeinterface 147 1 0
    //   20: if_icmple +30 -> 50
    //   23: aload_0
    //   24: getfield 49	com/tencent/android/tpush/horse/a:d	Lcom/tencent/android/tpush/horse/b;
    //   27: ifnull +20 -> 47
    //   30: aload_0
    //   31: invokevirtual 149	com/tencent/android/tpush/horse/a:c	()Z
    //   34: ifne +13 -> 47
    //   37: aload_0
    //   38: getfield 49	com/tencent/android/tpush/horse/a:d	Lcom/tencent/android/tpush/horse/b;
    //   41: aconst_null
    //   42: invokeinterface 154 2 0
    //   47: aload_0
    //   48: monitorexit
    //   49: return
    //   50: aload_0
    //   51: getfield 29	com/tencent/android/tpush/horse/a:b	Ljava/util/concurrent/LinkedBlockingQueue;
    //   54: invokevirtual 157	java/util/concurrent/LinkedBlockingQueue:clear	()V
    //   57: aload_0
    //   58: iconst_0
    //   59: putfield 43	com/tencent/android/tpush/horse/a:f	Z
    //   62: aload_0
    //   63: invokevirtual 159	com/tencent/android/tpush/horse/a:b	()V
    //   66: aload_1
    //   67: invokeinterface 160 1 0
    //   72: astore_1
    //   73: aload_1
    //   74: invokeinterface 103 1 0
    //   79: ifeq -32 -> 47
    //   82: aload_1
    //   83: invokeinterface 106 1 0
    //   88: checkcast 162	com/tencent/android/tpush/horse/data/StrategyItem
    //   91: astore_2
    //   92: aload_0
    //   93: getfield 29	com/tencent/android/tpush/horse/a:b	Ljava/util/concurrent/LinkedBlockingQueue;
    //   96: aload_2
    //   97: invokevirtual 166	java/util/concurrent/LinkedBlockingQueue:contains	(Ljava/lang/Object;)Z
    //   100: ifne -27 -> 73
    //   103: aload_0
    //   104: getfield 29	com/tencent/android/tpush/horse/a:b	Ljava/util/concurrent/LinkedBlockingQueue;
    //   107: aload_2
    //   108: invokevirtual 169	java/util/concurrent/LinkedBlockingQueue:add	(Ljava/lang/Object;)Z
    //   111: pop
    //   112: aload_0
    //   113: getfield 41	com/tencent/android/tpush/horse/a:e	Ljava/util/concurrent/atomic/AtomicInteger;
    //   116: invokevirtual 172	java/util/concurrent/atomic/AtomicInteger:incrementAndGet	()I
    //   119: pop
    //   120: goto -47 -> 73
    //   123: astore_1
    //   124: aload_0
    //   125: monitorexit
    //   126: aload_1
    //   127: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	128	0	this	a
    //   0	128	1	paramList	java.util.List
    //   91	17	2	localStrategyItem	com.tencent.android.tpush.horse.data.StrategyItem
    // Exception table:
    //   from	to	target	type
    //   2	9	123	finally
    //   13	23	123	finally
    //   23	47	123	finally
    //   50	73	123	finally
    //   73	120	123	finally
  }
  
  public void b()
  {
    TLog.v("XGHorse", "@@ reSetRemain()");
    this.e.set(0);
  }
  
  public boolean c()
  {
    return this.e.get() > 0;
  }
  
  public boolean d()
  {
    return this.f;
  }
  
  public LinkedBlockingQueue e()
  {
    return this.b;
  }
  
  public abstract void f();
  
  public abstract void g();
  
  public void h()
  {
    TLog.v("XGHorse", "@@ startTask()");
    int i = 0;
    for (;;)
    {
      if (i < 2) {
        try
        {
          if ((this.c.get(Integer.valueOf(i)) == null) || (((c)this.c.get(Integer.valueOf(i))).getState() == Thread.State.TERMINATED))
          {
            c localC = new c(this, i);
            this.c.put(Integer.valueOf(i), localC);
            localC.start();
          }
          else if (!((c)this.c.get(Integer.valueOf(i))).isAlive())
          {
            ((c)this.c.get(Integer.valueOf(i))).start();
          }
        }
        catch (Exception localException)
        {
          this.c.remove(Integer.valueOf(i));
          TLog.e("XGHorse", localException.getMessage());
        }
      }
      return;
      i += 1;
    }
  }
}
