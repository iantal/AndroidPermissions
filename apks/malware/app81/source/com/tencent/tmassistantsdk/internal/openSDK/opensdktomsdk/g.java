package com.tencent.tmassistantsdk.internal.openSDK.opensdktomsdk;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.TextUtils;
import com.qq.taf.jce.JceStruct;
import com.tencent.tmassistant.aidl.TMAssistantDownloadTaskInfo;
import com.tencent.tmassistant.b;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmassistantsdk.TMAssistantCallYYB_V1;
import com.tencent.tmassistantsdk.internal.protocol.jce.TipsInfoLog;

class g
  implements Runnable
{
  g(TMAssistantAuthorizedManager paramTMAssistantAuthorizedManager, String paramString1, String paramString2) {}
  
  public void run()
  {
    if ((this.c.mContext != null) && (this.c.mOpenSDK != null) && (!TextUtils.isEmpty(this.a))) {
      this.c.insertActionId = this.c.mOpenSDK.addDownloadTaskFromAuthorize(this.a);
    }
    Object localObject1 = this.c.getClient();
    if (localObject1 == null) {}
    Object localObject2;
    label261:
    do
    {
      return;
      for (;;)
      {
        int i;
        try
        {
          Object localObject3 = new Bundle();
          i = ((b)localObject1).a(this.b, "application/vnd.android.package-archive", (Bundle)localObject3);
          if (4 == i)
          {
            localObject1 = ((b)localObject1).a(this.b).mSavePath;
            localObject3 = new Message();
            ((Message)localObject3).what = 0;
            ((Message)localObject3).obj = localObject1;
            this.c.mMainMessageHandler.sendMessage((Message)localObject3);
            if (i != 4) {
              break label261;
            }
            localObject1 = com.tencent.tmassistantsdk.internal.c.g.h().a(this.c.mAuthorizedInfo);
            if (localObject1 == null) {
              break;
            }
            ((TipsInfoLog)localObject1).installBtnClickCount += 1;
            com.tencent.tmassistantsdk.internal.c.g.h().a((JceStruct)localObject1);
            return;
          }
        }
        catch (Exception localException)
        {
          localException.printStackTrace();
          return;
        }
        if (i == 0)
        {
          TMLog.i("OpensdkToMsdkManager", "start success!");
        }
        else if (1 == i)
        {
          localObject2 = new Message();
          ((Message)localObject2).what = 5;
          ((Message)localObject2).obj = Integer.valueOf(1);
          this.c.mMainMessageHandler.sendMessage((Message)localObject2);
        }
        else
        {
          localObject2 = new Message();
          ((Message)localObject2).what = 3;
          this.c.mMainMessageHandler.sendMessage((Message)localObject2);
        }
      }
      localObject2 = com.tencent.tmassistantsdk.internal.c.g.h().a(this.c.mAuthorizedInfo);
    } while (localObject2 == null);
    ((TipsInfoLog)localObject2).downloadBtnClickCount += 1;
    com.tencent.tmassistantsdk.internal.c.g.h().a((JceStruct)localObject2);
  }
}
