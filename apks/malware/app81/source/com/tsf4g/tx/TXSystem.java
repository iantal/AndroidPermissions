package com.tsf4g.tx;

import android.bluetooth.BluetoothAdapter;
import android.content.Context;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Build;
import android.os.Build.VERSION;
import android.provider.Settings.Secure;
import android.telephony.TelephonyManager;
import android.util.Log;

public class TXSystem
{
  private String m_szAndroidId = null;
  private String m_szBundleId = null;
  private String m_szDeviceId = null;
  private String m_szMacAddress = null;
  private String m_szModel = null;
  private String m_szSerial = null;
  private String m_szSysVersion = null;
  private String m_szUdid = null;
  private String m_szWlanMacAddress = null;
  
  public TXSystem() {}
  
  private String getDeviceID(Context paramContext)
  {
    return ((TelephonyManager)paramContext.getSystemService("phone")).getDeviceId();
  }
  
  private String getMacAddress()
  {
    return BluetoothAdapter.getDefaultAdapter().getAddress();
  }
  
  private String getWlanMacAddress(Context paramContext)
  {
    return ((WifiManager)paramContext.getSystemService("wifi")).getConnectionInfo().getMacAddress();
  }
  
  public String GetBundleId(Context paramContext)
  {
    try
    {
      this.m_szBundleId = paramContext.getPackageName();
      paramContext = this.m_szBundleId;
      return paramContext;
    }
    catch (Exception paramContext)
    {
      Log.e("TXSystem", "Exception:" + paramContext);
    }
    return null;
  }
  
  public String GetModel()
  {
    this.m_szModel = Build.MODEL;
    if (this.m_szModel != null) {
      return this.m_szModel;
    }
    return "Model unknown";
  }
  
  public String GetSysVersion()
  {
    this.m_szSysVersion = Build.VERSION.RELEASE;
    if (this.m_szSysVersion != null) {
      return this.m_szSysVersion;
    }
    return "SysVersion unknown";
  }
  
  public String GetUdid(Context paramContext)
  {
    this.m_szDeviceId = getDeviceID(paramContext);
    this.m_szSerial = Build.SERIAL;
    this.m_szAndroidId = Settings.Secure.getString(paramContext.getContentResolver(), "android_id");
    this.m_szWlanMacAddress = getWlanMacAddress(paramContext);
    this.m_szMacAddress = getMacAddress();
    paramContext = new StringBuilder();
    if (this.m_szDeviceId != null)
    {
      paramContext.append("%");
      paramContext.append(this.m_szDeviceId);
    }
    if (this.m_szSerial != null)
    {
      paramContext.append("%");
      paramContext.append(this.m_szSerial);
    }
    if (this.m_szAndroidId != null)
    {
      paramContext.append("%");
      paramContext.append(this.m_szAndroidId);
    }
    this.m_szUdid = paramContext.toString();
    if (this.m_szUdid.length() == 0) {
      this.m_szUdid = "Udid Unknown";
    }
    this.m_szUdid = this.m_szUdid.replace(":", "");
    return this.m_szUdid;
  }
}
