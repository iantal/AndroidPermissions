.class Lcom/tencent/msdk/remote/api/GetLocationInfo;
.super Lcom/tencent/msdk/remote/api/RemoteApiBase;
.source "ReportLocationInfo.java"


# static fields
.field private static final EVENT_NAME:Ljava/lang/String; = "GetLocationInfo"

.field private static final PATH:Ljava/lang/String; = "/relation/set_location/"


# instance fields
.field private location:Lcom/tencent/msdk/lbs/LocationInfo;


# direct methods
.method public constructor <init>(Lcom/tencent/msdk/lbs/LocationInfo;)V
    .locals 4
    .param p1, "loc"    # Lcom/tencent/msdk/lbs/LocationInfo;

    .prologue
    .line 22
    invoke-direct {p0}, Lcom/tencent/msdk/remote/api/RemoteApiBase;-><init>()V

    .line 17
    new-instance v1, Lcom/tencent/msdk/lbs/LocationInfo;

    invoke-direct {v1}, Lcom/tencent/msdk/lbs/LocationInfo;-><init>()V

    iput-object v1, p0, Lcom/tencent/msdk/remote/api/GetLocationInfo;->location:Lcom/tencent/msdk/lbs/LocationInfo;

    .line 23
    iput-object p1, p0, Lcom/tencent/msdk/remote/api/GetLocationInfo;->location:Lcom/tencent/msdk/lbs/LocationInfo;

    .line 25
    :try_start_0
    iget-object v1, p0, Lcom/tencent/msdk/remote/api/GetLocationInfo;->jsonBody:Lorg/json/JSONObject;

    const-string v2, "locInfo"

    iget-object v3, p0, Lcom/tencent/msdk/remote/api/GetLocationInfo;->location:Lcom/tencent/msdk/lbs/LocationInfo;

    invoke-virtual {v1, v2, v3}, Lorg/json/JSONObject;->put(Ljava/lang/String;Ljava/lang/Object;)Lorg/json/JSONObject;

    .line 26
    iget-object v1, p0, Lcom/tencent/msdk/remote/api/GetLocationInfo;->jsonBody:Lorg/json/JSONObject;

    const-string v2, "pf"

    const-string v3, "openmobile_android"

    invoke-virtual {v1, v2, v3}, Lorg/json/JSONObject;->put(Ljava/lang/String;Ljava/lang/Object;)Lorg/json/JSONObject;
    :try_end_0
    .catch Lorg/json/JSONException; {:try_start_0 .. :try_end_0} :catch_0

    .line 30
    :goto_0
    return-void

    .line 27
    :catch_0
    move-exception v0

    .line 28
    .local v0, "e":Lorg/json/JSONException;
    invoke-virtual {v0}, Lorg/json/JSONException;->printStackTrace()V

    goto :goto_0
.end method

.method private callback(ILjava/lang/String;DD)V
    .locals 3
    .param p1, "flag"    # I
    .param p2, "msg"    # Ljava/lang/String;
    .param p3, "latitude"    # D
    .param p5, "longitude"    # D

    .prologue
    .line 92
    new-instance v0, Lcom/tencent/msdk/api/LocationRet;

    invoke-direct {v0}, Lcom/tencent/msdk/api/LocationRet;-><init>()V

    .line 93
    .local v0, "locationRet":Lcom/tencent/msdk/api/LocationRet;
    iput p1, v0, Lcom/tencent/msdk/api/LocationRet;->flag:I

    .line 94
    iput-object p2, v0, Lcom/tencent/msdk/api/LocationRet;->desc:Ljava/lang/String;

    .line 96
    new-instance v1, Lcom/tencent/msdk/api/LoginRet;

    invoke-direct {v1}, Lcom/tencent/msdk/api/LoginRet;-><init>()V

    .line 97
    .local v1, "lr":Lcom/tencent/msdk/api/LoginRet;
    invoke-static {v1}, Lcom/tencent/msdk/login/LoginUtils;->getLocalLoginRet(Lcom/tencent/msdk/api/LoginRet;)I

    .line 98
    iget v2, v1, Lcom/tencent/msdk/api/LoginRet;->platform:I

    iput v2, v0, Lcom/tencent/msdk/api/LocationRet;->platform:I

    .line 100
    iput-wide p3, v0, Lcom/tencent/msdk/api/LocationRet;->latitude:D

    .line 101
    iput-wide p5, v0, Lcom/tencent/msdk/api/LocationRet;->longitude:D

    .line 103
    invoke-static {}, Lcom/tencent/msdk/WeGameNotifyGame;->getInstance()Lcom/tencent/msdk/WeGameNotifyGame;

    move-result-object v2

    invoke-virtual {v2, v0}, Lcom/tencent/msdk/WeGameNotifyGame;->OnGetLocationInfoCallback(Lcom/tencent/msdk/api/LocationRet;)V

    .line 104
    return-void
.end method


# virtual methods
.method protected getMyId()I
    .locals 1

    .prologue
    .line 83
    sget-object v0, Lcom/tencent/msdk/remote/api/RemoteApiWhat;->GetLocationInfo:Lcom/tencent/msdk/remote/api/RemoteApiWhat;

    invoke-virtual {v0}, Lcom/tencent/msdk/remote/api/RemoteApiWhat;->ordinal()I

    move-result v0

    return v0
.end method

.method protected getPath()Ljava/lang/String;
    .locals 1

    .prologue
    .line 88
    const-string v0, "/relation/set_location/"

    return-object v0
.end method

.method public onFailure(Ljava/lang/String;II)V
    .locals 10
    .param p1, "errorContent"    # Ljava/lang/String;
    .param p2, "statusCode"    # I
    .param p3, "what"    # I

    .prologue
    const/4 v9, 0x0

    .line 61
    invoke-virtual {p0}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->getMyId()I

    move-result v1

    if-eq p3, v1, :cond_0

    .line 62
    const-string v1, "a wrong callback"

    invoke-static {v1}, Lcom/tencent/msdk/tools/Logger;->d(Ljava/lang/String;)V

    .line 79
    :goto_0
    return-void

    .line 66
    :cond_0
    const-string v3, ""

    .line 67
    .local v3, "msg":Ljava/lang/String;
    const-wide/16 v4, 0x0

    .line 68
    .local v4, "latitude":D
    const-wide/16 v6, 0x0

    .line 71
    .local v6, "longitude":D
    :try_start_0
    new-instance v8, Lcom/tencent/msdk/remote/api/SafeJSONObject;

    invoke-direct {v8, p1}, Lcom/tencent/msdk/remote/api/SafeJSONObject;-><init>(Ljava/lang/String;)V

    .line 72
    .local v8, "jsonRtn":Lorg/json/JSONObject;
    invoke-virtual {p0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;

    move-result-object v1

    invoke-virtual {v1}, Ljava/lang/Class;->getName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {p0, v8, v1}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->getNetDesc(Lorg/json/JSONObject;Ljava/lang/String;)Ljava/lang/String;
    :try_end_0
    .catch Lorg/json/JSONException; {:try_start_0 .. :try_end_0} :catch_0

    move-result-object v3

    .line 77
    .end local v8    # "jsonRtn":Lorg/json/JSONObject;
    :goto_1
    const/4 v2, -0x1

    move-object v1, p0

    invoke-direct/range {v1 .. v7}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->callback(ILjava/lang/String;DD)V

    .line 78
    const-string v1, "GetLocationInfo"

    invoke-virtual {p0, v1, v9, p2, v9}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->reportEventToBeacon(Ljava/lang/String;ZIZ)V

    goto :goto_0

    .line 73
    :catch_0
    move-exception v0

    .line 74
    .local v0, "e":Lorg/json/JSONException;
    invoke-virtual {v0}, Lorg/json/JSONException;->printStackTrace()V

    goto :goto_1
.end method

.method public onSuccess(Ljava/lang/String;II)V
    .locals 11
    .param p1, "netContent"    # Ljava/lang/String;
    .param p2, "statusCode"    # I
    .param p3, "what"    # I

    .prologue
    const/4 v2, 0x0

    .line 34
    invoke-virtual {p0}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->getMyId()I

    move-result v1

    if-eq p3, v1, :cond_0

    .line 35
    const-string v1, "a wrong callback"

    invoke-static {v1}, Lcom/tencent/msdk/tools/Logger;->d(Ljava/lang/String;)V

    .line 57
    :goto_0
    return-void

    .line 39
    :cond_0
    const-string v3, ""

    .line 40
    .local v3, "msg":Ljava/lang/String;
    const-wide/16 v4, 0x0

    .line 41
    .local v4, "latitude":D
    const-wide/16 v6, 0x0

    .line 44
    .local v6, "longitude":D
    :try_start_0
    new-instance v8, Lcom/tencent/msdk/remote/api/SafeJSONObject;

    invoke-direct {v8, p1}, Lcom/tencent/msdk/remote/api/SafeJSONObject;-><init>(Ljava/lang/String;)V

    .line 45
    .local v8, "jsonRtn":Lorg/json/JSONObject;
    invoke-virtual {p0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;

    move-result-object v1

    invoke-virtual {v1}, Ljava/lang/Class;->getName()Ljava/lang/String;

    move-result-object v1

    invoke-virtual {p0, v8, v1}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->getNetDesc(Lorg/json/JSONObject;Ljava/lang/String;)Ljava/lang/String;

    move-result-object v3

    .line 46
    const-string v1, "ret"

    invoke-virtual {v8, v1}, Lorg/json/JSONObject;->getInt(Ljava/lang/String;)I

    move-result v9

    .line 47
    .local v9, "ret":I
    if-nez v9, :cond_1

    .line 48
    const-string v1, "latitude"

    invoke-virtual {v8, v1}, Lorg/json/JSONObject;->getDouble(Ljava/lang/String;)D

    move-result-wide v4

    .line 49
    const-string v1, "longitude"

    invoke-virtual {v8, v1}, Lorg/json/JSONObject;->getDouble(Ljava/lang/String;)D
    :try_end_0
    .catch Lorg/json/JSONException; {:try_start_0 .. :try_end_0} :catch_0

    move-result-wide v6

    .line 55
    .end local v8    # "jsonRtn":Lorg/json/JSONObject;
    .end local v9    # "ret":I
    :cond_1
    :goto_1
    const-string v1, "GetLocationInfo"

    const/4 v10, 0x1

    invoke-virtual {p0, v1, v10, v2, v2}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->reportEventToBeacon(Ljava/lang/String;ZIZ)V

    move-object v1, p0

    .line 56
    invoke-direct/range {v1 .. v7}, Lcom/tencent/msdk/remote/api/GetLocationInfo;->callback(ILjava/lang/String;DD)V

    goto :goto_0

    .line 51
    :catch_0
    move-exception v0

    .line 52
    .local v0, "e":Lorg/json/JSONException;
    invoke-virtual {v0}, Lorg/json/JSONException;->printStackTrace()V

    goto :goto_1
.end method
