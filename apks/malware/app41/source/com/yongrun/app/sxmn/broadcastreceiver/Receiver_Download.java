package com.yongrun.app.sxmn.broadcastreceiver;

import android.app.DownloadManager;
import android.app.DownloadManager.Query;
import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.widget.Toast;
import java.io.File;
import java.io.PrintStream;

public class Receiver_Download
  extends BroadcastReceiver
{
  private DownloadManager a;
  
  public Receiver_Download() {}
  
  public void a(File paramFile, Context paramContext)
  {
    Intent localIntent = new Intent("android.intent.action.VIEW");
    localIntent.setDataAndType(Uri.fromFile(paramFile), "application/vnd.android.package-archive");
    localIntent.setFlags(268435456);
    paramContext.startActivity(localIntent);
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    String str1 = paramIntent.getAction();
    if (str1.equals("android.intent.action.DOWNLOAD_COMPLETE"))
    {
      Toast.makeText(paramContext, "下载完成了....", 1).show();
      l = paramIntent.getLongExtra("extra_download_id", 0L);
      paramIntent = new DownloadManager.Query();
      paramIntent.setFilterById(new long[] { l });
      this.a = ((DownloadManager)paramContext.getSystemService("download"));
      localCursor = this.a.query(paramIntent);
      j = localCursor.getColumnCount();
      paramIntent = null;
      if (!localCursor.moveToNext())
      {
        localCursor.close();
        if (paramIntent.startsWith("content:"))
        {
          paramContext = paramContext.getContentResolver().query(Uri.parse(paramIntent), null, null, null, null);
          j = paramContext.getColumnCount();
          if (paramContext.moveToNext()) {
            break label286;
          }
          paramContext.close();
        }
      }
    }
    label158:
    label257:
    label286:
    label288:
    label353:
    while (!str1.equals("android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED"))
    {
      long l;
      Cursor localCursor;
      int j;
      return;
      int i = 0;
      String str2;
      if (i < j)
      {
        str2 = localCursor.getColumnName(i);
        str1 = localCursor.getString(i);
        if (str2.equals("local_filename"))
        {
          a(new File(str1), paramContext);
          paramIntent = str1;
        }
        if (str1 == null) {
          break label257;
        }
        System.out.println(str2 + ": " + str1);
      }
      for (;;)
      {
        i += 1;
        break label158;
        break;
        System.out.println(str2 + ": null");
      }
      i = 0;
      if (i < j)
      {
        paramIntent = paramContext.getColumnName(i);
        str1 = paramContext.getString(i);
        if (str1 == null) {
          break label353;
        }
        System.out.println(paramIntent + ": " + str1);
      }
      for (;;)
      {
        i += 1;
        break label288;
        break;
        System.out.println(paramIntent + ": null");
      }
    }
    Toast.makeText(paramContext, "点击通知了....", 1).show();
  }
}
