package com.android.vending.expansion.zipfile;

import android.content.Context;
import android.os.Environment;
import java.io.File;
import java.io.IOException;
import java.util.Vector;

public class APKExpansionSupport
{
  private static final String EXP_PATH = "/Android/obb/";
  
  public APKExpansionSupport() {}
  
  public static String[] getAPKExpansionFiles(Context paramContext, int paramInt1, int paramInt2)
  {
    Object localObject = paramContext.getPackageName();
    paramContext = new Vector();
    if (Environment.getExternalStorageState().equals("mounted"))
    {
      File localFile = Environment.getExternalStorageDirectory();
      localFile = new File(localFile.toString() + "/Android/obb/" + (String)localObject);
      if (localFile.exists())
      {
        if (paramInt1 > 0)
        {
          String str = localFile + File.separator + "main." + paramInt1 + "." + (String)localObject + ".obb";
          if (new File(str).isFile()) {
            paramContext.add(str);
          }
        }
        if (paramInt2 > 0)
        {
          localObject = localFile + File.separator + "patch." + paramInt2 + "." + (String)localObject + ".obb";
          if (new File((String)localObject).isFile()) {
            paramContext.add(localObject);
          }
        }
      }
    }
    localObject = new String[paramContext.size()];
    paramContext.toArray((Object[])localObject);
    return localObject;
  }
  
  public static ZipResourceFile getAPKExpansionZipFile(Context paramContext, int paramInt1, int paramInt2)
    throws IOException
  {
    return getResourceZipFile(getAPKExpansionFiles(paramContext, paramInt1, paramInt2));
  }
  
  public static ZipResourceFile getResourceZipFile(String[] paramArrayOfString)
    throws IOException
  {
    ZipResourceFile localZipResourceFile = null;
    int j = paramArrayOfString.length;
    int i = 0;
    if (i < j)
    {
      String str = paramArrayOfString[i];
      if (localZipResourceFile == null) {
        localZipResourceFile = new ZipResourceFile(str);
      }
      for (;;)
      {
        i += 1;
        break;
        localZipResourceFile.addPatchFile(str);
      }
    }
    return localZipResourceFile;
  }
}
