package com.pollfish.g;

import android.annotation.SuppressLint;
import android.content.Context;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.View.OnLongClickListener;
import android.view.inputmethod.CompletionInfo;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputConnection;
import android.view.inputmethod.InputConnectionWrapper;
import android.view.inputmethod.InputMethodManager;
import android.webkit.ConsoleMessage;
import android.webkit.JavascriptInterface;
import android.webkit.WebChromeClient;
import android.webkit.WebStorage.QuotaUpdater;
import android.webkit.WebView;
import android.widget.Toast;
import com.pollfish.c.f;
import java.util.HashMap;

@SuppressLint({"SetJavaScriptEnabled"})
public class a
  extends WebView
{
  private com.pollfish.interfaces.b a;
  private String b;
  private boolean c;
  private Context d;
  private String e;
  private boolean f;
  private boolean g;
  
  /* Error */
  public a(Context paramContext, com.pollfish.interfaces.b paramB)
  {
    // Byte code:
    //   0: aload_0
    //   1: aload_1
    //   2: invokespecial 37	android/webkit/WebView:<init>	(Landroid/content/Context;)V
    //   5: aload_0
    //   6: iconst_0
    //   7: putfield 39	com/pollfish/g/a:c	Z
    //   10: aload_0
    //   11: iconst_0
    //   12: putfield 41	com/pollfish/g/a:f	Z
    //   15: aload_0
    //   16: iconst_0
    //   17: putfield 43	com/pollfish/g/a:g	Z
    //   20: ldc 45
    //   22: ldc 47
    //   24: invokestatic 52	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
    //   27: aload_0
    //   28: aload_1
    //   29: putfield 54	com/pollfish/g/a:d	Landroid/content/Context;
    //   32: aload_0
    //   33: iconst_0
    //   34: invokevirtual 58	com/pollfish/g/a:setBackgroundColor	(I)V
    //   37: aload_0
    //   38: new 60	java/lang/StringBuilder
    //   41: dup
    //   42: invokespecial 63	java/lang/StringBuilder:<init>	()V
    //   45: aload_0
    //   46: getfield 54	com/pollfish/g/a:d	Landroid/content/Context;
    //   49: invokevirtual 69	android/content/Context:getApplicationContext	()Landroid/content/Context;
    //   52: invokevirtual 73	android/content/Context:getCacheDir	()Ljava/io/File;
    //   55: invokevirtual 79	java/io/File:getAbsolutePath	()Ljava/lang/String;
    //   58: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   61: ldc 85
    //   63: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   66: ldc 87
    //   68: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   71: ldc 89
    //   73: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   76: invokevirtual 92	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   79: putfield 94	com/pollfish/g/a:e	Ljava/lang/String;
    //   82: aload_0
    //   83: iconst_1
    //   84: aconst_null
    //   85: invokevirtual 98	com/pollfish/g/a:setLayerType	(ILandroid/graphics/Paint;)V
    //   88: aload_0
    //   89: ldc 100
    //   91: putfield 102	com/pollfish/g/a:b	Ljava/lang/String;
    //   94: aload_0
    //   95: aload_2
    //   96: putfield 104	com/pollfish/g/a:a	Lcom/pollfish/interfaces/b;
    //   99: aload_0
    //   100: iconst_0
    //   101: invokevirtual 108	com/pollfish/g/a:setHorizontalScrollBarEnabled	(Z)V
    //   104: aload_0
    //   105: iconst_0
    //   106: invokevirtual 111	com/pollfish/g/a:setVerticalScrollBarEnabled	(Z)V
    //   109: ldc 45
    //   111: ldc 113
    //   113: invokestatic 52	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
    //   116: aload_0
    //   117: invokevirtual 117	com/pollfish/g/a:getSettings	()Landroid/webkit/WebSettings;
    //   120: astore_1
    //   121: aload_1
    //   122: iconst_0
    //   123: invokevirtual 122	android/webkit/WebSettings:setSupportZoom	(Z)V
    //   126: aload_1
    //   127: iconst_0
    //   128: invokevirtual 125	android/webkit/WebSettings:setBuiltInZoomControls	(Z)V
    //   131: aload_1
    //   132: getstatic 131	android/webkit/WebSettings$RenderPriority:HIGH	Landroid/webkit/WebSettings$RenderPriority;
    //   135: invokevirtual 135	android/webkit/WebSettings:setRenderPriority	(Landroid/webkit/WebSettings$RenderPriority;)V
    //   138: aload_1
    //   139: iconst_1
    //   140: invokevirtual 138	android/webkit/WebSettings:setJavaScriptEnabled	(Z)V
    //   143: aload_1
    //   144: iconst_1
    //   145: invokevirtual 141	android/webkit/WebSettings:setAppCacheEnabled	(Z)V
    //   148: aload_1
    //   149: iconst_1
    //   150: invokevirtual 144	android/webkit/WebSettings:setDomStorageEnabled	(Z)V
    //   153: aload_1
    //   154: ldc -110
    //   156: invokevirtual 150	android/webkit/WebSettings:setDefaultTextEncodingName	(Ljava/lang/String;)V
    //   159: aload_1
    //   160: aload_0
    //   161: getfield 54	com/pollfish/g/a:d	Landroid/content/Context;
    //   164: invokevirtual 69	android/content/Context:getApplicationContext	()Landroid/content/Context;
    //   167: invokevirtual 73	android/content/Context:getCacheDir	()Ljava/io/File;
    //   170: invokevirtual 79	java/io/File:getAbsolutePath	()Ljava/lang/String;
    //   173: invokevirtual 153	android/webkit/WebSettings:setAppCachePath	(Ljava/lang/String;)V
    //   176: aload_1
    //   177: iconst_1
    //   178: invokevirtual 156	android/webkit/WebSettings:setAllowFileAccess	(Z)V
    //   181: aload_1
    //   182: ldc -98
    //   184: invokevirtual 161	android/webkit/WebSettings:setUserAgentString	(Ljava/lang/String;)V
    //   187: aload_1
    //   188: iconst_1
    //   189: invokevirtual 164	android/webkit/WebSettings:setUseWideViewPort	(Z)V
    //   192: aload_1
    //   193: iconst_1
    //   194: invokevirtual 167	android/webkit/WebSettings:setLoadWithOverviewMode	(Z)V
    //   197: ldc 45
    //   199: ldc -87
    //   201: invokestatic 52	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
    //   204: aload_0
    //   205: new 12	com/pollfish/g/a$a
    //   208: dup
    //   209: aload_0
    //   210: invokespecial 172	com/pollfish/g/a$a:<init>	(Lcom/pollfish/g/a;)V
    //   213: ldc -82
    //   215: invokevirtual 178	com/pollfish/g/a:addJavascriptInterface	(Ljava/lang/Object;Ljava/lang/String;)V
    //   218: aload_0
    //   219: new 6	com/pollfish/g/a$1
    //   222: dup
    //   223: aload_0
    //   224: invokespecial 179	com/pollfish/g/a$1:<init>	(Lcom/pollfish/g/a;)V
    //   227: invokevirtual 183	com/pollfish/g/a:setWebChromeClient	(Landroid/webkit/WebChromeClient;)V
    //   230: aload_0
    //   231: iconst_2
    //   232: invokevirtual 186	com/pollfish/g/a:setOverScrollMode	(I)V
    //   235: aload_0
    //   236: new 8	com/pollfish/g/a$2
    //   239: dup
    //   240: aload_0
    //   241: invokespecial 187	com/pollfish/g/a$2:<init>	(Lcom/pollfish/g/a;)V
    //   244: invokevirtual 191	com/pollfish/g/a:setOnLongClickListener	(Landroid/view/View$OnLongClickListener;)V
    //   247: getstatic 197	android/os/Build$VERSION:SDK_INT	I
    //   250: bipush 8
    //   252: if_icmpeq +8 -> 260
    //   255: aload_0
    //   256: iconst_0
    //   257: invokevirtual 200	com/pollfish/g/a:setLongClickable	(Z)V
    //   260: aload_0
    //   261: iconst_0
    //   262: invokevirtual 203	com/pollfish/g/a:setHapticFeedbackEnabled	(Z)V
    //   265: aload_0
    //   266: iconst_1
    //   267: invokevirtual 206	com/pollfish/g/a:setFocusable	(Z)V
    //   270: aload_0
    //   271: iconst_1
    //   272: invokevirtual 209	com/pollfish/g/a:setFocusableInTouchMode	(Z)V
    //   275: aload_0
    //   276: new 10	com/pollfish/g/a$3
    //   279: dup
    //   280: aload_0
    //   281: invokespecial 210	com/pollfish/g/a$3:<init>	(Lcom/pollfish/g/a;)V
    //   284: invokevirtual 214	com/pollfish/g/a:setOnKeyListener	(Landroid/view/View$OnKeyListener;)V
    //   287: return
    //   288: astore_1
    //   289: ldc 45
    //   291: new 60	java/lang/StringBuilder
    //   294: dup
    //   295: invokespecial 63	java/lang/StringBuilder:<init>	()V
    //   298: ldc -40
    //   300: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   303: aload_1
    //   304: invokevirtual 219	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   307: invokevirtual 92	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   310: invokestatic 221	com/pollfish/f/b:c	(Ljava/lang/String;Ljava/lang/String;)V
    //   313: goto -225 -> 88
    //   316: astore_1
    //   317: ldc 45
    //   319: new 60	java/lang/StringBuilder
    //   322: dup
    //   323: invokespecial 63	java/lang/StringBuilder:<init>	()V
    //   326: ldc -40
    //   328: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   331: aload_1
    //   332: invokevirtual 219	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   335: invokevirtual 92	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   338: invokestatic 221	com/pollfish/f/b:c	(Ljava/lang/String;Ljava/lang/String;)V
    //   341: goto -253 -> 88
    //   344: astore_1
    //   345: ldc 45
    //   347: new 60	java/lang/StringBuilder
    //   350: dup
    //   351: invokespecial 63	java/lang/StringBuilder:<init>	()V
    //   354: ldc -33
    //   356: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   359: aload_1
    //   360: invokevirtual 219	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   363: invokevirtual 92	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   366: invokestatic 221	com/pollfish/f/b:c	(Ljava/lang/String;Ljava/lang/String;)V
    //   369: goto -134 -> 235
    //   372: astore_1
    //   373: ldc 45
    //   375: new 60	java/lang/StringBuilder
    //   378: dup
    //   379: invokespecial 63	java/lang/StringBuilder:<init>	()V
    //   382: ldc -33
    //   384: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   387: aload_1
    //   388: invokevirtual 219	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   391: invokevirtual 92	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   394: invokestatic 221	com/pollfish/f/b:c	(Ljava/lang/String;Ljava/lang/String;)V
    //   397: goto -162 -> 235
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	400	0	this	a
    //   0	400	1	paramContext	Context
    //   0	400	2	paramB	com.pollfish.interfaces.b
    // Exception table:
    //   from	to	target	type
    //   82	88	288	java/lang/NoSuchMethodError
    //   82	88	316	java/lang/Exception
    //   230	235	344	java/lang/NoSuchMethodError
    //   230	235	372	java/lang/Exception
  }
  
  public void a(String paramString)
  {
    com.pollfish.f.b.a("PollfishWebView", "loadContent() - all assets in place");
    this.b = paramString;
    com.pollfish.f.b.a("PollfishWebView", "PollfishWebView width: " + getWidth() + " height: " + getHeight());
    paramString = "file:///" + this.e;
    com.pollfish.f.b.a("PollfishWebView", "PollfishWebView thePathHtml: " + paramString);
    loadDataWithBaseURL(paramString, this.b, "text/html", "utf-8", null);
    setBackgroundColor(0);
  }
  
  public void a(HashMap paramHashMap, String paramString)
  {
    com.pollfish.f.b.a("PollfishWebView", "loadContent with urls to replace");
    this.b = paramString;
    com.pollfish.f.b.a("PollfishWebView", "PollfishWebView width: " + getWidth() + " height: " + getHeight());
    new f(this.b, paramHashMap, this, this.e).execute(new String[0]);
  }
  
  public boolean dispatchKeyEvent(KeyEvent paramKeyEvent)
  {
    com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEvent: " + String.valueOf(paramKeyEvent.getKeyCode()));
    return super.dispatchKeyEvent(paramKeyEvent);
  }
  
  public boolean dispatchKeyEventPreIme(KeyEvent paramKeyEvent)
  {
    com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEventPreIme: " + paramKeyEvent.getAction());
    com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEventPreIme: event.getKeyCode(): " + paramKeyEvent.getKeyCode());
    if (paramKeyEvent.getAction() == 0) {
      com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEventPreIme: textBoxFocus: " + this.f);
    }
    switch (paramKeyEvent.getKeyCode())
    {
    default: 
      return super.dispatchKeyEventPreIme(paramKeyEvent);
    case 4: 
      com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEventPreIme: KeyEvent.KEYCODE_BACK");
      if (this.f)
      {
        loadUrl("javascript:Pollfish.nativeAccess.loseFocus(true);");
        this.f = false;
        return true;
      }
      return super.dispatchKeyEventPreIme(paramKeyEvent);
    }
    com.pollfish.f.b.a("PollfishWebView", "dispatchKeyEventPreIme: KeyEvent.KEYCODE_DEL");
    return super.dispatchKeyEventPreIme(paramKeyEvent);
  }
  
  public boolean onCheckIsTextEditor()
  {
    com.pollfish.f.b.a("PollfishWebView", "onCheckIsTextEditor");
    return false;
  }
  
  public InputConnection onCreateInputConnection(EditorInfo paramEditorInfo)
  {
    com.pollfish.f.b.a("PollfishWebView", "onCreateInputConnection ei: " + paramEditorInfo);
    com.pollfish.f.b.a("PollfishWebView", "onCreateInputConnection actionId: " + paramEditorInfo.actionId + " fieldId: " + paramEditorInfo.fieldId + " fieldName: " + paramEditorInfo.fieldName + " imeOptions: " + paramEditorInfo.imeOptions + paramEditorInfo.fieldName + " inputType: " + paramEditorInfo.inputType + " describeContents: " + paramEditorInfo.describeContents());
    paramEditorInfo = super.onCreateInputConnection(paramEditorInfo);
    com.pollfish.f.b.a("PollfishWebView", "onCreateInputConnection wrapped: " + paramEditorInfo);
    if (paramEditorInfo != null) {
      return new b(paramEditorInfo);
    }
    return null;
  }
  
  public boolean onTouchEvent(MotionEvent paramMotionEvent)
  {
    boolean bool = super.onTouchEvent(paramMotionEvent);
    com.pollfish.f.b.a("PollfishWebView", "onTouchEvent: consumed: " + bool);
    switch (paramMotionEvent.getAction())
    {
    default: 
      return bool;
    case 0: 
      com.pollfish.f.b.a("PollfishWebView", "onTouchEvent: MotionEvent.ACTION_DOWN" + paramMotionEvent.getAction());
    }
    com.pollfish.f.b.a("PollfishWebView", "onTouchEvent: MotionEvent.ACTION_UP " + paramMotionEvent.getAction());
    if (!hasFocus())
    {
      com.pollfish.f.b.a("PollfishWebView", "onTouchEvent: !hasFocus() - \trequestFocus();");
      requestFocus();
      return bool;
    }
    com.pollfish.f.b.a("PollfishWebView", "onTouchEvent: hasFocus()");
    return bool;
  }
  
  public class a
  {
    public a() {}
    
    @JavascriptInterface
    public void clearCacheQueue()
    {
      a.a(a.this).c();
    }
    
    @JavascriptInterface
    public void close()
    {
      a.a(a.this).b();
    }
    
    @JavascriptInterface
    public void closeAndNoShow()
    {
      a.a(a.this).g();
    }
    
    @JavascriptInterface
    public String getDeviceInfo()
    {
      return a.a(a.this).f();
    }
    
    @JavascriptInterface
    public String getFromServer()
    {
      com.pollfish.f.b.a("PollfishWebView", "JsObject getFromServer");
      return a.a(a.this).d();
    }
    
    @JavascriptInterface
    public void openWebsite(String paramString)
    {
      a.a(a.this).a(paramString);
    }
    
    @JavascriptInterface
    public void sendToServer(String paramString1, String paramString2, boolean paramBoolean)
    {
      a.a(a.this).a(paramString1, paramString2, paramBoolean);
    }
    
    @JavascriptInterface
    public void setSurveyCompleted()
    {
      a.a(a.this).e();
    }
    
    @JavascriptInterface
    public void showToastMsg(String paramString)
    {
      com.pollfish.f.b.a("PollfishWebView", " showToastMsg : " + paramString);
      Toast.makeText(a.b(a.this), paramString, 1).show();
    }
    
    @JavascriptInterface
    public void textFieldFocus()
    {
      a.a(a.this, true);
    }
    
    @JavascriptInterface
    public void textFieldUnFocus()
    {
      a.a(a.this, false);
      ((InputMethodManager)a.b(a.this).getSystemService("input_method")).hideSoftInputFromWindow(a.this.getWindowToken(), 0);
    }
    
    @JavascriptInterface
    public void webViewLoaded()
    {
      a.a(a.this).a();
    }
  }
  
  private class b
    extends InputConnectionWrapper
  {
    public b(InputConnection paramInputConnection)
    {
      super(false);
      com.pollfish.f.b.a("PollfishWebView", "MyConnection wrapped: " + paramInputConnection);
    }
    
    public boolean commitCompletion(CompletionInfo paramCompletionInfo)
    {
      com.pollfish.f.b.a("PollfishWebView", "commitCompletion: " + paramCompletionInfo);
      a.this.loadUrl("javascript:Pollfish.nativeAccess.loseFocus(true);");
      return true;
    }
    
    public boolean performEditorAction(int paramInt)
    {
      com.pollfish.f.b.a("PollfishWebView", "performEditorAction: " + paramInt);
      a.this.loadUrl("javascript:Pollfish.nativeAccess.loseFocus(true);");
      return true;
    }
  }
}
