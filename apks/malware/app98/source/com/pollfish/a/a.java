package com.pollfish.a;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import com.pollfish.constants.Position;
import com.pollfish.f.b;
import com.pollfish.interfaces.a.c;
import java.io.File;
import org.json.JSONArray;
import org.json.JSONObject;

public class a
{
  private static int q = 0;
  private static String r = "";
  private String a;
  private String b;
  private String c;
  private int d;
  private int e;
  private int f;
  private boolean g;
  private Bitmap h = null;
  private Bitmap i = null;
  private String j = "";
  private String k = "";
  private String l = "";
  private String m = "";
  private String n;
  private boolean o;
  private Position p;
  private a.c s = null;
  private com.pollfish.interfaces.a.a t = null;
  private Activity u;
  
  public a(String paramString1, String paramString2, int paramInt1, String paramString3, boolean paramBoolean, String paramString4, String paramString5, int paramInt2, int paramInt3, Position paramPosition, a.c paramC, String paramString6, String paramString7, com.pollfish.interfaces.a.a paramA, Activity paramActivity, String paramString8)
  {
    this.c = paramString1;
    this.d = paramInt1;
    this.a = paramString2;
    this.b = paramString3;
    this.g = paramBoolean;
    this.j = paramString4;
    this.k = paramString5;
    this.e = paramInt2;
    this.f = paramInt3;
    this.l = paramString6;
    this.m = paramString7;
    this.u = paramActivity;
    b.a("PanelObj", "PanelObj width_percentage: " + paramInt2 + "height_percentage: " + paramInt3);
    q = 0;
    this.p = paramPosition;
    this.s = paramC;
    this.t = paramA;
    this.o = false;
    this.n = paramString8;
    if (paramBoolean) {
      g();
    }
    for (;;)
    {
      b.a("PanelObj", "PanelObj with s_id:" + paramString1 + " and response_type:" + paramString2);
      a();
      return;
      b.a("PanelObj", "no images to download move to survey on overlay");
      if (paramC != null) {
        this.s.a(this);
      }
    }
  }
  
  public Drawable a(Context paramContext, Position paramPosition, int[] paramArrayOfInt)
  {
    b.a("PanelObj", "getIndicatorImage pos: " + paramPosition);
    if (!this.g)
    {
      Object localObject2 = null;
      Object localObject1 = null;
      if ((paramPosition == Position.BOTTOM_LEFT) || (paramPosition == Position.TOP_LEFT) || (paramPosition == Position.MIDDLE_LEFT))
      {
        b.a("PanelObj", "(pos == Position.BOTTOM_LEFT || pos == Position.TOP_LEFT|| pos == Position.MIDDLE_LEFT) ");
        paramPosition = localObject1;
        if (this.a != null) {
          if (this.a.equalsIgnoreCase("award")) {
            break label120;
          }
        }
        label120:
        for (paramPosition = com.pollfish.e.a.a(paramContext);; paramPosition = com.pollfish.e.a.c(paramContext))
        {
          if (paramPosition != null)
          {
            paramArrayOfInt[0] = (paramPosition.getWidth() / 2);
            paramArrayOfInt[1] = (paramPosition.getHeight() / 2);
          }
          return com.pollfish.e.a.a(paramContext, paramPosition);
        }
      }
      paramPosition = localObject2;
      if (this.a != null) {
        if (this.a.equalsIgnoreCase("award")) {
          break label183;
        }
      }
      label183:
      for (paramPosition = com.pollfish.e.a.b(paramContext);; paramPosition = com.pollfish.e.a.d(paramContext))
      {
        if (paramPosition != null)
        {
          paramArrayOfInt[0] = (paramPosition.getWidth() / 2);
          paramArrayOfInt[1] = (paramPosition.getHeight() / 2);
        }
        return com.pollfish.e.a.a(paramContext, paramPosition);
      }
    }
    if ((paramPosition == Position.BOTTOM_LEFT) || (paramPosition == Position.TOP_LEFT) || (paramPosition == Position.MIDDLE_LEFT))
    {
      paramPosition = this.h;
      paramArrayOfInt[0] = (paramPosition.getWidth() / 2);
      paramArrayOfInt[1] = (paramPosition.getHeight() / 2);
      return com.pollfish.e.a.a(paramContext, this.h);
    }
    paramPosition = this.i;
    paramArrayOfInt[0] = (paramPosition.getWidth() / 2);
    paramArrayOfInt[1] = (paramPosition.getHeight() / 2);
    return com.pollfish.e.a.a(paramContext, this.i);
  }
  
  public void a()
  {
    b.a("PanelObj", "downloadAssets()");
    if ((this.m == null) || (this.m.trim().equalsIgnoreCase("")))
    {
      if ((this.t != null) && (this.t != null)) {
        this.t.c();
      }
      return;
    }
    for (;;)
    {
      int i1;
      try
      {
        localJSONArray = new JSONArray(this.m);
        if (localJSONArray != null) {
          b.a("PanelObj", "downloadAssets: num:" + localJSONArray.length());
        }
        if ((localJSONArray == null) || (this.t == null)) {
          break label531;
        }
        this.t.b(localJSONArray.length());
      }
      catch (Exception localException)
      {
        JSONArray localJSONArray;
        Object localObject1;
        Object localObject2;
        String str;
        int i2;
        com.pollfish.f.b.a.a(localException);
        b.b("PanelObj", "downloadAssets error: " + localException);
        if (this.t == null) {
          break label514;
        }
        this.t.b(0);
      }
      if (i1 < localJSONArray.length())
      {
        localObject1 = localJSONArray.getJSONObject(i1);
        localObject2 = ((JSONObject)localObject1).getString("cache_path");
        str = ((JSONObject)localObject1).getString("url_path");
        i2 = ((JSONObject)localObject1).getInt("file_type");
        if (((String)localObject2).startsWith("./")) {
          ((String)localObject2).replaceFirst("./", "/");
        }
        b.a("PanelObj", "downloadAssets: attributeCachePath:" + (String)localObject2);
        b.a("PanelObj", "downloadAssets: attributeType:" + i2);
        b.a("PanelObj", "downloadAssets: attributeUrlPath:" + str);
        localObject1 = new c((String)localObject2, "", "", str, i2);
        if (localObject1 != null)
        {
          localObject2 = new File(this.u.getApplicationContext().getCacheDir().getAbsolutePath() + "/" + "pollfish_cache" + ((c)localObject1).a());
          if (!((File)localObject2).exists())
          {
            localObject2 = ((File)localObject2).getParentFile();
            if ((localObject2 != null) && (!((File)localObject2).exists()))
            {
              ((File)localObject2).mkdirs();
              if (((File)localObject2).isDirectory()) {
                b.a("PanelObj", "Creating directory: " + ((File)localObject2).getAbsolutePath());
              }
            }
            this.t.a((c)localObject1);
          }
          else
          {
            b.a("PanelObj", "file: " + ((File)localObject2).getAbsolutePath() + " already exists in cache!");
            this.t.a();
          }
        }
      }
      else
      {
        label514:
        if (this.t == null) {
          break;
        }
        this.t.c();
        return;
        label531:
        i1 = 0;
        continue;
      }
      i1 += 1;
    }
  }
  
  public void a(Bitmap paramBitmap)
  {
    this.h = paramBitmap;
  }
  
  public void a(boolean paramBoolean)
  {
    this.o = paramBoolean;
  }
  
  public String b()
  {
    return this.c;
  }
  
  public void b(Bitmap paramBitmap)
  {
    this.i = paramBitmap;
  }
  
  public String c()
  {
    return this.a;
  }
  
  public String d()
  {
    return this.b;
  }
  
  public int e()
  {
    return this.d;
  }
  
  public boolean f()
  {
    return this.o;
  }
  
  public void g()
  {
    if ((this.p == Position.BOTTOM_LEFT) || (this.p == Position.TOP_LEFT) || (this.p == Position.MIDDLE_LEFT)) {
      if (!this.j.equalsIgnoreCase(""))
      {
        q += 1;
        new a(this.j, this, this.s).execute(new Void[0]);
      }
    }
    while (this.k.equalsIgnoreCase("")) {
      return;
    }
    q += 1;
    new a(this.k, this, this.s).execute(new Void[0]);
  }
  
  public int h()
  {
    return this.e;
  }
  
  public int i()
  {
    return this.f;
  }
  
  public String j()
  {
    return this.l;
  }
  
  public String k()
  {
    return this.n;
  }
  
  public class a
    extends AsyncTask
  {
    private String b;
    private a c = null;
    private a.c d;
    
    public a(String paramString, a paramA, a.c paramC)
    {
      this.b = paramString;
      this.c = paramA;
      this.d = paramC;
    }
    
    /* Error */
    protected Void a(Void... paramVarArgs)
    {
      // Byte code:
      //   0: ldc 36
      //   2: new 38	java/lang/StringBuilder
      //   5: dup
      //   6: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   9: ldc 41
      //   11: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   14: aload_0
      //   15: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   18: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   21: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   24: invokestatic 54	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
      //   27: new 56	java/net/URL
      //   30: dup
      //   31: aload_0
      //   32: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   35: invokespecial 59	java/net/URL:<init>	(Ljava/lang/String;)V
      //   38: invokevirtual 63	java/net/URL:openConnection	()Ljava/net/URLConnection;
      //   41: astore_1
      //   42: aload_1
      //   43: sipush 5000
      //   46: invokevirtual 69	java/net/URLConnection:setConnectTimeout	(I)V
      //   49: aload_1
      //   50: sipush 5000
      //   53: invokevirtual 72	java/net/URLConnection:setReadTimeout	(I)V
      //   56: aload_1
      //   57: invokevirtual 75	java/net/URLConnection:connect	()V
      //   60: aload_1
      //   61: invokevirtual 79	java/net/URLConnection:getInputStream	()Ljava/io/InputStream;
      //   64: astore_2
      //   65: new 81	java/io/BufferedInputStream
      //   68: dup
      //   69: aload_2
      //   70: sipush 8192
      //   73: invokespecial 84	java/io/BufferedInputStream:<init>	(Ljava/io/InputStream;I)V
      //   76: astore_3
      //   77: aload_3
      //   78: invokestatic 90	android/graphics/BitmapFactory:decodeStream	(Ljava/io/InputStream;)Landroid/graphics/Bitmap;
      //   81: astore_1
      //   82: aload_3
      //   83: invokevirtual 93	java/io/BufferedInputStream:close	()V
      //   86: aload_2
      //   87: invokevirtual 96	java/io/InputStream:close	()V
      //   90: aload_1
      //   91: ifnull +149 -> 240
      //   94: ldc 36
      //   96: new 38	java/lang/StringBuilder
      //   99: dup
      //   100: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   103: ldc 98
      //   105: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   108: aload_0
      //   109: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   112: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   115: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   118: invokestatic 54	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
      //   121: invokestatic 101	com/pollfish/a/a:l	()Ljava/lang/String;
      //   124: astore_2
      //   125: aload_2
      //   126: monitorenter
      //   127: invokestatic 105	com/pollfish/a/a:m	()I
      //   130: pop
      //   131: ldc 36
      //   133: new 38	java/lang/StringBuilder
      //   136: dup
      //   137: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   140: ldc 107
      //   142: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   145: aload_0
      //   146: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   149: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   152: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   155: invokestatic 54	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
      //   158: aload_0
      //   159: getfield 17	com/pollfish/a/a$a:a	Lcom/pollfish/a/a;
      //   162: invokestatic 110	com/pollfish/a/a:a	(Lcom/pollfish/a/a;)Lcom/pollfish/constants/Position;
      //   165: getstatic 116	com/pollfish/constants/Position:BOTTOM_LEFT	Lcom/pollfish/constants/Position;
      //   168: if_acmpeq +29 -> 197
      //   171: aload_0
      //   172: getfield 17	com/pollfish/a/a$a:a	Lcom/pollfish/a/a;
      //   175: invokestatic 110	com/pollfish/a/a:a	(Lcom/pollfish/a/a;)Lcom/pollfish/constants/Position;
      //   178: getstatic 119	com/pollfish/constants/Position:TOP_LEFT	Lcom/pollfish/constants/Position;
      //   181: if_acmpeq +16 -> 197
      //   184: aload_0
      //   185: getfield 17	com/pollfish/a/a$a:a	Lcom/pollfish/a/a;
      //   188: invokestatic 110	com/pollfish/a/a:a	(Lcom/pollfish/a/a;)Lcom/pollfish/constants/Position;
      //   191: getstatic 122	com/pollfish/constants/Position:MIDDLE_LEFT	Lcom/pollfish/constants/Position;
      //   194: if_acmpne +116 -> 310
      //   197: aload_0
      //   198: getfield 17	com/pollfish/a/a$a:a	Lcom/pollfish/a/a;
      //   201: aload_1
      //   202: invokevirtual 125	com/pollfish/a/a:a	(Landroid/graphics/Bitmap;)V
      //   205: invokestatic 128	com/pollfish/a/a:n	()I
      //   208: ifne +30 -> 238
      //   211: ldc 36
      //   213: ldc -126
      //   215: invokestatic 54	com/pollfish/f/b:a	(Ljava/lang/String;Ljava/lang/String;)V
      //   218: aload_0
      //   219: getfield 26	com/pollfish/a/a$a:d	Lcom/pollfish/interfaces/a$c;
      //   222: ifnull +16 -> 238
      //   225: aload_0
      //   226: getfield 26	com/pollfish/a/a$a:d	Lcom/pollfish/interfaces/a$c;
      //   229: aload_0
      //   230: getfield 22	com/pollfish/a/a$a:c	Lcom/pollfish/a/a;
      //   233: invokeinterface 135 2 0
      //   238: aload_2
      //   239: monitorexit
      //   240: aconst_null
      //   241: areturn
      //   242: astore_1
      //   243: aload_1
      //   244: invokestatic 140	com/pollfish/f/b/a:a	(Ljava/lang/Throwable;)V
      //   247: ldc 36
      //   249: new 38	java/lang/StringBuilder
      //   252: dup
      //   253: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   256: ldc -114
      //   258: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   261: aload_1
      //   262: invokevirtual 145	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      //   265: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   268: invokestatic 147	com/pollfish/f/b:b	(Ljava/lang/String;Ljava/lang/String;)V
      //   271: aconst_null
      //   272: astore_1
      //   273: goto -191 -> 82
      //   276: astore_1
      //   277: aload_1
      //   278: invokestatic 140	com/pollfish/f/b/a:a	(Ljava/lang/Throwable;)V
      //   281: ldc 36
      //   283: new 38	java/lang/StringBuilder
      //   286: dup
      //   287: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   290: ldc -107
      //   292: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   295: aload_1
      //   296: invokevirtual 145	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      //   299: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   302: invokestatic 147	com/pollfish/f/b:b	(Ljava/lang/String;Ljava/lang/String;)V
      //   305: aconst_null
      //   306: astore_1
      //   307: goto -225 -> 82
      //   310: aload_0
      //   311: getfield 17	com/pollfish/a/a$a:a	Lcom/pollfish/a/a;
      //   314: aload_1
      //   315: invokevirtual 151	com/pollfish/a/a:b	(Landroid/graphics/Bitmap;)V
      //   318: goto -113 -> 205
      //   321: astore_1
      //   322: aload_2
      //   323: monitorexit
      //   324: aload_1
      //   325: athrow
      //   326: astore_1
      //   327: ldc 36
      //   329: new 38	java/lang/StringBuilder
      //   332: dup
      //   333: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   336: ldc -103
      //   338: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   341: aload_0
      //   342: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   345: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   348: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   351: invokestatic 147	com/pollfish/f/b:b	(Ljava/lang/String;Ljava/lang/String;)V
      //   354: aload_1
      //   355: invokestatic 140	com/pollfish/f/b/a:a	(Ljava/lang/Throwable;)V
      //   358: aconst_null
      //   359: areturn
      //   360: astore_1
      //   361: ldc 36
      //   363: new 38	java/lang/StringBuilder
      //   366: dup
      //   367: invokespecial 39	java/lang/StringBuilder:<init>	()V
      //   370: ldc -103
      //   372: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   375: aload_0
      //   376: getfield 24	com/pollfish/a/a$a:b	Ljava/lang/String;
      //   379: invokevirtual 45	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   382: invokevirtual 49	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   385: invokestatic 147	com/pollfish/f/b:b	(Ljava/lang/String;Ljava/lang/String;)V
      //   388: aload_1
      //   389: invokestatic 140	com/pollfish/f/b/a:a	(Ljava/lang/Throwable;)V
      //   392: aconst_null
      //   393: areturn
      // Local variable table:
      //   start	length	slot	name	signature
      //   0	394	0	this	a
      //   0	394	1	paramVarArgs	Void[]
      //   76	7	3	localBufferedInputStream	java.io.BufferedInputStream
      // Exception table:
      //   from	to	target	type
      //   77	82	242	java/lang/OutOfMemoryError
      //   77	82	276	java/lang/Exception
      //   127	197	321	finally
      //   197	205	321	finally
      //   205	238	321	finally
      //   238	240	321	finally
      //   310	318	321	finally
      //   322	324	321	finally
      //   27	77	326	java/io/IOException
      //   77	82	326	java/io/IOException
      //   82	90	326	java/io/IOException
      //   94	127	326	java/io/IOException
      //   243	271	326	java/io/IOException
      //   277	305	326	java/io/IOException
      //   324	326	326	java/io/IOException
      //   27	77	360	java/lang/Exception
      //   82	90	360	java/lang/Exception
      //   94	127	360	java/lang/Exception
      //   243	271	360	java/lang/Exception
      //   277	305	360	java/lang/Exception
      //   324	326	360	java/lang/Exception
    }
  }
}
