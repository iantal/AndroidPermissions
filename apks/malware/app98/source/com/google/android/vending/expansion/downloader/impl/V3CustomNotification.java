package com.google.android.vending.expansion.downloader.impl;

import android.app.Notification;
import android.app.PendingIntent;
import android.content.Context;
import android.os.Build.VERSION;
import android.widget.RemoteViews;
import com.google.android.vending.expansion.downloader.Helpers;

public class V3CustomNotification
  implements DownloadNotification.ICustomNotification
{
  long mCurrentBytes = -1L;
  int mIcon;
  Notification mNotification = new Notification();
  PendingIntent mPendingIntent;
  CharSequence mTicker;
  long mTimeRemaining;
  CharSequence mTitle;
  long mTotalBytes = -1L;
  
  public V3CustomNotification() {}
  
  public void setCurrentBytes(long paramLong)
  {
    this.mCurrentBytes = paramLong;
  }
  
  public void setIcon(int paramInt)
  {
    this.mIcon = paramInt;
  }
  
  public void setPendingIntent(PendingIntent paramPendingIntent)
  {
    this.mPendingIntent = paramPendingIntent;
  }
  
  public void setTicker(CharSequence paramCharSequence)
  {
    this.mTicker = paramCharSequence;
  }
  
  public void setTimeRemaining(long paramLong)
  {
    this.mTimeRemaining = paramLong;
  }
  
  public void setTitle(CharSequence paramCharSequence)
  {
    this.mTitle = paramCharSequence;
  }
  
  public void setTotalBytes(long paramLong)
  {
    this.mTotalBytes = paramLong;
  }
  
  public Notification updateNotification(Context paramContext)
  {
    Notification localNotification = this.mNotification;
    localNotification.icon = this.mIcon;
    localNotification.flags |= 0x2;
    if (Build.VERSION.SDK_INT > 10) {
      localNotification.flags |= 0x8;
    }
    RemoteViews localRemoteViews = new RemoteViews(paramContext.getPackageName(), 2130903227);
    localRemoteViews.setTextViewText(2131099734, this.mTitle);
    localRemoteViews.setViewVisibility(2131099735, 0);
    localRemoteViews.setTextViewText(2131099735, Helpers.getDownloadProgressString(this.mCurrentBytes, this.mTotalBytes));
    localRemoteViews.setViewVisibility(2131100240, 0);
    int i = (int)(this.mTotalBytes >> 8);
    int j = (int)(this.mCurrentBytes >> 8);
    if (this.mTotalBytes <= 0L) {}
    for (boolean bool = true;; bool = false)
    {
      localRemoteViews.setProgressBar(2131099725, i, j, bool);
      localRemoteViews.setViewVisibility(2131100239, 0);
      localRemoteViews.setTextViewText(2131100239, paramContext.getString(2131362456, new Object[] { Helpers.getTimeRemaining(this.mTimeRemaining) }));
      localRemoteViews.setTextViewText(2131100238, Helpers.getDownloadProgressPercent(this.mCurrentBytes, this.mTotalBytes));
      localRemoteViews.setImageViewResource(2131100237, this.mIcon);
      localNotification.contentView = localRemoteViews;
      localNotification.contentIntent = this.mPendingIntent;
      return localNotification;
    }
  }
}
