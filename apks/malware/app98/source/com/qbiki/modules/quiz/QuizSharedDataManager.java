package com.qbiki.modules.quiz;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import com.qbiki.seattleclouds.App;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class QuizSharedDataManager
{
  private static final String PREFS_FILE_DEFAULT = "com.qbiki.modules.quiz";
  private static Context currentContext;
  private static QuizSharedDataManager instance = null;
  
  public QuizSharedDataManager(Context paramContext) {}
  
  public static QuizSharedDataManager getInstance(Context paramContext)
  {
    if ((instance == null) && (paramContext != null)) {
      instance = new QuizSharedDataManager(paramContext);
    }
    currentContext = paramContext;
    return instance;
  }
  
  private SharedPreferences readPagePrefs(String paramString)
  {
    paramString = App.publisherId + "." + App.username + "." + App.appId + "." + paramString + "." + "com.qbiki.modules.quiz";
    return currentContext.getSharedPreferences(paramString, 0);
  }
  
  public boolean didSaveScore(Integer paramInteger, String paramString1, String paramString2)
  {
    paramString1 = App.publisherId + "." + App.username + "." + App.appId + "." + paramString1 + "." + "com.qbiki.modules.quiz";
    paramString1 = currentContext.getSharedPreferences(paramString1, 0).edit();
    paramString1.putInt(paramString2, paramInteger.intValue());
    paramString1.commit();
    return true;
  }
  
  public ArrayList<QuizScore> getHighScoresArrayForQuizNamed(String paramString)
  {
    ArrayList localArrayList = new ArrayList();
    paramString = readPagePrefs(paramString).getAll().entrySet().iterator();
    while (paramString.hasNext())
    {
      Object localObject = (Map.Entry)paramString.next();
      String str = (String)((Map.Entry)localObject).getKey();
      localObject = (Integer)((Map.Entry)localObject).getValue();
      QuizScore localQuizScore = new QuizScore();
      localQuizScore.setPlayer(str);
      localQuizScore.setPoints((Integer)localObject);
      localArrayList.add(localQuizScore);
    }
    return localArrayList;
  }
  
  public SharedPreferences getHighScoresDictionaryForQuizNamed(String paramString)
  {
    return readPagePrefs(paramString);
  }
}
