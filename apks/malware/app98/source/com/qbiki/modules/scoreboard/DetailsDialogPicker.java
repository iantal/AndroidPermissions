package com.qbiki.modules.scoreboard;

import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;

public class DetailsDialogPicker
  extends DialogFragment
{
  boolean DEBUG = false;
  private DialogInterface.OnClickListener applyListener;
  CheckBox clearScoresCkBox;
  private EditText fighter1_name;
  private EditText fighter2_name;
  private Spinner roundPicker;
  Integer roundsCount;
  private String str_fighter1_name;
  private String str_fighter2_name;
  
  public DetailsDialogPicker() {}
  
  private void initSpinner(int paramInt1, int paramInt2, Context paramContext)
  {
    String[] arrayOfString = new String[paramInt1];
    int j = 0;
    int i = 1;
    while (j < paramInt1)
    {
      arrayOfString[j] = ("" + i);
      j += 1;
      i += 1;
    }
    paramContext = new ArrayAdapter(paramContext, 17367048, arrayOfString);
    paramContext.setDropDownViewResource(17367049);
    if ((this.roundPicker != null) && (paramContext != null)) {
      this.roundPicker.setAdapter(paramContext);
    }
    this.roundPicker.setPrompt(getString(2131362228));
    this.roundPicker.setOnItemSelectedListener(new RoundSelectedListener());
    if ((paramInt2 >= 0) && (paramInt2 < paramInt1))
    {
      this.roundPicker.setSelection(paramInt2);
      return;
    }
    this.roundPicker.setSelection(paramInt1 / 2);
  }
  
  public String getFighter1Name()
  {
    return this.fighter1_name.getText().toString();
  }
  
  public String getFighter2Name()
  {
    return this.fighter2_name.getText().toString();
  }
  
  public Integer getRoundsCount()
  {
    return this.roundsCount;
  }
  
  public boolean ifNeedClearScores()
  {
    return this.clearScoresCkBox.isChecked();
  }
  
  public Dialog onCreateDialog(Bundle paramBundle)
  {
    paramBundle = getActivity().getLayoutInflater().inflate(2130903205, null);
    this.fighter1_name = ((EditText)paramBundle.findViewById(2131100189));
    this.fighter2_name = ((EditText)paramBundle.findViewById(2131100191));
    this.clearScoresCkBox = ((CheckBox)paramBundle.findViewById(2131100192));
    this.fighter1_name.setText(this.str_fighter1_name);
    this.fighter2_name.setText(this.str_fighter2_name);
    this.roundPicker = ((Spinner)paramBundle.findViewById(2131100194));
    FragmentActivity localFragmentActivity = getActivity();
    if (this.roundsCount == null) {
      this.roundsCount = Integer.valueOf(12);
    }
    initSpinner(12, this.roundsCount.intValue(), localFragmentActivity);
    return new AlertDialog.Builder(getActivity()).setView(paramBundle).setPositiveButton(2131362229, this.applyListener).setNegativeButton(2131362230, null).create();
  }
  
  public void setApplyListener(DialogInterface.OnClickListener paramOnClickListener)
  {
    this.applyListener = paramOnClickListener;
  }
  
  public void setFighter1Name(String paramString)
  {
    this.str_fighter1_name = paramString;
    if (this.fighter1_name != null) {
      this.fighter1_name.setText(this.str_fighter1_name);
    }
  }
  
  public void setFighter2Name(String paramString)
  {
    this.str_fighter2_name = paramString;
    if (this.fighter2_name != null) {
      this.fighter2_name.setText(this.str_fighter2_name);
    }
  }
  
  public void setRoundsCount(Integer paramInteger)
  {
    this.roundsCount = paramInteger;
  }
  
  public class RoundSelectedListener
    implements AdapterView.OnItemSelectedListener
  {
    public RoundSelectedListener() {}
    
    public void onItemSelected(AdapterView<?> paramAdapterView, View paramView, int paramInt, long paramLong)
    {
      paramAdapterView = (String)DetailsDialogPicker.this.roundPicker.getAdapter().getItem(paramInt);
      DetailsDialogPicker.this.roundsCount = Integer.valueOf(Integer.parseInt(paramAdapterView));
    }
    
    public void onNothingSelected(AdapterView<?> paramAdapterView) {}
  }
}
