package com.qbiki.seattleclouds;

import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import com.qbiki.widget.SCFragmentTabHost;
import java.util.List;

public class LegacyTabsAppActivity
  extends BaseAppActivity
{
  private static final String TAG = "LegacyTabsAppActivity";
  private SCFragmentTabHost mTabHost;
  
  public LegacyTabsAppActivity() {}
  
  private void addTab(String paramString1, String paramString2, Drawable paramDrawable, FragmentInfo paramFragmentInfo)
  {
    Object localObject = null;
    try
    {
      Class localClass = getClassLoader().loadClass(paramFragmentInfo.getClassName());
      localObject = localClass;
    }
    catch (ClassNotFoundException localClassNotFoundException)
    {
      for (;;)
      {
        Log.e("LegacyTabsAppActivity", "Fragment class not found: " + paramFragmentInfo.getClassName(), localClassNotFoundException);
      }
    }
    if (localObject != null) {
      this.mTabHost.addTab(this.mTabHost.newTabSpec(paramString1).setIndicator(paramString2, paramDrawable), localObject, paramFragmentInfo.getArguments());
    }
  }
  
  private void loadContent()
  {
    App.appConfig.getNavigationSettings().setNavigationItemsOnBottom(false);
    App.appConfig.getNavigationSettings().setLegacyTabWidgetEnabled(true);
    this.mTabHost = ((SCFragmentTabHost)findViewById(16908306));
    this.mTabHost.setup(this, getSupportFragmentManager(), 2131099722, App.appConfig.getNavigationSettings(), App.appConfig.getNavigationItems());
    int i = 0;
    while (i < App.appConfig.getNavigationItems().size())
    {
      String str2 = "tab" + (i + 1) + ".html";
      FragmentInfo localFragmentInfo = super.getRootPageFragmentInfo(str2);
      Object localObject = (NavigationItem)App.appConfig.getNavigationItems().get(i);
      BitmapDrawable localBitmapDrawable = App.getScaledDrawableResource(((NavigationItem)localObject).getIcon());
      String str1 = ((NavigationItem)localObject).getText();
      localObject = str1;
      if (str1 == null) {
        localObject = getString(2131361900) + " " + i;
      }
      addTab(str2, (String)localObject, localBitmapDrawable, localFragmentInfo);
      i += 1;
    }
    this.mTabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener()
    {
      public void onTabChanged(String paramAnonymousString)
      {
        LegacyTabsAppActivity.this.onTabChanged(paramAnonymousString);
      }
    });
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    if (App.appConfig.isInitialized())
    {
      setContentView(2130903064);
      loadContent();
    }
  }
}
