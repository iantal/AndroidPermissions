package com.qbiki.util;

import android.app.Activity;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;

public class GestureFilter
  extends GestureDetector.SimpleOnGestureListener
{
  private static final int ACTION_FAKE = -13;
  public static final int MODE_DYNAMIC = 2;
  public static final int MODE_SOLID = 1;
  public static final int MODE_TRANSPARENT = 0;
  public static final int SWIPE_DOWN = 2;
  public static final int SWIPE_LEFT = 3;
  public static final int SWIPE_RIGHT = 4;
  public static final int SWIPE_UP = 1;
  private Activity context;
  private GestureDetector detector;
  private SimpleGestureListener listener;
  private int mode = 2;
  private boolean running = true;
  private int swipe_Max_Distance = 350;
  private int swipe_Min_Distance = 100;
  private int swipe_Min_Velocity = 100;
  private boolean tapIndicator = false;
  
  public GestureFilter(Activity paramActivity, SimpleGestureListener paramSimpleGestureListener)
  {
    this.context = paramActivity;
    this.detector = new GestureDetector(paramActivity, this);
    this.listener = paramSimpleGestureListener;
  }
  
  public int getMode()
  {
    return this.mode;
  }
  
  public int getSwipeMaxDistance()
  {
    return this.swipe_Max_Distance;
  }
  
  public int getSwipeMinDistance()
  {
    return this.swipe_Min_Distance;
  }
  
  public int getSwipeMinVelocity()
  {
    return this.swipe_Min_Velocity;
  }
  
  public boolean onDoubleTap(MotionEvent paramMotionEvent)
  {
    this.listener.onDoubleTap();
    return true;
  }
  
  public boolean onDoubleTapEvent(MotionEvent paramMotionEvent)
  {
    return true;
  }
  
  public boolean onFling(MotionEvent paramMotionEvent1, MotionEvent paramMotionEvent2, float paramFloat1, float paramFloat2)
  {
    float f1 = Math.abs(paramMotionEvent1.getX() - paramMotionEvent2.getX());
    float f2 = Math.abs(paramMotionEvent1.getY() - paramMotionEvent2.getY());
    if ((f1 > this.swipe_Max_Distance) || (f2 > this.swipe_Max_Distance)) {}
    do
    {
      return false;
      paramFloat1 = Math.abs(paramFloat1);
      paramFloat2 = Math.abs(paramFloat2);
      if ((paramFloat1 > this.swipe_Min_Velocity) && (f1 > this.swipe_Min_Distance))
      {
        if (paramMotionEvent1.getX() > paramMotionEvent2.getX()) {
          this.listener.onSwipe(3);
        }
        for (;;)
        {
          return true;
          this.listener.onSwipe(4);
        }
      }
    } while ((paramFloat2 <= this.swipe_Min_Velocity) || (f2 <= this.swipe_Min_Distance));
    if (paramMotionEvent1.getY() > paramMotionEvent2.getY()) {
      this.listener.onSwipe(1);
    }
    for (;;)
    {
      return true;
      this.listener.onSwipe(2);
    }
  }
  
  public boolean onSingleTapConfirmed(MotionEvent paramMotionEvent)
  {
    if (this.mode == 2)
    {
      paramMotionEvent.setAction(-13);
      this.context.dispatchTouchEvent(paramMotionEvent);
    }
    return false;
  }
  
  public boolean onSingleTapUp(MotionEvent paramMotionEvent)
  {
    this.tapIndicator = true;
    return false;
  }
  
  public boolean onTouchEvent(MotionEvent paramMotionEvent)
  {
    boolean bool1;
    if (!this.running) {
      bool1 = false;
    }
    boolean bool2;
    do
    {
      do
      {
        return bool1;
        bool2 = this.detector.onTouchEvent(paramMotionEvent);
        if (this.mode == 1)
        {
          paramMotionEvent.setAction(3);
          return bool2;
        }
        bool1 = bool2;
      } while (this.mode != 2);
      if (paramMotionEvent.getAction() == -13)
      {
        paramMotionEvent.setAction(1);
        return bool2;
      }
      if (bool2)
      {
        paramMotionEvent.setAction(3);
        return bool2;
      }
      bool1 = bool2;
    } while (!this.tapIndicator);
    paramMotionEvent.setAction(0);
    this.tapIndicator = false;
    return bool2;
  }
  
  public void setEnabled(boolean paramBoolean)
  {
    this.running = paramBoolean;
  }
  
  public void setMode(int paramInt)
  {
    this.mode = paramInt;
  }
  
  public void setSwipeMaxDistance(int paramInt)
  {
    this.swipe_Max_Distance = paramInt;
  }
  
  public void setSwipeMinDistance(int paramInt)
  {
    this.swipe_Min_Distance = paramInt;
  }
  
  public void setSwipeMinVelocity(int paramInt)
  {
    this.swipe_Min_Velocity = paramInt;
  }
  
  public static abstract interface SimpleGestureListener
  {
    public abstract void onDoubleTap();
    
    public abstract void onSwipe(int paramInt);
  }
}
