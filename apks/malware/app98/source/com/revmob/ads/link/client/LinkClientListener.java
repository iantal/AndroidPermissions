package com.revmob.ads.link.client;

import com.revmob.RevMobAdsListener;
import com.revmob.ads.internal.Ad;
import com.revmob.ads.internal.AdRevMobClientListener;
import com.revmob.internal.RMLog;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class LinkClientListener
  extends AdRevMobClientListener
{
  public LinkClientListener(Ad paramAd, RevMobAdsListener paramRevMobAdsListener)
  {
    super(paramAd, paramRevMobAdsListener);
  }
  
  public static LinkData createData(String paramString)
    throws JSONException
  {
    Object localObject = new JSONObject(paramString).getJSONObject("anchor");
    paramString = getAppOrSite((JSONObject)localObject);
    boolean bool1 = getOpenInside((JSONObject)localObject);
    JSONArray localJSONArray = ((JSONObject)localObject).getJSONArray("links");
    String str = getClickUrl(localJSONArray);
    boolean bool2 = getFollowRedirect((JSONObject)localObject);
    localObject = getImpressionUrl(localJSONArray);
    RMLog.i("Link loaded");
    return new LinkData((String)localObject, str, bool2, paramString, bool1);
  }
  
  public void handleResponse(String paramString)
    throws JSONException
  {
    this.ad.updateWithData(createData(paramString));
  }
}
