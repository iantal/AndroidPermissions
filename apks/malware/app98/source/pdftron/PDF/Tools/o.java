package pdftron.PDF.Tools;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.graphics.RectF;
import android.view.MotionEvent;
import pdftron.PDF.Annot.BorderStyle;
import pdftron.PDF.Annots.Circle;
import pdftron.PDF.ColorPt;
import pdftron.PDF.PDFDoc;
import pdftron.PDF.PDFViewCtrl;
import pdftron.PDF.Page;

final class o
  extends r
{
  private RectF u = new RectF();
  
  public o(PDFViewCtrl paramPDFViewCtrl)
  {
    super(paramPDFViewCtrl);
    this.j = 6;
  }
  
  public final int getMode()
  {
    return 6;
  }
  
  public final void onDraw(Canvas paramCanvas, Matrix paramMatrix)
  {
    float f1 = Math.min(this.a.x, this.b.x);
    float f2 = Math.max(this.a.x, this.b.x);
    float f3 = Math.min(this.a.y, this.b.y);
    float f4 = Math.max(this.a.y, this.b.y);
    float f5 = this.g / 2.0F;
    this.u.set(f1 + f5, f3 + f5, f2 - f5, f4 - f5);
    paramCanvas.drawArc(this.u, 0.0F, 360.0F, false, this.c);
  }
  
  public final boolean onUp(MotionEvent paramMotionEvent, int paramInt)
  {
    this.j = 2;
    try
    {
      this.i.lockDoc(true);
      paramMotionEvent = b();
      if (paramMotionEvent != null)
      {
        paramMotionEvent = Circle.create(this.i.getDoc(), paramMotionEvent);
        Annot.BorderStyle localBorderStyle = paramMotionEvent.getBorderStyle();
        localBorderStyle.setWidth(this.f);
        paramMotionEvent.setBorderStyle(localBorderStyle);
        double d1 = Color.red(this.h) / 255.0D;
        double d2 = Color.green(this.h) / 255.0D;
        double d3 = Color.blue(this.h) / 255.0D;
        double d4 = Color.alpha(this.h) / 255.0D;
        paramMotionEvent.setColor(new ColorPt(d1, d2, d3), 3);
        paramMotionEvent.setOpacity(d4);
        paramMotionEvent.refreshAppearance();
        this.i.getDoc().getPage(this.d).annotPushBack(paramMotionEvent);
        this.k = paramMotionEvent;
        this.l = this.d;
        g();
        this.i.update(this.k, this.l);
      }
    }
    catch (Exception paramMotionEvent)
    {
      for (;;)
      {
        this.i.unlockDoc();
      }
    }
    finally
    {
      this.i.unlockDoc();
    }
    this.i.waitForRendering();
    return false;
  }
}
