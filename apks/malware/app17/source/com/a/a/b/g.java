package com.a.a.b;

import android.graphics.Bitmap;
import android.os.Handler;
import android.os.Looper;
import android.text.TextUtils;
import android.widget.ImageView;
import com.a.a.b.f.c;
import com.a.a.c.e;

public class g
{
  public static final String a = g.class.getSimpleName();
  private static volatile g e;
  private h b;
  private m c;
  private final com.a.a.b.f.a d = new c();
  
  protected g() {}
  
  private static Handler a(d paramD)
  {
    Handler localHandler = paramD.r();
    if (paramD.s()) {
      paramD = null;
    }
    do
    {
      do
      {
        return paramD;
        paramD = localHandler;
      } while (localHandler != null);
      paramD = localHandler;
    } while (Looper.myLooper() != Looper.getMainLooper());
    return new Handler();
  }
  
  public static g a()
  {
    if (e == null) {}
    try
    {
      if (e == null) {
        e = new g();
      }
      return e;
    }
    finally {}
  }
  
  private void d()
  {
    if (this.b == null) {
      throw new IllegalStateException("ImageLoader must be init with configuration before using");
    }
  }
  
  public void a(h paramH)
  {
    if (paramH == null) {
      try
      {
        throw new IllegalArgumentException("ImageLoader configuration can not be initialized with null");
      }
      finally {}
    }
    if (this.b == null)
    {
      e.a("Initialize ImageLoader with configuration", new Object[0]);
      this.c = new m(paramH);
      this.b = paramH;
    }
    for (;;)
    {
      return;
      e.c("Try to initialize ImageLoader which had already been initialized before. To re-init ImageLoader with new configuration call ImageLoader.destroy() at first.", new Object[0]);
    }
  }
  
  public void a(String paramString, ImageView paramImageView, d paramD)
  {
    a(paramString, new com.a.a.b.e.b(paramImageView), paramD, null, null);
  }
  
  public void a(String paramString, com.a.a.b.e.a paramA, d paramD, com.a.a.b.f.a paramA1, com.a.a.b.f.b paramB)
  {
    d();
    if (paramA == null) {
      throw new IllegalArgumentException("Wrong arguments were passed to displayImage() method (ImageView reference must not be null)");
    }
    if (paramA1 == null) {
      paramA1 = this.d;
    }
    for (;;)
    {
      if (paramD == null) {
        paramD = this.b.r;
      }
      for (;;)
      {
        if (TextUtils.isEmpty(paramString))
        {
          this.c.b(paramA);
          paramA1.a(paramString, paramA.d());
          if (paramD.b()) {
            paramA.a(paramD.b(this.b.a));
          }
          for (;;)
          {
            paramA1.a(paramString, paramA.d(), null);
            return;
            paramA.a(null);
          }
        }
        com.a.a.b.a.f localF = com.a.a.c.a.a(paramA, this.b.a());
        String str = com.a.a.c.f.a(paramString, localF);
        this.c.a(paramA, str);
        paramA1.a(paramString, paramA.d());
        Bitmap localBitmap = (Bitmap)this.b.n.b(str);
        if ((localBitmap != null) && (!localBitmap.isRecycled()))
        {
          e.a("Load image from memory cache [%s]", new Object[] { str });
          if (paramD.e())
          {
            paramString = new o(paramString, paramA, localF, str, paramD, paramA1, paramB, this.c.a(paramString));
            paramString = new u(this.c, localBitmap, paramString, a(paramD));
            if (paramD.s())
            {
              paramString.run();
              return;
            }
            this.c.a(paramString);
            return;
          }
          paramD.q().a(localBitmap, paramA, com.a.a.b.a.g.c);
          paramA1.a(paramString, paramA.d(), localBitmap);
          return;
        }
        if (paramD.a()) {
          paramA.a(paramD.a(this.b.a));
        }
        for (;;)
        {
          paramString = new o(paramString, paramA, localF, str, paramD, paramA1, paramB, this.c.a(paramString));
          paramString = new p(this.c, paramString, a(paramD));
          if (!paramD.s()) {
            break;
          }
          paramString.run();
          return;
          if (paramD.g()) {
            paramA.a(null);
          }
        }
        this.c.a(paramString);
        return;
      }
    }
  }
  
  @Deprecated
  public com.a.a.a.a.b b()
  {
    return c();
  }
  
  public com.a.a.a.a.b c()
  {
    d();
    return this.b.o;
  }
}
