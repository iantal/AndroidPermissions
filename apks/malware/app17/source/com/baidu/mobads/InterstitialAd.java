package com.baidu.mobads;

import android.app.Activity;
import android.content.Context;
import android.graphics.Rect;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import com.baidu.mobads.a.d;

public final class InterstitialAd
{
  private AdView a;
  private boolean b = false;
  private Context c;
  private AdSize d;
  private String e;
  private InterstitialAdListener f = new c(this);
  
  public InterstitialAd(Context paramContext)
  {
    this(paramContext, AdSize.InterstitialGame, "");
  }
  
  public InterstitialAd(Context paramContext, AdSize paramAdSize, String paramString)
  {
    this.c = paramContext;
    if ((paramAdSize.getValue() < 6) || (paramAdSize.getValue() > 10)) {
      d.b("Please use the right AdSize when new InterstitialAd");
    }
    for (this.d = AdSize.InterstitialGame;; this.d = paramAdSize)
    {
      this.e = paramString;
      return;
    }
  }
  
  public static void setAppSec(Context paramContext, String paramString)
  {
    AdView.setAppSec(paramContext, paramString);
  }
  
  public static void setAppSid(Context paramContext, String paramString)
  {
    AdView.setAppSid(paramContext, paramString);
  }
  
  protected AdView getAdView()
  {
    return this.a;
  }
  
  public boolean isAdReady()
  {
    return this.b;
  }
  
  public void loadAd()
  {
    try
    {
      this.b = false;
      if (this.a != null)
      {
        this.a.prepareForInterstitial(false);
        return;
      }
      this.a = new AdView(this.c, false, this.d, this.e);
      this.a.setInterstialListener(this.f, this);
      return;
    }
    catch (Exception localException)
    {
      d.b("Interstitial.loadAd", localException);
    }
  }
  
  protected void removeAd()
  {
    try
    {
      ViewGroup localViewGroup = (ViewGroup)this.a.getParent();
      localViewGroup.removeView(this.a);
      ((ViewGroup)((Activity)localViewGroup.getContext()).getWindow().getDecorView()).removeView(localViewGroup);
      return;
    }
    catch (Exception localException)
    {
      d.b("Interstitial.removeAd", localException);
    }
  }
  
  protected void setAdReady(boolean paramBoolean)
  {
    this.b = paramBoolean;
  }
  
  public void setListener(InterstitialAdListener paramInterstitialAdListener)
  {
    if (paramInterstitialAdListener == null) {
      throw new IllegalArgumentException();
    }
    this.f = paramInterstitialAdListener;
  }
  
  public void showAd(Activity paramActivity)
  {
    for (;;)
    {
      int i;
      try
      {
        if ((this.a == null) || (!this.b))
        {
          d.a(new Object[] { "InterstitialAd.showAd,but value not ready:adView=", this.a, ";isAdReady=", Boolean.valueOf(this.b) });
          return;
        }
        ViewGroup localViewGroup = (ViewGroup)paramActivity.getWindow().getDecorView();
        if (this.a.getParent() != null)
        {
          i = 0;
          if (i < localViewGroup.getChildCount())
          {
            if (localViewGroup.getChildAt(i) != this.a.getParent()) {
              break label218;
            }
            localViewGroup.removeView((View)this.a.getParent());
            break label218;
          }
        }
        Object localObject = new Rect();
        paramActivity.getWindow().getDecorView().getWindowVisibleDisplayFrame((Rect)localObject);
        i = ((Rect)localObject).top;
        this.a.prepareForInterstitial(true);
        paramActivity = new RelativeLayout(paramActivity);
        paramActivity.setBackgroundColor(0);
        localObject = new RelativeLayout.LayoutParams(-1, -1);
        ((RelativeLayout.LayoutParams)localObject).topMargin = i;
        paramActivity.addView(this.a, (ViewGroup.LayoutParams)localObject);
        localViewGroup.addView(paramActivity, new RelativeLayout.LayoutParams(-1, -1));
        this.b = false;
        return;
      }
      catch (Exception paramActivity)
      {
        d.b("Interstitial.showAd", paramActivity);
        return;
      }
      label218:
      i += 1;
    }
  }
}
