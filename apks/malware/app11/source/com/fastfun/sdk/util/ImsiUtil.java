package com.fastfun.sdk.util;

import android.content.Context;
import android.telephony.TelephonyManager;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class ImsiUtil
{
  public ImsiUtil() {}
  
  private static String createImsi()
  {
    Random localRandom = new Random();
    StringBuffer localStringBuffer = new StringBuffer("460");
    int i = localRandom.nextInt(10);
    int j = localRandom.nextInt(10);
    if (i <= 9) {
      if (j <= 3)
      {
        localStringBuffer.append("00");
        i = 0;
      }
    }
    for (;;)
    {
      if (i >= 10)
      {
        return localStringBuffer.toString();
        if (j <= 7)
        {
          localStringBuffer.append("02");
          break;
        }
        if (j > 9) {
          break;
        }
        localStringBuffer.append("07");
        break;
        if (i <= 8)
        {
          if (j <= 5)
          {
            localStringBuffer.append("01");
            break;
          }
          if (j > 9) {
            break;
          }
          localStringBuffer.append("06");
          break;
        }
        if (i > 9) {
          break;
        }
        if (j <= 5)
        {
          localStringBuffer.append("03");
          break;
        }
        if (j > 9) {
          break;
        }
        localStringBuffer.append("05");
        break;
      }
      localStringBuffer.append(localRandom.nextInt(10));
      i += 1;
    }
  }
  
  public static String getImsi(Context paramContext)
  {
    List localList = getImsiList(paramContext);
    int i;
    if (localList.size() > 0) {
      i = 0;
    }
    for (;;)
    {
      Object localObject1;
      if (i >= localList.size()) {
        localObject1 = null;
      }
      Object localObject2;
      do
      {
        if (localObject1 != null)
        {
          localObject2 = localObject1;
          if (((String)localObject1).length() >= 15) {}
        }
        else
        {
          localObject2 = SharedUtil.getString(paramContext, "IMSI_NAME", "Key_IMSI", null);
        }
        if (localObject2 != null)
        {
          localObject1 = localObject2;
          if (((String)localObject2).length() >= 15) {}
        }
        else
        {
          localObject1 = createImsi();
          SharedUtil.editString(paramContext, "IMSI_NAME", "Key_IMSI", (String)localObject1);
        }
        return localObject1;
        localObject2 = (String)localList.get(i);
        if (localObject2 == null) {
          break;
        }
        localObject1 = localObject2;
      } while (((String)localObject2).length() >= 15);
      i += 1;
    }
  }
  
  private static List getImsiList(Context paramContext)
  {
    ArrayList localArrayList = new ArrayList();
    TelephonyManager localTelephonyManager = (TelephonyManager)paramContext.getSystemService("phone");
    String str = localTelephonyManager.getSubscriberId();
    try
    {
      localObject = TelephonyManager.class.getDeclaredMethod("getSubscriberIdGemini", new Class[] { Integer.TYPE });
      if (localObject != null) {}
    }
    catch (Exception paramContext)
    {
      try
      {
        paramContext = TelephonyManager.class.getDeclaredMethod("getSubscriberId", new Class[] { Integer.TYPE });
        for (;;)
        {
          if (str != null) {}
          try
          {
            if (str.length() > 0) {
              localArrayList.add(str);
            }
            if (localObject != null)
            {
              paramContext = (String)((Method)localObject).invoke(localTelephonyManager, new Object[] { Integer.valueOf(0) });
              if ((paramContext != null) && (!paramContext.equals(str))) {
                localArrayList.add(paramContext);
              }
              paramContext = (String)((Method)localObject).invoke(localTelephonyManager, new Object[] { Integer.valueOf(1) });
              if ((paramContext != null) && (!paramContext.equals(str)))
              {
                localArrayList.add(paramContext);
                return localArrayList;
              }
            }
            else if (paramContext != null)
            {
              localObject = (String)paramContext.invoke(localTelephonyManager, new Object[] { Integer.valueOf(0) });
              if ((localObject != null) && (!((String)localObject).equals(str))) {
                localArrayList.add(localObject);
              }
              paramContext = (String)paramContext.invoke(localTelephonyManager, new Object[] { Integer.valueOf(1) });
              if ((paramContext != null) && (!paramContext.equals(str)))
              {
                localArrayList.add(paramContext);
                return localArrayList;
              }
            }
            else
            {
              paramContext = localTelephonyManager.getSubscriberId();
              if ((paramContext != null) && (!paramContext.equals(str)))
              {
                localArrayList.add(paramContext);
                return localArrayList;
                paramContext = null;
                continue;
              }
            }
            return localArrayList;
          }
          catch (Exception paramContext) {}
        }
        paramContext = paramContext;
        Object localObject = null;
      }
      catch (Exception paramContext)
      {
        for (;;)
        {
          paramContext = null;
        }
      }
    }
    return localArrayList;
  }
}
