package com.zhangzhifu.sdk.ui;

import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.TextView;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.util.ImageUtil;
import com.zhangzhifu.sdk.util.NinePatchUtils;
import java.math.BigDecimal;

public class FeeView
  extends RelativeLayout
  implements View.OnClickListener
{
  public static final String ADV_PIC = "zhangpay_pic/";
  public static final int TEXT_SIZE = 16;
  public static String htmlString;
  public static String showString;
  public Button concle;
  public Button confirm;
  private RelativeLayout dm = new RelativeLayout(getContext(), null);
  private ImageView dn;
  private TextView jdField_do;
  private WebView dp;
  private FeeView.OnButtonClick dq;
  public TextView tv_Version;
  
  public FeeView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
    setBackgroundColor(Color.argb(102, 0, 0, 0));
    paramContext = NinePatchUtils.decodeDrawableFromAsset(getContext(), "zhangpay_pic/zhangpay_bg.9.png");
    this.dm.setBackgroundDrawable(paramContext);
    int i = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    int j = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    ImageUtil.getScreenDensity(getContext());
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(13, -1);
    this.dm.setId(1996);
    addView(this.dm, paramContext);
    i = (int)(50.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(ImageUtil.getScreenDensity(getContext()) * 250.0F);
    ImageUtil.getScreenDensity(getContext());
    paramContext = new RelativeLayout.LayoutParams(j, i);
    paramContext.addRule(13, -1);
    paramContext.addRule(10, -1);
    this.dn = new ImageView(getContext());
    this.dn.setImageBitmap(ImageUtil.getImageFromAssetsFile("zhangpay_pic/zhangpay_top_title.png", getContext(), j, i));
    this.dn.setId(1997);
    this.dm.addView(this.dn, paramContext);
    i = (int)(220.0F * ImageUtil.getScreenDensity(getContext()));
    j = (int)(ImageUtil.getScreenDensity(getContext()) * 100.0F);
    int k = (int)(10.0F * ImageUtil.getScreenDensity(getContext()));
    paramContext = new RelativeLayout.LayoutParams(i, j);
    paramContext.addRule(3, this.dn.getId());
    paramContext.topMargin = k;
    paramContext.addRule(14, -1);
    this.jdField_do = new TextView(getContext());
    this.jdField_do.setTextSize(17.0F);
    paramAttributeSet = SharePreferUtil.getInstance().getMoney(getContext());
    i = Integer.valueOf(paramAttributeSet).intValue();
    this.jdField_do.setText("商品价格:" + changeF2Y(paramAttributeSet) + "￥");
    this.jdField_do.setTextColor(-16777216);
    if ((i >= 10) && (i < 100)) {
      this.jdField_do.setText("购买商品详情:" + SharePreferUtil.getInstance().getTradeName(getContext()) + ",价格为:" + changeF2Y(paramAttributeSet) + "元");
    }
    for (;;)
    {
      this.jdField_do.setTextColor(-1728053248);
      this.jdField_do.setId(1998);
      this.dm.addView(this.jdField_do, paramContext);
      i = (int)(220.0F * ImageUtil.getScreenDensity(getContext()));
      j = (int)(170.0F * ImageUtil.getScreenDensity(getContext()));
      k = (int)(75.0F * ImageUtil.getScreenDensity(getContext()));
      paramContext = new RelativeLayout.LayoutParams(i, j);
      paramContext.addRule(3, this.dn.getId());
      paramContext.topMargin = k;
      paramContext.addRule(14, -1);
      this.jdField_do = new TextView(getContext());
      this.jdField_do.setTextSize(14.0F);
      this.jdField_do.setTextColor(Color.rgb(82, 161, 232));
      this.jdField_do.setId(2000);
      this.dm.addView(this.jdField_do, paramContext);
      i = (int)(20.0F * ImageUtil.getScreenDensity(getContext()));
      j = (int)(150.0F * ImageUtil.getScreenDensity(getContext()));
      paramContext = new RelativeLayout.LayoutParams((int)(200.0F * ImageUtil.getScreenDensity(getContext())), j);
      paramContext.addRule(12, -1);
      paramContext.addRule(13, -1);
      paramContext.leftMargin = i;
      paramContext.rightMargin = i;
      paramContext.bottomMargin = i;
      this.dp = new WebView(getContext());
      this.dp.setId(2001);
      this.dp.setScrollBarStyle(0);
      i = (int)(40.0F * ImageUtil.getScreenDensity(getContext()));
      j = (int)(180.0F * ImageUtil.getScreenDensity(getContext()));
      k = (int)(10.0F * ImageUtil.getScreenDensity(getContext()));
      paramContext = new RelativeLayout.LayoutParams(j, i);
      paramContext.addRule(13, -1);
      paramContext.bottomMargin = ((int)(6.0F * ImageUtil.getScreenDensity(getContext())));
      paramContext.addRule(12, this.dp.getId());
      paramContext.topMargin = k;
      this.confirm = new Button(getContext());
      this.confirm.setOnClickListener(this);
      this.confirm.setBackgroundDrawable(ImageUtil.newSelector(getContext(), "zhangpay_pic/button_normal.9.png", "zhangpay_pic/button_on.9.png", "zhangpay_pic/button_on.9.png", "zhangpay_pic/button_on.9.png"));
      this.confirm.setId(2002);
      this.confirm.setText("确认");
      this.confirm.setTextColor(-1);
      this.confirm.setTextSize(22.0F);
      this.dm.addView(this.confirm, paramContext);
      paramContext = new RelativeLayout.LayoutParams((int)(ImageUtil.getScreenDensity(getContext()) * 100.0F), (int)(ImageUtil.getScreenDensity(getContext()) * 100.0F));
      paramContext.addRule(11, this.confirm.getId());
      paramContext.leftMargin = ((int)(213.0F * ImageUtil.getScreenDensity(getContext())));
      paramContext.topMargin = ((int)(230.0F * ImageUtil.getScreenDensity(getContext())));
      this.tv_Version = new TextView(getContext());
      this.tv_Version.setTextSize(8.0F);
      this.tv_Version.setTextColor(-7829368);
      this.confirm.setId(2004);
      this.tv_Version.setText("v3.3.14");
      this.dm.addView(this.tv_Version, paramContext);
      i = (int)(1.0F * ImageUtil.getScreenDensity(getContext()));
      j = (int)(40.0F * ImageUtil.getScreenDensity(getContext()));
      paramContext = new RelativeLayout.LayoutParams(j, j);
      paramContext.addRule(10, -1);
      paramContext.addRule(11, -1);
      paramContext.rightMargin = i;
      paramContext.topMargin = i;
      this.concle = new Button(getContext());
      this.concle.setOnClickListener(this);
      this.concle.setBackgroundDrawable(ImageUtil.newSelector(getContext(), "zhangpay_pic/close_normal.9.png", "zhangpay_pic/close_pressed.9.png", "zhangpay_pic/close_pressed.9.png", "zhangpay_pic/close_pressed.9.png"));
      this.concle.setId(2003);
      this.dm.addView(this.concle, paramContext);
      return;
      if (i >= 100) {
        this.jdField_do.setText("购买商品详情:" + SharePreferUtil.getInstance().getTradeName(getContext()) + ",价格为:" + changeF2Y(paramAttributeSet) + ".00元");
      }
    }
  }
  
  public static String changeF2Y(String paramString)
  {
    return BigDecimal.valueOf(Long.valueOf(paramString).longValue()).divide(new BigDecimal(100)).toString();
  }
  
  public static String changeY2F(String paramString)
  {
    paramString = paramString.replaceAll("\\$|\\￥|\\,", "");
    int i = paramString.indexOf(".");
    int j = paramString.length();
    if (i == -1) {
      paramString = Long.valueOf(paramString + "00");
    }
    for (;;)
    {
      return paramString.toString();
      if (j - i >= 3) {
        paramString = Long.valueOf(paramString.substring(0, i + 3).replace(".", ""));
      } else if (j - i == 2) {
        paramString = Long.valueOf(paramString.substring(0, i + 2).replace(".", "") + 0);
      } else {
        paramString = Long.valueOf(paramString.substring(0, i + 1).replace(".", "") + "00");
      }
    }
  }
  
  public void onClick(View paramView)
  {
    if (paramView == this.concle) {
      if (this.dq != null) {
        this.dq.onConcleBtnClick();
      }
    }
    while ((paramView != this.confirm) || (this.dq == null)) {
      return;
    }
    this.dq.onConfirmBtnClick();
  }
  
  public void setBtnClick(FeeView.OnButtonClick paramOnButtonClick)
  {
    this.dq = paramOnButtonClick;
  }
  
  public void setFeeViewText(String paramString)
  {
    this.jdField_do.setText(paramString);
  }
  
  public void updateUI()
  {
    if (showString != null) {
      this.jdField_do.setText(showString);
    }
    if (htmlString != null)
    {
      this.dp.getSettings().setDefaultTextEncodingName("utf-8");
      this.dp.loadDataWithBaseURL(null, htmlString, "text/html", "utf-8", null);
    }
  }
}
