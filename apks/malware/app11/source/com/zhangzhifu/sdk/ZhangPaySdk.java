package com.zhangzhifu.sdk;

import android.content.Context;
import android.content.Intent;
import com.waterwest.mmlog.TrustInfo;
import com.zhangzhifu.sdk.activity.ZhangPayActivity;
import java.util.HashMap;
import java.util.Map;

public class ZhangPaySdk
{
  private static ZhangPaySdk ag = null;
  private static ZhangPayEngine zhangPaySdk = null;
  public ZhangPayCallback eCallBack;
  
  public ZhangPaySdk() {}
  
  public static ZhangPaySdk getInstance()
  {
    try
    {
      if (ag == null) {
        ag = new ZhangPaySdk();
      }
      if (zhangPaySdk == null) {
        zhangPaySdk = ZhangPayEngine.getInstance();
      }
      ZhangPaySdk localZhangPaySdk = ag;
      return localZhangPaySdk;
    }
    finally {}
  }
  
  public int init(Context paramContext, String paramString1, String paramString2, String paramString3)
  {
    initLocation(paramContext);
    ZhangPayEngine.getInstance().init(paramContext, paramString1, paramString2, paramString3);
    TrustInfo.init(paramContext);
    return 1000;
  }
  
  public void initLocation(Context paramContext)
  {
    ZhangPayEngine.getInstance().initLocation(paramContext);
  }
  
  public void pay(Context paramContext, Map paramMap, ZhangPayCallback paramZhangPayCallback, boolean paramBoolean)
  {
    this.eCallBack = paramZhangPayCallback;
    if (paramBoolean)
    {
      paramZhangPayCallback = new Intent();
      paramZhangPayCallback.setClass(paramContext, ZhangPayActivity.class);
      paramZhangPayCallback.addFlags(536870912);
      paramZhangPayCallback.putExtra("map", (HashMap)paramMap);
      paramContext.startActivity(paramZhangPayCallback);
      return;
    }
    this.eCallBack = paramZhangPayCallback;
    ZhangPayEngine.getInstance().pay(paramContext, (HashMap)paramMap, paramZhangPayCallback);
  }
}
