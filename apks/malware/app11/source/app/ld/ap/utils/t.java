package app.ld.ap.utils;

import android.content.Context;
import android.net.wifi.WifiManager;
import android.net.wifi.WifiManager.WifiLock;
import android.os.Handler;
import org.apache.http.impl.client.DefaultRedirectHandler;

public class t
{
  private static final String a = t.class.getSimpleName();
  private String b;
  private Context c;
  private int d;
  private Handler e;
  private WifiManager.WifiLock f;
  private String g;
  private y h;
  private volatile int i = 0;
  private int j;
  private DefaultRedirectHandler k = new u(this);
  
  public t(Context paramContext, String paramString, y paramY)
  {
    this.b = paramString;
    this.g = this.b;
    this.c = paramContext;
    this.e = new Handler(paramContext.getMainLooper());
    this.j = 4;
    this.h = paramY;
    this.f = ((WifiManager)paramContext.getSystemService("wifi")).createWifiLock("ZipFileDownloader");
  }
  
  private void c()
  {
    this.f.acquire();
    r.a(new v(this));
  }
  
  private String d()
  {
    String[] arrayOfString = this.g.split("\\?");
    String str3 = String.valueOf(this.c.getPackageName().hashCode());
    String str2 = str3 + "_unknow.apk";
    String str1 = str2;
    if (arrayOfString[0] != null)
    {
      str1 = str2;
      if (!arrayOfString[0].equals(""))
      {
        str2 = arrayOfString[0].substring(arrayOfString[0].lastIndexOf("/") + 1);
        str1 = str2;
        if (str2 != null)
        {
          str1 = str2;
          if (!str2.equals("")) {
            str1 = str3 + "_" + str2;
          }
        }
      }
    }
    return str1;
  }
  
  private boolean e()
  {
    j.b(a, "mRetryCounter:" + this.i);
    boolean bool = false;
    if (this.i < this.j)
    {
      long l = this.i * 30000;
      j.b(a, "delay:" + l);
      this.e.postDelayed(new w(this), l);
      this.i += 1;
      bool = true;
    }
    return bool;
  }
  
  public void a()
  {
    this.i = 0;
    c();
  }
}
