package app.ld.ap.utils;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.net.wifi.WifiManager.WifiLock;
import java.io.File;
import java.io.InputStream;
import java.io.RandomAccessFile;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;

class x
  implements h
{
  private x(t paramT) {}
  
  public void a(int paramInt, String paramString)
  {
    if ((!t.e(this.a)) && (t.f(this.a) != null)) {
      t.f(this.a).onDownloaderFinished(null);
    }
  }
  
  public void a(HttpResponse paramHttpResponse)
  {
    String str = paramHttpResponse.getFirstHeader("content-length").getValue();
    t.a(this.a, (int)Long.parseLong(str));
    j.c(t.b(), "mFileSize:" + t.a(this.a));
    if (t.a(this.a) <= 0) {
      return;
    }
    for (;;)
    {
      try
      {
        paramHttpResponse = paramHttpResponse.getEntity().getContent();
        arrayOfByte = new byte['â €'];
        str = new File(new File(t.c(this.a).getApplicationInfo().dataDir), t.d(this.a)).getAbsolutePath();
        localRandomAccessFile = new RandomAccessFile(new File(str), "rw");
        i = paramHttpResponse.read(arrayOfByte, 0, 10240);
        if (i != -1) {
          continue;
        }
        localRandomAccessFile.close();
        paramHttpResponse.close();
        paramHttpResponse = str;
        if (t.b(this.a) != null)
        {
          t.b(this.a).release();
          paramHttpResponse = str;
        }
      }
      catch (Exception paramHttpResponse)
      {
        byte[] arrayOfByte;
        RandomAccessFile localRandomAccessFile;
        int i;
        t.e(this.a);
        if (t.b(this.a) == null) {
          break label305;
        }
        t.b(this.a).release();
        paramHttpResponse = null;
        continue;
      }
      finally
      {
        if (t.b(this.a) == null) {
          continue;
        }
        t.b(this.a).release();
      }
      if (t.f(this.a) == null) {
        break;
      }
      t.f(this.a).onDownloaderFinished(paramHttpResponse);
      return;
      j.c(t.b(), "readed:" + i);
      localRandomAccessFile.write(arrayOfByte, 0, i);
      continue;
      label305:
      paramHttpResponse = null;
    }
  }
}
