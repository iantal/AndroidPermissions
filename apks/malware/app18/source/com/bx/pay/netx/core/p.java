package com.bx.pay.netx.core;

import android.text.TextUtils;
import com.bx.pay.netx.core.d.b;
import com.bx.pay.netx.core.d.n;
import java.io.IOException;
import java.io.InputStream;
import java.util.zip.GZIPInputStream;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;

public final class p
{
  public static String a(HttpResponse paramHttpResponse, String paramString)
  {
    paramHttpResponse = paramHttpResponse.getFirstHeader(paramString);
    if (paramHttpResponse == null) {
      return null;
    }
    return paramHttpResponse.getValue();
  }
  
  public static byte[] a(HttpResponse paramHttpResponse)
  {
    arrayOfByte2 = null;
    localHttpEntity = paramHttpResponse.getEntity();
    localN = new n(b.a(), (int)localHttpEntity.getContentLength());
    arrayOfByte1 = arrayOfByte2;
    try
    {
      localInputStream = localHttpEntity.getContent();
      arrayOfByte1 = arrayOfByte2;
      if (!b(paramHttpResponse)) {
        break label201;
      }
      arrayOfByte1 = arrayOfByte2;
      if ((localInputStream instanceof GZIPInputStream)) {
        break label201;
      }
      arrayOfByte1 = arrayOfByte2;
      paramHttpResponse = new GZIPInputStream(localInputStream);
    }
    finally
    {
      for (;;)
      {
        InputStream localInputStream;
        try
        {
          localHttpEntity.consumeContent();
          b.a().a(arrayOfByte1);
          localN.close();
          throw paramHttpResponse;
          arrayOfByte1 = arrayOfByte2;
          arrayOfByte2 = b.a().b(1024);
          arrayOfByte1 = arrayOfByte2;
          int i = paramHttpResponse.read(arrayOfByte2);
          if (i == -1)
          {
            arrayOfByte1 = arrayOfByte2;
            paramHttpResponse = localN.toByteArray();
          }
          try
          {
            localHttpEntity.consumeContent();
            b.a().a(arrayOfByte2);
            localN.close();
            return paramHttpResponse;
            arrayOfByte1 = arrayOfByte2;
            localN.write(arrayOfByte2, 0, i);
          }
          catch (IOException localIOException1)
          {
            w.a("Error occured when calling consumingContent", new Object[0]);
            continue;
          }
        }
        catch (IOException localIOException2)
        {
          w.a("Error occured when calling consumingContent", new Object[0]);
          continue;
        }
        paramHttpResponse = localInputStream;
      }
    }
    if (paramHttpResponse == null)
    {
      arrayOfByte1 = arrayOfByte2;
      throw new ah();
    }
  }
  
  public static boolean b(HttpResponse paramHttpResponse)
  {
    return TextUtils.equals(a(paramHttpResponse, "Content-Encoding"), "gzip");
  }
}
