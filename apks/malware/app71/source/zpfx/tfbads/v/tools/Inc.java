package zpfx.tfbads.v.tools;

import android.content.Context;
import android.net.ConnectivityManager;
import android.os.Handler;
import android.os.Message;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpParams;
import org.apache.http.util.EntityUtils;

public class Inc
{
  Context a;
  Handler b = new d(this);
  private Inc.RequestBack c;
  
  public Inc(Context paramContext)
  {
    this.a = paramContext;
  }
  
  private void a(String paramString, HashMap paramHashMap)
  {
    Object localObject;
    Iterator localIterator;
    if ((paramString != null) && (!paramString.equals("")))
    {
      localObject = paramString;
      if (paramHashMap != null)
      {
        localObject = paramString;
        if (paramHashMap.size() > 0)
        {
          localObject = new StringBuffer();
          localIterator = paramHashMap.keySet().iterator();
        }
      }
    }
    for (;;)
    {
      if (!localIterator.hasNext())
      {
        if (((StringBuffer)localObject).length() != 0)
        {
          ((StringBuffer)localObject).deleteCharAt(((StringBuffer)localObject).length() - 1);
          ((StringBuffer)localObject).insert(0, "?");
        }
        localObject = paramString + ((StringBuffer)localObject).toString().trim();
        paramString = new HttpGet((String)localObject);
      }
      try
      {
        paramString.setHeader("Accept", "*/*");
        paramHashMap = new DefaultHttpClient();
        paramHashMap.getParams().setParameter("http.connection.timeout", Integer.valueOf(20000));
        paramHashMap.getParams().setParameter("http.socket.timeout", Integer.valueOf(10000));
        paramString = paramHashMap.execute(paramString);
        int i = paramString.getStatusLine().getStatusCode();
        if (i == 200)
        {
          paramHashMap = EntityUtils.toString(paramString.getEntity());
          paramString = paramHashMap;
          if (paramHashMap == null) {
            paramString = "";
          }
          paramHashMap = new Message();
          paramHashMap.what = 1;
          paramHashMap.obj = paramString.trim();
          paramHashMap.arg1 = i;
          this.b.sendMessage(paramHashMap);
          return;
          String str = ((String)localIterator.next()).trim();
          try
          {
            ((StringBuffer)localObject).append(str + "=" + URLEncoder.encode((String)paramHashMap.get(str), "UTF-8") + "&");
          }
          catch (UnsupportedEncodingException localUnsupportedEncodingException) {}
        }
        else
        {
          paramString = new Message();
          paramString.what = 3;
          paramString.arg1 = i;
          this.b.sendMessage(paramString);
          return;
        }
      }
      catch (ClientProtocolException paramString)
      {
        paramHashMap = new Message();
        paramHashMap.what = 0;
        paramHashMap.obj = paramString.toString();
        this.b.sendMessage(paramHashMap);
        return;
      }
      catch (IOException paramString)
      {
        paramHashMap = new Message();
        paramHashMap.what = 2;
        paramHashMap.obj = paramString.toString();
        this.b.sendMessage(paramHashMap);
      }
    }
  }
  
  public static boolean a(Context paramContext)
  {
    return ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo() != null;
  }
  
  private void b(String paramString, HashMap paramHashMap)
  {
    ArrayList localArrayList = new ArrayList();
    Iterator localIterator = paramHashMap.keySet().iterator();
    StringBuffer localStringBuffer = new StringBuffer();
    for (;;)
    {
      if (!localIterator.hasNext())
      {
        localStringBuffer.deleteCharAt(localStringBuffer.length() - 1);
        paramString = new HttpPost(paramString);
      }
      try
      {
        paramString.setEntity(new UrlEncodedFormEntity(localArrayList, "UTF-8"));
        paramHashMap = new DefaultHttpClient();
        paramHashMap.getParams().setParameter("http.connection.timeout", Integer.valueOf(20000));
        paramHashMap.getParams().setParameter("http.socket.timeout", Integer.valueOf(10000));
        paramString = paramHashMap.execute(paramString);
        int i = paramString.getStatusLine().getStatusCode();
        if (i == 200)
        {
          paramString = EntityUtils.toString(paramString.getEntity());
          paramHashMap = new Message();
          paramHashMap.what = 1;
          paramHashMap.obj = paramString.trim();
          paramHashMap.arg1 = i;
          this.b.sendMessage(paramHashMap);
          return;
          String str = ((String)localIterator.next()).trim();
          localStringBuffer.append("KEY:" + str + "==VALUE:" + (String)paramHashMap.get(str) + ";");
          localArrayList.add(new BasicNameValuePair(str, (String)paramHashMap.get(str)));
        }
        else
        {
          paramString = new Message();
          paramString.what = 3;
          paramString.arg1 = i;
          this.b.sendMessage(paramString);
          return;
        }
      }
      catch (UnsupportedEncodingException paramString)
      {
        this.b.sendEmptyMessage(0);
        return;
      }
      catch (ClientProtocolException paramString)
      {
        this.b.sendEmptyMessage(0);
        return;
      }
      catch (IOException paramString)
      {
        this.b.sendEmptyMessage(0);
      }
    }
  }
  
  public void a(int paramInt, String paramString, HashMap paramHashMap, Inc.RequestBack paramRequestBack)
  {
    this.c = paramRequestBack;
    new Thread(new e(this, paramInt, paramString, paramHashMap)).start();
  }
}
