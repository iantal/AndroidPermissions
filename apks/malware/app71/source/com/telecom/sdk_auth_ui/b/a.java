package com.telecom.sdk_auth_ui.b;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.Toast;
import com.telecom.sdk_auth_ui.d.d;
import com.telecom.sdk_auth_ui.f.b;
import com.telecom.sdk_auth_ui.f.c;

public class a
  extends AsyncTask
{
  private final String a = a.class.getSimpleName();
  private Context b;
  private ProgressDialog c;
  
  public a(Context paramContext)
  {
    this.b = paramContext;
  }
  
  protected Bundle a(Bundle... paramVarArgs)
  {
    paramVarArgs = paramVarArgs[0];
    try
    {
      String str = new d().c(this.b, paramVarArgs.getString("url"), paramVarArgs.getString("devid"), paramVarArgs.getString("appid"), paramVarArgs.getString("appSecret"), paramVarArgs.getString("phone"), paramVarArgs.getString("code_type"));
      c.b("Send verifycodd result : " + str);
      paramVarArgs.putAll(com.telecom.sdk_auth_ui.a.a.a().a(str));
      return paramVarArgs;
    }
    catch (b localB)
    {
      paramVarArgs.putInt("code", localB.a());
      paramVarArgs.putString("msg", localB.getMessage());
    }
    return paramVarArgs;
  }
  
  protected void a(Bundle paramBundle)
  {
    super.onPostExecute(paramBundle);
    if (this.c != null) {
      this.c.cancel();
    }
    if (paramBundle.getInt("code") == 0)
    {
      Toast.makeText(this.b, "验证码发送成功，请注意查收！", 0).show();
      return;
    }
    Toast.makeText(this.b, "验证码发送失败(" + paramBundle.getInt("code") + "),请稍候再试！", 0).show();
  }
  
  protected void onCancelled()
  {
    if (this.c != null) {
      this.c.cancel();
    }
    super.onCancelled();
  }
  
  protected void onPreExecute()
  {
    super.onPreExecute();
    this.c = new ProgressDialog(this.b);
    this.c.setMessage("验证码发送中，请稍候...");
    this.c.show();
  }
}
