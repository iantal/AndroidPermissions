package com.zhangzhifu.sdk.util;

import android.content.Context;
import android.telephony.NeighboringCellInfo;
import android.telephony.TelephonyManager;
import android.telephony.cdma.CdmaCellLocation;
import android.telephony.gsm.GsmCellLocation;
import android.util.Log;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

public class TelUtils
{
  public static final String TAG = "zhangPay_log";
  
  public TelUtils() {}
  
  public static HashMap getGSMCellLocationInfo(Context paramContext)
  {
    HashMap localHashMap = new HashMap();
    paramContext = (TelephonyManager)paramContext.getSystemService("phone");
    for (;;)
    {
      try
      {
        Object localObject1 = paramContext.getNetworkOperator();
        if ((localObject1 == null) && (((String)localObject1).length() <= 0)) {
          break;
        }
        int m = Integer.parseInt(((String)localObject1).substring(0, 3));
        int n = Integer.parseInt(((String)localObject1).substring(3));
        localObject1 = paramContext.getCellLocation();
        if (!(localObject1 instanceof GsmCellLocation)) {
          break label414;
        }
        Object localObject2 = (GsmCellLocation)localObject1;
        i = ((GsmCellLocation)localObject2).getLac();
        j = ((GsmCellLocation)localObject2).getCid();
        if ((localObject1 instanceof CdmaCellLocation))
        {
          localObject1 = (CdmaCellLocation)localObject1;
          k = ((CdmaCellLocation)localObject1).getNetworkId();
          j = ((CdmaCellLocation)localObject1).getBaseStationId();
          paramContext = paramContext.getNeighboringCellInfo();
          localObject1 = paramContext.iterator();
          i = 0;
          if (!((Iterator)localObject1).hasNext())
          {
            if ((paramContext != null) && (!paramContext.isEmpty()))
            {
              i = ((NeighboringCellInfo)paramContext.get(0)).getRssi() * 2 - 133;
              Log.v("zhangPay_log", "lac:mcc:mnc:cid=[" + k + ":" + m + ":" + n + ":" + j + "] strength：[" + i + "]");
              if ((k == 0) && (j == 0)) {
                ZhangPayLog.w("zhangPay_log", "定位失败");
              }
              localHashMap.put("lac", k);
              localHashMap.put("mcc", m);
              localHashMap.put("mnc", n);
              localHashMap.put("cid", j);
              return localHashMap;
            }
          }
          else
          {
            localObject2 = (NeighboringCellInfo)((Iterator)localObject1).next();
            i += ((NeighboringCellInfo)localObject2).getRssi() * 2 - 133;
            ((NeighboringCellInfo)localObject2).getLac();
            ((NeighboringCellInfo)localObject2).getCid();
            continue;
          }
          continue;
        }
      }
      catch (Exception paramContext)
      {
        ZhangPayLog.w("zhangPay_log", "定位失败");
        return localHashMap;
      }
      int k = i;
      continue;
      label414:
      int j = 0;
      int i = 0;
    }
    return localHashMap;
  }
}
