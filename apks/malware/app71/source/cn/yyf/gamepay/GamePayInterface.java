package cn.yyf.gamepay;

import android.app.ProgressDialog;
import android.content.Context;
import android.os.Handler;

public class GamePayInterface
  implements Runnable
{
  private static final String a = GamePayInterface.class.getName();
  private static GamePayInterface b;
  private ProgressDialog c;
  private PayCallback d;
  private Context e;
  private boolean f;
  private String g;
  private double h;
  private Handler i = new a(this);
  
  private GamePayInterface(Context paramContext)
  {
    this.e = paramContext;
    this.c = new ProgressDialog(this.e);
    this.c.setCancelable(false);
    this.c.setMessage("资源加载中...");
  }
  
  public static GamePayInterface getInstance(Context paramContext)
  {
    if (b == null) {
      b = new GamePayInterface(paramContext);
    }
    return b;
  }
  
  public void doBilling(double paramDouble, boolean paramBoolean, String paramString, PayCallback paramPayCallback)
  {
    this.f = paramBoolean;
    this.g = paramString;
    this.h = paramDouble;
    this.d = paramPayCallback;
    if (paramBoolean) {
      this.i.sendEmptyMessage(3);
    }
    new Thread(this).start();
  }
  
  public void run()
  {
    try
    {
      cn.yyf.a.a.a().a(this.e, this.f, this.g, "askPay", this.h, "", this.i);
      return;
    }
    catch (Exception localException)
    {
      this.i.obtainMessage(2, "支付失败:" + localException.getMessage());
    }
  }
}
