package com.yongrun.app.sxmn.ui;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.KeyEvent;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.baidu.mobads.AdView;
import com.jeremyfeinstein.slidingmenu.lib.SlidingMenu;
import com.snowfish.cn.ganga.offline.helper.SFCommonSDKInterface;
import com.upay.billing.sdk.Upay;
import com.yongrun.app.sxmn.adapter.MyPagerAdapter;

public class Activity_Main
  extends FragmentActivity
{
  private ViewPager a;
  private PagerAdapter b;
  private SlidingMenu c;
  private ImageView d;
  private TextView e;
  private TextView f;
  private TextView g;
  private int h = 0;
  private ImageButton i;
  private LinearLayout j;
  private SharedPreferences k;
  private boolean l = false;
  private AlertDialog m;
  private boolean n = false;
  private boolean o = false;
  private int p = 0;
  private ViewPager.OnPageChangeListener q = new an(this);
  
  public Activity_Main() {}
  
  private void a()
  {
    this.a = ((ViewPager)findViewById(2131034140));
    this.d = ((ImageView)findViewById(2131034134));
    this.b = new MyPagerAdapter(getSupportFragmentManager());
    this.e = ((TextView)findViewById(2131034137));
    this.f = ((TextView)findViewById(2131034138));
    this.g = ((TextView)findViewById(2131034139));
    this.i = ((ImageButton)findViewById(2131034162));
    this.j = ((LinearLayout)findViewById(2131034133));
    ax localAx = new ax(this);
    this.e.setOnClickListener(localAx);
    this.f.setOnClickListener(localAx);
    this.g.setOnClickListener(localAx);
    this.j.addView(new AdView(this));
    this.a.setAdapter(this.b);
    this.a.setOnPageChangeListener(this.q);
    this.c = new ci(this).a();
    this.d.setOnClickListener(new as(this));
    new Handler().postDelayed(new at(this), 5000L);
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setContentView(2130903046);
    a();
    this.k = getSharedPreferences("settings", 0);
    this.l = this.k.getBoolean("koufei", false);
    paramBundle = new AlertDialog.Builder(this);
    paramBundle.setMessage("确认退出吗？");
    paramBundle.setTitle("提示");
    paramBundle.setNegativeButton("取消", new ao(this));
    paramBundle.setPositiveButton("确认", new ap(this));
    this.m = paramBundle.create();
    if ((this.k.getBoolean("wanttopay", false)) && (!this.k.getBoolean("koufei", false))) {
      new Handler().postDelayed(new aq(this), 8000L);
    }
  }
  
  protected void onDestroy()
  {
    super.onDestroy();
    Upay.getInstance("10000241").exit();
  }
  
  public boolean onKeyDown(int paramInt, KeyEvent paramKeyEvent)
  {
    if (paramInt == 4)
    {
      if (!this.l)
      {
        this.o = true;
        SFCommonSDKInterface.pay(this, "3", new aw(this));
        return true;
      }
      this.m.show();
      return true;
    }
    return super.onKeyDown(paramInt, paramKeyEvent);
  }
}
