package com.splunk.mint.network;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;

public class MonitorRegistry
{
  private Set<Metric<?>> metrics = Collections.synchronizedSet(new HashSet());
  
  public MonitorRegistry() {}
  
  public void add(Metric<?> paramMetric)
  {
    this.metrics.add(paramMetric);
  }
  
  public ArrayList<Metric<?>> getMetricsForName(String paramString)
  {
    ArrayList localArrayList;
    try
    {
      localArrayList = new ArrayList();
      Iterator localIterator = this.metrics.iterator();
      while (localIterator.hasNext())
      {
        Metric localMetric = (Metric)localIterator.next();
        if (paramString.contains(localMetric.getName().substring(0, localMetric.getName().indexOf("-")))) {
          localArrayList.add(localMetric);
        }
        localIterator.remove();
      }
    }
    finally {}
    return localArrayList;
  }
  
  public String toString()
  {
    StringBuffer localStringBuffer = new StringBuffer();
    Iterator localIterator = this.metrics.iterator();
    while (localIterator.hasNext())
    {
      Metric localMetric = (Metric)localIterator.next();
      localStringBuffer.append(localMetric.getName() + " = " + localMetric.getValue() + "\n");
    }
    return localStringBuffer.toString();
  }
}
