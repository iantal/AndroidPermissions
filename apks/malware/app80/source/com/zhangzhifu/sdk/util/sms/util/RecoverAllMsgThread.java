package com.zhangzhifu.sdk.util.sms.util;

import android.content.Context;
import android.database.Cursor;
import android.os.Handler;
import com.zhangzhifu.sdk.util.sms.database.DbAdapter;

public class RecoverAllMsgThread
  extends Thread
{
  private Context ao;
  private DbAdapter bc = null;
  private Handler handler;
  private int status;
  
  public RecoverAllMsgThread(Context paramContext, DbAdapter paramDbAdapter, int paramInt, Handler paramHandler)
  {
    this.ao = paramContext;
    this.bc = paramDbAdapter;
    this.handler = paramHandler;
    this.status = paramInt;
  }
  
  public void run()
  {
    Cursor localCursor = this.bc.fetchBlockedMSGAll();
    if (localCursor.moveToFirst()) {}
    for (;;)
    {
      if ((localCursor.getInt(5) & 0x1) == this.status)
      {
        String str1 = localCursor.getString(1);
        String str2 = localCursor.getString(2);
        long l = localCursor.getLong(3);
        if (!SmsManager.createSms(this.ao, str1, str2, Long.valueOf(l))) {
          break label113;
        }
        this.bc.deleteOne("blockedmessages", localCursor.getLong(0));
      }
      while (!localCursor.moveToNext())
      {
        this.handler.sendEmptyMessage(2);
        return;
        label113:
        this.handler.sendEmptyMessage(3);
      }
    }
  }
}
