package com.zhangzhifu.sdk.util.sms.database;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Handler;
import com.zhangzhifu.sdk.util.sms.util.JsonParse;

public class UpdataVerDatabase
  extends Thread
{
  private Context ao;
  private SQLiteDatabase dG;
  private Handler handler = null;
  
  public UpdataVerDatabase(Context paramContext, DbAdapter paramDbAdapter)
  {
    this.ao = paramContext;
    this.dG = paramDbAdapter.getmDb();
  }
  
  public UpdataVerDatabase(Context paramContext, DbAdapter paramDbAdapter, Handler paramHandler)
  {
    this.ao = paramContext;
    this.dG = paramDbAdapter.getmDb();
    this.handler = paramHandler;
  }
  
  public void run()
  {
    int j = 0;
    for (;;)
    {
      try
      {
        Thread.sleep(300L);
        this.dG.beginTransaction();
        localObject1 = JsonParse.stringBuilderToArray(JsonParse.jsonToStringBuilder(this.ao, "black_keyword_list.json", true), "WORD");
        int k = localObject1.length;
        i = 0;
        if (i < k) {
          continue;
        }
        localObject1 = JsonParse.stringBuilderToArray(JsonParse.jsonToStringBuilder(this.ao, "white_num_list.json", false), null);
        k = localObject1.length;
        i = j;
        if (i < k) {
          continue;
        }
        localObject1 = new ContentValues();
        ((ContentValues)localObject1).put("rule", ".*(http://|www|wap)[\\./#$%+-_?=&a-z\\d]+.*");
        ((ContentValues)localObject1).put("type", Integer.valueOf(6));
        this.dG.insert("rules", null, (ContentValues)localObject1);
        this.dG.setTransactionSuccessful();
      }
      catch (Exception localException)
      {
        Object localObject1;
        int i;
        ContentValues localContentValues;
        this.dG.endTransaction();
        localException.printStackTrace();
        this.dG.endTransaction();
        continue;
      }
      finally
      {
        this.dG.endTransaction();
      }
      if (this.handler != null) {
        this.handler.sendEmptyMessage(4);
      }
      super.run();
      return;
      localContentValues = new ContentValues();
      localContentValues.put("rule", localObject1[i]);
      localContentValues.put("type", Integer.valueOf(3));
      this.dG.insert("rules", null, localContentValues);
      i += 1;
      continue;
      if (this.dG.rawQuery("SELECT * FROM rules WHERE rule='" + localObject1[i] + "' and type='7'", null).getCount() <= 0)
      {
        localContentValues = new ContentValues();
        localContentValues.put("rule", localObject1[i]);
        localContentValues.put("type", Integer.valueOf(7));
        this.dG.insert("rules", null, localContentValues);
      }
      i += 1;
    }
  }
}
