package com.w545taxxxg9.Views;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.ProgressBar;
import android.widget.RelativeLayout.LayoutParams;
import com.w545taxxxg9.Controllers.ITabContentController;
import com.w545taxxxg9.Controllers.ITabDelegate;
import com.w545taxxxg9.MainNavigationActivity;
import com.w545taxxxg9.Model.NavigationWidget;
import com.w545taxxxg9.Model.WidgetEntity;
import com.w545taxxxg9.Model.WidgetEntity.LoadingCurtainType;
import com.w545taxxxg9.Utils.WebWidgetConfigutation;
import com.w545taxxxg9.Utils.WebWidgetConfigutation.UrlBarStates;

public class WebContent
  extends TabContent
  implements ITabDelegate
{
  private BrowserWebView _browser = null;
  private NavigationWidget _navigationWidget = null;
  private ProgressBar _progressBar = null;
  private ITabContentController _tabContentController = null;
  boolean firstStart = true;
  
  public WebContent(Context paramContext)
  {
    super(paramContext);
  }
  
  public WebContent(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
  }
  
  public WebView getBrowser()
  {
    return this._browser;
  }
  
  public NavigationWidget getNavigationWidget()
  {
    return this._navigationWidget;
  }
  
  public ProgressBar getProgressBar()
  {
    return this._progressBar;
  }
  
  public void hideProgressBarPanel()
  {
    findViewById(2131427376).setVisibility(8);
  }
  
  public void init(ITabContentController paramITabContentController)
  {
    this._tabContentController = paramITabContentController;
    this._browser = ((BrowserWebView)findViewById(2131427375));
    this._browser.requestFocus(130);
    this._progressBar = ((ProgressBar)findViewById(2131427377));
    paramITabContentController = this._tabContentController.getMainNavigationActivity().getConfig().getUrlOverlayState();
    if (paramITabContentController != WebWidgetConfigutation.UrlBarStates.DISABLED)
    {
      this._navigationWidget = new NavigationWidget(this, this._tabContentController.getWidgetInfo().getLink(), this._browser);
      this._navigationWidget.attachAutocomplete();
      NavigationWidget localNavigationWidget;
      if (paramITabContentController == WebWidgetConfigutation.UrlBarStates.ENABLED_ON_EXTERNAL_URLS)
      {
        localNavigationWidget = this._navigationWidget;
        if (paramITabContentController != WebWidgetConfigutation.UrlBarStates.ENABLED_ON_EXTERNAL_URLS) {
          break label127;
        }
      }
      label127:
      for (boolean bool = true;; bool = false)
      {
        localNavigationWidget.setHideOnInternalUrls(bool);
        return;
      }
    }
    findViewById(2131427351).setVisibility(8);
    ((RelativeLayout.LayoutParams)this._browser.getLayoutParams()).setMargins(0, 0, 0, 0);
  }
  
  public void navigate(String paramString)
  {
    this._browser.loadUrl(paramString);
    if (this._navigationWidget != null) {
      this._navigationWidget.setUrl(paramString);
    }
    this._progressBar.setProgress(0);
    findViewById(2131427376).setVisibility(0);
  }
  
  public void setActiveState(boolean paramBoolean)
  {
    if (paramBoolean)
    {
      if (this.firstStart != true)
      {
        this._browser.getSettings().setBuiltInZoomControls(true);
        this._browser.setInitialScale(10);
      }
      for (;;)
      {
        setVisibility(0);
        return;
        this.firstStart = false;
      }
    }
    setVisibility(8);
  }
  
  public void setLoadingCurtainType(WidgetEntity.LoadingCurtainType paramLoadingCurtainType)
  {
    if (paramLoadingCurtainType == WidgetEntity.LoadingCurtainType.NONE) {
      findViewById(2131427378).setVisibility(8);
    }
    while (paramLoadingCurtainType != WidgetEntity.LoadingCurtainType.DEFAULT) {
      return;
    }
    findViewById(2131427378).setVisibility(0);
  }
  
  public void showProgressBarPanel()
  {
    findViewById(2131427376).setVisibility(0);
  }
}
