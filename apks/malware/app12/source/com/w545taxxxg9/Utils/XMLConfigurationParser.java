package com.w545taxxxg9.Utils;

import android.content.Context;
import android.content.res.Resources;
import com.w545taxxxg9.Controllers.IWidgetsController;
import com.w545taxxxg9.Factory.Factory;
import java.io.InputStream;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

public class XMLConfigurationParser
{
  private static final String EXCEPTION_MESSAGE = "Wrong format of configuration.xml file";
  private static final int RESOURCE_ID = 2130968576;
  private Context context;
  
  public XMLConfigurationParser(Context paramContext)
  {
    this.context = paramContext;
  }
  
  private InputStream getConfigurationStream()
    throws Exception
  {
    try
    {
      InputStream localInputStream = this.context.getResources().openRawResource(2130968576);
      return localInputStream;
    }
    catch (Exception localException)
    {
      throw new Exception("Couldn't found configuration file");
    }
  }
  
  public WebWidgetConfigutation parse()
    throws Exception
  {
    Object localObject = SAXParserFactory.newInstance();
    try
    {
      Factory.getInstance().getWidgetsController().removeAll();
      localObject = ((SAXParserFactory)localObject).newSAXParser();
      XMLConfigurationHandler localXMLConfigurationHandler = new XMLConfigurationHandler();
      ((SAXParser)localObject).parse(getConfigurationStream(), localXMLConfigurationHandler);
      localObject = localXMLConfigurationHandler.getWebWidgetConfigutation();
      return localObject;
    }
    catch (Exception localException)
    {
      throw new Exception("Wrong format of configuration.xml file");
    }
  }
}
