package com.w545taxxxg9.Utils;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.MailTo;
import android.net.Uri;
import android.net.http.SslError;
import android.webkit.SslErrorHandler;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class SimpleWebViewClient
  extends WebViewClient
{
  Activity _activity;
  
  public SimpleWebViewClient(Activity paramActivity)
  {
    this._activity = paramActivity;
  }
  
  private void _handleMailTo(String paramString)
  {
    paramString = MailTo.parse(paramString);
    if (paramString.getTo().length() > 0)
    {
      Intent localIntent = new Intent("android.intent.action.SEND");
      localIntent.setType("text/plain");
      localIntent.putExtra("android.intent.extra.EMAIL", new String[] { paramString.getTo() });
      localIntent.putExtra("android.intent.extra.SUBJECT", paramString.getSubject());
      localIntent.putExtra("android.intent.extra.CC", paramString.getCc());
      localIntent.putExtra("android.intent.extra.TEXT", paramString.getBody());
      this._activity.startActivity(localIntent);
    }
  }
  
  private void _handleSmsTo(String paramString)
  {
    Object localObject = paramString.split(":");
    String str = localObject[1];
    paramString = "";
    if (localObject.length > 1) {
      paramString = localObject[2];
    }
    localObject = new Intent("android.intent.action.SENDTO", Uri.parse("smsto:" + str));
    ((Intent)localObject).putExtra("address", str);
    ((Intent)localObject).putExtra("sms_body", paramString);
    this._activity.startActivity((Intent)localObject);
  }
  
  public void onReceivedSslError(WebView paramWebView, SslErrorHandler paramSslErrorHandler, SslError paramSslError)
  {
    paramSslErrorHandler.proceed();
  }
  
  public boolean shouldOverrideUrlLoading(WebView paramWebView, String paramString)
  {
    do
    {
      do
      {
        try
        {
          if (MailTo.isMailTo(paramString))
          {
            _handleMailTo(paramString);
            return true;
          }
          if (paramString.startsWith("tel:"))
          {
            paramWebView = new Intent("android.intent.action.DIAL", Uri.parse(paramString));
            this._activity.startActivity(paramWebView);
            return true;
          }
        }
        catch (Exception paramWebView)
        {
          paramWebView.printStackTrace();
          return false;
        }
        if ((paramString.startsWith("market:")) || (paramString.startsWith("geo:")))
        {
          paramWebView = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
          this._activity.startActivity(paramWebView);
          return true;
        }
        if (paramString.startsWith("smsto:"))
        {
          _handleSmsTo(paramString);
          return true;
        }
      } while ((paramString.startsWith("http:")) || (paramString.startsWith("https:")) || (paramString.startsWith("file:")));
      paramWebView = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
    } while (this._activity.getPackageManager().resolveActivity(paramWebView, 0) == null);
    this._activity.startActivity(paramWebView);
    return true;
  }
}
