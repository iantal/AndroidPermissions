package com.shoufu;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import com.shoufu.entity.response.TaskData;
import com.shoufu.entity.response.TaskResultMap;
import com.shoufu.lib.am;
import com.shoufu.lib.ca;
import com.shoufu.lib.cb;
import com.shoufu.lib.cw;
import com.shoufu.lib.cx;
import java.util.ArrayList;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

public final class a
  implements View.OnClickListener
{
  public static List<a> a = new ArrayList();
  private static String b = "Payment";
  private String c;
  private String d;
  private float e;
  private String f;
  private IOnPayResult g;
  private Activity h;
  private ca i;
  private ProgressDialog j;
  private e k;
  private String l = null;
  private TaskData m = null;
  private Timer n = null;
  private TimerTask o = null;
  private PopType p = PopType.NONE;
  private int q = 0;
  private int r = 0;
  private String s = "";
  private boolean t = true;
  private int u = -1;
  
  public a(Activity paramActivity, PopType paramPopType, boolean paramBoolean)
  {
    a(paramActivity, paramPopType, paramBoolean);
  }
  
  private void a(Activity paramActivity, PopType paramPopType, boolean paramBoolean)
  {
    this.h = paramActivity;
    this.p = paramPopType;
    this.t = paramBoolean;
    a(paramPopType);
    if (PopType.ONECE == this.p)
    {
      this.i = new ca(paramActivity);
      this.j = new ProgressDialog(paramActivity);
      this.j.setMessage(cb.a);
      this.j.setCancelable(false);
    }
    this.k = new e(this);
    this.n = new Timer();
    this.o = new b(this);
    a.add(this);
  }
  
  private void a(PopType paramPopType)
  {
    int i2 = 0;
    String str1 = am.a(am.a(), "HH");
    String[] arrayOfString = cw.p(this.h).split(",");
    int i3 = arrayOfString.length;
    int i1 = 0;
    if (i1 >= i3)
    {
      i1 = 0;
      label41:
      if (i1 != 0)
      {
        paramPopType = PopType.values();
        i3 = paramPopType.length;
        i1 = i2;
      }
    }
    else
    {
      for (;;)
      {
        if (i1 >= i3)
        {
          return;
          String str2 = arrayOfString[i1];
          if ((!"".equals(str2)) && (str2.trim().equals(str1)))
          {
            i1 = 1;
            break label41;
          }
          i1 += 1;
          break;
        }
        str1 = paramPopType[i1];
        if (str1.getPoptype() == cw.q(this.h))
        {
          this.p = str1;
          return;
        }
        i1 += 1;
      }
    }
    this.p = paramPopType;
  }
  
  private void a(String paramString1, String paramString2)
  {
    this.k.obtainMessage(2).sendToTarget();
    Message localMessage = this.k.obtainMessage(4);
    Bundle localBundle = new Bundle();
    localBundle.putString("code", paramString1);
    localBundle.putString("info", paramString2);
    localMessage.setData(localBundle);
    localMessage.sendToTarget();
    this.n.cancel();
  }
  
  private void b(String paramString1, String paramString2)
  {
    Log.e(b, cb.d + " code:" + paramString1 + " info:" + paramString2 + " extroinfo:" + this.f);
    if (this.g != null) {
      this.g.onFail(paramString1, paramString2, this.f);
    }
    a.remove(this);
  }
  
  private void c(int paramInt)
  {
    new d(this, paramInt).start();
  }
  
  private void e()
  {
    if ((this.i != null) && (this.i.isShowing())) {
      this.i.dismiss();
    }
  }
  
  private void f()
  {
    if ((this.j != null) && (!this.j.isShowing())) {
      this.j.show();
    }
  }
  
  private void g()
  {
    if ((this.j != null) && (this.j.isShowing())) {
      this.j.dismiss();
    }
  }
  
  private void h()
  {
    if (PopType.NONE != this.p)
    {
      this.i.setContentView(this.i.a(com.shoufu.lib.a.a(this.h), this.c, this.e + "å…ƒ", this));
      this.i.a();
      this.i.show();
      return;
    }
    i();
  }
  
  private void i()
  {
    new c(this).run();
  }
  
  private void j()
  {
    this.k.obtainMessage(2).sendToTarget();
    this.k.obtainMessage(3).sendToTarget();
    this.n.cancel();
  }
  
  private void k()
  {
    Log.e(b, cb.c + " extroinfo:" + this.f);
    if (this.g != null) {
      this.g.onSuccess(this.f);
    }
    a.remove(this);
  }
  
  private void l()
  {
    this.q = 0;
    if (("0".equals(this.m.getCode())) || ("110".equals(this.m.getCode()))) {
      this.r = cx.a(this.h, this.m, this.k);
    }
    do
    {
      return;
      if ("111".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.b(this.h, this.m, this.k);
        return;
      }
      if ("112".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.c(this.h, this.m, this.k);
        return;
      }
      if ("113".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.g(this.h, this.m, this.k);
        return;
      }
      if ("114".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.h(this.h, this.m, this.k);
        return;
      }
      if ("115".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.d(this.h, this.m, this.k);
        return;
      }
      if ("116".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.e(this.h, this.m, this.k);
        return;
      }
      if ("117".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.a(this.h, this.m, this.k, true);
        return;
      }
      if ("118".equals(this.m.getCode()))
      {
        this.r = 2;
        cx.a(this.h, this.m, this.k, false);
        return;
      }
      if ("119".equals(this.m.getCode()))
      {
        cx.f(this.h, this.m, this.k);
        return;
      }
      if ("120".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.i(this.h, this.m, this.k);
        return;
      }
      if ("121".equals(this.m.getCode()))
      {
        this.r = 1;
        cx.j(this.h, this.m, this.k);
        return;
      }
      if ("122".equals(this.m.getCode()))
      {
        cx.k(this.h, this.m, this.k);
        return;
      }
    } while (!"123".equals(this.m.getCode()));
    cx.a(this.h, this.c, this.m, this.k);
  }
  
  public void a()
  {
    j();
  }
  
  public void a(int paramInt)
  {
    this.r = paramInt;
  }
  
  public void a(TaskData paramTaskData)
  {
    this.m = paramTaskData;
  }
  
  protected void a(String paramString1, String paramString2, float paramFloat, String paramString3, IOnPayResult paramIOnPayResult)
  {
    try
    {
      this.c = paramString1;
      this.d = paramString2;
      this.e = paramFloat;
      this.f = paramString3;
      this.g = paramIOnPayResult;
      this.q = 0;
      this.r = 0;
      e();
      g();
      h();
      Log.d(b, cb.b);
      return;
    }
    finally
    {
      paramString1 = finally;
      throw paramString1;
    }
  }
  
  public void b()
  {
    this.q += 1;
    if (this.q >= this.r) {
      a("111", cb.p);
    }
  }
  
  public void b(int paramInt)
  {
    this.u = paramInt;
  }
  
  public String c()
  {
    if (this.m != null) {
      return this.m.getResultmap().getTradeid();
    }
    return "";
  }
  
  public void d()
  {
    if (this.k != null) {
      this.k.obtainMessage(7, this.u, 0).sendToTarget();
    }
  }
  
  public void onClick(View paramView)
  {
    if (ca.b.equals(paramView.getTag())) {
      i();
    }
    do
    {
      return;
      if (ca.a.equals(paramView.getTag()))
      {
        this.i.b();
        return;
      }
      if (ca.c.equals(paramView.getTag()))
      {
        this.i.a();
        return;
      }
    } while (!ca.d.equals(paramView.getTag()));
    a("100", cb.e);
  }
}
