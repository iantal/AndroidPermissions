package com.baidu.location;

import android.os.Handler;
import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;
import org.apache.http.message.BasicNameValuePair;

class m
  extends q
{
  public static final int c2 = 1;
  static m c4 = null;
  private int c1 = 0;
  private a c3 = null;
  boolean c5 = false;
  int c6 = 0;
  long c7 = 0L;
  long c8 = 0L;
  ArrayList c9 = null;
  private Handler da = null;
  
  public m()
  {
    this.cP = new ArrayList();
    this.cW = 2;
  }
  
  public static m R()
  {
    if (c4 == null) {
      c4 = new m();
    }
    return c4;
  }
  
  private void S()
  {
    if ((cU < 6) && (this.c1 < 10) && (at.jdMethod_do().jdMethod_int()))
    {
      this.c1 += 1;
      if (!Q()) {
        this.c1 = 0;
      }
      return;
    }
    this.c1 = 0;
  }
  
  void O()
  {
    this.cP.add(new BasicNameValuePair("qt", "cltr"));
    try
    {
      this.cP.add(new BasicNameValuePair("info", Jni.h(aw.b6().b7())));
      int i = 0;
      while (i < this.c9.size())
      {
        this.cP.add(new BasicNameValuePair("cltr[" + i + "]", (String)this.c9.get(i)));
        i += 1;
      }
      String str = String.format(Locale.CHINA, "%d", new Object[] { Long.valueOf(System.currentTimeMillis()) });
      this.cP.add(new BasicNameValuePair("trtm", str));
      return;
    }
    catch (Exception localException)
    {
      for (;;) {}
    }
  }
  
  public boolean Q()
  {
    boolean bool = true;
    if (!ao.bA()) {
      bool = false;
    }
    do
    {
      return bool;
      if (this.c3.cY > 2)
      {
        a localA = this.c3;
        localA.cY -= 1;
        return jdMethod_for(true);
      }
    } while (this.c3.P());
    return jdMethod_for(true);
  }
  
  public void jdMethod_do(int paramInt)
  {
    this.da.sendEmptyMessageDelayed(paramInt, 500L);
  }
  
  void jdMethod_do(boolean paramBoolean)
  {
    if ((paramBoolean) && (this.cO != null)) {
      if (this.c9 != null) {
        this.c9.clear();
      }
    }
    for (;;)
    {
      if (this.cP != null) {
        this.cP.clear();
      }
      this.c5 = false;
      this.da.sendEmptyMessageDelayed(1, 1500L);
      return;
      this.c7 = 0L;
    }
  }
  
  public boolean jdMethod_for(boolean paramBoolean)
  {
    if (this.c5) {
      return true;
    }
    if (System.currentTimeMillis() - this.c7 < 7200000L) {
      return false;
    }
    if (System.currentTimeMillis() - this.c8 > 3600000L) {
      this.c6 = 0;
    }
    if ((this.c6 > 5) && (paramBoolean)) {
      return false;
    }
    if (!ao.bA()) {
      return false;
    }
    if ((!at.jdMethod_do().jdMethod_int()) && (paramBoolean)) {
      return false;
    }
    if ((this.c9 == null) || (this.c9.size() < 1))
    {
      String str1 = c.jdMethod_try();
      if (str1 != null)
      {
        int i = 0;
        while (i < 2)
        {
          String str2 = Jni.j(str1);
          if (str2 != null)
          {
            if (this.c9 == null) {
              this.c9 = new ArrayList();
            }
            this.c9.add(str2);
            i += 1;
          }
          else
          {
            this.c7 = System.currentTimeMillis();
          }
        }
      }
    }
    else
    {
      if ((this.c9 == null) || (this.c9.size() <= 0)) {
        break label216;
      }
      this.c6 += 1;
      this.c8 = System.currentTimeMillis();
      this.c5 = true;
      J();
      return true;
    }
    return false;
    label216:
    return false;
  }
  
  class a
    extends q
  {
    String c0 = null;
    int cY = 0;
    boolean cZ = false;
    
    a() {}
    
    void O()
    {
      this.cS = this.c0;
      this.cN = (c.jdMethod_do() + "?&qt=state&trtm=" + System.currentTimeMillis());
      this.cW = 2;
    }
    
    public boolean P()
    {
      if (this.cZ) {
        return true;
      }
      this.c0 = aa.cx().cr();
      if (this.c0 == null) {
        return false;
      }
      this.cZ = true;
      M();
      return true;
    }
    
    void jdMethod_do(boolean paramBoolean)
    {
      if (paramBoolean) {}
      try
      {
        new File(this.c0).delete();
        for (this.cY = 0;; this.cY += 2)
        {
          this.c0 = null;
          this.cZ = false;
          m.jdMethod_do(m.this).sendEmptyMessageDelayed(1, 1500L);
          return;
        }
      }
      catch (Exception localException)
      {
        for (;;) {}
      }
    }
  }
}
