package com.baidu.location;

import android.os.Handler;
import android.os.Message;

class ad
  extends ae
  implements au, l
{
  private static ad ef = null;
  final Handler d7 = new ae.b(this);
  final int ec = 1000;
  public ae.a ed = null;
  private volatile boolean ee = false;
  private int eg;
  private long eh = 0L;
  private ap ei = null;
  private long ej = 0L;
  private r.a ek = null;
  private ao.b el = null;
  private boolean em = false;
  private boolean en = true;
  private boolean eo = true;
  private BDLocation ep = null;
  private BDLocation eq = null;
  final int er = 2000;
  private String es = null;
  
  private ad() {}
  
  private boolean ah()
  {
    this.eb = ao.bC().bH();
    return !this.ei.jdMethod_do(this.eb);
  }
  
  private void ai()
  {
    this.ee = false;
    aq();
  }
  
  public static ad al()
  {
    if (ef == null) {
      ef = new ad();
    }
    return ef;
  }
  
  private void ao()
  {
    if (this.eo) {
      ar();
    }
    while (this.ee) {
      return;
    }
    if (ao.bC().bD())
    {
      this.em = true;
      this.d7.postDelayed(new a(null), 2000L);
      return;
    }
    ar();
  }
  
  private void aq()
  {
    if (this.ep != null) {
      o.u().A();
    }
  }
  
  private void ar()
  {
    if (this.ee) {
      return;
    }
    if ((System.currentTimeMillis() - this.eh < 1000L) && (this.ep != null))
    {
      i.m().jdMethod_do(this.ep);
      ai();
      return;
    }
    c.jdMethod_if("baidu_location_service", "start network locating ...");
    this.ee = true;
    this.en = jdMethod_if(this.ek);
    if ((!jdMethod_if(this.el)) && (!this.en) && (this.ep != null) && (this.eg == 0))
    {
      if ((this.eq != null) && (System.currentTimeMillis() - this.ej > 30000L))
      {
        this.ep = this.eq;
        this.eq = null;
      }
      i.m().jdMethod_do(this.ep);
      ai();
      return;
    }
    String str = d(null);
    if (str == null)
    {
      localObject = new BDLocation();
      ((BDLocation)localObject).setLocType(62);
      i.m().jdMethod_do((BDLocation)localObject);
      ai();
      return;
    }
    Object localObject = str;
    if (this.es != null)
    {
      localObject = str + this.es;
      this.es = null;
    }
    this.ed.jdMethod_void((String)localObject);
    this.ek = this.d8;
    this.el = this.eb;
    if (this.eo == true) {
      this.eo = false;
    }
    this.eh = System.currentTimeMillis();
  }
  
  private void jdMethod_char(Message paramMessage)
  {
    String str = v.aR().aC();
    BDLocation localBDLocation = new BDLocation(str);
    i.m().jdMethod_if(localBDLocation, paramMessage);
    ah.a().a(null);
    ah.a().jdMethod_if(str);
  }
  
  private void jdMethod_else(Message paramMessage)
  {
    c.jdMethod_if("baidu_location_service", "on request location ...");
    if (ab.a5().a6()) {}
    do
    {
      return;
      int i = i.m().jdMethod_for(paramMessage);
      this.eg = paramMessage.arg1;
      switch (i)
      {
      default: 
        throw new IllegalArgumentException(String.format("this type %d is illegal", new Object[] { Integer.valueOf(i) }));
      }
    } while (!v.aR().aE());
    jdMethod_char(paramMessage);
    return;
    jdMethod_goto(paramMessage);
    return;
    ao();
  }
  
  private void jdMethod_goto(Message paramMessage)
  {
    if (v.aR().aE())
    {
      jdMethod_char(paramMessage);
      return;
    }
    ao();
  }
  
  private boolean jdMethod_if(ao.b paramB)
  {
    boolean bool2 = true;
    this.eb = ao.bC().bH();
    boolean bool1;
    if (paramB == this.eb) {
      bool1 = false;
    }
    do
    {
      do
      {
        do
        {
          return bool1;
          bool1 = bool2;
        } while (this.eb == null);
        bool1 = bool2;
      } while (paramB == null);
      bool1 = bool2;
    } while (!paramB.a(this.eb));
    return false;
  }
  
  private boolean jdMethod_if(r.a paramA)
  {
    boolean bool2 = true;
    this.d8 = r.aa().X();
    boolean bool1;
    if (this.d8 == paramA) {
      bool1 = false;
    }
    do
    {
      do
      {
        do
        {
          return bool1;
          bool1 = bool2;
        } while (this.d8 == null);
        bool1 = bool2;
      } while (paramA == null);
      bool1 = bool2;
    } while (!paramA.a(this.d8));
    return false;
  }
  
  void ag()
  {
    c.jdMethod_if("baidu_location_service", "on network exception");
    if ((this.en) || (this.ep == null)) {
      i.m().jdMethod_if(av.bW().jdMethod_case(false), 21);
    }
    for (;;)
    {
      this.ep = null;
      this.eq = null;
      this.ei.bM();
      ai();
      return;
      i.m().jdMethod_if(this.ep, 21);
    }
  }
  
  public void aj()
  {
    if (this.em)
    {
      ar();
      this.em = false;
    }
  }
  
  void ak()
  {
    this.ee = false;
    am();
  }
  
  void am()
  {
    this.ep = null;
    this.ei.bM();
  }
  
  public boolean an()
  {
    return this.en;
  }
  
  void ap()
  {
    this.eo = true;
    this.ee = false;
  }
  
  void jdMethod_byte(Message paramMessage)
  {
    c.jdMethod_if("baidu_location_service", "on network success");
    paramMessage = (BDLocation)paramMessage.obj;
    BDLocation localBDLocation = new BDLocation(paramMessage);
    this.eq = null;
    int j = 0;
    int i = j;
    if (paramMessage.getLocType() == 161)
    {
      i = j;
      if ("cl".equals(paramMessage.getNetworkLocationType()))
      {
        i = j;
        if (this.ep != null)
        {
          i = j;
          if (this.ep.getLocType() == 161)
          {
            i = j;
            if ("wf".equals(this.ep.getNetworkLocationType()))
            {
              i = j;
              if (System.currentTimeMillis() - this.ej < 30000L)
              {
                i = 1;
                this.eq = paramMessage;
              }
            }
          }
        }
      }
    }
    if (i != 0)
    {
      i.m().jdMethod_if(this.ep, 21);
      if (!c.jdMethod_if(paramMessage)) {
        break label248;
      }
      if (i == 0) {
        this.ep = paramMessage;
      }
      label158:
      i = c.jdMethod_do(d5, "ssid\":\"", "\"");
      if ((i == Integer.MIN_VALUE) || (this.el == null)) {
        break label263;
      }
    }
    label248:
    label263:
    for (this.es = this.el.jdMethod_if(i);; this.es = null)
    {
      av.bW().jdMethod_if(d5, this.ek, this.el, localBDLocation);
      h.cK().jdMethod_byte(localBDLocation);
      ai();
      return;
      i.m().jdMethod_if(paramMessage, 21);
      this.ej = System.currentTimeMillis();
      break;
      this.ep = null;
      this.ei.bM();
      break label158;
    }
  }
  
  public void jdMethod_case(Message paramMessage)
  {
    jdMethod_else(paramMessage);
  }
  
  public void jdMethod_for(BDLocation paramBDLocation)
  {
    am();
    this.ep = paramBDLocation;
  }
  
  private class a
    implements Runnable
  {
    private a() {}
    
    public void run()
    {
      if (ad.jdMethod_do(ad.this) == true)
      {
        ad.jdMethod_if(ad.this, false);
        ad.jdMethod_if(ad.this);
      }
    }
  }
}
