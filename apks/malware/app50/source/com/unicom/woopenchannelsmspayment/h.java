package com.unicom.woopenchannelsmspayment;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Handler;
import android.os.Message;
import com.shoufu.lib.ei;
import com.shoufu.lib.en;
import com.shoufu.lib.eo;
import com.unicom.smspurchase.PurSecurityIF;
import java.util.Calendar;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

final class h
  extends Handler
{
  h(UnicomWoOpenPaymentMainActivity paramUnicomWoOpenPaymentMainActivity) {}
  
  public final void handleMessage(Message paramMessage)
  {
    super.handleMessage(paramMessage);
    String str1;
    switch (paramMessage.what)
    {
    default: 
    case 0: 
    case 1: 
    case 2: 
    case 3: 
      do
      {
        return;
        if (UnicomWoOpenPaymentMainActivity.b(this.a).isShowing()) {
          UnicomWoOpenPaymentMainActivity.b(this.a).dismiss();
        }
        paramMessage = new Intent(this.a, UnicomSMSSuccessActivity.class);
        paramMessage.putExtra("costMoney", UnicomWoOpenPaymentMainActivity.c(this.a));
        this.a.startActivityForResult(paramMessage, 2000);
        return;
        if (UnicomWoOpenPaymentMainActivity.b(this.a).isShowing()) {
          UnicomWoOpenPaymentMainActivity.b(this.a).dismiss();
        }
        paramMessage = new Intent(this.a, UnicomSMSFaildActivity.class);
        this.a.startActivityForResult(paramMessage, 3000);
        return;
        if (UnicomWoOpenPaymentMainActivity.b(this.a).isShowing()) {
          UnicomWoOpenPaymentMainActivity.b(this.a).dismiss();
        }
        this.a.a(this.a.getString(en.a(this.a, "unicom_sms_timeout", "string")));
        return;
        if (UnicomWoOpenPaymentMainActivity.b(this.a).isShowing()) {
          UnicomWoOpenPaymentMainActivity.b(this.a).dismiss();
        }
        paramMessage = ei.a(this.a, "check_app_status");
        if ((!"".equals(paramMessage)) && (!"0".equals(paramMessage)))
        {
          paramMessage = ei.a(this.a, "check_app_status_str");
          this.a.a(paramMessage);
          return;
        }
        paramMessage = Calendar.getInstance();
        int i = paramMessage.get(1);
        int j = paramMessage.get(2);
        int k = paramMessage.get(5);
        paramMessage = String.valueOf(i) + String.valueOf(j);
        str1 = paramMessage + k;
        if (!en.a(this.a, "pay_month").equals(paramMessage)) {
          break label529;
        }
        i = en.b(this.a, "payed_month_money");
        j = ei.b(this.a, "month_quota");
        if ((int)(i + Float.valueOf(UnicomWoOpenPaymentMainActivity.c(this.a)).floatValue() * 100.0F) > j)
        {
          this.a.a(this.a.getString(en.a(this.a, "unicom_over_month_quota", "string")));
          return;
        }
        if (!en.a(this.a, "pay_day").equals(str1)) {
          break;
        }
      } while ((int)(en.b(this.a, "payed_day_money") + Float.valueOf(UnicomWoOpenPaymentMainActivity.c(this.a)).floatValue() * 100.0F) <= ei.b(this.a, "day_quota"));
      this.a.a(this.a.getString(en.a(this.a, "unicom_over_day_quota", "string")));
      return;
      en.a(this.a, "payed_day_money", 0);
      return;
      en.a(this.a, "payed_month_money", 0);
      en.a(this.a, "payed_day_money", 0);
      return;
    case 4: 
      label529:
      paramMessage = new JSONTokener(String.valueOf(paramMessage.obj));
      try
      {
        paramMessage = (JSONObject)paramMessage.nextValue();
        str1 = paramMessage.getString("resultCode");
        String str2 = paramMessage.getString("resultDesc");
        String str3 = paramMessage.getString("appName");
        str4 = paramMessage.getString("dayLimit");
        str5 = paramMessage.getString("monthLimit");
        String str6 = paramMessage.getString("validate");
        String str7 = paramMessage.getString("validateDes");
        str8 = paramMessage.getString("serviceTelChinaunicom");
        if (paramMessage.getString("sign").equals(PurSecurityIF.a(str1 + str2 + str3 + str4 + str5 + str6 + str7 + str8))) {
          if ("0000".equals(str1))
          {
            ei.a(this.a, "check_app_status", str6);
            if ("0".equals(str6)) {
              break label772;
            }
            ei.a(this.a, "check_app_status_str", str7);
            this.a.a(str7);
          }
        }
      }
      catch (NumberFormatException paramMessage)
      {
        String str4;
        String str5;
        String str8;
        paramMessage.printStackTrace();
        for (;;)
        {
          this.a.e.sendEmptyMessage(3);
          return;
          ei.a(this.a, "day_quota", Integer.valueOf(str4).intValue() * 100);
          ei.a(this.a, "month_quota", Integer.valueOf(str5).intValue() * 100);
          ei.a(this.a, "service_tel_chinaunicom", str8);
        }
      }
      catch (JSONException paramMessage)
      {
        for (;;)
        {
          label772:
          paramMessage.printStackTrace();
        }
        this.a.a("验签错误");
        return;
      }
    }
    if ((UnicomWoOpenPaymentMainActivity.b(this.a) != null) && (UnicomWoOpenPaymentMainActivity.b(this.a).isShowing())) {
      UnicomWoOpenPaymentMainActivity.b(this.a).dismiss();
    }
    paramMessage = String.valueOf(paramMessage.obj);
    eo.a(this.a, paramMessage, 1);
  }
}
