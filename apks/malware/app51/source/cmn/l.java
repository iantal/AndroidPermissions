package cmn;

import android.content.Context;
import android.content.res.Resources;
import android.graphics.Paint;
import android.text.Layout.Alignment;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.util.DisplayMetrics;
import android.util.FloatMath;
import android.view.View.MeasureSpec;
import android.widget.TextView;

public final class l
  extends TextView
{
  int a = -1;
  float b = -1.0F;
  String c = "";
  private int d;
  private float e;
  
  public l(Context paramContext)
  {
    super(paramContext);
    setMaxLines(1);
    this.e = getTextSize();
  }
  
  public static float a(String paramString, int paramInt1, int paramInt2, int paramInt3, float paramFloat, Paint paramPaint)
  {
    float f1 = 2.0F;
    Paint localPaint = new Paint();
    localPaint.set(paramPaint);
    paramFloat += 0.5F;
    while (paramFloat - f1 > 0.5F)
    {
      float f2 = (paramFloat + f1) / 2.0F;
      localPaint.setTextSize(f2);
      paramPaint = new StaticLayout(paramString, new TextPaint(localPaint), paramInt1, Layout.Alignment.ALIGN_NORMAL, 1.0F, 0.0F, false);
      if ((paramPaint.getLineCount() > paramInt3) || (paramPaint.getHeight() > paramInt2)) {
        paramFloat = f2;
      } else {
        f1 = f2;
      }
    }
    if (f1 >= 10.0F) {
      return FloatMath.floor(f1);
    }
    return f1;
  }
  
  protected final void onMeasure(int paramInt1, int paramInt2)
  {
    super.onMeasure(paramInt1, paramInt2);
    float f1 = this.e;
    int j = View.MeasureSpec.getSize(paramInt1);
    float f2 = getResources().getDisplayMetrics().density;
    String str;
    if (j > 0)
    {
      str = getText().toString();
      if ((j == this.a) && (str.equals(this.c))) {
        f1 = this.b;
      }
    }
    for (;;)
    {
      if (Math.abs(getTextSize() / f2 - f1) > 0.1F)
      {
        setTextSize(2, f1);
        super.onMeasure(paramInt1, paramInt2);
      }
      return;
      this.a = j;
      this.c = str;
      int k = View.MeasureSpec.getMode(paramInt2);
      int i = Integer.MAX_VALUE;
      if ((k == Integer.MIN_VALUE) || (k == 1073741824)) {
        i = View.MeasureSpec.getSize(paramInt2);
      }
      j -= getCompoundPaddingLeft() + getCompoundPaddingRight() + 1;
      k = getCompoundPaddingTop();
      int m = getCompoundPaddingBottom();
      if (j > 0) {
        f1 = a(getText().toString(), j, i - (k + m + 1), this.d, this.e * f2, getPaint()) / f2;
      }
      for (;;)
      {
        this.b = f1;
        break;
      }
    }
  }
  
  public final void setMaxLines(int paramInt)
  {
    super.setMaxLines(paramInt);
    this.d = paramInt;
  }
  
  public final void setTextSize(float paramFloat)
  {
    super.setTextSize(paramFloat);
    this.e = paramFloat;
  }
}
