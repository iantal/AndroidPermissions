package com.ironsource.mobilcore;

import android.content.Context;
import android.os.Build.VERSION;
import android.view.KeyEvent;
import android.webkit.ConsoleMessage;
import android.webkit.ConsoleMessage.MessageLevel;
import android.webkit.WebSettings;
import android.webkit.WebSettings.RenderPriority;
import android.webkit.WebView;
import java.io.File;

final class aW
  extends WebView
{
  private static int b = 0;
  private d a;
  private a c;
  private b d;
  
  public aW(Context paramContext)
  {
    super(paramContext);
    a(a.a);
    int i = b;
    b = i + 1;
    setId(i);
    paramContext = getContext().getCacheDir().getAbsolutePath() + "/mobilecore";
    setBackgroundColor(0);
    getSettings().setJavaScriptEnabled(true);
    getSettings().setSupportMultipleWindows(false);
    getSettings().setNeedInitialFocus(false);
    getSettings().setSupportZoom(false);
    getSettings().setAllowFileAccess(true);
    getSettings().setAppCacheEnabled(true);
    if (Build.VERSION.SDK_INT < 18) {
      getSettings().setRenderPriority(WebSettings.RenderPriority.HIGH);
    }
    getSettings().setCacheMode(1);
    getSettings().setAppCachePath(paramContext);
    setHorizontalScrollBarEnabled(false);
    setInitialScale(100);
    if ((Build.VERSION.SDK_INT >= 11) && (Build.VERSION.SDK_INT < 19)) {
      setLayerType(1, null);
    }
    setScrollBarStyle(33554432);
    this.a = new d(this);
    setWebChromeClient(this.a);
    aE.a(this);
  }
  
  private void a(a paramA)
  {
    try
    {
      A.a("WebViewWithLoadState , id:" + getId() + " , setState | from:" + this.c + " , to:" + paramA, 55);
      this.c = paramA;
      return;
    }
    finally
    {
      paramA = finally;
      throw paramA;
    }
  }
  
  public final void a(aF.a paramA)
  {
    this.a.a(paramA);
  }
  
  public final void a(b paramB)
  {
    this.d = paramB;
  }
  
  public final boolean a()
  {
    return this.c == a.c;
  }
  
  public final boolean a(String paramString)
  {
    if (this.c != a.b)
    {
      a(a.b);
      A.a("WebViewWithLoadState , id:" + getId() + " , loadNewUrl | set mState to " + this.c, 55);
      super.loadUrl(paramString);
      return true;
    }
    return false;
  }
  
  public final boolean b()
  {
    return this.c == a.d;
  }
  
  public final void c()
  {
    a(a.a);
  }
  
  public final void d()
  {
    a(a.d);
  }
  
  protected final void onDetachedFromWindow()
  {
    if (this.d != null)
    {
      A.a("WebViewWithLoadState , id:" + getId() + " | onDetachedFromWindow() ", 55);
      this.d.b();
    }
    super.onDetachedFromWindow();
  }
  
  public final boolean onKeyDown(int paramInt, KeyEvent paramKeyEvent)
  {
    if ((paramInt == 4) && (this.d != null))
    {
      A.a("WebViewWithLoadState , id:" + getId() + " | onKeyDown | back ", 55);
      this.d.a();
      return true;
    }
    return super.onKeyDown(paramInt, paramKeyEvent);
  }
  
  private static enum a
  {
    private a() {}
  }
  
  public static abstract interface b
  {
    public abstract boolean a();
    
    public abstract void b();
  }
  
  public static abstract class c
    implements aF.a
  {
    private aW a;
    
    public c() {}
    
    protected final void a()
    {
      this.a.clearHistory();
      if (this.a != null)
      {
        aW.a(this.a, aW.a.c);
        A.a("WebViewWithLoadState , id:" + this.a.getId() + " | set mState to " + aW.a(this.a), 55);
      }
    }
    
    public void setWebViewWithLoadState(aW paramAW)
    {
      this.a = paramAW;
    }
  }
  
  private final class d
    extends aF
  {
    public d(WebView paramWebView)
    {
      super();
    }
    
    public final boolean onConsoleMessage(ConsoleMessage paramConsoleMessage)
    {
      if ((paramConsoleMessage.messageLevel() == ConsoleMessage.MessageLevel.ERROR) && (aW.b(aW.this) != null)) {
        aW.b(aW.this);
      }
      return super.onConsoleMessage(paramConsoleMessage);
    }
  }
}
