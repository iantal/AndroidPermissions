package com.appbrain.a;

import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import cmn.a;
import cmn.i;
import com.appbrain.AppBrainService;
import com.appbrain.e.ae;
import com.appbrain.e.am;
import com.appbrain.e.ao;
import com.appbrain.e.g;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public final class aw
{
  public static void a(Context paramContext)
  {
    Intent localIntent = new Intent(paramContext, AppBrainService.class);
    localIntent.setAction("com.appbrain.CHECK");
    paramContext.startService(localIntent);
  }
  
  public static void a(Context paramContext, String paramString, am paramAm)
  {
    Intent localIntent = new Intent(paramContext, AppBrainService.class);
    localIntent.putExtra("event", i.a(paramAm.a()));
    localIntent.putExtra("key", paramString);
    paramContext.startService(localIntent);
  }
  
  public static void a(String paramString1, String paramString2)
  {
    Object localObject = ax.a().d();
    if (((SharedPreferences)localObject).getString(paramString1, null) == null)
    {
      localObject = ((SharedPreferences)localObject).edit();
      ((SharedPreferences.Editor)localObject).putString(paramString1, paramString2);
      a.a().a((SharedPreferences.Editor)localObject);
    }
  }
  
  public static boolean b(Context paramContext)
  {
    SharedPreferences localSharedPreferences = ax.a().d();
    Object localObject1 = localSharedPreferences.getAll();
    SharedPreferences.Editor localEditor = localSharedPreferences.edit();
    localObject1 = ((Map)localObject1).keySet().iterator();
    String str;
    int i;
    for (;;)
    {
      if (((Iterator)localObject1).hasNext())
      {
        str = (String)((Iterator)localObject1).next();
        if ((!str.startsWith(g.c.toString())) && (!str.startsWith(g.d.toString())) && (!str.startsWith(g.e.toString())) && (!str.startsWith(g.f.toString()))) {
          continue;
        }
        Object localObject2 = localSharedPreferences.getString(str, null);
        if (localObject2 == null) {
          continue;
        }
        for (;;)
        {
          try
          {
            localObject2 = am.a(i.a((String)localObject2));
            if (System.currentTimeMillis() <= ((am)localObject2).g().m() + 1.296E8D) {
              break label229;
            }
            i = 1;
            if (!((am)localObject2).i()) {
              break label234;
            }
            if ((i == 0) || ((str.startsWith(g.c.toString())) && (((am)localObject2).k() != 3))) {
              break;
            }
            localEditor.remove(str);
          }
          catch (Exception localException1)
          {
            localException1.printStackTrace();
            localEditor.remove(str);
          }
          break;
          label229:
          i = 0;
        }
        try
        {
          label234:
          if (ar.a(paramContext).a(localException1.g()) != null) {
            if ((localException1.g().k() == g.c) && (i == 0))
            {
              ao localAo = localException1.m();
              localAo.a(true);
              localEditor.putString(str, i.a(localAo.e().a()));
            }
          }
        }
        catch (Exception localException2)
        {
          localException2.printStackTrace();
          i = 1;
        }
      }
    }
    for (;;)
    {
      a.a().a(localEditor);
      if (i == 0)
      {
        return true;
        localEditor.remove(str);
        break;
      }
      return false;
      i = 0;
    }
  }
}
