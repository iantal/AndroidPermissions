package com.appbrain.a;

import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Build.VERSION;
import android.util.DisplayMetrics;
import android.widget.FrameLayout.LayoutParams;
import com.appbrain.AppBrainBanner;
import com.appbrain.AppBrainService;
import com.appbrain.BannerListener;

public final class q
{
  private int a;
  private AppBrainBanner b;
  private BannerListener c = null;
  private int d = 0;
  
  public q(AppBrainBanner paramAppBrainBanner)
  {
    this.b = paramAppBrainBanner;
    if (!paramAppBrainBanner.isInEditMode()) {
      ax.a().a(paramAppBrainBanner.getContext(), true);
    }
  }
  
  public final BannerListener a()
  {
    return this.c;
  }
  
  public final void a(BannerListener paramBannerListener)
  {
    this.c = paramBannerListener;
  }
  
  public final boolean a(h paramH, i paramI, String paramString1, String paramString2, int paramInt, String paramString3, boolean paramBoolean)
  {
    this.d = paramInt;
    paramInt = 1;
    if (!this.b.isInEditMode())
    {
      cmn.h localH = cmn.h.a(this.b.getContext());
      ax localAx = ax.a();
      if ((localH.b != -1) && (localH.c >= 5000) && (localAx.k() <= 9) && (Integer.parseInt(Build.VERSION.SDK) >= 7))
      {
        paramInt = 1;
        if ((paramInt == 0) || (Math.random() > localAx.a(paramBoolean))) {
          break label146;
        }
        paramInt = 1;
      }
    }
    else
    {
      label102:
      if ((paramInt == 0) && (!cmn.h.g)) {
        break label152;
      }
    }
    label146:
    label152:
    for (paramBoolean = true;; paramBoolean = false)
    {
      this.b.removeAllViews();
      if (paramBoolean) {
        break label158;
      }
      this.b.setVisibility(8);
      return paramBoolean;
      paramInt = 0;
      break;
      paramInt = 0;
      break label102;
    }
    label158:
    this.a = ((int)(this.b.getContext().getResources().getDisplayMetrics().density * 50.0F + 0.999F));
    paramString3 = new r(this, paramString3);
    this.b.addView(paramH.a(this.b.getContext(), paramString1, paramString2, paramI, this.a, paramString3), new FrameLayout.LayoutParams(-1, this.a));
    this.b.setVisibility(0);
    return paramBoolean;
  }
  
  public final int b()
  {
    return this.a;
  }
  
  public final void c()
  {
    int i = ax.a().h();
    if (Math.random() < 1.0D / (1 << i))
    {
      Intent localIntent = new Intent(this.b.getContext(), AppBrainService.class);
      localIntent.putExtra("b1", this.d);
      localIntent.putExtra("b2", i);
      this.b.getContext().startService(localIntent);
    }
  }
}
