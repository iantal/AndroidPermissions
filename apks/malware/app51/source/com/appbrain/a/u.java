package com.appbrain.a;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.graphics.Paint;
import android.graphics.RectF;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.GradientDrawable.Orientation;
import android.graphics.drawable.LayerDrawable;
import android.graphics.drawable.ShapeDrawable;
import android.graphics.drawable.shapes.OvalShape;
import android.graphics.drawable.shapes.RoundRectShape;
import android.os.SystemClock;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup.MarginLayoutParams;
import android.view.ViewTreeObserver;
import android.view.Window;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.FrameLayout.LayoutParams;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.TextView;
import cmn.j;
import cmn.l;
import com.appbrain.AppBrain;
import com.appbrain.RemoteSettings;
import com.appbrain.a;
import com.appbrain.d.c;
import java.util.Arrays;
import java.util.Locale;

public final class u
  extends a
{
  private static j g = null;
  private static j h = null;
  protected boolean a = false;
  protected RemoteSettings b;
  protected final Activity c;
  protected b d;
  protected boolean e;
  private long f;
  private final String i;
  private final String j;
  private final String k;
  private final String l;
  private boolean m;
  private String n;
  private boolean o;
  private boolean p;
  private float q = 1.0F;
  private LinearLayout r;
  private LayerDrawable s;
  
  public u(Activity paramActivity)
  {
    this.c = paramActivity;
    this.q = paramActivity.getResources().getDisplayMetrics().density;
    String str = paramActivity.getResources().getConfiguration().locale.getLanguage();
    this.i = t.a(10, str);
    this.j = t.a(4, str);
    this.k = t.a(0, str);
    this.l = t.a(1, str);
    this.o = false;
    paramActivity = paramActivity.getResources().getConfiguration();
    int i1 = paramActivity.screenLayout & 0xF;
    if (paramActivity.orientation == 2)
    {
      if ((i1 == 0) || (i1 == 1) || (i1 == 2))
      {
        bool1 = true;
        this.o = bool1;
      }
    }
    else {
      if (i1 != 1) {
        break label161;
      }
    }
    label161:
    for (boolean bool1 = bool2;; bool1 = false)
    {
      this.p = bool1;
      return;
      bool1 = false;
      break;
    }
  }
  
  private View a(int paramInt, Button paramButton, int[] paramArrayOfInt)
  {
    float f1 = paramInt;
    int i1 = (int)Math.sqrt(Math.pow(this.q * f1, 2.0D) / 2.0D);
    i1 = ((int)(this.q * f1) - i1) / 2;
    FrameLayout localFrameLayout = new FrameLayout(this.c);
    paramButton.setGravity(17);
    paramButton.setLayoutParams(new FrameLayout.LayoutParams((int)(this.q * f1), (int)(f1 * this.q)));
    paramButton.setPadding(i1, i1, i1, i1);
    Object localObject = new ShapeDrawable(new OvalShape());
    ((ShapeDrawable)localObject).setShaderFactory(new aa(this, paramArrayOfInt));
    paramButton.setBackgroundDrawable(c.a(this.c, (Drawable)localObject));
    if (((paramArrayOfInt[0] & 0xFF000000) == -16777216) && ((paramArrayOfInt[1] & 0xFF000000) == -16777216))
    {
      paramInt = (int)((paramInt + 5) * this.q);
      paramArrayOfInt = new View(this.c);
      localObject = new ViewGroup.MarginLayoutParams(paramInt, paramInt);
      ((ViewGroup.MarginLayoutParams)localObject).setMargins(-(int)(this.q * 5.0F) / 2, (int)(this.q * 5.0F), 0, 0);
      paramArrayOfInt.setLayoutParams((ViewGroup.LayoutParams)localObject);
      localObject = new ShapeDrawable(new OvalShape());
      ((ShapeDrawable)localObject).setShaderFactory(new ac(this));
      paramArrayOfInt.setBackgroundDrawable((Drawable)localObject);
      localFrameLayout.addView(paramArrayOfInt);
    }
    localFrameLayout.addView(paramButton);
    return localFrameLayout;
  }
  
  public final void a()
  {
    this.c.getWindow().setFormat(1);
    this.c.requestWindowFeature(1);
    AppBrain.init(this.c);
    Object localObject1 = this.c.getIntent();
    if (localObject1 != null)
    {
      this.e = ((Intent)localObject1).getBooleanExtra("maybe", false);
      this.m = ((Intent)localObject1).getBooleanExtra("light", false);
      this.n = ((Intent)localObject1).getStringExtra("ana");
    }
    this.d = b.a((Intent)localObject1);
    this.b = ax.a().i();
    this.r = new LinearLayout(this.c);
    this.r.setOrientation(1);
    this.r.setLayoutParams(new ViewGroup.LayoutParams(-1, -1));
    Object localObject2 = ad.a().a(-8343745, -8343745).a(-1117707).b(0).a();
    Object localObject3 = ad.a().a(-4991873, -7819699).a(-1).b(-10716373).a();
    Object localObject4 = ad.a().a(-8289919, -12895429).a(-1).b(-14540254).a();
    label494:
    label552:
    int i1;
    if (this.m)
    {
      localObject1 = ad.a().a(-1117707, -3618614).a(-13224394).a();
      localObject1 = new ad(new ag((byte)0).a((ae)localObject1).b((ae)localObject2).c((ae)localObject3).d((ae)localObject4), (byte)0);
      localObject3 = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, ((ad)localObject1).b.a);
      localObject2 = new Drawable[2];
      localObject2[0] = localObject3;
      localObject3 = new ShapeDrawable(new OvalShape());
      ((ShapeDrawable)localObject3).setShaderFactory(new ab(this));
      localObject2[1] = localObject3;
      localObject2[1].setAlpha(0);
      this.s = new LayerDrawable((Drawable[])localObject2);
      this.r.setBackgroundDrawable(this.s);
      localObject2 = new TextView(this.c);
      localObject3 = new LinearLayout.LayoutParams(-2, -2);
      ((LinearLayout.LayoutParams)localObject3).setMargins(10, 20, 10, 10);
      ((LinearLayout.LayoutParams)localObject3).gravity = 1;
      ((TextView)localObject2).setLayoutParams((ViewGroup.LayoutParams)localObject3);
      ((TextView)localObject2).setText(this.i);
      ((TextView)localObject2).setTextColor(((ad)localObject1).b.c);
      ((TextView)localObject2).setTextSize(2, 20.0F);
      ((TextView)localObject2).setTypeface(((TextView)localObject2).getTypeface(), 1);
      localObject3 = new LinearLayout(this.c);
      if (!this.o) {
        break label1549;
      }
      ((LinearLayout)localObject3).setOrientation(0);
      ((LinearLayout)localObject3).setGravity(17);
      localObject4 = new LinearLayout.LayoutParams(-1, -2);
      if (!this.p) {
        break label1558;
      }
      ((LinearLayout.LayoutParams)localObject4).setMargins((int)(6.0F * this.q), (int)(5.0F * this.q), (int)(6.0F * this.q), 0);
      ((LinearLayout)localObject3).setPadding((int)(5.0F * this.q), (int)(10.0F * this.q), (int)(5.0F * this.q), (int)(10.0F * this.q));
      ((LinearLayout)localObject3).setLayoutParams((ViewGroup.LayoutParams)localObject4);
      localObject4 = new TextView(this.c);
      ((TextView)localObject4).setText(this.j);
      ((TextView)localObject4).setTextColor(((ad)localObject1).c.c);
      ((TextView)localObject4).setTextSize(2, 18.0F);
      Object localObject6 = ((ad)localObject1).c;
      Object localObject7 = new float[8];
      Object localObject5 = new float[8];
      Object localObject8 = new float[8];
      Arrays.fill((float[])localObject7, 8.0F * this.q);
      Arrays.fill((float[])localObject5, localObject7[0] - 3.0F * this.q);
      Arrays.fill((float[])localObject8, localObject7[0] - 1.0F * this.q);
      localObject5 = new ShapeDrawable(new RoundRectShape((float[])localObject5, null, null));
      ((ShapeDrawable)localObject5).setShaderFactory(new y(this, (ae)localObject6));
      ShapeDrawable localShapeDrawable = new ShapeDrawable(new RoundRectShape((float[])localObject7, null, null));
      localShapeDrawable.getPaint().setColor(((ae)localObject6).b);
      float f1 = 1.0F * this.q;
      localObject6 = new ShapeDrawable(new RoundRectShape((float[])localObject7, new RectF(f1, f1, f1, f1), (float[])localObject8));
      ((ShapeDrawable)localObject6).setShaderFactory(new z(this));
      localObject6 = new LayerDrawable(new ShapeDrawable[] { localShapeDrawable, localObject6, localObject5 });
      ((LayerDrawable)localObject6).setLayerInset(2, (int)(3.0F * this.q), (int)(3.0F * this.q), (int)(3.0F * this.q), (int)(3.0F * this.q));
      ((ShapeDrawable)localObject5).setPadding((int)(15.0F * this.q), (int)(15.0F * this.q), (int)(15.0F * this.q), (int)(15.0F * this.q));
      ((TextView)localObject4).setBackgroundDrawable((Drawable)localObject6);
      localObject5 = new LinearLayout.LayoutParams(-2, -2);
      ((LinearLayout.LayoutParams)localObject5).setMargins((int)(10.0F * this.q), (int)(10.0F * this.q), (int)(10.0F * this.q), (int)(10.0F * this.q));
      if (!this.o) {
        break label1594;
      }
      i1 = 48;
      label1013:
      ((LinearLayout.LayoutParams)localObject5).gravity = i1;
      if (this.o)
      {
        ((LinearLayout.LayoutParams)localObject5).width = 0;
        ((LinearLayout.LayoutParams)localObject5).weight = 1.0F;
      }
      ((TextView)localObject4).setLayoutParams((ViewGroup.LayoutParams)localObject5);
      ((TextView)localObject4).setGravity(17);
      localObject5 = new RelativeLayout(this.c);
      ((RelativeLayout)localObject5).setGravity(17);
      localObject6 = new LinearLayout.LayoutParams((int)(188.0F * this.q), (int)(150.0F * this.q));
      ((LinearLayout.LayoutParams)localObject6).setMargins((int)(6.0F * this.q), (int)(6.0F * this.q), (int)(6.0F * this.q), (int)(6.0F * this.q));
      ((RelativeLayout)localObject5).setLayoutParams((ViewGroup.LayoutParams)localObject6);
      localObject8 = new Button(this.c);
      ((Button)localObject8).setText(this.l);
      ((Button)localObject8).setTextColor(((ad)localObject1).d.c);
      ((Button)localObject8).setTextSize(2, 20.0F);
      ((Button)localObject8).setTypeface(((Button)localObject8).getTypeface(), 1);
      localObject6 = a(120, (Button)localObject8, ((ad)localObject1).d.a);
      ((Button)localObject8).getViewTreeObserver().addOnGlobalLayoutListener(new v(this, (Button)localObject8));
      ((Button)localObject8).setOnClickListener(new w(this));
      localObject7 = new Button(this.c);
      ((Button)localObject7).setText(this.k);
      ((Button)localObject7).setTextColor(((ad)localObject1).e.c);
      i1 = Math.min(this.k.split("\t").length, 3);
      ((Button)localObject7).setTextSize(2, l.a(this.k, 80, 80, i1, 16.0F, ((Button)localObject7).getPaint()));
      ((Button)localObject7).setTypeface(((Button)localObject8).getTypeface(), 1);
      localObject1 = a(80, (Button)localObject7, ((ad)localObject1).e.a);
      ((Button)localObject7).setOnClickListener(new x(this));
      localObject7 = new RelativeLayout.LayoutParams(-2, -2);
      localObject8 = new RelativeLayout.LayoutParams(-2, -2);
      ((RelativeLayout.LayoutParams)localObject7).addRule(10);
      ((RelativeLayout.LayoutParams)localObject8).addRule(12);
      ((RelativeLayout.LayoutParams)localObject7).addRule(9);
      ((RelativeLayout.LayoutParams)localObject8).addRule(11);
      ((View)localObject6).setLayoutParams((ViewGroup.LayoutParams)localObject7);
      ((View)localObject1).setLayoutParams((ViewGroup.LayoutParams)localObject8);
      ((RelativeLayout)localObject5).addView((View)localObject1);
      ((RelativeLayout)localObject5).addView((View)localObject6);
      ((LinearLayout)localObject3).addView((View)localObject4);
      ((LinearLayout)localObject3).addView((View)localObject5);
      if (ax.a().a) {
        break label1599;
      }
      ((TextView)localObject2).setText("AppLift SDK requires changes to your proguard config as detailed in the documentation!");
      this.r.addView((View)localObject2);
    }
    for (;;)
    {
      this.c.setContentView(this.r);
      this.r.invalidate();
      if (h != null)
      {
        localObject1 = h;
        localObject1 = this.c;
      }
      this.f = SystemClock.elapsedRealtime();
      return;
      localObject1 = ad.a().a(-12303292, -15592942).a(-1).a();
      break;
      label1549:
      ((LinearLayout)localObject3).setOrientation(1);
      break label494;
      label1558:
      ((LinearLayout.LayoutParams)localObject4).setMargins((int)(6.0F * this.q), (int)(20.0F * this.q), (int)(6.0F * this.q), 0);
      break label552;
      label1594:
      i1 = 1;
      break label1013;
      label1599:
      this.r.addView((View)localObject2);
      this.r.addView((View)localObject3);
    }
  }
  
  public final boolean a(int paramInt)
  {
    return (paramInt == 4) && (SystemClock.elapsedRealtime() < this.f + 1500L);
  }
  
  public final void b()
  {
    if (g != null)
    {
      j localJ = g;
      boolean bool = this.a;
    }
    super.b();
  }
}
