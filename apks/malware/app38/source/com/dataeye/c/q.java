package com.dataeye.c;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class q
  extends SQLiteOpenHelper
{
  private static String a = "dataeye_database_%1$s.db";
  private final String b = "DROP TABLE IF EXISTS dataeye_agenda_log";
  private final String c = "DROP TABLE IF EXISTS dataeye_history_log";
  private final String d = "DROP TABLE IF EXISTS dataeye_device";
  private final String e = "DROP TABLE IF EXISTS dataeye_user";
  private final String f = "DROP TABLE IF EXISTS dataeye_online";
  private final String g = "DROP TABLE IF EXISTS dataeye_payment";
  private final String h = "DROP TABLE IF EXISTS dataeye_oss";
  private final String i = "DROP TABLE IF EXISTS dataeye_event";
  private final String j = "DROP TABLE IF EXISTS dataeye_error_report";
  private final String k = "CREATE TABLE dataeye_agenda_log  (_id INTEGER PRIMARY KEY AUTOINCREMENT, type VARCHAR not null default '' , account_id VARCHAR not null default '' , agenda_data TEXT not null default ''   )";
  private final String l = "CREATE TABLE dataeye_history_log  (_id INTEGER PRIMARY KEY AUTOINCREMENT, history_data VARCHAR not null default ''   )";
  
  public q(Context paramContext, String paramString)
  {
    super(paramContext, String.format(a, new Object[] { paramString }), null, 8);
  }
  
  private void b(SQLiteDatabase paramSQLiteDatabase)
  {
    paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_agenda_log");
    paramSQLiteDatabase.execSQL("CREATE TABLE dataeye_agenda_log  (_id INTEGER PRIMARY KEY AUTOINCREMENT, type VARCHAR not null default '' , account_id VARCHAR not null default '' , agenda_data TEXT not null default ''   )");
  }
  
  private void c(SQLiteDatabase paramSQLiteDatabase)
  {
    paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_history_log");
    paramSQLiteDatabase.execSQL("CREATE TABLE dataeye_history_log  (_id INTEGER PRIMARY KEY AUTOINCREMENT, history_data VARCHAR not null default ''   )");
  }
  
  public SQLiteDatabase a()
  {
    try
    {
      SQLiteDatabase localSQLiteDatabase = getWritableDatabase();
      return localSQLiteDatabase;
    }
    catch (Exception localException)
    {
      t.a("Invoke getSQLiteDatabase error, reason:" + localException.getMessage(), localException);
    }
    return null;
  }
  
  public void a(SQLiteDatabase paramSQLiteDatabase)
  {
    if (paramSQLiteDatabase != null) {
      paramSQLiteDatabase.close();
    }
  }
  
  public void onCreate(SQLiteDatabase paramSQLiteDatabase)
  {
    b(paramSQLiteDatabase);
    c(paramSQLiteDatabase);
  }
  
  public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    if (paramInt1 < 8)
    {
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_device");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_user");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_online");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_payment");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_oss");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_event");
      paramSQLiteDatabase.execSQL("DROP TABLE IF EXISTS dataeye_error_report");
      b(paramSQLiteDatabase);
      c(paramSQLiteDatabase);
    }
  }
}
