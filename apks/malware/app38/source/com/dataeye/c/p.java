package com.dataeye.c;

import com.dataeye.ConfigParamsUpdateListener;
import com.dataeye.a.d;
import com.dataeye.b.f;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.util.EntityUtils;

class p
  implements Runnable
{
  p(boolean paramBoolean, ConfigParamsUpdateListener paramConfigParamsUpdateListener) {}
  
  public void run()
  {
    try
    {
      Object localObject = new com.dataeye.a.c();
      ((com.dataeye.a.c)localObject).a = w.c;
      ((com.dataeye.a.c)localObject).b = w.d;
      ((com.dataeye.a.c)localObject).c = a.b();
      ((com.dataeye.a.c)localObject).f = a.f();
      ((com.dataeye.a.c)localObject).e = w.b;
      ((com.dataeye.a.c)localObject).d = 2;
      ((com.dataeye.a.c)localObject).g = o.a();
      t.a("DCconfigParams attrs: etag = " + ((com.dataeye.a.c)localObject).g);
      localObject = ab.b("http://cf.gdatacube.net/config/update", (f)localObject);
      if (((HttpResponse)localObject).getStatusLine().getStatusCode() == 200)
      {
        localObject = ab.a(EntityUtils.toByteArray(((HttpResponse)localObject).getEntity()));
        d localD = new d();
        localD.a(new com.dataeye.b.c((byte[])localObject));
        o.a(localD);
        if (o.c() != null) {
          o.c().a();
        }
      }
      if ((!this.a) && (this.b != null))
      {
        t.a("Invoke configParamsUpdateListener ");
        this.b.callback();
      }
      return;
    }
    catch (Throwable localThrowable)
    {
      localThrowable.printStackTrace();
    }
  }
}
