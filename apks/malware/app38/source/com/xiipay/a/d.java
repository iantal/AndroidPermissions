package com.xiipay.a;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Build;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import java.io.ByteArrayOutputStream;
import java.io.DataOutputStream;
import java.util.Map;

public final class d
{
  private static Integer a = Integer.valueOf(8);
  private Context b;
  private j c;
  
  public d(Context paramContext)
  {
    this.b = paramContext;
    this.c = new j(paramContext);
  }
  
  public final Context a()
  {
    return this.b;
  }
  
  public final byte[] a(int paramInt)
    throws Exception
  {
    Object localObject3 = (TelephonyManager)this.b.getSystemService("phone");
    Object localObject2 = ((TelephonyManager)localObject3).getNetworkOperator();
    Object localObject1 = localObject2;
    if (localObject2 == null) {
      localObject1 = "";
    }
    String str = ((TelephonyManager)localObject3).getDeviceId();
    localObject2 = str;
    if (str == null) {
      localObject2 = "";
    }
    str = ((TelephonyManager)localObject3).getSubscriberId();
    if (str == null) {
      str = "";
    }
    for (;;)
    {
      Object localObject4 = (String)this.c.d().get(str);
      localObject3 = localObject4;
      if (localObject4 == null) {
        localObject3 = "";
      }
      localObject4 = this.b.getPackageManager().getApplicationInfo(this.b.getPackageName(), 128);
      ByteArrayOutputStream localByteArrayOutputStream = new ByteArrayOutputStream();
      DataOutputStream localDataOutputStream = new DataOutputStream(localByteArrayOutputStream);
      localDataOutputStream.writeInt(a.intValue());
      localDataOutputStream.writeUTF(((ApplicationInfo)localObject4).metaData.getString("XIIPAY_CHANNEL"));
      localDataOutputStream.writeUTF((String)localObject2);
      localDataOutputStream.writeUTF(str);
      localDataOutputStream.writeUTF((String)localObject3);
      localDataOutputStream.writeUTF((String)localObject1);
      localDataOutputStream.writeUTF(((ApplicationInfo)localObject4).metaData.getString("XIIPAY_PRODUCT"));
      localDataOutputStream.writeUTF(this.c.e());
      localDataOutputStream.writeUTF(i.b(this.b));
      localDataOutputStream.writeUTF(Build.MODEL);
      localDataOutputStream.writeBoolean(this.c.f());
      localDataOutputStream.writeInt(paramInt);
      localDataOutputStream.writeInt(e());
      localDataOutputStream.writeUTF(f.a);
      localByteArrayOutputStream.close();
      return localByteArrayOutputStream.toByteArray();
    }
  }
  
  public final j b()
  {
    return this.c;
  }
  
  public final boolean c()
  {
    return e() >= 0;
  }
  
  public final boolean d()
  {
    Object localObject = (TelephonyManager)this.b.getSystemService("phone");
    if (5 != ((TelephonyManager)localObject).getSimState()) {
      return false;
    }
    localObject = ((TelephonyManager)localObject).getSubscriberId();
    return (localObject != null) && (((String)localObject).length() == 15);
  }
  
  public final int e()
  {
    NetworkInfo localNetworkInfo = ((ConnectivityManager)this.b.getSystemService("connectivity")).getActiveNetworkInfo();
    if ((localNetworkInfo == null) || (!localNetworkInfo.isAvailable())) {
      return -1;
    }
    if (localNetworkInfo.getType() == 0)
    {
      if (localNetworkInfo.getExtraInfo().toLowerCase().indexOf("wap") != -1) {
        return 0;
      }
      return 1;
    }
    return 2;
  }
}
