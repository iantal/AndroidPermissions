package com.urbanairship.analytics;

import android.app.Activity;
import android.os.Handler;
import android.os.Message;

class ActivityMonitor
{
  private static final int BACKGROUND_DELAY_MS = 2000;
  private int activities = 0;
  private Delegate delegate;
  
  public ActivityMonitor(Delegate paramDelegate)
  {
    this.delegate = paramDelegate;
  }
  
  public void addActivity(Activity paramActivity)
  {
    if (this.activities == 0) {
      this.delegate.onForeground();
    }
    this.activities += 1;
  }
  
  public void removeActivity(Activity paramActivity)
  {
    new Thread()
    {
      public void handleMessage(Message paramAnonymousMessage)
      {
        ActivityMonitor.access$010(ActivityMonitor.this);
        if (ActivityMonitor.this.activities == 0) {
          ActivityMonitor.this.delegate.onBackground();
        }
      }
    }
    {
      public void run()
      {
        try
        {
          sleep(2000L);
          Message localMessage = this.val$handler.obtainMessage();
          this.val$handler.sendMessage(localMessage);
          return;
        }
        catch (InterruptedException localInterruptedException)
        {
          for (;;) {}
        }
      }
    }.start();
  }
  
  public static abstract class Delegate
  {
    public Delegate() {}
    
    public abstract void onBackground();
    
    public abstract void onForeground();
  }
}
