package com.urbanairship.push;

import android.app.Notification;
import android.content.pm.ApplicationInfo;
import com.urbanairship.UAirship;
import com.urbanairship.util.NotificationIDGenerator;
import java.util.Map;

public class BasicPushNotificationBuilder
  implements PushNotificationBuilder
{
  public String appName = UAirship.getAppName();
  public int constantNotificationId = -1;
  public int iconDrawableId = UAirship.getAppInfo().icon;
  
  public BasicPushNotificationBuilder() {}
  
  public Notification buildNotification(String paramString, Map<String, String> paramMap)
  {
    if ((paramString == null) || (paramString.length() == 0)) {
      paramString = null;
    }
    PushPreferences localPushPreferences;
    do
    {
      do
      {
        return paramString;
        paramMap = new Notification(this.iconDrawableId, paramString, System.currentTimeMillis());
        paramMap.flags = 16;
        paramMap.setLatestEventInfo(UAirship.shared().getApplicationContext(), this.appName, paramString, null);
        paramMap.defaults = 0;
        localPushPreferences = PushManager.shared().getPreferences();
        paramString = paramMap;
      } while (localPushPreferences.isInQuietTime());
      if (localPushPreferences.isVibrateEnabled()) {
        paramMap.defaults |= 0x2;
      }
      paramString = paramMap;
    } while (!localPushPreferences.isSoundEnabled());
    paramMap.defaults |= 0x1;
    return paramMap;
  }
  
  public int getNextId(String paramString, Map<String, String> paramMap)
  {
    if (this.constantNotificationId > 0) {
      return this.constantNotificationId;
    }
    return NotificationIDGenerator.nextID();
  }
}
