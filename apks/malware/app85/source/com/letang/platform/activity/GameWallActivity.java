package com.letang.platform.activity;

import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetManager;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebSettings.ZoomDensity;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import com.letang.platform.biz.GameWallBiz;
import com.letang.platform.config.Gobal;
import com.letang.platform.util.ImageUtils;
import com.letang.platform.util.JavaScriptInterface;
import com.letang.platform.util.SysCallUtils;
import java.io.InputStream;

public class GameWallActivity
  extends Activity
  implements View.OnKeyListener
{
  InputStream isPlay = null;
  InputStream isPlayClick = null;
  ImageButton mImgBtnPlay;
  private WebView mWebView;
  
  public GameWallActivity() {}
  
  private LinearLayout getView()
  {
    Gobal.currentDensity = SysCallUtils.getCurrentDensity(this);
    try
    {
      LinearLayout localLinearLayout1 = new LinearLayout(this);
      localLinearLayout1.setLayoutParams(new LinearLayout.LayoutParams(-1, -1));
      localLinearLayout1.setOrientation(1);
      LinearLayout localLinearLayout2 = new LinearLayout(this);
      localLinearLayout2.setLayoutParams(new LinearLayout.LayoutParams(-1, -2));
      localLinearLayout2.setOrientation(0);
      Object localObject1 = new ImageView(this);
      ((ImageView)localObject1).setLayoutParams(new LinearLayout.LayoutParams(-2, -2));
      Object localObject2 = getAssets().open("gamewall_top_logo.png");
      ((ImageView)localObject1).setBackgroundDrawable(ImageUtils.getBitmapDrawable((InputStream)localObject2, Gobal.currentDensity));
      ((InputStream)localObject2).close();
      localObject2 = new ImageButton(this);
      ((ImageButton)localObject2).setLayoutParams(new LinearLayout.LayoutParams(-2, -2));
      Object localObject3 = getAssets().open("gamewall_top_more.png");
      ((ImageButton)localObject2).setBackgroundDrawable(ImageUtils.getBitmapDrawable((InputStream)localObject3, Gobal.currentDensity));
      ((InputStream)localObject3).close();
      ((ImageButton)localObject2).setOnTouchListener(new View.OnTouchListener()
      {
        public boolean onTouch(View paramAnonymousView, MotionEvent paramAnonymousMotionEvent)
        {
          switch (paramAnonymousMotionEvent.getAction())
          {
          }
          for (;;)
          {
            return false;
            SysCallUtils.callWebBrowser(GameWallActivity.this, "market://search?q=pub:LeTang,+Inc.");
          }
        }
      });
      localLinearLayout2.addView((View)localObject1);
      localLinearLayout2.addView((View)localObject2);
      localObject1 = new RelativeLayout(this);
      ((RelativeLayout)localObject1).setGravity(85);
      ((RelativeLayout)localObject1).setLayoutParams(new RelativeLayout.LayoutParams(-1, -2));
      localObject2 = getAssets().open("gamewall_curgame.png");
      ((RelativeLayout)localObject1).setBackgroundDrawable(ImageUtils.getBitmapDrawable((InputStream)localObject2, Gobal.currentDensity));
      ((InputStream)localObject2).close();
      localObject2 = new ImageButton(this);
      ((ImageButton)localObject2).setLayoutParams(new RelativeLayout.LayoutParams(-2, -2));
      this.isPlay = getAssets().open("gamewall_play.png");
      ((ImageButton)localObject2).setBackgroundDrawable(ImageUtils.getBitmapDrawable(this.isPlay, Gobal.currentDensity));
      this.isPlayClick = getAssets().open("gamewall_play_click.png");
      ((ImageButton)localObject2).setOnTouchListener(new View.OnTouchListener()
      {
        public boolean onTouch(View paramAnonymousView, MotionEvent paramAnonymousMotionEvent)
        {
          switch (paramAnonymousMotionEvent.getAction())
          {
          }
          for (;;)
          {
            return false;
            paramAnonymousView.setBackgroundDrawable(ImageUtils.getBitmapDrawable(GameWallActivity.this.isPlayClick, Gobal.currentDensity));
            continue;
            paramAnonymousView.setBackgroundDrawable(ImageUtils.getBitmapDrawable(GameWallActivity.this.isPlay, Gobal.currentDensity));
            continue;
            GameWallActivity.this.startUpGame(PopUpActivity.class);
            paramAnonymousView.setBackgroundDrawable(ImageUtils.getBitmapDrawable(GameWallActivity.this.isPlay, Gobal.currentDensity));
          }
        }
      });
      ((RelativeLayout)localObject1).addView((View)localObject2);
      localObject2 = new ImageButton(this);
      ((ImageButton)localObject2).setLayoutParams(new LinearLayout.LayoutParams(-1, -2));
      localObject3 = getAssets().open("gamewall_info.png");
      ((ImageButton)localObject2).setBackgroundDrawable(ImageUtils.getBitmapDrawable((InputStream)localObject3, Gobal.currentDensity));
      ((InputStream)localObject3).close();
      ((ImageButton)localObject2).setOnTouchListener(new View.OnTouchListener()
      {
        public boolean onTouch(View paramAnonymousView, MotionEvent paramAnonymousMotionEvent)
        {
          switch (paramAnonymousMotionEvent.getAction())
          {
          default: 
            return false;
          }
          SysCallUtils.callSendEmail(GameWallActivity.this, new String[] { "letanginc@gmail.com" }, "Cooperation", "");
          return false;
        }
      });
      this.mWebView = new WebView(this);
      localObject3 = new LinearLayout.LayoutParams(-1, -1);
      this.mWebView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
      this.mWebView.setLayoutParams((ViewGroup.LayoutParams)localObject3);
      this.mWebView.getSettings().setJavaScriptEnabled(true);
      this.mWebView.setScrollBarStyle(33554432);
      this.mWebView.setWebViewClient(new WebViewClient());
      this.mWebView.setWebChromeClient(new WebChromeClient());
      this.mWebView.addJavascriptInterface(new JavaScriptInterface(this), "jsi");
      localLinearLayout1.addView(localLinearLayout2);
      localLinearLayout1.addView((View)localObject1);
      localLinearLayout1.addView((View)localObject2);
      localLinearLayout1.addView(this.mWebView);
      return localLinearLayout1;
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
    }
    return null;
  }
  
  private void initData()
  {
    final GameWallBiz localGameWallBiz = new GameWallBiz(this);
    localGameWallBiz.releasePackage();
    this.mWebView.loadUrl(localGameWallBiz.getGameWallPage());
    if (SysCallUtils.isNetWorking(this)) {
      new Thread()
      {
        public void run()
        {
          localGameWallBiz.downloadPackage();
        }
      }.start();
    }
  }
  
  private void startUpGame(Class<?> paramClass)
  {
    Intent localIntent = new Intent();
    localIntent.setClass(this, paramClass);
    startActivity(localIntent);
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    setContentView(getView());
    initData();
  }
  
  public boolean onKey(View paramView, int paramInt, KeyEvent paramKeyEvent)
  {
    if ((4 == paramInt) && (this.mWebView.canGoBack()))
    {
      this.mWebView.goBack();
      return true;
    }
    return false;
  }
}
