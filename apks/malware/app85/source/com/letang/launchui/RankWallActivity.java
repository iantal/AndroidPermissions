package com.letang.launchui;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import com.letang.net.RankWallNet;
import com.letang.util.JavaScriptInterface;

public class RankWallActivity
  extends Activity
{
  String gameId;
  private ProgressBar mProgressBar;
  private WebView mWebView;
  
  public RankWallActivity() {}
  
  private void setupWidget()
  {
    requestWindowFeature(1);
    Object localObject = new RelativeLayout(this);
    this.mWebView = new WebView(this);
    this.mWebView.setWebViewClient(new MyWebViewClient(null));
    this.mWebView.getSettings().setJavaScriptEnabled(true);
    this.mProgressBar = new ProgressBar(this, null, 16842874);
    this.mProgressBar.setVisibility(0);
    RelativeLayout.LayoutParams localLayoutParams = new RelativeLayout.LayoutParams(-2, -2);
    localLayoutParams.addRule(13);
    this.mProgressBar.setLayoutParams(localLayoutParams);
    ((RelativeLayout)localObject).addView(this.mWebView, -1, -1);
    ((RelativeLayout)localObject).addView(this.mProgressBar);
    setContentView((View)localObject);
    localObject = new RankWallNet(this);
    this.mWebView.loadUrl(((RankWallNet)localObject).getRankUrl(this.gameId));
    this.mWebView.getSettings().setJavaScriptEnabled(true);
    this.mWebView.addJavascriptInterface(new JavaScriptInterface(this), "jsi");
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    this.gameId = getIntent().getExtras().getString("gameId");
    setupWidget();
  }
  
  private class MyWebViewClient
    extends WebViewClient
  {
    private MyWebViewClient() {}
    
    public void onPageFinished(WebView paramWebView, String paramString)
    {
      RankWallActivity.this.mProgressBar.setVisibility(8);
    }
    
    public void onPageStarted(WebView paramWebView, String paramString, Bitmap paramBitmap)
    {
      RankWallActivity.this.mProgressBar.setVisibility(0);
      RankWallActivity.this.mProgressBar.bringToFront();
    }
  }
}
