package com.volvapps;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout.LayoutParams;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import cn.domob.android.ads.DomobAdListener;
import cn.domob.android.ads.DomobAdView;
import com.unity3d.player.UnityPlayer;
import com.unity3d.player.UnityPlayerProxyActivity;

public class Domob
  extends UnityPlayerProxyActivity
{
  public static String PUBLISHER_ID = null;
  private static DomobAdView _adView;
  private static RelativeLayout _layout;
  
  public Domob() {}
  
  public static void CreateBanner(int paramInt1, final int paramInt2, final int paramInt3)
  {
    boolean bool2 = true;
    Log.i("Domob", "create banner");
    StringBuilder localStringBuilder;
    if (_layout == null)
    {
      bool1 = true;
      localStringBuilder = new StringBuilder(String.valueOf(String.valueOf(bool1)));
      if (_adView != null) {
        break label84;
      }
    }
    label84:
    for (boolean bool1 = bool2;; bool1 = false)
    {
      Log.i("Domob", String.valueOf(bool1));
      UnityPlayer.currentActivity.runOnUiThread(new Runnable()
      {
        public void run()
        {
          if (Domob._adView != null) {
            Domob.DestroyBanner();
          }
          Object localObject = null;
          switch (this.val$type)
          {
          }
          for (;;)
          {
            Domob._layout = new RelativeLayout(UnityPlayer.currentActivity);
            ((RelativeLayout.LayoutParams)localObject).leftMargin = paramInt2;
            ((RelativeLayout.LayoutParams)localObject).topMargin = paramInt3;
            Domob._layout.addView(Domob._adView, (ViewGroup.LayoutParams)localObject);
            Domob._adView.setOnAdListener(new Domob.DomobAdViewListener(null));
            Domob._adView.setClickable(true);
            UnityPlayer.currentActivity.addContentView(Domob._layout, new LinearLayout.LayoutParams(-1, -1));
            return;
            localObject = new RelativeLayout.LayoutParams(-2, -2);
            Domob._adView = new DomobAdView(UnityPlayer.currentActivity, Domob.PUBLISHER_ID, "320x50");
            continue;
            localObject = new RelativeLayout.LayoutParams(-2, -2);
            Domob._adView = new DomobAdView(UnityPlayer.currentActivity, Domob.PUBLISHER_ID, "300x250");
            continue;
            localObject = new RelativeLayout.LayoutParams(-2, -2);
            Domob._adView = new DomobAdView(UnityPlayer.currentActivity, Domob.PUBLISHER_ID, "600x94");
            continue;
            localObject = new RelativeLayout.LayoutParams(-2, -2);
            Domob._adView = new DomobAdView(UnityPlayer.currentActivity, Domob.PUBLISHER_ID, "600x500");
            continue;
            localObject = new RelativeLayout.LayoutParams(-2, -2);
            Domob._adView = new DomobAdView(UnityPlayer.currentActivity, Domob.PUBLISHER_ID, "728x90");
          }
        }
      });
      return;
      bool1 = false;
      break;
    }
  }
  
  public static void DestroyBanner()
  {
    Log.i("Domob", "destroy banner");
    if (_adView == null) {
      return;
    }
    UnityPlayer.currentActivity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        Domob._layout.removeAllViews();
        Domob._layout.setVisibility(8);
        Domob._layout = null;
        Domob._adView = null;
      }
    });
  }
  
  public static void HideBanner(boolean paramBoolean)
  {
    Log.i("Domob", "hide banner " + paramBoolean);
    if (_adView == null) {
      return;
    }
    UnityPlayer.currentActivity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        if (this.val$shouldHide)
        {
          Domob._adView.setVisibility(8);
          return;
        }
        Domob._adView.setVisibility(0);
      }
    });
  }
  
  public static void Init(String paramString)
  {
    Log.i("Domob", "Init pubId:" + paramString);
    PUBLISHER_ID = paramString;
  }
  
  private static void UnitySendMessage(String paramString1, String paramString2, String paramString3)
  {
    UnityPlayer.UnitySendMessage(paramString1, paramString2, paramString3);
  }
  
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    Log.i("Domob", "Init Activity");
  }
  
  private static final class DomobAdViewListener
    implements DomobAdListener
  {
    private DomobAdViewListener() {}
    
    public void onFailedToReceiveFreshAd(DomobAdView paramDomobAdView)
    {
      Log.d("Domob", "onFailedToReceiveFreshAd");
      Domob.UnitySendMessage("DomobAndroidManager", "failedToReceiveFreshAd", "");
    }
    
    public void onLandingPageClose()
    {
      Log.d("Domob", "onLandingPageClose");
      Domob.UnitySendMessage("DomobAndroidManager", "bannerLandingPageClose", "");
    }
    
    public void onLandingPageOpening()
    {
      Log.d("Domob", "onLandingPageOpening");
      Domob.UnitySendMessage("DomobAndroidManager", "bannerLandingPageOpening", "");
    }
    
    public void onReceivedFreshAd(DomobAdView paramDomobAdView)
    {
      Log.d("Domob", "onReceivedFreshAd");
      Domob.UnitySendMessage("DomobAndroidManager", "receivedFreshAd", "");
    }
  }
}
