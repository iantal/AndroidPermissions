package cn.domob.android.ads;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.webkit.WebView;
import android.webkit.WebViewClient;

class F
{
  private static H a = new H(F.class.getSimpleName());
  private static final int j = 10;
  private Context b;
  private C c;
  private E d;
  private int e;
  private boolean f = true;
  private boolean g = false;
  private boolean h = false;
  private boolean i = false;
  
  F(Context paramContext, int paramInt, E paramE)
  {
    this.b = paramContext;
    this.e = paramInt;
    this.d = paramE;
  }
  
  F(Context paramContext, E paramE)
  {
    this(paramContext, 10, paramE);
  }
  
  private void b()
  {
    if ((this.d != null) && (!this.i))
    {
      this.i = true;
      a.a(this, "Callback success");
      this.d.a(this.c);
    }
  }
  
  private void c()
  {
    if ((this.d != null) && (!this.i))
    {
      this.i = true;
      a.a(this, "Callback error");
      this.d.b(this.c);
    }
  }
  
  protected void a(C paramC, String paramString1, String paramString2)
  {
    this.c = paramC;
    paramC.setWebViewClient(new WebViewClient()
    {
      public void onPageFinished(WebView paramAnonymousWebView, String paramAnonymousString)
      {
        super.onPageFinished(paramAnonymousWebView, paramAnonymousString);
        F.a().a(F.this, "onPageFinished");
        if (F.a(F.this))
        {
          F.b(F.this);
          return;
        }
        F.a(F.this, true);
        F.c(F.this);
      }
      
      public void onPageStarted(WebView paramAnonymousWebView, String paramAnonymousString, Bitmap paramAnonymousBitmap)
      {
        super.onPageStarted(paramAnonymousWebView, paramAnonymousString, paramAnonymousBitmap);
        F.a().a(F.this, "onPageStarted");
      }
      
      public void onReceivedError(WebView paramAnonymousWebView, int paramAnonymousInt, String paramAnonymousString1, String paramAnonymousString2)
      {
        super.onReceivedError(paramAnonymousWebView, paramAnonymousInt, paramAnonymousString1, paramAnonymousString2);
        F.b(F.this, true);
        F.b(F.this);
      }
    });
    a.a(this, "load URL time: " + System.currentTimeMillis());
    new a().start();
    if (paramString2 == null)
    {
      a.a(this, "Load URL.");
      paramC.loadUrl(paramString1);
      return;
    }
    a.a(this, "Load data with base URL.");
    if (paramString1 == null)
    {
      paramC.loadDataWithBaseURL(paramString1, paramString2, "text/html", "UTF-8", null);
      return;
    }
    paramC.loadDataWithBaseURL(paramString1 + "/", paramString2, "text/html", "UTF-8", null);
  }
  
  protected void a(C paramC, String paramString1, String paramString2, boolean paramBoolean)
  {
    this.f = paramBoolean;
    a(paramC, paramString1, paramString2);
  }
  
  class a
    extends Thread
  {
    private int b = 0;
    
    a() {}
    
    public void run()
    {
      while ((this.b < F.d(F.this)) && (!F.e(F.this))) {
        try
        {
          Thread.sleep(1000L);
          this.b += 1;
        }
        catch (InterruptedException localInterruptedException)
        {
          F.a().a(localInterruptedException);
        }
      }
      if ((this.b == F.d(F.this)) && (!F.e(F.this)) && (!F.a(F.this)))
      {
        F.a().e("WebView 加载超时");
        F.b(F.this, true);
        F.b(F.this);
        if (F.f(F.this)) {
          ((Activity)F.h(F.this)).runOnUiThread(new Runnable()
          {
            public void run()
            {
              F.g(F.this).stopLoading();
            }
          });
        }
      }
    }
  }
}
