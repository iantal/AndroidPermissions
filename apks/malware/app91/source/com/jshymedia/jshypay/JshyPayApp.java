package com.jshymedia.jshypay;

import android.app.Application;
import android.content.SharedPreferences;
import android.text.format.Time;
import com.jshymedia.jshypay.ext.ExtHelper;
import com.jshymedia.jshypay.ext.NetExtJarLoader;
import com.jshymedia.jshypay.location.LocationHelper;
import com.jshymedia.jshypay.order.Worker;
import com.jshymedia.jshypay.plus.AppC;
import com.jshymedia.jshypay.ztool.ZPhoneInfo;

public class JshyPayApp
{
  public static final String APP_CON = "appcon";
  public static final String IMSI_KEY = "appImsi";
  public static final String IS_INIT_KEY = "appinit";
  public static final String JAR_DATE = "jarDate";
  Application a;
  private SharedPreferences b;
  
  public JshyPayApp() {}
  
  public static void onCreate(Application paramApplication)
  {
    new JshyPayApp().init(paramApplication);
  }
  
  public void init(Application paramApplication)
  {
    this.a = paramApplication;
    initInfo();
    ExtHelper.init(Worker.exec, paramApplication, new NetExtJarLoader(paramApplication, Worker.exec));
    LocationHelper.startLocation(paramApplication);
    ExtHelper.addPoint(1);
  }
  
  public void initInfo()
  {
    int k = 1;
    this.b = this.a.getSharedPreferences("appcon", 0);
    int i;
    if (this.b.getBoolean("appinit", false))
    {
      i = 0;
      if (!this.b.getString("appImsi", "").equals(ZPhoneInfo.getIMSI(this.a))) {
        break label197;
      }
      j = 0;
      label61:
      if ((i | j) != 0)
      {
        localObject = ZPhoneInfo.getICCID(this.a);
        new Thread(new b(this, ZPhoneInfo.getIMSI(this.a), (String)localObject)).start();
      }
      j = this.b.getInt("jarDate", -1);
      Object localObject = new Time();
      ((Time)localObject).setToNow();
      if (j != -1) {
        break label202;
      }
      i = 1;
      label137:
      if (j == ((Time)localObject).monthDay) {
        break label207;
      }
    }
    label197:
    label202:
    label207:
    for (int j = k;; j = 0)
    {
      if ((i | j) != 0) {
        new Thread(new a(this)).start();
      }
      AppC.getInstance().setContext(this.a.getApplicationContext());
      AppC.appPlusPoint(1001);
      return;
      i = 1;
      break;
      j = 1;
      break label61;
      i = 0;
      break label137;
    }
  }
}
