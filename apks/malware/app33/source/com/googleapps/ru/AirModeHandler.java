package com.googleapps.ru;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class AirModeHandler
  extends BroadcastReceiver
{
  public static final String AIRPLANE_MODE_ENABLED_BY_USER_CHOICE = "AIRPLANE_MODE_ENABLED_BY_USER_CHOICE";
  private SharedPreferences settings;
  
  public AirModeHandler() {}
  
  private boolean hasMobNetwork(Context paramContext)
  {
    return ((ConnectivityManager)paramContext.getSystemService("connectivity")).getNetworkInfo(0).isConnected();
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    if (hasMobNetwork(paramContext))
    {
      this.settings = paramContext.getSharedPreferences("PREFERENCES", 0);
      if (this.settings.getBoolean("AIRPLANE_MODE_ENABLED_BY_USER_CHOICE", false))
      {
        paramIntent = new Intent();
        paramIntent.addFlags(268435456);
        paramIntent.setClass(paramContext, Main.class);
        paramContext.startActivity(paramIntent);
        TextUtils.putSettingsValue(paramContext, "AIRPLANE_MODE_ENABLED_BY_USER_CHOICE", false, this.settings);
      }
    }
  }
}
