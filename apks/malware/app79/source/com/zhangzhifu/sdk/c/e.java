package com.zhangzhifu.sdk.c;

import android.content.Context;
import com.zhangzhifu.sdk.a.c;
import com.zhangzhifu.sdk.b;
import com.zhangzhifu.sdk.b.j;
import com.zhangzhifu.sdk.b.k;
import com.zhangzhifu.sdk.d;
import com.zhangzhifu.sdk.util.a.i;
import com.zhangzhifu.sdk.util.n;
import java.util.Iterator;
import java.util.List;

public class e
{
  private static e f;
  public boolean a = false;
  public boolean b = false;
  public String c = null;
  public String d;
  private Context e;
  private String g;
  private j h;
  private i i;
  
  public e(Context paramContext)
  {
    this.e = paramContext;
  }
  
  public static e a(Context paramContext)
  {
    if (f == null) {
      f = new e(paramContext);
    }
    return f;
  }
  
  private static String b(Context paramContext)
  {
    try
    {
      if (com.zhangzhifu.sdk.a.e.a().r(paramContext) != null)
      {
        if (com.zhangzhifu.sdk.a.e.a().r(paramContext).equals("")) {
          return null;
        }
        paramContext = com.zhangzhifu.sdk.a.e.a().r(paramContext);
        return paramContext;
      }
    }
    catch (Exception paramContext)
    {
      paramContext.printStackTrace();
    }
    return null;
  }
  
  private void c(Context paramContext)
  {
    this.c = null;
    int j = 0;
    for (;;)
    {
      if (j >= 12) {
        return;
      }
      try
      {
        Thread.sleep(5000L);
        if (b(paramContext) != null)
        {
          this.c = b(paramContext);
          com.zhangzhifu.sdk.a.e.a().e(paramContext, 1001);
          b.a().a(2);
          d localD = d.a();
          com.zhangzhifu.sdk.a.e.a();
          localD.a(paramContext, com.zhangzhifu.sdk.a.e.p(paramContext), 1001);
          return;
        }
      }
      catch (InterruptedException paramContext)
      {
        paramContext.printStackTrace();
        return;
      }
      j += 1;
    }
  }
  
  public void a(List paramList)
  {
    if ((paramList != null) && (paramList.size() > 0)) {
      paramList = paramList.iterator();
    }
    for (;;)
    {
      if (!paramList.hasNext()) {
        return;
      }
      k localK = (k)paramList.next();
      if (!com.zhangzhifu.sdk.util.e.a(2, this.e)) {
        break;
      }
      if (localK == null)
      {
        n.b("zhangPay_log", "计费失败");
      }
      else if ((localK.d() != null) && (localK.d().size() != 0))
      {
        new l(this, localK).execute(new String[] { "" });
        c.a().a(this.e, localK);
      }
    }
    com.zhangzhifu.sdk.a.e.a().e(this.e, 1005);
    n.b("zhangPay_log", "该设备今日已超过可计费次数上限");
  }
}
