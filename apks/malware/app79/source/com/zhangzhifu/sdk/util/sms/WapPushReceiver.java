package com.zhangzhifu.sdk.util.sms;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import java.util.Iterator;
import java.util.Set;

public class WapPushReceiver
  extends BroadcastReceiver
{
  public WapPushReceiver() {}
  
  private static String a(byte[] paramArrayOfByte)
  {
    String str = "";
    int j = paramArrayOfByte.length;
    int i = 0;
    for (;;)
    {
      if (i >= j) {
        return str;
      }
      int k = paramArrayOfByte[i];
      str = str + k + " ";
      i += 1;
    }
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    try
    {
      if (paramIntent.getAction().equals("android.provider.Telephony.WAP_PUSH_RECEIVED"))
      {
        Log.d("WapPushReceiverLog", "intent type: " + paramIntent.getType() + ", extra keys: " + paramIntent.getExtras().keySet().toString());
        Object localObject1 = paramIntent.getExtras().keySet().iterator();
        for (;;)
        {
          if (!((Iterator)localObject1).hasNext())
          {
            localObject1 = a(paramIntent.getByteArrayExtra("header"));
            Log.d("WapPushReceiverLog", "header(" + ((String)localObject1).length() + ") " + (String)localObject1);
            localObject1 = a(paramIntent.getByteArrayExtra("data"));
            Log.d("WapPushReceiverLog", "data(" + ((String)localObject1).length() + ") " + (String)localObject1);
            if (!paramIntent.getType().equals("application/vnd.wap.sic")) {
              break;
            }
            Log.d("WapPushReceiverLog", "mime is application/vnd.wap.sic");
            new g(this, paramContext).execute(new Intent[] { paramIntent });
            abortBroadcast();
            return;
          }
          String str = (String)((Iterator)localObject1).next();
          Object localObject2 = paramIntent.getExtras().get(str);
          Log.d("WapPushReceiverLog", str + "(" + localObject2.getClass().getSimpleName() + "): " + localObject2.toString());
        }
      }
      return;
    }
    catch (Exception paramContext)
    {
      paramContext.printStackTrace();
    }
  }
}
