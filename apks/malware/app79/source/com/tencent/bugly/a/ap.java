package com.tencent.bugly.a;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import com.tencent.bugly.crashreport.common.info.c;

public class ap
  extends SQLiteOpenHelper
{
  protected final int a = 5;
  protected Context b;
  
  public ap(Context paramContext)
  {
    super(paramContext, "bugly_db_" + c.a(paramContext).h(), null, 4);
    this.b = paramContext;
  }
  
  /* Error */
  protected boolean a(SQLiteDatabase paramSQLiteDatabase)
  {
    // Byte code:
    //   0: iconst_1
    //   1: istore 5
    //   3: aload_0
    //   4: monitorenter
    //   5: iconst_5
    //   6: anewarray 46	java/lang/String
    //   9: astore 6
    //   11: aload 6
    //   13: iconst_0
    //   14: ldc 48
    //   16: aastore
    //   17: aload 6
    //   19: iconst_1
    //   20: ldc 50
    //   22: aastore
    //   23: aload 6
    //   25: iconst_2
    //   26: ldc 52
    //   28: aastore
    //   29: aload 6
    //   31: iconst_3
    //   32: ldc 54
    //   34: aastore
    //   35: aload 6
    //   37: iconst_4
    //   38: ldc 56
    //   40: aastore
    //   41: aload 6
    //   43: arraylength
    //   44: istore_3
    //   45: iconst_0
    //   46: istore_2
    //   47: iload 5
    //   49: istore 4
    //   51: iload_2
    //   52: iload_3
    //   53: if_icmpge +55 -> 108
    //   56: aload 6
    //   58: iload_2
    //   59: aaload
    //   60: astore 7
    //   62: aload_1
    //   63: new 12	java/lang/StringBuilder
    //   66: dup
    //   67: invokespecial 15	java/lang/StringBuilder:<init>	()V
    //   70: ldc 58
    //   72: invokevirtual 21	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   75: aload 7
    //   77: invokevirtual 21	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   80: invokevirtual 33	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   83: invokevirtual 64	android/database/sqlite/SQLiteDatabase:execSQL	(Ljava/lang/String;)V
    //   86: iload_2
    //   87: iconst_1
    //   88: iadd
    //   89: istore_2
    //   90: goto -43 -> 47
    //   93: astore_1
    //   94: aload_1
    //   95: invokestatic 69	com/tencent/bugly/a/bf:b	(Ljava/lang/Throwable;)Z
    //   98: ifne +7 -> 105
    //   101: aload_1
    //   102: invokevirtual 72	java/lang/Throwable:printStackTrace	()V
    //   105: iconst_0
    //   106: istore 4
    //   108: aload_0
    //   109: monitorexit
    //   110: iload 4
    //   112: ireturn
    //   113: astore_1
    //   114: aload_0
    //   115: monitorexit
    //   116: aload_1
    //   117: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	118	0	this	ap
    //   0	118	1	paramSQLiteDatabase	SQLiteDatabase
    //   46	44	2	i	int
    //   44	10	3	j	int
    //   49	62	4	bool1	boolean
    //   1	47	5	bool2	boolean
    //   9	48	6	arrayOfString	String[]
    //   60	16	7	str	String
    // Exception table:
    //   from	to	target	type
    //   5	11	93	java/lang/Throwable
    //   41	45	93	java/lang/Throwable
    //   62	86	93	java/lang/Throwable
    //   5	11	113	finally
    //   41	45	113	finally
    //   62	86	113	finally
    //   94	105	113	finally
  }
  
  public SQLiteDatabase getReadableDatabase()
  {
    int i = 0;
    Object localObject = null;
    while ((localObject == null) && (i < 5))
    {
      i += 1;
      try
      {
        SQLiteDatabase localSQLiteDatabase2 = super.getReadableDatabase();
        localObject = localSQLiteDatabase2;
      }
      catch (Throwable localThrowable)
      {
        bf.d("try db count %d", new Object[] { Integer.valueOf(i) });
        if (i == 5) {
          bf.e("get db fail!", new Object[0]);
        }
        try
        {
          Thread.sleep(200L);
        }
        catch (InterruptedException localInterruptedException)
        {
          localInterruptedException.printStackTrace();
        }
      }
      finally {}
    }
    return localSQLiteDatabase1;
  }
  
  public SQLiteDatabase getWritableDatabase()
  {
    Object localObject2 = null;
    int i = 0;
    Object localObject1 = null;
    while ((localObject1 == null) && (i < 5))
    {
      i += 1;
      try
      {
        SQLiteDatabase localSQLiteDatabase2 = super.getWritableDatabase();
        localObject1 = localSQLiteDatabase2;
      }
      catch (Throwable localThrowable)
      {
        bf.d("try db %d", new Object[] { Integer.valueOf(i) });
        if (i == 5) {
          bf.e("get db fail!", new Object[0]);
        }
        try
        {
          Thread.sleep(200L);
        }
        catch (InterruptedException localInterruptedException)
        {
          localInterruptedException.printStackTrace();
        }
      }
      finally {}
    }
    if (localSQLiteDatabase1 == null)
    {
      bf.d("db error delay error record 1min", new Object[0]);
      if (localThrowable != null) {
        break label134;
      }
    }
    label134:
    for (String str = "";; str = str.getClass().getName() + ":" + str.getMessage())
    {
      bc.a().a(new aq(this, str), 60000L);
      return localSQLiteDatabase1;
    }
  }
  
  public void onCreate(SQLiteDatabase paramSQLiteDatabase)
  {
    try
    {
      Object localObject = new StringBuilder();
      ((StringBuilder)localObject).append(" CREATE TABLE ").append("t_cr").append(" ( ").append("_id").append(" ").append("INTEGER PRIMARY KEY").append(" , ").append("_tm").append(" ").append("int").append(" , ").append("_s1").append(" ").append("text").append(" , ").append("_up").append(" ").append("int").append(" , ").append("_me").append(" ").append("int").append(" , ").append("_uc").append(" ").append("int").append(" , ").append("_dt").append(" ").append("blob").append(" ) ");
      String str = ((StringBuilder)localObject).toString();
      bf.c("create %s", new Object[] { str });
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE ").append("t_ui").append(" ( ").append("_id").append(" ").append("INTEGER PRIMARY KEY").append(" , ").append("_tm").append(" ").append("int").append(" , ").append("_ut").append(" ").append("int").append(" , ").append("_tp").append(" ").append("int").append(" , ").append("_dt").append(" ").append("blob").append(" , ").append("_pc").append(" ").append("text").append(" ) ");
      str = ((StringBuilder)localObject).toString();
      bf.c("create %s", new Object[] { str });
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE ").append("t_lr").append(" ( ").append("_id").append(" ").append("INTEGER PRIMARY KEY").append(" , ").append("_tp").append(" ").append("int").append(" , ").append("_tm").append(" ").append("int").append(" , ").append("_pc").append(" ").append("text").append(" , ").append("_th").append(" ").append("text").append(" , ").append("_dt").append(" ").append("blob").append(" ) ");
      str = ((StringBuilder)localObject).toString();
      bf.c("create %s", new Object[] { str });
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE ").append("t_aclf").append(" ( ").append("_id").append(" integer PRIMARY KEY AUTOINCREMENT NOT NULL, ").append("_pn").append(" text(256) NOT NULL, ").append("_pid").append(" text(32) NOT NULL, ").append("_sspc").append(" integer, ").append("_sid").append(" text(64), ").append("_prsid").append(" text(64), ").append("_tr").append(" text(64) DEFAULT '-1', ").append("_tp").append(" text(64) DEFAULT '-1', ").append("_du").append(" text(64) DEFAULT '-1', ").append("_st").append(" INTEGER DEFAULT 0, ").append("_stda").append(" text(128), ").append("_or").append(" integer, ").append("_inst").append(" integer, ").append("_vf").append(" text ").append(")");
      str = ((StringBuilder)localObject).toString();
      bf.c("create %s", new Object[] { str });
      paramSQLiteDatabase.execSQL(str);
      ((StringBuilder)localObject).setLength(0);
      ((StringBuilder)localObject).append(" CREATE TABLE ").append("t_ss").append(" ( ").append("_id").append(" text PRIMARY KEY NOT NULL, ").append("_dt").append(" blob").append(")");
      localObject = ((StringBuilder)localObject).toString();
      bf.c("create %s", new Object[] { localObject });
      paramSQLiteDatabase.execSQL((String)localObject);
      return;
    }
    catch (Throwable paramSQLiteDatabase)
    {
      for (;;)
      {
        if (!bf.b(paramSQLiteDatabase)) {
          paramSQLiteDatabase.printStackTrace();
        }
      }
    }
    finally {}
  }
  
  /* Error */
  @android.annotation.TargetApi(11)
  public void onDowngrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: invokestatic 253	com/tencent/bugly/crashreport/common/info/e:c	()I
    //   5: bipush 11
    //   7: if_icmplt +40 -> 47
    //   10: ldc -1
    //   12: iconst_2
    //   13: anewarray 82	java/lang/Object
    //   16: dup
    //   17: iconst_0
    //   18: iload_2
    //   19: invokestatic 88	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   22: aastore
    //   23: dup
    //   24: iconst_1
    //   25: iload_3
    //   26: invokestatic 88	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   29: aastore
    //   30: invokestatic 92	com/tencent/bugly/a/bf:d	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   33: pop
    //   34: aload_0
    //   35: aload_1
    //   36: invokevirtual 257	com/tencent/bugly/a/ap:a	(Landroid/database/sqlite/SQLiteDatabase;)Z
    //   39: ifeq +11 -> 50
    //   42: aload_0
    //   43: aload_1
    //   44: invokevirtual 259	com/tencent/bugly/a/ap:onCreate	(Landroid/database/sqlite/SQLiteDatabase;)V
    //   47: aload_0
    //   48: monitorexit
    //   49: return
    //   50: ldc_w 261
    //   53: iconst_0
    //   54: anewarray 82	java/lang/Object
    //   57: invokestatic 92	com/tencent/bugly/a/bf:d	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   60: pop
    //   61: aload_0
    //   62: getfield 40	com/tencent/bugly/a/ap:b	Landroid/content/Context;
    //   65: ldc_w 263
    //   68: invokevirtual 269	android/content/Context:getDatabasePath	(Ljava/lang/String;)Ljava/io/File;
    //   71: astore_1
    //   72: aload_1
    //   73: ifnull -26 -> 47
    //   76: aload_1
    //   77: invokevirtual 275	java/io/File:canWrite	()Z
    //   80: ifeq -33 -> 47
    //   83: aload_1
    //   84: invokevirtual 278	java/io/File:delete	()Z
    //   87: pop
    //   88: goto -41 -> 47
    //   91: astore_1
    //   92: aload_0
    //   93: monitorexit
    //   94: aload_1
    //   95: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	96	0	this	ap
    //   0	96	1	paramSQLiteDatabase	SQLiteDatabase
    //   0	96	2	paramInt1	int
    //   0	96	3	paramInt2	int
    // Exception table:
    //   from	to	target	type
    //   2	47	91	finally
    //   50	72	91	finally
    //   76	88	91	finally
  }
  
  /* Error */
  public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: ldc_w 282
    //   5: iconst_2
    //   6: anewarray 82	java/lang/Object
    //   9: dup
    //   10: iconst_0
    //   11: iload_2
    //   12: invokestatic 88	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   15: aastore
    //   16: dup
    //   17: iconst_1
    //   18: iload_3
    //   19: invokestatic 88	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   22: aastore
    //   23: invokestatic 92	com/tencent/bugly/a/bf:d	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   26: pop
    //   27: aload_0
    //   28: aload_1
    //   29: invokevirtual 257	com/tencent/bugly/a/ap:a	(Landroid/database/sqlite/SQLiteDatabase;)Z
    //   32: ifeq +11 -> 43
    //   35: aload_0
    //   36: aload_1
    //   37: invokevirtual 259	com/tencent/bugly/a/ap:onCreate	(Landroid/database/sqlite/SQLiteDatabase;)V
    //   40: aload_0
    //   41: monitorexit
    //   42: return
    //   43: ldc_w 261
    //   46: iconst_0
    //   47: anewarray 82	java/lang/Object
    //   50: invokestatic 92	com/tencent/bugly/a/bf:d	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   53: pop
    //   54: aload_0
    //   55: getfield 40	com/tencent/bugly/a/ap:b	Landroid/content/Context;
    //   58: ldc_w 263
    //   61: invokevirtual 269	android/content/Context:getDatabasePath	(Ljava/lang/String;)Ljava/io/File;
    //   64: astore_1
    //   65: aload_1
    //   66: ifnull -26 -> 40
    //   69: aload_1
    //   70: invokevirtual 275	java/io/File:canWrite	()Z
    //   73: ifeq -33 -> 40
    //   76: aload_1
    //   77: invokevirtual 278	java/io/File:delete	()Z
    //   80: pop
    //   81: goto -41 -> 40
    //   84: astore_1
    //   85: aload_0
    //   86: monitorexit
    //   87: aload_1
    //   88: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	89	0	this	ap
    //   0	89	1	paramSQLiteDatabase	SQLiteDatabase
    //   0	89	2	paramInt1	int
    //   0	89	3	paramInt2	int
    // Exception table:
    //   from	to	target	type
    //   2	40	84	finally
    //   43	65	84	finally
    //   69	81	84	finally
  }
}
