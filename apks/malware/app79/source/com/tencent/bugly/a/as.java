package com.tencent.bugly.a;

import android.content.Context;
import android.net.Proxy;
import com.tencent.bugly.crashreport.common.info.e;
import java.util.Locale;
import java.util.Map;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;

public class as
{
  protected final int a = 10000;
  protected final int b = 30000;
  protected final int c = 2000;
  protected final int d = 2;
  protected final int e = 3;
  protected final long f = 10000L;
  protected Context g;
  
  public as(Context paramContext)
  {
    this.g = d.a(paramContext);
  }
  
  /* Error */
  public HttpResponse a(String paramString1, byte[] paramArrayOfByte, String paramString2, Map<String, String> paramMap)
  {
    // Byte code:
    //   0: aconst_null
    //   1: astore 6
    //   3: aload_1
    //   4: ifnonnull +17 -> 21
    //   7: ldc 46
    //   9: iconst_0
    //   10: anewarray 4	java/lang/Object
    //   13: invokestatic 51	com/tencent/bugly/a/bf:e	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   16: pop
    //   17: aconst_null
    //   18: astore_1
    //   19: aload_1
    //   20: areturn
    //   21: aload_2
    //   22: ifnull +49 -> 71
    //   25: new 53	org/apache/http/entity/ByteArrayEntity
    //   28: dup
    //   29: aload_2
    //   30: invokespecial 56	org/apache/http/entity/ByteArrayEntity:<init>	([B)V
    //   33: astore 5
    //   35: aload_0
    //   36: aload_3
    //   37: invokevirtual 59	com/tencent/bugly/a/as:a	(Ljava/lang/String;)Lorg/apache/http/client/HttpClient;
    //   40: astore 7
    //   42: aload 7
    //   44: ifnonnull +142 -> 186
    //   47: ldc 61
    //   49: iconst_0
    //   50: anewarray 4	java/lang/Object
    //   53: invokestatic 51	com/tencent/bugly/a/bf:e	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   56: pop
    //   57: iconst_0
    //   58: ifeq +11 -> 69
    //   61: new 63	java/lang/NullPointerException
    //   64: dup
    //   65: invokespecial 64	java/lang/NullPointerException:<init>	()V
    //   68: athrow
    //   69: aconst_null
    //   70: areturn
    //   71: new 53	org/apache/http/entity/ByteArrayEntity
    //   74: dup
    //   75: ldc 66
    //   77: invokevirtual 72	java/lang/String:getBytes	()[B
    //   80: invokespecial 56	org/apache/http/entity/ByteArrayEntity:<init>	([B)V
    //   83: astore 5
    //   85: goto -50 -> 35
    //   88: astore 4
    //   90: aconst_null
    //   91: astore_2
    //   92: aload 6
    //   94: astore_3
    //   95: aload 4
    //   97: invokestatic 75	com/tencent/bugly/a/bf:a	(Ljava/lang/Throwable;)Z
    //   100: ifne +8 -> 108
    //   103: aload 4
    //   105: invokevirtual 78	java/lang/Throwable:printStackTrace	()V
    //   108: new 80	java/lang/StringBuilder
    //   111: dup
    //   112: invokespecial 81	java/lang/StringBuilder:<init>	()V
    //   115: aload 4
    //   117: invokevirtual 85	java/lang/Object:getClass	()Ljava/lang/Class;
    //   120: invokevirtual 91	java/lang/Class:getName	()Ljava/lang/String;
    //   123: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   126: ldc 97
    //   128: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   131: aload 4
    //   133: invokevirtual 100	java/lang/Throwable:getMessage	()Ljava/lang/String;
    //   136: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   139: invokevirtual 103	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   142: astore 4
    //   144: invokestatic 108	com/tencent/bugly/crashreport/common/strategy/f:a	()Lcom/tencent/bugly/crashreport/common/strategy/f;
    //   147: new 80	java/lang/StringBuilder
    //   150: dup
    //   151: invokespecial 81	java/lang/StringBuilder:<init>	()V
    //   154: aload_1
    //   155: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   158: ldc 110
    //   160: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   163: aload 4
    //   165: invokevirtual 95	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   168: invokevirtual 103	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   171: invokevirtual 113	com/tencent/bugly/crashreport/common/strategy/f:b	(Ljava/lang/String;)V
    //   174: aload_2
    //   175: astore_1
    //   176: aload_3
    //   177: ifnull -158 -> 19
    //   180: aload_3
    //   181: invokevirtual 118	org/apache/http/client/methods/HttpPost:abort	()V
    //   184: aload_2
    //   185: areturn
    //   186: new 115	org/apache/http/client/methods/HttpPost
    //   189: dup
    //   190: aload_1
    //   191: invokespecial 120	org/apache/http/client/methods/HttpPost:<init>	(Ljava/lang/String;)V
    //   194: astore_2
    //   195: aload_2
    //   196: ldc 122
    //   198: ldc 124
    //   200: invokevirtual 128	org/apache/http/client/methods/HttpPost:setHeader	(Ljava/lang/String;Ljava/lang/String;)V
    //   203: aload_2
    //   204: aload 5
    //   206: invokevirtual 132	org/apache/http/client/methods/HttpPost:setEntity	(Lorg/apache/http/HttpEntity;)V
    //   209: aload 4
    //   211: ifnull +106 -> 317
    //   214: aload 4
    //   216: invokeinterface 138 1 0
    //   221: ifle +96 -> 317
    //   224: aload 4
    //   226: invokeinterface 142 1 0
    //   231: invokeinterface 148 1 0
    //   236: astore 4
    //   238: aload 4
    //   240: invokeinterface 154 1 0
    //   245: ifeq +42 -> 287
    //   248: aload 4
    //   250: invokeinterface 158 1 0
    //   255: checkcast 160	java/util/Map$Entry
    //   258: astore 5
    //   260: aload_2
    //   261: aload 5
    //   263: invokeinterface 163 1 0
    //   268: checkcast 68	java/lang/String
    //   271: aload 5
    //   273: invokeinterface 166 1 0
    //   278: checkcast 68	java/lang/String
    //   281: invokevirtual 128	org/apache/http/client/methods/HttpPost:setHeader	(Ljava/lang/String;Ljava/lang/String;)V
    //   284: goto -46 -> 238
    //   287: aload_2
    //   288: ldc -88
    //   290: aload_3
    //   291: ldc -86
    //   293: invokestatic 176	java/net/URLEncoder:encode	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   296: invokevirtual 128	org/apache/http/client/methods/HttpPost:setHeader	(Ljava/lang/String;Ljava/lang/String;)V
    //   299: aload_2
    //   300: ldc -78
    //   302: aload_0
    //   303: getfield 40	com/tencent/bugly/a/as:g	Landroid/content/Context;
    //   306: invokestatic 183	com/tencent/bugly/crashreport/common/info/e:e	(Landroid/content/Context;)Ljava/lang/String;
    //   309: ldc -86
    //   311: invokestatic 176	java/net/URLEncoder:encode	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   314: invokevirtual 128	org/apache/http/client/methods/HttpPost:setHeader	(Ljava/lang/String;Ljava/lang/String;)V
    //   317: new 185	org/apache/http/protocol/BasicHttpContext
    //   320: dup
    //   321: invokespecial 186	org/apache/http/protocol/BasicHttpContext:<init>	()V
    //   324: astore_3
    //   325: aload 7
    //   327: aload_2
    //   328: aload_3
    //   329: invokeinterface 192 3 0
    //   334: astore 5
    //   336: ldc -62
    //   338: iconst_1
    //   339: anewarray 4	java/lang/Object
    //   342: dup
    //   343: iconst_0
    //   344: aload_3
    //   345: ldc -60
    //   347: invokeinterface 202 2 0
    //   352: checkcast 204	org/apache/http/HttpRequest
    //   355: invokeinterface 208 1 0
    //   360: invokevirtual 209	java/lang/Object:toString	()Ljava/lang/String;
    //   363: aastore
    //   364: invokestatic 211	com/tencent/bugly/a/bf:c	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   367: pop
    //   368: aload_2
    //   369: ifnull +43 -> 412
    //   372: aload_2
    //   373: invokevirtual 118	org/apache/http/client/methods/HttpPost:abort	()V
    //   376: aload 5
    //   378: areturn
    //   379: astore_1
    //   380: aconst_null
    //   381: astore_2
    //   382: aload_2
    //   383: ifnull +7 -> 390
    //   386: aload_2
    //   387: invokevirtual 118	org/apache/http/client/methods/HttpPost:abort	()V
    //   390: aload_1
    //   391: athrow
    //   392: astore_1
    //   393: goto -11 -> 382
    //   396: astore_1
    //   397: aload_3
    //   398: astore_2
    //   399: goto -17 -> 382
    //   402: astore 4
    //   404: aload_2
    //   405: astore_3
    //   406: aload 5
    //   408: astore_2
    //   409: goto -314 -> 95
    //   412: aload 5
    //   414: areturn
    //   415: astore 4
    //   417: aconst_null
    //   418: astore 5
    //   420: aload_2
    //   421: astore_3
    //   422: aload 5
    //   424: astore_2
    //   425: goto -330 -> 95
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	428	0	this	as
    //   0	428	1	paramString1	String
    //   0	428	2	paramArrayOfByte	byte[]
    //   0	428	3	paramString2	String
    //   0	428	4	paramMap	Map<String, String>
    //   33	390	5	localObject1	Object
    //   1	92	6	localObject2	Object
    //   40	286	7	localHttpClient	HttpClient
    // Exception table:
    //   from	to	target	type
    //   25	35	88	java/lang/Throwable
    //   35	42	88	java/lang/Throwable
    //   47	57	88	java/lang/Throwable
    //   71	85	88	java/lang/Throwable
    //   186	195	88	java/lang/Throwable
    //   25	35	379	finally
    //   35	42	379	finally
    //   47	57	379	finally
    //   71	85	379	finally
    //   186	195	379	finally
    //   195	209	392	finally
    //   214	238	392	finally
    //   238	284	392	finally
    //   287	317	392	finally
    //   317	336	392	finally
    //   336	368	392	finally
    //   95	108	396	finally
    //   108	174	396	finally
    //   336	368	402	java/lang/Throwable
    //   195	209	415	java/lang/Throwable
    //   214	238	415	java/lang/Throwable
    //   238	284	415	java/lang/Throwable
    //   287	317	415	java/lang/Throwable
    //   317	336	415	java/lang/Throwable
  }
  
  protected HttpClient a(String paramString)
  {
    try
    {
      Object localObject = new BasicHttpParams();
      HttpConnectionParams.setConnectionTimeout((HttpParams)localObject, 30000);
      HttpConnectionParams.setSoTimeout((HttpParams)localObject, 10000);
      HttpConnectionParams.setSocketBufferSize((HttpParams)localObject, 2000);
      ((BasicHttpParams)localObject).setBooleanParameter("http.protocol.handle-redirects", false);
      localObject = new DefaultHttpClient((HttpParams)localObject);
      ((DefaultHttpClient)localObject).setHttpRequestRetryHandler(new at(this));
      if ((paramString != null) && (paramString.toLowerCase(Locale.US).contains("wap")))
      {
        bf.c("proxy %s", new Object[] { paramString });
        paramString = new HttpHost(Proxy.getDefaultHost(), Proxy.getDefaultPort());
        ((DefaultHttpClient)localObject).getParams().setParameter("http.route.default-proxy", paramString);
        return localObject;
      }
      ((DefaultHttpClient)localObject).getParams().removeParameter("http.route.default-proxy");
      return localObject;
    }
    catch (Throwable paramString)
    {
      if (!bf.a(paramString)) {
        paramString.printStackTrace();
      }
    }
    return null;
  }
  
  protected void a(long paramLong)
  {
    try
    {
      Thread.sleep(paramLong);
      return;
    }
    catch (InterruptedException localInterruptedException)
    {
      localInterruptedException.printStackTrace();
    }
  }
  
  protected boolean a(int paramInt)
  {
    return (paramInt == 301) || (paramInt == 302) || (paramInt == 303) || (paramInt == 307);
  }
  
  public byte[] a(String paramString, byte[] paramArrayOfByte, au paramAu, Map<String, String> paramMap)
  {
    if (paramString == null)
    {
      bf.e("rqdp{  no destUrl!}", new Object[0]);
      return null;
    }
    int j = 0;
    long l2;
    int m;
    int i;
    label79:
    int k;
    if (paramArrayOfByte == null)
    {
      l2 = 0L;
      bf.c("req %s sz:%d", new Object[] { paramString, Long.valueOf(l2) });
      bf.a("req %s sz:%d", new Object[] { paramString, Long.valueOf(l2) });
      m = 0;
      i = 0;
      k = i + 1;
      if ((i >= 3) || (j >= 2)) {
        break label583;
      }
      if (m == 0) {
        break label149;
      }
      i = 0;
    }
    Object localObject;
    for (;;)
    {
      localObject = e.e(this.g);
      if (localObject != null) {
        break label202;
      }
      bf.d("req but network not avail,so drop!", new Object[0]);
      m = i;
      i = k;
      break label79;
      l2 = paramArrayOfByte.length;
      break;
      label149:
      i = m;
      if (k > 1)
      {
        bf.c("try time " + k, new Object[0]);
        a(10000L);
        i = m;
      }
    }
    label202:
    if (paramAu != null) {
      paramAu.a(paramString, l2, (String)localObject);
    }
    HttpResponse localHttpResponse = a(paramString, paramArrayOfByte, (String)localObject, paramMap);
    label293:
    int i2;
    int i1;
    if (localHttpResponse != null)
    {
      localObject = localHttpResponse.getEntity();
      m = localHttpResponse.getStatusLine().getStatusCode();
      if (m == 200)
      {
        paramString = a(localHttpResponse);
        if (paramAu != null) {
          if (paramString != null) {
            break label293;
          }
        }
        for (l1 = 0L;; l1 = paramString.length)
        {
          paramAu.a(l1);
          return paramString;
        }
      }
      int n = i;
      i = j;
      if (a(m))
      {
        n = 1;
        paramString = localHttpResponse.getFirstHeader("Location");
        if (paramString == null)
        {
          bf.e("rqdp{  redirect code:}" + m + "rqdp{   Location is null! return}", new Object[0]);
          return null;
        }
        i = j + 1;
        k = 0;
        paramString = paramString.getValue();
        bf.c("redirect code: %d ,to:%s", new Object[] { Integer.valueOf(m), paramString });
      }
      bf.d("response code " + m, new Object[0]);
      long l1 = 0L;
      if (localObject != null)
      {
        long l3 = ((HttpEntity)localObject).getContentLength();
        l1 = l3;
        if (l3 < 0L) {
          l1 = 0L;
        }
      }
      m = n;
      i2 = i;
      i1 = k;
      localObject = paramString;
      if (paramAu != null)
      {
        paramAu.a(l1);
        localObject = paramString;
        i1 = k;
        i2 = i;
        m = n;
      }
    }
    for (;;)
    {
      i = i1;
      j = i2;
      paramString = (String)localObject;
      break;
      bf.c("not response", new Object[0]);
      m = i;
      i2 = j;
      i1 = k;
      localObject = paramString;
      if (paramAu != null)
      {
        paramAu.a(0L);
        m = i;
        i2 = j;
        i1 = k;
        localObject = paramString;
      }
    }
    label583:
    return null;
  }
  
  /* Error */
  protected byte[] a(HttpResponse paramHttpResponse)
  {
    // Byte code:
    //   0: aconst_null
    //   1: astore 5
    //   3: aload_1
    //   4: ifnonnull +8 -> 12
    //   7: aload 5
    //   9: astore_1
    //   10: aload_1
    //   11: areturn
    //   12: aload_1
    //   13: invokeinterface 346 1 0
    //   18: invokeinterface 351 1 0
    //   23: istore_2
    //   24: iload_2
    //   25: sipush 200
    //   28: if_icmpeq +32 -> 60
    //   31: ldc_w 391
    //   34: iconst_2
    //   35: anewarray 4	java/lang/Object
    //   38: dup
    //   39: iconst_0
    //   40: iload_2
    //   41: invokestatic 378	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   44: aastore
    //   45: dup
    //   46: iconst_1
    //   47: aload_1
    //   48: invokeinterface 346 1 0
    //   53: aastore
    //   54: invokestatic 322	com/tencent/bugly/a/bf:d	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   57: pop
    //   58: aconst_null
    //   59: areturn
    //   60: aload_1
    //   61: invokeinterface 342 1 0
    //   66: astore_1
    //   67: aload_1
    //   68: ifnonnull +16 -> 84
    //   71: ldc_w 393
    //   74: iconst_0
    //   75: anewarray 4	java/lang/Object
    //   78: invokestatic 51	com/tencent/bugly/a/bf:e	(Ljava/lang/String;[Ljava/lang/Object;)Z
    //   81: pop
    //   82: aconst_null
    //   83: areturn
    //   84: new 395	java/io/BufferedInputStream
    //   87: dup
    //   88: new 397	java/io/DataInputStream
    //   91: dup
    //   92: aload_1
    //   93: invokeinterface 401 1 0
    //   98: invokespecial 404	java/io/DataInputStream:<init>	(Ljava/io/InputStream;)V
    //   101: invokespecial 405	java/io/BufferedInputStream:<init>	(Ljava/io/InputStream;)V
    //   104: astore_3
    //   105: aload_3
    //   106: astore_1
    //   107: new 407	java/io/ByteArrayOutputStream
    //   110: dup
    //   111: invokespecial 408	java/io/ByteArrayOutputStream:<init>	()V
    //   114: astore 4
    //   116: aload_3
    //   117: astore_1
    //   118: aload_3
    //   119: invokevirtual 411	java/io/BufferedInputStream:read	()I
    //   122: istore_2
    //   123: iload_2
    //   124: iconst_m1
    //   125: if_icmpeq +53 -> 178
    //   128: aload_3
    //   129: astore_1
    //   130: aload 4
    //   132: iload_2
    //   133: invokevirtual 415	java/io/ByteArrayOutputStream:write	(I)V
    //   136: goto -20 -> 116
    //   139: astore 4
    //   141: aload_3
    //   142: astore_1
    //   143: aload 4
    //   145: invokestatic 75	com/tencent/bugly/a/bf:a	(Ljava/lang/Throwable;)Z
    //   148: ifne +10 -> 158
    //   151: aload_3
    //   152: astore_1
    //   153: aload 4
    //   155: invokevirtual 78	java/lang/Throwable:printStackTrace	()V
    //   158: aload 5
    //   160: astore_1
    //   161: aload_3
    //   162: ifnull -152 -> 10
    //   165: aload_3
    //   166: invokevirtual 418	java/io/BufferedInputStream:close	()V
    //   169: aconst_null
    //   170: areturn
    //   171: astore_1
    //   172: aload_1
    //   173: invokevirtual 78	java/lang/Throwable:printStackTrace	()V
    //   176: aconst_null
    //   177: areturn
    //   178: aload_3
    //   179: astore_1
    //   180: aload 4
    //   182: invokevirtual 421	java/io/ByteArrayOutputStream:flush	()V
    //   185: aload_3
    //   186: astore_1
    //   187: aload 4
    //   189: invokevirtual 424	java/io/ByteArrayOutputStream:toByteArray	()[B
    //   192: astore 4
    //   194: aload 4
    //   196: astore_1
    //   197: aload_3
    //   198: ifnull -188 -> 10
    //   201: aload_3
    //   202: invokevirtual 418	java/io/BufferedInputStream:close	()V
    //   205: aload 4
    //   207: areturn
    //   208: astore_1
    //   209: aload_1
    //   210: invokevirtual 78	java/lang/Throwable:printStackTrace	()V
    //   213: aload 4
    //   215: areturn
    //   216: astore_3
    //   217: aconst_null
    //   218: astore_1
    //   219: aload_1
    //   220: ifnull +7 -> 227
    //   223: aload_1
    //   224: invokevirtual 418	java/io/BufferedInputStream:close	()V
    //   227: aload_3
    //   228: athrow
    //   229: astore_1
    //   230: aload_1
    //   231: invokevirtual 78	java/lang/Throwable:printStackTrace	()V
    //   234: goto -7 -> 227
    //   237: astore_3
    //   238: goto -19 -> 219
    //   241: astore 4
    //   243: aconst_null
    //   244: astore_3
    //   245: goto -104 -> 141
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	248	0	this	as
    //   0	248	1	paramHttpResponse	HttpResponse
    //   23	110	2	i	int
    //   104	98	3	localBufferedInputStream	java.io.BufferedInputStream
    //   216	12	3	localObject1	Object
    //   237	1	3	localObject2	Object
    //   244	1	3	localObject3	Object
    //   114	17	4	localByteArrayOutputStream	java.io.ByteArrayOutputStream
    //   139	49	4	localThrowable1	Throwable
    //   192	22	4	arrayOfByte	byte[]
    //   241	1	4	localThrowable2	Throwable
    //   1	158	5	localObject4	Object
    // Exception table:
    //   from	to	target	type
    //   107	116	139	java/lang/Throwable
    //   118	123	139	java/lang/Throwable
    //   130	136	139	java/lang/Throwable
    //   180	185	139	java/lang/Throwable
    //   187	194	139	java/lang/Throwable
    //   165	169	171	java/lang/Throwable
    //   201	205	208	java/lang/Throwable
    //   84	105	216	finally
    //   223	227	229	java/lang/Throwable
    //   107	116	237	finally
    //   118	123	237	finally
    //   130	136	237	finally
    //   143	151	237	finally
    //   153	158	237	finally
    //   180	185	237	finally
    //   187	194	237	finally
    //   84	105	241	java/lang/Throwable
  }
}
