package com.umeng.analytics.onlineconfig;

import a.a.gh;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import com.umeng.analytics.h;
import java.util.Iterator;
import org.json.JSONObject;

public class a
{
  public static final String a = "type";
  public static final String b = "package";
  public static final String c = "channel";
  public static final String d = "idmd5";
  public static final String e = "version_code";
  public static final String f = "appkey";
  public static final String g = "sdk_version";
  private static final long k = 600000L;
  private final String h = "last_config_time";
  private final String i = "report_policy";
  private final String j = "online_config";
  private UmengOnlineConfigureListener l = null;
  private c m = null;
  
  public a() {}
  
  private void a(Context paramContext, b paramB)
  {
    if (paramB.c != -1) {
      h.a(paramContext).a(paramB.c, paramB.d);
    }
  }
  
  private void a(JSONObject paramJSONObject)
  {
    if (this.l != null) {
      this.l.onDataReceived(paramJSONObject);
    }
  }
  
  private long b(Context paramContext)
  {
    return h.a(paramContext).j().getLong("oc_mdf_told", 0L);
  }
  
  private void b(Context paramContext, b paramB)
  {
    if ((paramB.a == null) || (paramB.a.length() == 0)) {
      return;
    }
    paramContext = h.a(paramContext).j().edit();
    try
    {
      paramB = paramB.a;
      Iterator localIterator = paramB.keys();
      while (localIterator.hasNext())
      {
        String str = (String)localIterator.next();
        paramContext.putString(str, paramB.getString(str));
      }
      paramContext.commit();
    }
    catch (Exception paramContext)
    {
      gh.c("MobclickAgent", "save online config params", paramContext);
      return;
    }
    gh.a("MobclickAgent", "get online setting params: " + paramB);
  }
  
  public void a()
  {
    this.l = null;
  }
  
  public void a(Context paramContext)
  {
    if (paramContext == null) {}
    try
    {
      gh.b("MobclickAgent", "unexpected null context in updateOnlineConfig");
      return;
    }
    catch (Exception paramContext)
    {
      gh.b("MobclickAgent", "exception in updateOnlineConfig");
    }
    new Thread(new a.b(this, paramContext.getApplicationContext())).start();
    return;
  }
  
  public void a(UmengOnlineConfigureListener paramUmengOnlineConfigureListener)
  {
    this.l = paramUmengOnlineConfigureListener;
  }
  
  public void a(c paramC)
  {
    this.m = paramC;
  }
  
  public void b()
  {
    this.m = null;
  }
}
