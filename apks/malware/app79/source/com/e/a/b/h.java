package com.e.a.b;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Handler;
import android.os.HandlerThread;
import android.text.TextUtils;
import java.util.Random;

public class h
{
  static HandlerThread a = new HandlerThread("reqHandler");
  static Handler b = new i(a.getLooper());
  public static Context c;
  
  static
  {
    a.start();
  }
  
  public static int a(int paramInt1, int paramInt2)
  {
    return new Random().nextInt(paramInt2) % (paramInt2 - paramInt1) + paramInt1;
  }
  
  public static void a(Context paramContext, int paramInt1, int paramInt2)
  {
    c = paramContext;
    b.sendEmptyMessageDelayed(paramInt1, paramInt2);
  }
  
  private static void c(Context paramContext)
  {
    int i = a(1, 5);
    e.o = 2;
    e.a();
    e.a(i);
    j.c(paramContext, e.e(), e.a(paramContext, 0));
    j.c(paramContext, e.e(), e.a(paramContext, 1));
  }
  
  private static int d(Context paramContext, String paramString)
  {
    f(paramContext, paramString);
    e.o = 1;
    e.a(paramContext, paramString, b.a().c);
    e.a();
    e.b();
    e.a(paramContext);
    b.a().o = 1;
    return -1;
  }
  
  private static void d(Context paramContext)
  {
    e.o = 5;
    j.c(paramContext, e.e(), e.a(paramContext, 0));
  }
  
  private static void e(Context paramContext)
  {
    Object localObject = paramContext.getPackageName();
    String[] arrayOfString = new String[4];
    arrayOfString[0] = ("MoblieAgent_config_one" + (String)localObject);
    arrayOfString[1] = ("MoblieAgent_state_one" + (String)localObject);
    arrayOfString[2] = "MoblieAgent_sys_configone";
    arrayOfString[3] = ("MoblieAgent_upload_one" + (String)localObject);
    int i = 0;
    for (;;)
    {
      if (i >= arrayOfString.length) {
        return;
      }
      localObject = paramContext.getSharedPreferences(arrayOfString[i], 0).edit();
      ((SharedPreferences.Editor)localObject).clear();
      ((SharedPreferences.Editor)localObject).commit();
      i += 1;
    }
  }
  
  private static void e(Context paramContext, String paramString)
  {
    e.o = 3;
    if (!TextUtils.isEmpty(paramString)) {
      b.a().h = paramString;
    }
    j.c(paramContext, e.e(), e.a(paramContext, 0));
  }
  
  private static boolean f(Context paramContext, String paramString)
  {
    boolean bool2 = false;
    SharedPreferences localSharedPreferences = paramContext.getSharedPreferences("weaklogconfig", 0);
    boolean bool1 = bool2;
    if (localSharedPreferences != null)
    {
      String str = localSharedPreferences.getString("appid", "");
      bool1 = bool2;
      if (!TextUtils.isEmpty(paramString))
      {
        bool1 = bool2;
        if (!str.equals(paramString))
        {
          e(paramContext);
          bool1 = true;
          paramContext = localSharedPreferences.edit();
          paramContext.putString("appid", paramString);
          paramContext.commit();
        }
      }
    }
    return bool1;
  }
}
