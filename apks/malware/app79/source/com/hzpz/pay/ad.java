package com.hzpz.pay;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.telephony.SmsManager;
import java.util.ArrayList;

public final class ad
  extends AsyncTask
{
  private Context a = null;
  private boolean b;
  private ad.a c;
  private PzPay d = null;
  private SmsManager e = SmsManager.getDefault();
  
  public ad(PzPay paramPzPay, boolean paramBoolean, ad.a paramA)
  {
    this.a = paramPzPay.l;
    this.d = paramPzPay;
    this.b = paramBoolean;
    this.c = paramA;
  }
  
  private ad.b a(U... paramVarArgs)
  {
    ad.b localB = new ad.b(this);
    Context localContext;
    int i;
    Object localObject1;
    label232:
    int j;
    label253:
    label271:
    label375:
    label409:
    label418:
    label445:
    Object localObject2;
    label629:
    label647:
    ArrayList localArrayList;
    if ((paramVarArgs != null) && (paramVarArgs[0] != null))
    {
      U localU = paramVarArgs[0];
      for (;;)
      {
        try
        {
          aP.a("TAG", "gf-run:");
          localContext = this.a;
          try
          {
            if (localU.e != 0) {
              break label409;
            }
            paramVarArgs = PzPay.o;
            if (paramVarArgs == null) {
              break label1405;
            }
            i = paramVarArgs.length();
            localObject1 = new StringBuilder();
            if (((StringBuilder)localObject1).length() >= 16 - i)
            {
              ((StringBuilder)localObject1).append(paramVarArgs);
              paramVarArgs = ((StringBuilder)localObject1).toString();
              paramVarArgs = "?PropsId=" + localU.d + "&Mobile=&IMEI=" + PzPay.s + "&IMSI=" + PzPay.r + "&CpParam=" + paramVarArgs;
              paramVarArgs = new aD().a(localU.q + paramVarArgs, az.a.a);
              paramVarArgs = af.a(paramVarArgs);
              if ((!"0".equals(paramVarArgs.a)) && (!"18".equals(paramVarArgs.a))) {
                break label1276;
              }
              if ((PzPay.1.1.d(paramVarArgs.b)) || (PzPay.1.1.d(paramVarArgs.c))) {
                break label1419;
              }
              i = 1;
              if (i == 0) {
                break label629;
              }
              j = 0;
              localObject1 = this.e.divideMessage(paramVarArgs.b);
              i = 0;
              if (i < ((ArrayList)localObject1).size()) {
                break label445;
              }
              Thread.sleep(10000L);
              break label1414;
              if (i < 12) {
                break label647;
              }
              localB.a = -2;
              return localB;
            }
            ((StringBuilder)localObject1).append("0");
            continue;
            aP.a("TAG", "-----" + paramVarArgs.getMessage());
          }
          catch (Exception paramVarArgs)
          {
            if (!paramVarArgs.getMessage().startsWith("请求出错错误码=")) {
              break label418;
            }
          }
          throw new Exception("重试");
        }
        catch (Exception paramVarArgs)
        {
          this.b = false;
          if ("503".equals(paramVarArgs.getMessage())) {
            break label375;
          }
        }
        if (!"over".equals(paramVarArgs.getMessage())) {
          break label1352;
        }
        aP.a("TAG", "OVER:  " + paramVarArgs.getMessage());
        localB.a = -3;
        return localB;
        paramVarArgs = localU.v;
        continue;
        aP.a("TAG", "+++++" + paramVarArgs.getMessage());
        continue;
        String str = (String)((ArrayList)localObject1).get(i);
        aP.a("TAG", paramVarArgs.c + "###" + str);
        if (this.b)
        {
          aP.a("TAG", "回调########" + this.b);
          localObject2 = new Intent(this.d.e);
          ((Intent)localObject2).putExtra("isb", this.b);
          try
          {
            this.e.sendTextMessage(paramVarArgs.c, null, str, PendingIntent.getBroadcast(localContext, 0, (Intent)localObject2, 0), null);
            this.b = false;
          }
          catch (IllegalArgumentException localIllegalArgumentException1)
          {
            for (;;)
            {
              aP.c("TAG", "发送短信出错");
            }
          }
        }
        aP.a("TAG", "ms");
        try
        {
          this.e.sendTextMessage(paramVarArgs.c, null, localIllegalArgumentException1, null, null);
        }
        catch (IllegalArgumentException localIllegalArgumentException2)
        {
          aP.c("TAG", "发送短信出错");
        }
        aP.a("TAG", "nll login");
        Thread.sleep(3000L);
        j = 1;
        break label1414;
        try
        {
          localObject1 = "?PropsId=" + localU.d + "&Mobile=&IMEI=" + PzPay.s + "&IMSI=" + PzPay.r + "&ContentSid=" + paramVarArgs.d;
          localObject1 = new aD().a(localU.r + (String)localObject1, az.a.a);
          localObject1 = ae.a((String)localObject1);
          if (!"400".equals(((ae)localObject1).a)) {
            break;
          }
          i += 1;
          aP.a("TAG", "请稍候..." + i);
          if (i == 12)
          {
            aP.a("TAG", "b:" + i + " ");
            throw new Exception("over");
          }
        }
        catch (Exception paramVarArgs)
        {
          if (paramVarArgs.getMessage().startsWith("请求出错错误码=")) {
            aP.a("TAG", "-----" + paramVarArgs.getMessage());
          }
          for (;;)
          {
            throw new Exception("重试");
            aP.a("TAG", "++++" + paramVarArgs.getMessage());
          }
          Thread.sleep(10000L);
        }
      }
      if ("0".equals(((ae)localObject1).a))
      {
        aP.a("TAG", "gok");
        localArrayList = this.e.divideMessage(((ae)localObject1).b);
        i = 0;
      }
    }
    for (;;)
    {
      if (i >= localArrayList.size())
      {
        i = 12;
        break label271;
      }
      localObject2 = (String)localArrayList.get(i);
      aP.a("TAG", paramVarArgs.c + "###" + (String)localObject2);
      if (i == 0)
      {
        if ((j != 0) && (this.b))
        {
          Intent localIntent = new Intent(this.d.e);
          localIntent.putExtra("isb", this.b);
          try
          {
            this.e.sendTextMessage(((ae)localObject1).c, null, (String)localObject2, PendingIntent.getBroadcast(localContext, 0, localIntent, 0), null);
            this.b = false;
          }
          catch (IllegalArgumentException localIllegalArgumentException3)
          {
            for (;;)
            {
              aP.c("TAG", "发送短信出错");
            }
          }
        }
        else
        {
          try
          {
            this.e.sendTextMessage(((ae)localObject1).c, null, localIllegalArgumentException3, PendingIntent.getBroadcast(localContext, 0, new Intent(this.d.f), 0), PendingIntent.getBroadcast(localContext, 0, new Intent(this.d.h), 0));
          }
          catch (IllegalArgumentException localIllegalArgumentException4)
          {
            aP.c("TAG", "发送短信出错");
          }
        }
      }
      else
      {
        try
        {
          this.e.sendTextMessage(paramVarArgs.c, null, localIllegalArgumentException4, null, null);
        }
        catch (IllegalArgumentException localIllegalArgumentException5)
        {
          aP.c("TAG", "发送短信出错");
        }
        if ("503".equals(((ae)localObject1).a)) {
          throw new Exception("503");
        }
        try
        {
          i = Integer.parseInt(((ae)localObject1).a);
          if ((i < 20) && (i != 0)) {
            throw new Exception("PZ" + i);
          }
        }
        catch (Exception paramVarArgs) {}
        throw new Exception("重试");
        label1276:
        if ("503".equals(paramVarArgs.a)) {
          throw new Exception("503");
        }
        try
        {
          i = Integer.parseInt(paramVarArgs.a);
          if ((i < 20) && (i != 0)) {
            throw new Exception("PZ" + i);
          }
        }
        catch (Exception paramVarArgs) {}
        throw new Exception("重试");
        label1352:
        if ((paramVarArgs.getMessage() != null) && (paramVarArgs.getMessage().startsWith("PZ")))
        {
          localB.a = -4;
          paramVarArgs.getMessage().substring(2);
          return localB;
        }
        this.b = false;
        localB.a = -1;
        return localB;
        label1405:
        paramVarArgs = "";
        i = 0;
        break;
        label1414:
        i = 0;
        break label271;
        label1419:
        i = 0;
        break label232;
        i += 1;
        break label253;
      }
      i += 1;
    }
  }
}
