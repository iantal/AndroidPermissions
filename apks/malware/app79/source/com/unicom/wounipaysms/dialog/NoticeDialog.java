package com.unicom.wounipaysms.dialog;

import android.app.Dialog;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.view.WindowManager.LayoutParams;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;
import com.unicom.wounipaysms.bean.NoticeDialogBean;
import com.unicom.wounipaysms.tools.PhoneInfoTools;

public class NoticeDialog
  extends Dialog
{
  private NoticeDialogBean bean;
  private Context context;
  private NoticeDialog.NoticeDialogListener listener;
  private String message;
  private String title;
  
  public NoticeDialog(Context paramContext, NoticeDialogBean paramNoticeDialogBean)
  {
    super(paramContext, 16973835);
    this.context = paramContext;
    this.bean = paramNoticeDialogBean;
    initDescribe();
    init();
  }
  
  public NoticeDialog(Context paramContext, NoticeDialogBean paramNoticeDialogBean, NoticeDialog.NoticeDialogListener paramNoticeDialogListener)
  {
    super(paramContext, 16973835);
    this.context = paramContext;
    this.listener = paramNoticeDialogListener;
    this.bean = paramNoticeDialogBean;
    initDescribe();
    init();
  }
  
  private void init()
  {
    requestWindowFeature(1);
    Object localObject2 = this.context.getResources().getDisplayMetrics();
    Object localObject1 = getWindow().getAttributes();
    ((WindowManager.LayoutParams)localObject1).width = -1;
    ((WindowManager.LayoutParams)localObject1).height = -2;
    ((WindowManager.LayoutParams)localObject1).gravity = 17;
    getWindow().setAttributes((WindowManager.LayoutParams)localObject1);
    getWindow().setBackgroundDrawable(PhoneInfoTools.getNinePatchDrawable(getBitmapByResourceName("images/message_box_bg.9.png")));
    setCanceledOnTouchOutside(true);
    Object localObject3 = new LinearLayout.LayoutParams((int)(((DisplayMetrics)localObject2).widthPixels * 0.8F), -2);
    Object localObject4 = new LinearLayout.LayoutParams(-1, -2);
    localObject1 = new LinearLayout(this.context);
    ((LinearLayout)localObject1).setLayoutParams((ViewGroup.LayoutParams)localObject3);
    ((LinearLayout)localObject1).setGravity(1);
    ((LinearLayout)localObject1).setOrientation(1);
    ((LinearLayout)localObject1).setPadding(20, 20, 20, 20);
    LinearLayout localLinearLayout1 = new LinearLayout(this.context);
    localLinearLayout1.setLayoutParams((ViewGroup.LayoutParams)localObject3);
    localLinearLayout1.setPadding(0, 0, 0, 5);
    localLinearLayout1.setGravity(1);
    localLinearLayout1.setOrientation(0);
    TextView localTextView2 = new TextView(this.context);
    localTextView2.setText(this.title);
    localTextView2.setTextSize(2, 18.0F);
    localTextView2.setTextColor(-12303292);
    localLinearLayout1.addView(localTextView2);
    localObject3 = new ImageView(this.context);
    ((ImageView)localObject3).setLayoutParams((ViewGroup.LayoutParams)localObject4);
    ((ImageView)localObject3).setBackgroundDrawable(PhoneInfoTools.getDrawable(getBitmapByResourceName("images/message_line_bg.png")));
    TextView localTextView1 = new TextView(this.context);
    localTextView1.setTextSize(2, 14.0F);
    localTextView1.setLineSpacing(1.35F, 1.2F);
    localTextView1.setTextColor(-12303292);
    localTextView1.setPadding(0, 10, 0, 5);
    localTextView1.setText(this.message);
    LinearLayout localLinearLayout2 = new LinearLayout(this.context);
    localLinearLayout2.setLayoutParams((ViewGroup.LayoutParams)localObject4);
    localLinearLayout2.setPadding(0, 10, 0, 10);
    localLinearLayout2.setOrientation(0);
    localLinearLayout2.setGravity(17);
    localObject2 = new LinearLayout.LayoutParams((int)(((DisplayMetrics)localObject2).widthPixels * 0.8F), (int)(localTextView2.getTextSize() * 2.0F), 1.0F);
    ((LinearLayout.LayoutParams)localObject2).gravity = 17;
    localObject4 = new Button(this.context);
    ((Button)localObject4).setLayoutParams((ViewGroup.LayoutParams)localObject2);
    ((Button)localObject4).setText("确认");
    ((Button)localObject4).setTextSize(2, 16.0F);
    ((Button)localObject4).setPadding(10, 10, 10, 10);
    ((Button)localObject4).setBackgroundDrawable(PhoneInfoTools.getNinePatchDrawable(getBitmapByResourceName("images/message_btn_bg.9.png")));
    ((Button)localObject4).setTextColor(-1);
    ((Button)localObject4).setOnClickListener(new NoticeDialog.MyClickListener(this, 0));
    ((Button)localObject4).setOnTouchListener(new NoticeDialog.MyTouchListener(this, null));
    localLinearLayout2.addView((View)localObject4);
    ((LinearLayout)localObject1).addView(localLinearLayout1);
    ((LinearLayout)localObject1).addView((View)localObject3);
    ((LinearLayout)localObject1).addView(localTextView1);
    ((LinearLayout)localObject1).addView(localLinearLayout2);
    setContentView((View)localObject1);
  }
  
  private void initDescribe()
  {
    switch (this.bean.getPayIndex())
    {
    case 1: 
    case 2: 
    default: 
      return;
    case 0: 
      if (this.bean.getIsSuccess())
      {
        this.title = "支付成功";
        this.message = ("您已经成功购买《" + this.bean.getSubject() + "》");
        return;
      }
      this.title = "支付失败";
      this.message = ("您购买《" + this.bean.getSubject() + "》失败");
      return;
    }
    this.title = "金额查询失败";
    this.message = ("您购买的《" + this.bean.getSubject() + "》金额查询失败，请稍后再试");
  }
  
  protected Bitmap getBitmapByResourceName(String paramString)
  {
    return BitmapFactory.decodeStream(getClass().getResourceAsStream(paramString));
  }
}
