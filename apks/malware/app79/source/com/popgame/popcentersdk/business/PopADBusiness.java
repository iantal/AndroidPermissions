package com.popgame.popcentersdk.business;

import com.popgame.popcentersdk.AppInfo;
import com.popgame.popcentersdk.N0Content;
import com.popgame.popcentersdk.N0Run;
import com.popgame.popcentersdk.util.HttpClients;
import com.popgame.popcentersdk.util.XPUtils;
import com.popgame.view.ShowView;
import java.net.URLEncoder;
import org.json.JSONObject;

public class PopADBusiness
  implements Runnable
{
  public PopADBusiness() {}
  
  public static PopADBusiness getInstance()
  {
    return new PopADBusiness();
  }
  
  public static void showADView(String paramString)
  {
    PopMessageHandler.postPopMsg(7, null, paramString);
  }
  
  public void PopADBusinessInit()
  {
    try
    {
      if (!N0Content.no_ad_url.equals("stop")) {
        localObject1 = "";
      }
    }
    catch (Throwable localThrowable)
    {
      Object localObject1;
      Object localObject2;
      label107:
      localThrowable.printStackTrace();
      return;
    }
    try
    {
      localObject2 = new JSONObject();
      ((JSONObject)localObject2).put("cid", AppInfo.m_channelId);
      ((JSONObject)localObject2).put("ua", "iphone");
      ((JSONObject)localObject2).put("ver", AppInfo.m_sdkVersion);
      ((JSONObject)localObject2).put("cydia", "0");
      ((JSONObject)localObject2).put("lang", AppInfo.m_lang);
      ((JSONObject)localObject2).put("version", AppInfo.m_gameVersion);
      ((JSONObject)localObject2).put("mac", AppInfo.m_macAddress);
      ((JSONObject)localObject2).put("udid", AppInfo.m_imei);
      localObject2 = ((JSONObject)localObject2).toString();
      localObject1 = localObject2;
    }
    catch (Exception localException)
    {
      break label107;
    }
    localObject1 = "http://" + N0Content.no_ad_url + "/ios/control?xurl=" + URLEncoder.encode((String)localObject1);
    XPUtils.xpPrint("N0Run.AD-->" + (String)localObject1);
    localObject1 = HttpClients.getInstance().sendGet((String)localObject1);
    XPUtils.xpPrint("N0Run.AD res-->" + (String)localObject1);
    ShowView.initView((String)localObject1);
    parseADData((String)localObject1);
  }
  
  public void PopADBusinessRun()
  {
    new Thread(this).start();
  }
  
  public void PopADBusinessSelfRun()
  {
    try
    {
      PopADBusinessInit();
      return;
    }
    catch (Throwable localThrowable)
    {
      localThrowable.printStackTrace();
    }
  }
  
  public String getInfo(JSONObject paramJSONObject, String paramString)
  {
    try
    {
      paramJSONObject = paramJSONObject.get(paramString).toString();
      return paramJSONObject;
    }
    catch (Throwable paramJSONObject)
    {
      if (N0Run.N0RunDebug) {
        paramJSONObject.printStackTrace();
      }
    }
    return null;
  }
  
  public boolean parseADData(String paramString)
  {
    try
    {
      N0Run.GetCenterListener().CenterResult("AD####" + paramString);
      return true;
    }
    catch (Throwable paramString)
    {
      for (;;)
      {
        paramString.printStackTrace();
      }
    }
  }
  
  public void run()
  {
    try
    {
      PopADBusinessSelfRun();
      return;
    }
    catch (Throwable localThrowable)
    {
      localThrowable.printStackTrace();
    }
  }
}
