package com.atnl.adultnovel.book.db;

import android.annotation.SuppressLint;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Handler;
import java.io.File;

public class UpdateManager
{
  private static final int DOWN_OVER = 2;
  private static final int DOWN_UPDATE = 1;
  private static String saveFileName = "";
  private static final String savePath = "/sdcard/updatedemo/";
  private String appkey;
  private Thread downLoadThread;
  private Dialog downloadDialog;
  private boolean interceptFlag = false;
  private Context mContext;
  @SuppressLint({"HandlerLeak"})
  private Handler mHandler = new UpdateManager.1(this);
  private Runnable mdownApkRunnable = new UpdateManager.2(this);
  private Dialog noticeDialog;
  private int progress;
  private String updateMsg = "有最新的软件包哦，亲快下载吧~";
  
  public UpdateManager(Context paramContext)
  {
    this.mContext = paramContext;
  }
  
  private void downloadApk()
  {
    this.downLoadThread = new Thread(this.mdownApkRunnable);
    this.downLoadThread.start();
  }
  
  private void installApk()
  {
    File localFile = new File(saveFileName);
    if (!localFile.exists()) {
      return;
    }
    Intent localIntent = new Intent("android.intent.action.VIEW");
    localIntent.setDataAndType(Uri.parse("file://" + localFile.toString()), "application/vnd.android.package-archive");
    this.mContext.startActivity(localIntent);
  }
  
  private void showDownloadDialog()
  {
    downloadApk();
  }
  
  private void showNoticeDialog()
  {
    showDownloadDialog();
  }
  
  public void checkUpdateInfo(String paramString)
  {
    showNoticeDialog();
    this.appkey = paramString;
  }
}
