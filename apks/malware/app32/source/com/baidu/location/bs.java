package com.baidu.location;

import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.Message;
import android.os.Messenger;
import android.util.Log;

class bs
{
  public String a = null;
  public Messenger b = null;
  public o c = new o();
  public int d = 0;
  
  public bs(br paramBr, Message paramMessage)
  {
    this.b = paramMessage.replyTo;
    this.a = paramMessage.getData().getString("packName");
    this.c.f = paramMessage.getData().getString("prodName");
    bg.a().a(this.c.f, this.a);
    this.c.a = paramMessage.getData().getString("coorType");
    this.c.b = paramMessage.getData().getString("addrType");
    bh.f = this.c.b;
    this.c.c = paramMessage.getData().getBoolean("openGPS");
    this.c.d = paramMessage.getData().getInt("scanSpan");
    this.c.e = paramMessage.getData().getInt("timeOut");
    this.c.g = paramMessage.getData().getInt("priority");
    this.c.h = paramMessage.getData().getBoolean("location_change_notify");
    this.c.q = paramMessage.getData().getBoolean("needDirect");
    if (this.c.q)
    {
      ab.a().a(this.c.q);
      ab.a().b();
    }
    if (this.c.d > 1000)
    {
      bg.a().b();
      bo.a().b();
    }
    if (this.c.a() == q.a)
    {
      if (!ao.a().l()) {
        Log.w("baidu_location_service", "use hight accuracy mode does not use open wifi");
      }
      if (!cl.a().l()) {
        Log.w("baidu_location_service", "use hight accuracy mode does not use open gps");
      }
    }
  }
  
  private void a(int paramInt)
  {
    Message localMessage = Message.obtain(null, paramInt);
    try
    {
      if (this.b != null) {
        this.b.send(localMessage);
      }
      this.d = 0;
      return;
    }
    catch (Exception localException)
    {
      while (!(localException instanceof DeadObjectException)) {}
      this.d += 1;
    }
  }
  
  private void a(int paramInt, String paramString, BDLocation paramBDLocation)
  {
    Bundle localBundle = new Bundle();
    localBundle.putParcelable(paramString, paramBDLocation);
    paramString = Message.obtain(null, paramInt);
    paramString.setData(localBundle);
    try
    {
      if (this.b != null) {
        this.b.send(paramString);
      }
      this.d = 0;
      return;
    }
    catch (Exception paramString)
    {
      while (!(paramString instanceof DeadObjectException)) {}
      this.d += 1;
    }
  }
  
  public void a()
  {
    if (this.c.h == true)
    {
      if (bh.b) {
        a(54);
      }
    }
    else {
      return;
    }
    a(55);
  }
  
  public void a(BDLocation paramBDLocation)
  {
    a(paramBDLocation, 21);
  }
  
  public void a(BDLocation paramBDLocation, int paramInt)
  {
    paramBDLocation = new BDLocation(paramBDLocation);
    paramBDLocation.a(0, bg.a().b);
    if (paramBDLocation == null) {
      return;
    }
    if (paramInt == 21) {
      a(27, "locStr", paramBDLocation);
    }
    if ((this.c.a != null) && (!this.c.a.equals("gcj02")))
    {
      double d1 = paramBDLocation.c();
      double d2 = paramBDLocation.b();
      if ((d1 != Double.MIN_VALUE) && (d2 != Double.MIN_VALUE))
      {
        double[] arrayOfDouble = Jni.a(d1, d2, this.c.a);
        paramBDLocation.b(arrayOfDouble[0]);
        paramBDLocation.a(arrayOfDouble[1]);
      }
    }
    a(paramInt, "locStr", paramBDLocation);
  }
  
  public void b(BDLocation paramBDLocation)
  {
    if ((this.c.h != true) || (aa.a().e())) {
      return;
    }
    a(paramBDLocation);
    ak.a().a(null);
    ak.a().b(ak.a().a);
  }
}
