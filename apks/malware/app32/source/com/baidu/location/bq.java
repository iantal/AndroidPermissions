package com.baidu.location;

import android.location.Location;

class bq
  implements bb
{
  private static bq j = null;
  double a = 0.0D;
  double b = 0.0D;
  boolean c = false;
  long d = 0L;
  double e = 0.0D;
  double f = 0.0D;
  volatile int g = -1;
  int h = -1;
  
  private bq() {}
  
  public static bq a()
  {
    if (j == null) {
      j = new bq();
    }
    return j;
  }
  
  public void a(BDLocation paramBDLocation)
  {
    if (!this.c) {}
    while ((System.currentTimeMillis() - this.d > 4000L) || (paramBDLocation == null) || (paramBDLocation.e() != 161) || ((!"wf".equals(paramBDLocation.f())) && (paramBDLocation.d() >= 300.0F))) {
      return;
    }
    this.e = paramBDLocation.c();
    this.f = paramBDLocation.b();
    paramBDLocation = new float[1];
    Location.distanceBetween(this.b, this.a, this.f, this.e, paramBDLocation);
    this.g = ((int)paramBDLocation[0]);
    this.c = false;
  }
  
  public void a(boolean paramBoolean1, boolean paramBoolean2, double paramDouble1, double paramDouble2)
  {
    if (this.h < 0) {
      this.h = 0;
    }
    if (paramBoolean1) {
      this.h |= 0x1;
    }
    if (paramBoolean2)
    {
      this.h |= 0x2;
      this.a = paramDouble1;
      this.b = paramDouble2;
      this.c = true;
      this.d = System.currentTimeMillis();
    }
  }
  
  public String b()
  {
    int k = 1;
    if ((this.h < 0) && (this.g < 0)) {
      return null;
    }
    StringBuffer localStringBuffer = new StringBuffer(128);
    int i = 0;
    if (this.h >= 0)
    {
      localStringBuffer.append("&osr=");
      localStringBuffer.append(this.h);
      this.h = -1;
      i = 1;
    }
    if (this.g >= 0)
    {
      localStringBuffer.append("&oac=");
      localStringBuffer.append(this.g);
      this.g = -2;
      i = k;
    }
    for (;;)
    {
      if (i != 0) {
        return localStringBuffer.toString();
      }
      return null;
    }
  }
}
