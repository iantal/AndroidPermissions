package com.baidu.location;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.IBinder;
import android.os.Looper;
import android.os.Message;
import android.os.Messenger;
import android.os.Process;
import android.util.Log;

public class y
  extends Service
  implements bb, j
{
  static z a = null;
  public static boolean c = false;
  public static boolean d;
  public static long e;
  private static Context f = null;
  private static long k = 0L;
  Messenger b = null;
  private Looper g;
  private HandlerThread h;
  private boolean j = false;
  
  public y() {}
  
  private void a(Message paramMessage)
  {
    br.a().a(paramMessage);
    cq.a().b();
    bi.b().c();
  }
  
  public static Handler b()
  {
    return a;
  }
  
  private void b(Message paramMessage)
  {
    br.a().b(paramMessage);
  }
  
  public static long c()
  {
    return k;
  }
  
  private void c(Message paramMessage)
  {
    br.a().c(paramMessage);
  }
  
  private void d()
  {
    c = true;
    ce.a().b();
    ao.a().b();
    bg.a();
    cl.a().b();
    bz.a().b();
    af.b().c();
    bc.a().b();
    cq.a().e();
    az.a().b();
    x.a().b();
  }
  
  private void d(Message paramMessage)
  {
    if ((paramMessage != null) && (paramMessage.obj != null)) {}
  }
  
  private void e()
  {
    ce.a().c();
    af.b().d();
    aa.a().c();
    bw.e();
    br.a().b();
    if (!this.j) {
      Process.killProcess(Process.myPid());
    }
  }
  
  public double a()
  {
    return 4.199999809265137D;
  }
  
  public void a(Context paramContext)
  {
    k = System.currentTimeMillis();
    f = paramContext;
    this.h = am.a();
    this.g = this.h.getLooper();
    a = new z(this, this.g);
    this.b = new Messenger(a);
    a.sendEmptyMessage(0);
    Log.d("baidu_location_service", "baidu location service start1 ..." + Process.myPid());
  }
  
  public boolean a(Intent paramIntent)
  {
    return false;
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    paramIntent = paramIntent.getExtras();
    boolean bool = false;
    if (paramIntent != null)
    {
      bool = paramIntent.getBoolean("cache_exception");
      this.j = paramIntent.getBoolean("kill_process");
      d = paramIntent.getBoolean("debug_dev");
      e = paramIntent.getLong("interval");
    }
    if (!bool) {
      Thread.setDefaultUncaughtExceptionHandler(x.a());
    }
    return this.b.getBinder();
  }
  
  public void onDestroy()
  {
    c = false;
    ao.a().c();
    bo.a().c();
    bz.a().c();
    cl.a().e();
    az.a().c();
    a.sendEmptyMessage(1);
    Log.d("baidu_location_service", "baidu location service stop ...");
  }
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    return 1;
  }
}
