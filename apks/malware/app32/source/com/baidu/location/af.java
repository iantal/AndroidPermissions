package com.baidu.location;

import android.os.Handler;
import android.os.Message;

class af
  extends ac
  implements bb
{
  private static af j = null;
  final int a = 2000;
  final int f = 1000;
  public ad g = null;
  final Handler h = new ae(this);
  private boolean k = true;
  private as l = null;
  private String m = null;
  private BDLocation n = null;
  private BDLocation o = null;
  private ar p = null;
  private cf q = null;
  private boolean r = true;
  private volatile boolean s = false;
  private boolean t = false;
  private long u = 0L;
  private long v = 0L;
  private int w;
  
  private af() {}
  
  private boolean a(ar paramAr)
  {
    boolean bool2 = true;
    this.b = ao.a().j();
    boolean bool1;
    if (paramAr == this.b) {
      bool1 = false;
    }
    do
    {
      do
      {
        do
        {
          return bool1;
          bool1 = bool2;
        } while (this.b == null);
        bool1 = bool2;
      } while (paramAr == null);
      bool1 = bool2;
    } while (!paramAr.c(this.b));
    return false;
  }
  
  private boolean a(cf paramCf)
  {
    boolean bool2 = true;
    this.c = ce.a().e();
    boolean bool1;
    if (this.c == paramCf) {
      bool1 = false;
    }
    do
    {
      do
      {
        do
        {
          return bool1;
          bool1 = bool2;
        } while (this.c == null);
        bool1 = bool2;
      } while (paramCf == null);
      bool1 = bool2;
    } while (!paramCf.a(this.c));
    return false;
  }
  
  public static af b()
  {
    if (j == null) {
      j = new af();
    }
    return j;
  }
  
  private void c(Message paramMessage)
  {
    bh.b("baidu_location_service", "on request location ...");
    if (aa.a().e()) {}
    do
    {
      return;
      int i = br.a().e(paramMessage);
      this.w = paramMessage.arg1;
      switch (i)
      {
      default: 
        throw new IllegalArgumentException(String.format("this type %d is illegal", new Object[] { Integer.valueOf(i) }));
      }
    } while (!cl.a().j());
    e(paramMessage);
    return;
    d(paramMessage);
    return;
    h();
  }
  
  private void d(Message paramMessage)
  {
    if (cl.a().j())
    {
      e(paramMessage);
      return;
    }
    h();
  }
  
  private void e(Message paramMessage)
  {
    String str = cl.a().g();
    BDLocation localBDLocation = new BDLocation(str);
    br.a().a(localBDLocation, paramMessage);
    ak.a().a(null);
    ak.a().b(str);
  }
  
  private void h()
  {
    if (this.r) {
      i();
    }
    while (this.s) {
      return;
    }
    if (ao.a().e())
    {
      this.t = true;
      this.h.postDelayed(new ah(this, null), 2000L);
      return;
    }
    i();
  }
  
  private void i()
  {
    if (this.s) {
      return;
    }
    if ((System.currentTimeMillis() - this.u < 1000L) && (this.n != null))
    {
      br.a().a(this.n);
      j();
      return;
    }
    bh.b("baidu_location_service", "start network locating ...");
    this.s = true;
    this.k = a(this.q);
    if ((!a(this.p)) && (!this.k) && (this.n != null) && (this.w == 0))
    {
      if ((this.o != null) && (System.currentTimeMillis() - this.v > 30000L))
      {
        this.n = this.o;
        this.o = null;
      }
      br.a().a(this.n);
      j();
      return;
    }
    String str = a(null);
    if (str == null)
    {
      localObject = new BDLocation();
      ((BDLocation)localObject).a(62);
      br.a().a((BDLocation)localObject);
      j();
      return;
    }
    Object localObject = str;
    if (this.m != null)
    {
      localObject = str + this.m;
      this.m = null;
    }
    this.g.a((String)localObject);
    this.q = this.c;
    this.p = this.b;
    if (this.r == true) {
      this.r = false;
    }
    this.u = System.currentTimeMillis();
  }
  
  private void j()
  {
    this.s = false;
    k();
  }
  
  private void k()
  {
    if (this.n != null) {
      bw.a().c();
    }
  }
  
  void a()
  {
    bh.b("baidu_location_service", "on network exception");
    if ((this.k) || (this.n == null)) {
      br.a().a(bc.a().a(false), 21);
    }
    for (;;)
    {
      this.n = null;
      this.o = null;
      this.l.a();
      j();
      return;
      br.a().a(this.n, 21);
    }
  }
  
  void a(Message paramMessage)
  {
    bh.b("baidu_location_service", "on network success");
    paramMessage = (BDLocation)paramMessage.obj;
    BDLocation localBDLocation = new BDLocation(paramMessage);
    this.o = null;
    int i1 = 0;
    int i = i1;
    if (paramMessage.e() == 161)
    {
      i = i1;
      if ("cl".equals(paramMessage.f()))
      {
        i = i1;
        if (this.n != null)
        {
          i = i1;
          if (this.n.e() == 161)
          {
            i = i1;
            if ("wf".equals(this.n.f()))
            {
              i = i1;
              if (System.currentTimeMillis() - this.v < 30000L)
              {
                i = 1;
                this.o = paramMessage;
              }
            }
          }
        }
      }
    }
    if (i != 0)
    {
      br.a().a(this.n, 21);
      if (!bh.a(paramMessage)) {
        break label248;
      }
      if (i == 0) {
        this.n = paramMessage;
      }
      label158:
      i = bh.a(d, "ssid\":\"", "\"");
      if ((i == Integer.MIN_VALUE) || (this.p == null)) {
        break label263;
      }
    }
    label248:
    label263:
    for (this.m = this.p.b(i);; this.m = null)
    {
      bc.a().a(d, this.q, this.p, localBDLocation);
      bq.a().a(localBDLocation);
      j();
      return;
      br.a().a(paramMessage, 21);
      this.v = System.currentTimeMillis();
      break;
      this.n = null;
      this.l.a();
      break label158;
    }
  }
  
  public void b(Message paramMessage)
  {
    c(paramMessage);
  }
  
  void c()
  {
    this.r = true;
    this.s = false;
  }
  
  void d()
  {
    this.s = false;
    g();
  }
  
  public boolean e()
  {
    return this.k;
  }
  
  public void f()
  {
    if (this.t)
    {
      i();
      this.t = false;
    }
  }
  
  void g()
  {
    this.n = null;
    this.l.a();
  }
}
