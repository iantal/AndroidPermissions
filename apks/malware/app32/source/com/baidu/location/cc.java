package com.baidu.location;

import android.util.Log;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;

class cc
  extends Thread
{
  cc(cb paramCb) {}
  
  public void run()
  {
    this.a.e = bh.d();
    this.a.a();
    int i = this.a.f;
    cb.a(this.a);
    for (;;)
    {
      if (i > 0) {}
      try
      {
        localHttpGet = new HttpGet(this.a.e);
        localHttpGet.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
        localHttpGet.setHeader("Accept-Charset", "UTF-8;");
        Object localObject = new DefaultHttpClient();
        ((HttpClient)localObject).getParams().setParameter("http.connection.timeout", Integer.valueOf(12000));
        ((HttpClient)localObject).getParams().setParameter("http.socket.timeout", Integer.valueOf(12000));
        HttpProtocolParams.setUseExpectContinue(((HttpClient)localObject).getParams(), false);
        if (((cb.f() == 1) || (cb.f() == 4)) && ((this.a.f - i) % 2 == 0))
        {
          HttpHost localHttpHost = new HttpHost(cb.g(), cb.h(), "http");
          ((HttpClient)localObject).getParams().setParameter("http.route.default-proxy", localHttpHost);
        }
        localObject = ((HttpClient)localObject).execute(localHttpGet);
        if (((HttpResponse)localObject).getStatusLine().getStatusCode() != 200) {
          break label270;
        }
        this.a.g = ((HttpResponse)localObject).getEntity();
        this.a.a(true);
        if (i > 0) {
          break;
        }
        cb.k += 1;
        this.a.g = null;
        this.a.a(false);
      }
      catch (Exception localException)
      {
        for (;;)
        {
          HttpGet localHttpGet;
          Log.d("baidu_location_service", "NetworkCommunicationException!");
          continue;
          cb.k = 0;
        }
      }
      cb.a(this.a, false);
      return;
      label270:
      localHttpGet.abort();
      i -= 1;
    }
  }
}
