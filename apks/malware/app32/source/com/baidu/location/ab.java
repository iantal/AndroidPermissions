package com.baidu.location;

import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

class ab
  implements SensorEventListener, bb
{
  private static ab e;
  private static float f;
  float[] a;
  float[] b;
  float[] c = new float[9];
  SensorManager d;
  private boolean g;
  
  ab() {}
  
  public static ab a()
  {
    if (e == null) {
      e = new ab();
    }
    return e;
  }
  
  public void a(boolean paramBoolean)
  {
    this.g = paramBoolean;
  }
  
  public void b()
  {
    try
    {
      if (this.d == null) {
        this.d = ((SensorManager)f.c().getSystemService("sensor"));
      }
      this.d.registerListener(this, this.d.getDefaultSensor(1), 3);
      this.d.registerListener(this, this.d.getDefaultSensor(2), 3);
      return;
    }
    finally {}
  }
  
  public void c()
  {
    try
    {
      if (this.d != null)
      {
        this.d.unregisterListener(this);
        this.d = null;
      }
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public boolean d()
  {
    return this.g;
  }
  
  public float e()
  {
    return f;
  }
  
  public void onAccuracyChanged(Sensor paramSensor, int paramInt) {}
  
  public void onSensorChanged(SensorEvent paramSensorEvent)
  {
    switch (paramSensorEvent.sensor.getType())
    {
    default: 
      if ((this.a != null) && (this.b != null))
      {
        paramSensorEvent = new float[9];
        if (SensorManager.getRotationMatrix(paramSensorEvent, null, this.a, this.b))
        {
          float[] arrayOfFloat = new float[3];
          SensorManager.getOrientation(paramSensorEvent, arrayOfFloat);
          f = (float)Math.toDegrees(arrayOfFloat[0]);
          if (f < 0.0F) {
            break label131;
          }
        }
      }
      break;
    }
    label131:
    for (double d1 = f;; d1 = f + 360.0F)
    {
      f = (float)Math.floor(d1);
      return;
      this.a = paramSensorEvent.values;
      break;
      this.b = paramSensorEvent.values;
      break;
    }
  }
}
