package com.baidu.location;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.ScanResult;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.text.TextUtils;
import java.lang.reflect.Method;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class ao
  implements bb
{
  private static ao d = null;
  private final long a = 3000L;
  private final long b = 3000L;
  private final long c = 5000L;
  private WifiManager e = null;
  private aq f = null;
  private ar g = null;
  private long h = 0L;
  private long j = 0L;
  private boolean k = false;
  private Object l = null;
  private Method m = null;
  private boolean n = true;
  private long o = 0L;
  
  private ao() {}
  
  public static ao a()
  {
    if (d == null) {
      d = new ao();
    }
    return d;
  }
  
  public static boolean a(ar paramAr1, ar paramAr2, float paramFloat)
  {
    if ((paramAr1 == null) || (paramAr2 == null)) {
      return false;
    }
    paramAr1 = paramAr1.a;
    paramAr2 = paramAr2.a;
    if (paramAr1 == paramAr2) {
      return true;
    }
    if ((paramAr1 == null) || (paramAr2 == null)) {
      return false;
    }
    int i3 = paramAr1.size();
    int i4 = paramAr2.size();
    float f1 = i3 + i4;
    if ((i3 == 0) && (i4 == 0)) {
      return true;
    }
    if ((i3 == 0) || (i4 == 0)) {
      return false;
    }
    int i1 = 0;
    int i = 0;
    String str;
    if (i1 < i3)
    {
      str = ((ScanResult)paramAr1.get(i1)).BSSID;
      if (str != null) {}
    }
    for (;;)
    {
      i1 += 1;
      break;
      int i2 = 0;
      for (;;)
      {
        if (i2 < i4)
        {
          if (str.equals(((ScanResult)paramAr2.get(i2)).BSSID))
          {
            i += 1;
            break;
          }
          i2 += 1;
          continue;
          return i * 2 >= f1 * paramFloat;
        }
      }
    }
  }
  
  private boolean a(String paramString)
  {
    if (TextUtils.isEmpty(paramString)) {
      return false;
    }
    return Pattern.compile("wpa|wep", 2).matcher(paramString).find();
  }
  
  public static boolean g()
  {
    try
    {
      NetworkInfo localNetworkInfo = ((ConnectivityManager)f.c().getSystemService("connectivity")).getActiveNetworkInfo();
      if (localNetworkInfo != null)
      {
        int i = localNetworkInfo.getType();
        if (i == 1) {
          return true;
        }
      }
      return false;
    }
    catch (Exception localException) {}
    return false;
  }
  
  private void n()
  {
    if (this.e == null) {}
    for (;;)
    {
      return;
      try
      {
        Object localObject = this.e.getScanResults();
        localObject = new ar(this, (List)localObject, this.h);
        this.h = 0L;
        if ((this.g == null) || (!((ar)localObject).a(this.g)))
        {
          this.g = ((ar)localObject);
          return;
        }
      }
      catch (Exception localException) {}
    }
  }
  
  /* Error */
  public void b()
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 58	com/baidu/location/ao:k	Z
    //   6: istore_1
    //   7: iload_1
    //   8: iconst_1
    //   9: if_icmpne +6 -> 15
    //   12: aload_0
    //   13: monitorexit
    //   14: return
    //   15: getstatic 171	com/baidu/location/y:c	Z
    //   18: ifeq -6 -> 12
    //   21: aload_0
    //   22: invokestatic 136	com/baidu/location/f:c	()Landroid/content/Context;
    //   25: ldc -83
    //   27: invokevirtual 144	android/content/Context:getSystemService	(Ljava/lang/String;)Ljava/lang/Object;
    //   30: checkcast 157	android/net/wifi/WifiManager
    //   33: putfield 48	com/baidu/location/ao:e	Landroid/net/wifi/WifiManager;
    //   36: aload_0
    //   37: new 175	com/baidu/location/aq
    //   40: dup
    //   41: aload_0
    //   42: aconst_null
    //   43: invokespecial 178	com/baidu/location/aq:<init>	(Lcom/baidu/location/ao;Lcom/baidu/location/ap;)V
    //   46: putfield 50	com/baidu/location/ao:f	Lcom/baidu/location/aq;
    //   49: invokestatic 136	com/baidu/location/f:c	()Landroid/content/Context;
    //   52: aload_0
    //   53: getfield 50	com/baidu/location/ao:f	Lcom/baidu/location/aq;
    //   56: new 180	android/content/IntentFilter
    //   59: dup
    //   60: ldc -74
    //   62: invokespecial 185	android/content/IntentFilter:<init>	(Ljava/lang/String;)V
    //   65: invokevirtual 189	android/content/Context:registerReceiver	(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;)Landroid/content/Intent;
    //   68: pop
    //   69: aload_0
    //   70: iconst_1
    //   71: putfield 58	com/baidu/location/ao:k	Z
    //   74: ldc -65
    //   76: invokestatic 197	java/lang/Class:forName	(Ljava/lang/String;)Ljava/lang/Class;
    //   79: ldc -57
    //   81: invokevirtual 203	java/lang/Class:getDeclaredField	(Ljava/lang/String;)Ljava/lang/reflect/Field;
    //   84: astore_2
    //   85: aload_2
    //   86: ifnull -74 -> 12
    //   89: aload_2
    //   90: iconst_1
    //   91: invokevirtual 209	java/lang/reflect/Field:setAccessible	(Z)V
    //   94: aload_0
    //   95: aload_2
    //   96: aload_0
    //   97: getfield 48	com/baidu/location/ao:e	Landroid/net/wifi/WifiManager;
    //   100: invokevirtual 212	java/lang/reflect/Field:get	(Ljava/lang/Object;)Ljava/lang/Object;
    //   103: putfield 60	com/baidu/location/ao:l	Ljava/lang/Object;
    //   106: aload_0
    //   107: aload_0
    //   108: getfield 60	com/baidu/location/ao:l	Ljava/lang/Object;
    //   111: invokevirtual 216	java/lang/Object:getClass	()Ljava/lang/Class;
    //   114: ldc -38
    //   116: iconst_1
    //   117: anewarray 193	java/lang/Class
    //   120: dup
    //   121: iconst_0
    //   122: getstatic 224	java/lang/Boolean:TYPE	Ljava/lang/Class;
    //   125: aastore
    //   126: invokevirtual 228	java/lang/Class:getDeclaredMethod	(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
    //   129: putfield 62	com/baidu/location/ao:m	Ljava/lang/reflect/Method;
    //   132: aload_0
    //   133: getfield 62	com/baidu/location/ao:m	Ljava/lang/reflect/Method;
    //   136: ifnull -124 -> 12
    //   139: aload_0
    //   140: getfield 62	com/baidu/location/ao:m	Ljava/lang/reflect/Method;
    //   143: iconst_1
    //   144: invokevirtual 231	java/lang/reflect/Method:setAccessible	(Z)V
    //   147: goto -135 -> 12
    //   150: astore_2
    //   151: goto -139 -> 12
    //   154: astore_2
    //   155: aload_0
    //   156: monitorexit
    //   157: aload_2
    //   158: athrow
    //   159: astore_2
    //   160: goto -91 -> 69
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	163	0	this	ao
    //   6	4	1	bool	boolean
    //   84	12	2	localField	java.lang.reflect.Field
    //   150	1	2	localException1	Exception
    //   154	4	2	localObject	Object
    //   159	1	2	localException2	Exception
    // Exception table:
    //   from	to	target	type
    //   74	85	150	java/lang/Exception
    //   89	147	150	java/lang/Exception
    //   2	7	154	finally
    //   15	49	154	finally
    //   49	69	154	finally
    //   69	74	154	finally
    //   74	85	154	finally
    //   89	147	154	finally
    //   49	69	159	java/lang/Exception
  }
  
  /* Error */
  public void c()
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 58	com/baidu/location/ao:k	Z
    //   6: istore_1
    //   7: iload_1
    //   8: ifne +6 -> 14
    //   11: aload_0
    //   12: monitorexit
    //   13: return
    //   14: invokestatic 136	com/baidu/location/f:c	()Landroid/content/Context;
    //   17: aload_0
    //   18: getfield 50	com/baidu/location/ao:f	Lcom/baidu/location/aq;
    //   21: invokevirtual 235	android/content/Context:unregisterReceiver	(Landroid/content/BroadcastReceiver;)V
    //   24: aload_0
    //   25: lconst_0
    //   26: putfield 66	com/baidu/location/ao:o	J
    //   29: aload_0
    //   30: aconst_null
    //   31: putfield 50	com/baidu/location/ao:f	Lcom/baidu/location/aq;
    //   34: aload_0
    //   35: aconst_null
    //   36: putfield 48	com/baidu/location/ao:e	Landroid/net/wifi/WifiManager;
    //   39: aload_0
    //   40: iconst_0
    //   41: putfield 58	com/baidu/location/ao:k	Z
    //   44: goto -33 -> 11
    //   47: astore_2
    //   48: aload_0
    //   49: monitorexit
    //   50: aload_2
    //   51: athrow
    //   52: astore_2
    //   53: goto -24 -> 29
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	56	0	this	ao
    //   6	2	1	bool	boolean
    //   47	4	2	localObject	Object
    //   52	1	2	localException	Exception
    // Exception table:
    //   from	to	target	type
    //   2	7	47	finally
    //   14	29	47	finally
    //   29	44	47	finally
    //   14	29	52	java/lang/Exception
  }
  
  public boolean d()
  {
    long l1 = System.currentTimeMillis();
    if (l1 - this.j <= 10000L) {
      return false;
    }
    this.j = l1;
    return e();
  }
  
  public boolean e()
  {
    if (this.e == null) {}
    while (System.currentTimeMillis() - this.h <= 3000L) {
      return false;
    }
    return f();
  }
  
  public boolean f()
  {
    try
    {
      if (this.e.isWifiEnabled())
      {
        if (this.m != null)
        {
          Object localObject = this.l;
          if (localObject == null) {}
        }
        for (;;)
        {
          try
          {
            this.m.invoke(this.l, new Object[] { Boolean.valueOf(this.n) });
            this.h = System.currentTimeMillis();
            return true;
          }
          catch (Exception localException1)
          {
            this.e.startScan();
            continue;
          }
          this.e.startScan();
        }
      }
      this.h = 0L;
      return false;
    }
    catch (Exception localException2) {}
    return false;
  }
  
  public String h()
  {
    Object localObject1 = this.e.getConnectionInfo();
    if (localObject1 == null) {
      return null;
    }
    for (;;)
    {
      try
      {
        localObject1 = ((WifiInfo)localObject1).getBSSID();
        if (localObject1 != null)
        {
          localObject1 = ((String)localObject1).replace(":", "");
          if ("000000000000".equals(localObject1)) {
            break;
          }
          boolean bool = "".equals(localObject1);
          if (bool) {
            break;
          }
          return localObject1;
        }
      }
      catch (Exception localException)
      {
        return null;
      }
      Object localObject2 = null;
    }
  }
  
  public ar i()
  {
    if ((this.g == null) || (!this.g.h())) {
      return k();
    }
    return this.g;
  }
  
  public ar j()
  {
    if ((this.g == null) || (!this.g.i())) {
      return k();
    }
    return this.g;
  }
  
  public ar k()
  {
    if (this.e != null) {
      try
      {
        ar localAr = new ar(this, this.e.getScanResults(), 0L);
        return localAr;
      }
      catch (Exception localException) {}
    }
    return new ar(this, null, 0L);
  }
  
  public boolean l()
  {
    return (this.e.isWifiEnabled()) && (3 == this.e.getWifiState());
  }
  
  public String m()
  {
    String str = null;
    try
    {
      WifiInfo localWifiInfo = this.e.getConnectionInfo();
      if (localWifiInfo != null) {
        str = localWifiInfo.getMacAddress();
      }
      return str;
    }
    catch (Exception localException) {}
    return null;
  }
}
