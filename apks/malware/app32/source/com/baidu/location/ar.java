package com.baidu.location;

import android.net.wifi.ScanResult;
import java.util.List;
import java.util.Locale;
import java.util.Random;

public class ar
{
  public List a = null;
  private long c = 0L;
  private long d = 0L;
  private boolean e = false;
  private boolean f;
  
  public ar(ao paramAo, List paramList, long paramLong)
  {
    this.c = paramLong;
    this.a = paramList;
    this.d = System.currentTimeMillis();
    k();
    bh.b("baidu_location_service", a());
  }
  
  private void k()
  {
    if (b() < 1) {
      return;
    }
    int j = this.a.size() - 1;
    int i = 1;
    label23:
    int k;
    if ((j >= 1) && (i != 0))
    {
      k = 0;
      i = 0;
      label36:
      if (k < j)
      {
        if (((ScanResult)this.a.get(k)).level >= ((ScanResult)this.a.get(k + 1)).level) {
          break label147;
        }
        ScanResult localScanResult = (ScanResult)this.a.get(k + 1);
        this.a.set(k + 1, this.a.get(k));
        this.a.set(k, localScanResult);
        i = 1;
      }
    }
    label147:
    for (;;)
    {
      k += 1;
      break label36;
      j -= 1;
      break label23;
      break;
    }
  }
  
  public String a()
  {
    StringBuilder localStringBuilder = new StringBuilder();
    localStringBuilder.append("wifi=");
    if (this.a == null) {
      return localStringBuilder.toString();
    }
    int i = 0;
    while (i < this.a.size())
    {
      int j = ((ScanResult)this.a.get(i)).level;
      localStringBuilder.append(((ScanResult)this.a.get(i)).BSSID.replace(":", ""));
      localStringBuilder.append(String.format(Locale.CHINA, ",%d;", new Object[] { Integer.valueOf(j) }));
      i += 1;
    }
    return localStringBuilder.toString();
  }
  
  public String a(int paramInt)
  {
    if (b() < 1) {
      return null;
    }
    int m = 0;
    Random localRandom = new Random();
    StringBuffer localStringBuffer = new StringBuffer(512);
    String str1 = this.b.h();
    int k = 0;
    int i = 0;
    int n = this.a.size();
    int j = 1;
    if (n > paramInt) {
      n = paramInt;
    }
    for (;;)
    {
      int i1 = 0;
      paramInt = m;
      label146:
      int i2;
      for (;;)
      {
        if (i1 < n) {
          if (((ScanResult)this.a.get(i1)).level == 0)
          {
            m = j;
            j = paramInt;
            paramInt = i;
            i = m;
            i1 += 1;
            m = paramInt;
            paramInt = j;
            j = i;
            i = m;
          }
          else if (j != 0)
          {
            j = 0;
            localStringBuffer.append("&wf=");
            String str2 = ((ScanResult)this.a.get(i1)).BSSID.replace(":", "");
            localStringBuffer.append(str2);
            i2 = ((ScanResult)this.a.get(i1)).level;
            m = i2;
            if (i2 < 0) {
              m = -i2;
            }
            localStringBuffer.append(String.format(Locale.CHINA, ";%d;", new Object[] { Integer.valueOf(m) }));
            m = k + 1;
            k = i;
            if (str1 != null)
            {
              k = i;
              if (str1.equals(str2))
              {
                this.f = ao.a(this.b, ((ScanResult)this.a.get(i1)).capabilities);
                k = m;
              }
            }
            if (paramInt != 0) {
              break label412;
            }
          }
        }
      }
      label412:
      label642:
      label649:
      for (;;)
      {
        try
        {
          if ((localRandom.nextInt(10) != 2) || (((ScanResult)this.a.get(i1)).SSID == null) || (((ScanResult)this.a.get(i1)).SSID.length() >= 30)) {
            break label649;
          }
          localStringBuffer.append(((ScanResult)this.a.get(i1)).SSID);
          paramInt = 1;
          i2 = paramInt;
          i = j;
          paramInt = k;
          k = m;
          j = i2;
        }
        catch (Exception localException)
        {
          i = j;
          j = paramInt;
          paramInt = k;
          k = m;
        }
        localStringBuffer.append("|");
        break label146;
        if ((paramInt == 1) && (localRandom.nextInt(20) == 1) && (((ScanResult)this.a.get(i1)).SSID != null) && (((ScanResult)this.a.get(i1)).SSID.length() < 30))
        {
          localStringBuffer.append(((ScanResult)this.a.get(i1)).SSID);
          paramInt = 2;
          continue;
          break;
          if (j == 0)
          {
            localStringBuffer.append("&wf_n=" + i);
            localStringBuffer.append("&wf_st=");
            localStringBuffer.append(this.c);
            localStringBuffer.append("&wf_et=");
            localStringBuffer.append(this.d);
            localStringBuffer.append("&wf_vt=");
            localStringBuffer.append(ao.b(this.b));
            if (i > 0)
            {
              this.e = true;
              localStringBuffer.append("&wf_en=");
              if (!this.f) {
                break label642;
              }
            }
            for (paramInt = 1;; paramInt = 0)
            {
              localStringBuffer.append(paramInt);
              return localStringBuffer.toString();
            }
          }
          return null;
        }
      }
    }
  }
  
  public boolean a(ar paramAr)
  {
    if ((this.a != null) && (paramAr != null) && (paramAr.a != null))
    {
      int i;
      int j;
      if (this.a.size() < paramAr.a.size())
      {
        i = this.a.size();
        j = 0;
      }
      for (;;)
      {
        if (j >= i) {
          break label116;
        }
        if (!((ScanResult)this.a.get(j)).BSSID.equals(((ScanResult)paramAr.a.get(j)).BSSID))
        {
          return false;
          i = paramAr.a.size();
          break;
        }
        j += 1;
      }
      label116:
      return true;
    }
    return false;
  }
  
  public int b()
  {
    if (this.a == null) {
      return 0;
    }
    return this.a.size();
  }
  
  public String b(int paramInt)
  {
    if ((paramInt == 0) || (b() < 1)) {
      return null;
    }
    StringBuffer localStringBuffer = new StringBuffer(256);
    if (this.a.size() > bh.H) {
      i = bh.H;
    }
    int k = 0;
    int i = 1;
    int j = 0;
    if (j < bh.H)
    {
      int m = k;
      if ((i & paramInt) != 0)
      {
        if (k != 0) {
          break label155;
        }
        localStringBuffer.append("&ssid=");
      }
      for (;;)
      {
        localStringBuffer.append(((ScanResult)this.a.get(j)).BSSID);
        localStringBuffer.append(";");
        localStringBuffer.append(((ScanResult)this.a.get(j)).SSID);
        m = k + 1;
        i <<= 1;
        j += 1;
        k = m;
        break;
        label155:
        localStringBuffer.append("|");
      }
    }
    return localStringBuffer.toString();
  }
  
  public boolean b(ar paramAr)
  {
    if ((this.a != null) && (paramAr != null) && (paramAr.a != null))
    {
      int i;
      int j;
      if (this.a.size() < paramAr.a.size())
      {
        i = this.a.size();
        j = 0;
      }
      for (;;)
      {
        if (j >= i) {
          break label167;
        }
        String str1 = ((ScanResult)this.a.get(j)).BSSID;
        int k = ((ScanResult)this.a.get(j)).level;
        String str2 = ((ScanResult)paramAr.a.get(j)).BSSID;
        int m = ((ScanResult)paramAr.a.get(j)).level;
        if ((!str1.equals(str2)) || (k != m))
        {
          return false;
          i = paramAr.a.size();
          break;
        }
        j += 1;
      }
      label167:
      return true;
    }
    return false;
  }
  
  public String c()
  {
    try
    {
      String str = a(bh.H);
      return str;
    }
    catch (Exception localException) {}
    return null;
  }
  
  public boolean c(ar paramAr)
  {
    return ao.a(paramAr, this, bh.K);
  }
  
  public String d()
  {
    try
    {
      String str = a(15);
      return str;
    }
    catch (Exception localException) {}
    return null;
  }
  
  public String e()
  {
    StringBuffer localStringBuffer = new StringBuffer(512);
    localStringBuffer.append("wifi info:");
    if (b() < 1) {
      return localStringBuffer.toString();
    }
    int i = this.a.size();
    int j = i;
    if (i > 10) {
      j = 10;
    }
    int k = 0;
    i = 1;
    if (k < j)
    {
      if (((ScanResult)this.a.get(k)).level == 0) {}
      for (;;)
      {
        k += 1;
        break;
        if (i != 0)
        {
          localStringBuffer.append("wifi=");
          localStringBuffer.append(((ScanResult)this.a.get(k)).BSSID.replace(":", ""));
          i = ((ScanResult)this.a.get(k)).level;
          localStringBuffer.append(String.format(Locale.CHINA, ";%d;", new Object[] { Integer.valueOf(i) }));
          i = 0;
        }
        else
        {
          localStringBuffer.append(";");
          localStringBuffer.append(((ScanResult)this.a.get(k)).BSSID.replace(":", ""));
          int m = ((ScanResult)this.a.get(k)).level;
          localStringBuffer.append(String.format(Locale.CHINA, ",%d;", new Object[] { Integer.valueOf(m) }));
        }
      }
    }
    return localStringBuffer.toString();
  }
  
  public int f()
  {
    int k = 0;
    int i = 0;
    for (;;)
    {
      int j = k;
      if (i < b())
      {
        j = -((ScanResult)this.a.get(i)).level;
        if (j <= 0) {}
      }
      else
      {
        return j;
      }
      i += 1;
    }
  }
  
  public boolean g()
  {
    return this.e;
  }
  
  public boolean h()
  {
    return System.currentTimeMillis() - this.d < 3000L;
  }
  
  public boolean i()
  {
    return System.currentTimeMillis() - this.d < 5000L;
  }
  
  public boolean j()
  {
    return System.currentTimeMillis() - this.c < 3000L;
  }
}
