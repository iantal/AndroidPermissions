package com.payeco.android.plugin.js;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.Build.VERSION;
import android.util.Log;
import android.widget.Toast;
import com.payeco.android.plugin.b.b;
import com.payeco.android.plugin.b.f;
import com.payeco.android.plugin.b.h;
import com.payeco.android.plugin.c.c;
import com.payeco.android.plugin.c.d;
import com.payeco.android.plugin.d.aa;
import org.json.JSONObject;

public abstract class JsFunction
{
  protected Context context;
  
  public JsFunction(Context paramContext)
  {
    this.context = paramContext;
  }
  
  public String closeProgress()
  {
    JSONObject localJSONObject = new JSONObject();
    aa.a();
    localJSONObject.put("errCode", 0);
    localJSONObject.put("errMsg", "");
    return localJSONObject.toString();
  }
  
  public String data3DesEnc(String paramString)
  {
    JSONObject localJSONObject = new JSONObject();
    Object localObject = new JSONObject(paramString);
    paramString = ((JSONObject)localObject).getString("pw");
    int i = ((JSONObject)localObject).getInt("encFlag");
    localObject = c.a(com.payeco.android.plugin.b.g.i());
    if (i == 1) {
      localJSONObject.put("data", c.a(com.payeco.android.plugin.a.g.a((byte[])localObject, paramString.getBytes("utf-8"))));
    }
    if (i == 2)
    {
      paramString = com.payeco.android.plugin.a.g.b((byte[])localObject, c.a(paramString));
      if (paramString == null)
      {
        localJSONObject.put("errCode", 1);
        localJSONObject.put("errMsg", "解密失败");
        return localJSONObject.toString();
      }
      localJSONObject.put("data", new String(paramString, "utf-8"));
    }
    localJSONObject.put("errCode", 0);
    localJSONObject.put("errMsg", "");
    return localJSONObject.toString();
  }
  
  public String exitPlugin()
  {
    h.a((Activity)this.context);
    return getResultJson(0, "").toString();
  }
  
  public String getConfig()
  {
    return com.payeco.android.plugin.b.g.c().toString();
  }
  
  public String getDevInfo()
  {
    JSONObject localJSONObject = getResultJson(0, "获取成功！");
    localJSONObject.put("Mac", com.payeco.android.plugin.c.g.a(this.context));
    localJSONObject.put("MobileOS", "android");
    localJSONObject.put("OsVer", Build.VERSION.RELEASE);
    localJSONObject.put("Factory", Build.MANUFACTURER);
    localJSONObject.put("Model", Build.MODEL);
    localJSONObject.put("Imsi", com.payeco.android.plugin.c.g.e(this.context));
    localJSONObject.put("Imei", com.payeco.android.plugin.c.g.d(this.context));
    localJSONObject.put("IsRoot", com.payeco.android.plugin.c.g.a());
    return localJSONObject.toString();
  }
  
  public String getKey()
  {
    return com.payeco.android.plugin.b.g.d().toString();
  }
  
  public String getLbsInfo()
  {
    int j = 0;
    JSONObject localJSONObject = getResultJson(0, "获取成功！");
    Object localObject1 = this.context.getPackageManager();
    int i;
    Object localObject2;
    String str;
    if (((PackageManager)localObject1).checkPermission("android.permission.ACCESS_COARSE_LOCATION", this.context.getPackageName()) == 0)
    {
      i = 1;
      if (((PackageManager)localObject1).checkPermission("android.permission.ACCESS_FINE_LOCATION", this.context.getPackageName()) == 0) {
        j = 1;
      }
      if ((i == 0) || (j == 0)) {
        break label326;
      }
      localObject2 = b.a();
      localObject1 = localObject2;
      if (localObject2 == null)
      {
        localObject1 = this.context;
        localObject2 = d.b((Context)localObject1, h.d(), "payecoLat");
        str = d.b((Context)localObject1, h.d(), "payecoLon");
        if ((localObject2 != null) && (str != null)) {
          break label149;
        }
        localObject1 = null;
      }
      label115:
      if (localObject1 != null) {
        break label213;
      }
      localJSONObject.put("errCode", 1);
      localJSONObject.put("errMsg", "没有获取到LBS信息");
    }
    for (;;)
    {
      return localJSONObject.toString();
      i = 0;
      break;
      label149:
      localObject1 = new f();
      ((f)localObject1).a = Double.parseDouble((String)localObject2);
      ((f)localObject1).b = Double.parseDouble(str);
      b.a(h.c(((f)localObject1).b + "," + ((f)localObject1).a));
      break label115;
      try
      {
        label213:
        localJSONObject.put("LbsLat", ((f)localObject1).a);
        localJSONObject.put("LbsLon", ((f)localObject1).b);
        localJSONObject.put("lbs", h.c(((f)localObject1).b + "," + ((f)localObject1).a));
      }
      catch (Exception localException)
      {
        Log.e("payeco", "没有获取到LBS信息", localException);
        localJSONObject.put("errCode", 1);
        localJSONObject.put("errMsg", "没有获取到LBS信息");
        new b(this.context).b();
      }
    }
    label326:
    Log.d("hx", "Js-->木有这个权限");
    localJSONObject.put("errCode", 1);
    localJSONObject.put("errMsg", "没有获取到LBS信息");
    return localJSONObject.toString();
  }
  
  public String getPluginAppVerInfo()
  {
    JSONObject localJSONObject = getResultJson(0, "获取成功！");
    localJSONObject.put("pluginAppVerCode", 10);
    localJSONObject.put("pluginAppVer", "2.1.1");
    localJSONObject.put("MobileOS", "android");
    return localJSONObject.toString();
  }
  
  protected JSONObject getResultJson(int paramInt, String paramString)
  {
    JSONObject localJSONObject = new JSONObject();
    localJSONObject.put("errCode", paramInt);
    localJSONObject.put("errMsg", paramString);
    return localJSONObject;
  }
  
  public String getSessionId()
  {
    JSONObject localJSONObject = getResultJson(0, "获取成功！");
    localJSONObject.put("sessionId", com.payeco.android.plugin.b.g.b());
    return localJSONObject.toString();
  }
  
  public abstract String goBack();
  
  public String gotoLbsSetting()
  {
    JSONObject localJSONObject = getResultJson(0, "获取成功！");
    Intent localIntent = new Intent("android.settings.LOCATION_SOURCE_SETTINGS");
    this.context.startActivity(localIntent);
    return localJSONObject.toString();
  }
  
  public abstract String notifyPayResult(String paramString);
  
  public abstract String repay();
  
  public String setConfig(String paramString)
  {
    JSONObject localJSONObject1 = new JSONObject();
    Object localObject = new JSONObject(paramString);
    paramString = ((JSONObject)localObject).getString("key");
    localObject = ((JSONObject)localObject).getString("value");
    JSONObject localJSONObject2 = com.payeco.android.plugin.b.g.c();
    localJSONObject2.put(paramString, localObject);
    h.a(localJSONObject2);
    localJSONObject1.put("errCode", 0);
    localJSONObject1.put("errMsg", "");
    return localJSONObject1.toString();
  }
  
  public String setKey(String paramString)
  {
    JSONObject localJSONObject1 = new JSONObject();
    Object localObject = new JSONObject(paramString);
    paramString = ((JSONObject)localObject).getString("key");
    localObject = ((JSONObject)localObject).getString("value");
    JSONObject localJSONObject2 = com.payeco.android.plugin.b.g.d();
    localJSONObject2.put(paramString, localObject);
    h.a(localJSONObject2, this.context);
    localJSONObject1.put("errCode", 0);
    localJSONObject1.put("errMsg", "");
    return localJSONObject1.toString();
  }
  
  public String showProgress(String paramString)
  {
    JSONObject localJSONObject = new JSONObject();
    paramString = new JSONObject(paramString);
    String str = paramString.getString("text");
    boolean bool = paramString.getBoolean("isCancel");
    aa.a(this.context, str, bool);
    localJSONObject.put("errCode", 0);
    localJSONObject.put("errMsg", "");
    return localJSONObject.toString();
  }
  
  public abstract void startCamera(JSONObject paramJSONObject, String paramString);
  
  public abstract void startCreditKeyboard(JSONObject paramJSONObject, String paramString);
  
  public abstract void startNumberKeyboard(JSONObject paramJSONObject, String paramString);
  
  public abstract void startPasswordKeyBoard(JSONObject paramJSONObject, String paramString);
  
  public abstract void startRecord(JSONObject paramJSONObject, String paramString);
  
  public abstract void startVedio(JSONObject paramJSONObject, String paramString);
  
  protected void toast(String paramString)
  {
    Toast.makeText(this.context, paramString, 1).show();
  }
  
  public abstract void upFile(JSONObject paramJSONObject, String paramString);
}
