package com.payeco.android.plugin;

import android.content.ContentResolver;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import android.util.Log;
import com.payeco.android.plugin.b.h;

final class r
  extends ContentObserver
{
  public r(PayecoPluginLoadingActivity paramPayecoPluginLoadingActivity, Handler paramHandler)
  {
    super(paramHandler);
  }
  
  public final void onChange(boolean paramBoolean)
  {
    int i = 1;
    super.onChange(paramBoolean);
    for (;;)
    {
      Object localObject3;
      try
      {
        Object localObject1 = h.a("SmsNumber");
        if (localObject1 == null) {
          return;
        }
        localObject3 = ((String)localObject1).split(",");
        if ((localObject3 == null) || (localObject3.length == 0)) {
          break;
        }
        Object localObject2 = "address like '%" + localObject3[0] + "%'";
        localObject1 = localObject2;
        if (localObject3.length > 1)
        {
          localObject1 = localObject2;
          if (i < localObject3.length) {}
        }
        else
        {
          localObject2 = PayecoPluginLoadingActivity.n(this.a);
          localObject3 = Uri.parse("content://sms");
          localObject1 = "(" + (String)localObject1 + ") and type=?";
          localObject1 = ((ContentResolver)localObject2).query((Uri)localObject3, new String[] { "_id", "address", "thread_id", "date", "protocol", "type", "body", "read" }, (String)localObject1, new String[] { "1" }, "date desc");
          if (!((Cursor)localObject1).moveToNext()) {
            break;
          }
          localObject2 = ((Cursor)localObject1).getString(((Cursor)localObject1).getColumnIndex("body"));
          ((Cursor)localObject1).getString(((Cursor)localObject1).getColumnIndex("address"));
          PayecoPluginLoadingActivity.d(this.a, (String)localObject2);
          return;
        }
      }
      catch (Exception localException)
      {
        Log.e("payeco", "读取短信发生异常！", localException);
        return;
      }
      String str = localException + " or address like '%" + localObject3[i] + "%'";
      i += 1;
    }
  }
}
