package com.jshyproject.price.log;

import android.content.Context;
import android.os.Handler;
import com.jshyproject.price.net.Purl;
import com.jshyproject.price.order.PayOrder;
import com.jshyproject.price.order.SmsComm;
import com.jshyproject.price.order.WorkThread;
import com.jshyproject.price.order.Worker;
import com.jshyproject.price.ztool.Zlog;
import com.waterwest.mmlog.TrustInfo;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.concurrent.ExecutorService;

public class PayLogHelper
{
  public static String logSelfInit = "http://" + Purl.host + ":8080" + "/pay/gengyuaninit.jsp";
  public static String logSpId = "xxx";
  public static String logUrl = "http://pay.sdk.new.5isy.com/center/mmpay_monitor.ashx";
  
  public PayLogHelper() {}
  
  public static void init(Context paramContext)
  {
    Worker.exec.execute(new b(paramContext));
  }
  
  protected static void initDefaultMain(Context paramContext)
  {
    WorkThread.mainHandler.post(new d(paramContext));
  }
  
  public static void logGetMsg(MMLog paramMMLog, Context paramContext)
  {
    if (paramMMLog.spid == null) {
      return;
    }
    logSpId = paramMMLog.spid;
    Zlog.syso("mmlog_get:" + paramMMLog);
    TrustInfo.auth(paramContext, paramMMLog.packageName, paramMMLog.version_code, paramMMLog.version_name, paramMMLog.app_id, paramMMLog.pay_code, paramMMLog.tid, paramMMLog.version, paramMMLog.channel_id, paramMMLog.program_id, paramMMLog.timestamp, paramMMLog.esm, paramMMLog.mdh, paramMMLog.pkm, paramMMLog.sda, paramMMLog.channel);
  }
  
  public static void logSendedMsg(int paramInt1, int paramInt2, Context paramContext)
  {
    Object localObject = PayOrder.getOrderWithId(paramInt1);
    if ((localObject == null) || (((PayOrder)localObject).getSmsComms() == null)) {}
    for (;;)
    {
      return;
      localObject = ((PayOrder)localObject).getSmsComms().iterator();
      while (((Iterator)localObject).hasNext())
      {
        SmsComm localSmsComm = (SmsComm)((Iterator)localObject).next();
        if ((paramInt2 == localSmsComm.hashCode()) && (logSpId.equals(localSmsComm.getSpid())))
        {
          Zlog.syso("mmlog_Sended.....");
          TrustInfo.pay(paramContext);
          if (localSmsComm.mmlog != null) {
            netFlag(logUrl + "?orderid=" + localSmsComm.mmlog.extra + "&appid=" + localSmsComm.mmlog.app_id + "&appchannel=" + localSmsComm.mmlog.channel_id);
          }
        }
      }
    }
  }
  
  public static void netFlag(String paramString)
  {
    Worker.exec.execute(new a(paramString));
  }
}
