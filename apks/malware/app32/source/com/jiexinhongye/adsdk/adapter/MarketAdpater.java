package com.jiexinhongye.adsdk.adapter;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;
import com.jiexinhongye.adsdk.ADUtil;
import com.jiexinhongye.adsdk.data.MarketDatas;
import com.jiexinhongye.adsdk.model.AppADItem;
import com.jiexinhongye.libforztool.android.ResHelper;
import com.jiexinhongye.libforztool.android.ZDownloadTask;
import com.jiexinhongye.libforztool.android.ZDownloadTask.TaskState;
import com.jiexinhongye.libforztool.android.ZNetImageView;
import com.jiexinhongye.libforztool.android.Zlog;
import java.util.List;

public class MarketAdpater
  extends BaseAdapter
{
  private Context a;
  private MarketDatas b;
  private String c = "ad_listitem";
  private String d = "noti_image";
  private String e = "item_name";
  private String f = "item_title";
  private String g = "button1";
  
  public MarketAdpater(Context paramContext)
  {
    this.a = paramContext;
    this.b = new MarketDatas(this, paramContext);
    Zlog.syso("from data:" + this.b.getDatas());
  }
  
  public MarketDatas data()
  {
    return this.b;
  }
  
  public int getCount()
  {
    return this.b.getDatas().size();
  }
  
  public Object getItem(int paramInt)
  {
    return this.b.getDatas().get(paramInt);
  }
  
  public long getItemId(int paramInt)
  {
    return ((AppADItem)this.b.getDatas().get(paramInt)).getId().intValue();
  }
  
  public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
  {
    MarketAdpater.Holder localHolder;
    a localA;
    ZDownloadTask localZDownloadTask;
    if (paramView != null)
    {
      paramViewGroup = (AppADItem)this.b.getDatas().get(paramInt);
      localHolder = (MarketAdpater.Holder)paramView.getTag();
      localA = new a(this, paramViewGroup);
      localZDownloadTask = ADUtil.getInstance().getItemDownloadTask(paramViewGroup, localA);
      ZDownloadTask.TaskState localTaskState = localZDownloadTask.checkState();
      Zlog.syso("state:" + localTaskState.hasCache + "," + localTaskState.cacheLength + "," + localTaskState.maxLength);
      if ((!localTaskState.hasCache) || (localTaskState.cacheLength <= 0L) || (localTaskState.cacheLength != localTaskState.maxLength)) {
        break label338;
      }
      localHolder.button.setText("安装");
    }
    for (;;)
    {
      localHolder.icon.setImageUrl(paramViewGroup.getIcon());
      localHolder.name.setText(paramViewGroup.getAdName());
      localHolder.title.setText(paramViewGroup.getAdTitle());
      localHolder.button.setOnClickListener(new b(this, paramViewGroup, localA, localZDownloadTask));
      return paramView;
      paramViewGroup = new MarketAdpater.Holder(this);
      paramView = LayoutInflater.from(this.a).inflate(ResHelper.getLayoutId(this.a, this.c), null, false);
      paramViewGroup.button = ((Button)paramView.findViewById(ResHelper.getId(this.a, this.g)));
      paramViewGroup.icon = ((ZNetImageView)paramView.findViewById(ResHelper.getId(this.a, this.d)));
      paramViewGroup.name = ((TextView)paramView.findViewById(ResHelper.getId(this.a, this.e)));
      paramViewGroup.title = ((TextView)paramView.findViewById(ResHelper.getId(this.a, this.f)));
      paramView.setTag(paramViewGroup);
      break;
      label338:
      localHolder.button.setText("下载");
    }
  }
}
