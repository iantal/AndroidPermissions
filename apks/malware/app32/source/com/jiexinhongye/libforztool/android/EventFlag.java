package com.jiexinhongye.libforztool.android;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.text.format.Time;

public class EventFlag
{
  private static EventFlag a;
  private Context b;
  private SharedPreferences c;
  private Time d;
  private Time e;
  
  private EventFlag(Context paramContext)
  {
    this.b = paramContext;
    this.c = paramContext.getSharedPreferences("event_flag", 0);
    this.d = new Time();
    this.e = new Time();
  }
  
  public static EventFlag get(Context paramContext)
  {
    try
    {
      if (a == null) {
        a = new EventFlag(paramContext);
      }
      paramContext = a;
      return paramContext;
    }
    finally {}
  }
  
  public boolean flagUpdatePassOneDay(String paramString)
  {
    long l = this.c.getLong(paramString, -1L);
    if (l == -1L) {}
    do
    {
      return true;
      this.d.set(l);
      this.e.setToNow();
    } while (this.d.monthDay != this.e.monthDay);
    return false;
  }
  
  public boolean flagUpdatePassSomeTime(String paramString, long paramLong)
  {
    long l = this.c.getLong(paramString, -1L);
    if (l == -1L) {}
    do
    {
      return true;
      this.d.set(l);
      this.e.setToNow();
    } while (this.e.toMillis(true) - this.d.toMillis(true) > paramLong);
    return false;
  }
  
  public final String toString()
  {
    return "EventFlag [context=" + this.b + ", sp=" + this.c + ", time=" + this.d + ", cur=" + this.e + "]";
  }
  
  public void updateFlag(String paramString)
  {
    this.d.setToNow();
    long l = this.d.toMillis(true);
    this.c.edit().putLong(paramString, l).commit();
  }
}
