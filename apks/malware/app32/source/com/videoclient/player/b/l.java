package com.videoclient.player.b;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.IntentFilter;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;
import com.baidu.a.f;
import com.jiexinhongye.libforztool.android.Zlog;
import com.videoclient.player.c.a;
import java.util.ArrayList;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;

public class l
{
  public static l a = new l();
  private String b = "20";
  private String c = "视频会员业务";
  private String d = "vip";
  private BroadcastReceiver e;
  
  public l() {}
  
  private String a(String paramString, ArrayList paramArrayList)
  {
    paramString = new HttpPost(paramString);
    paramString.setEntity(new UrlEncodedFormEntity(paramArrayList, "UTF-8"));
    paramString = new DefaultHttpClient().execute(paramString);
    int i = paramString.getStatusLine().getStatusCode();
    if (i == 200) {
      return EntityUtils.toString(paramString.getEntity());
    }
    Log.e("test", "通讯发生异常，响应码[" + i + "]");
    return null;
  }
  
  private void a()
  {
    this.e = new n(this);
  }
  
  private void d(Context paramContext)
  {
    if (this.e != null)
    {
      paramContext.unregisterReceiver(this.e);
      this.e = null;
    }
  }
  
  private void e(Context paramContext)
  {
    IntentFilter localIntentFilter = new IntentFilter();
    localIntentFilter.addAction("com.jshy.video.client");
    localIntentFilter.addCategory("android.intent.category.DEFAULT");
    paramContext.registerReceiver(this.e, localIntentFilter);
  }
  
  public void a(Context paramContext)
  {
    a();
    e(paramContext);
  }
  
  protected void a(String paramString)
  {
    a.c = false;
    try
    {
      JSONObject localJSONObject = new JSONObject(paramString);
      if (localJSONObject.has("respCode"))
      {
        paramString = localJSONObject.getString("respCode");
        if ("W101".equals(paramString)) {
          a.c();
        }
        if (!"0000".equals(paramString))
        {
          localJSONObject.getString("respDesc");
          a.c();
        }
      }
      localJSONObject.has("OrderId");
      localJSONObject.has("Amount");
      localJSONObject.has("PayTime");
      if (localJSONObject.has("Status"))
      {
        paramString = "";
        if ("01".equals(localJSONObject.getString("Status")))
        {
          paramString = "未支付";
          a.c();
        }
        if ("02".equals(localJSONObject.getString("Status")))
        {
          paramString = "已支付";
          a.a();
        }
        if ("03".equals(localJSONObject.getString("Status")))
        {
          paramString = "已退款(全额撤销/冲正)";
          a.c();
        }
        if ("04".equals(localJSONObject.getString("Status")))
        {
          paramString = "已过期";
          a.c();
        }
        if ("05".equals(localJSONObject.getString("Status")))
        {
          paramString = "已作废";
          a.c();
        }
        if ("06".equals(localJSONObject.getString("Status"))) {
          paramString = "支付中";
        }
        if ("07".equals(localJSONObject.getString("Status"))) {
          paramString = "退款中";
        }
        if ("08".equals(localJSONObject.getString("Status"))) {
          paramString = "已被商户撤销";
        }
        if ("09".equals(localJSONObject.getString("Status"))) {
          paramString = "已被持卡人撤销";
        }
        if ("10".equals(localJSONObject.getString("Status")))
        {
          paramString = "调账-支付成功";
          a.a();
        }
        if ("11".equals(localJSONObject.getString("Status"))) {
          paramString = "调账-退款成功";
        }
        if ("12".equals(localJSONObject.getString("Status"))) {
          paramString = "已退货";
        }
        Zlog.syso("yipay:state:" + paramString);
      }
      return;
    }
    catch (JSONException paramString)
    {
      paramString.printStackTrace();
    }
  }
  
  public void b(Context paramContext)
  {
    d(paramContext);
  }
  
  public String c(Context paramContext)
  {
    return ((TelephonyManager)paramContext.getSystemService("phone")).getDeviceId();
  }
  
  public void pay(Context paramContext)
  {
    if (a.c)
    {
      Toast.makeText(paramContext, "有订单正在支付", 0).show();
      return;
    }
    a.c = true;
    f.a(paramContext, "yipay", "易联支付");
    new m(this, paramContext).execute(new Void[0]);
  }
}
