package com.videoclient.player.c;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.graphics.drawable.ColorDrawable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager.BadTokenException;
import android.widget.ImageView;
import com.a.a.g;
import com.jshyproject.price.net.NetFlag;
import com.jshyproject.price.net.Purl;
import com.jshyproject.price.order.Worker;
import com.videoclient.player.VideoApp;
import com.videoclient.player.otherpay.PayActivityAlipay;
import java.util.concurrent.ExecutorService;

public class a
{
  public static final String a;
  public static boolean b = false;
  public static boolean c = false;
  private static SharedPreferences d;
  private static ProgressDialog e;
  private static boolean f = false;
  private static View.OnClickListener g;
  
  static
  {
    a = "http://" + Purl.host + ":8080/pay/select_sdk";
    g = new b();
  }
  
  public static void a()
  {
    d.edit().putInt("pay_video", 2).commit();
    if (e != null) {
      e.cancel();
    }
  }
  
  public static void a(Activity paramActivity)
  {
    Dialog localDialog = new Dialog(paramActivity);
    Object localObject = LayoutInflater.from(paramActivity).inflate(2130903075, null, false);
    localDialog.requestWindowFeature(1);
    localDialog.getWindow().setBackgroundDrawable(new ColorDrawable(0));
    localDialog.setContentView((View)localObject);
    paramActivity = (ImageView)((View)localObject).findViewById(2131165301);
    localObject = (ImageView)((View)localObject).findViewById(2131165302);
    paramActivity.setOnClickListener(g);
    ((ImageView)localObject).setOnClickListener(g);
    localDialog.show();
  }
  
  public static void a(Context paramContext, int paramInt)
  {
    if (f)
    {
      Worker.exec.execute(new c(paramContext, paramInt));
      return;
    }
    pay(paramContext, paramInt);
  }
  
  public static boolean a(Context paramContext)
  {
    d = paramContext.getSharedPreferences("pay_xml", 0);
    return d.getInt("pay_video", 1) == 2;
  }
  
  public static void b()
  {
    int i = d.getInt("pay_video", 1);
    if (i == 2) {
      return;
    }
    if (i == 1) {
      d.edit().putInt("pay_video", 3).commit();
    }
    try
    {
      e = ProgressDialog.show(VideoApp.b, null, "支付处理中，请稍等...");
      return;
    }
    catch (WindowManager.BadTokenException localBadTokenException) {}
  }
  
  private static void b(Context paramContext, int paramInt)
  {
    new Thread(new l(paramContext, paramInt)).start();
  }
  
  public static boolean b(Context paramContext)
  {
    boolean bool = true;
    d = paramContext.getSharedPreferences("pay_xml", 0);
    int i = d.getInt("pay_video", 1);
    if ((i == 3) || (i == 2)) {
      bool = false;
    }
    return bool;
  }
  
  public static void c()
  {
    int i = d.getInt("pay_video", 1);
    if (i == 2) {}
    do
    {
      return;
      if (i == 3) {
        d.edit().putInt("pay_video", 1).commit();
      }
    } while (e == null);
    e.cancel();
  }
  
  public static void c(Context paramContext)
  {
    a(VideoApp.b);
    com.baidu.a.f.a(paramContext, "open3rdpay", "打开第三方支付");
    NetFlag.flag(Purl.makeUrl("http://" + Purl.host + ":" + "8080" + "/pay/threePopup.jsp", paramContext));
  }
  
  private static void d()
  {
    long l = System.currentTimeMillis() - d.getLong("pay_last_time", 0L);
    g.a("timeD:" + l);
    if (l > 300000L) {
      d.edit().putInt("pay_video", 1).commit();
    }
  }
  
  private static void e(Context paramContext)
  {
    Intent localIntent = new Intent(paramContext, PayActivityAlipay.class);
    localIntent.putExtra("total_fee", "20");
    localIntent.putExtra("body", "精品视频会员业务20元永久开通");
    localIntent.putExtra("subject", "视频会员");
    paramContext.startActivity(localIntent);
  }
  
  public static void pay(Context paramContext, int paramInt)
  {
    if (a(paramContext)) {
      return;
    }
    b(paramContext, paramInt);
    d = paramContext.getSharedPreferences("pay_xml", 0);
    d.edit().putInt("pay_video", 3).commit();
    long l = System.currentTimeMillis();
    d.edit().putLong("pay_last_time", l).commit();
    g.a("payMethond..start..");
    d();
    Worker.exec.execute(new f(paramContext));
  }
}
