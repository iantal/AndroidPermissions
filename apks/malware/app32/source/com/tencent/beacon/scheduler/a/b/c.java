package com.tencent.beacon.scheduler.a.b;

import android.content.Context;
import com.tencent.beacon.scheduler.a.b;
import com.tencent.beacon.scheduler.a.g;
import com.tencent.beacon.scheduler.e.a;
import com.tencent.beacon.scheduler.ext.http.HttpAccessClient;
import com.tencent.beacon.scheduler.ext.http.HttpAccessClientFactory;
import com.tencent.beacon.scheduler.ext.http.HttpAccessRequest;
import com.tencent.beacon.scheduler.ext.http.HttpAccessResponse;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public final class c
{
  private static int a = 10;
  private static int b = 60;
  private static List c;
  private static ScheduledThreadPoolExecutor d = null;
  
  public static void a()
  {
    d = new ScheduledThreadPoolExecutor(1);
    c.a localA = new c.a((byte)0);
    d.scheduleWithFixedDelay(localA, 3L, b, TimeUnit.SECONDS);
  }
  
  public static void a(String paramString, HashMap paramHashMap)
  {
    Context localContext = g.b();
    paramString = b.b(paramString);
    paramString.a(com.tencent.beacon.scheduler.e.d.a(localContext));
    paramString.a(paramHashMap);
    if (c == null) {
      c = new ArrayList();
    }
    c.add(paramString);
    if (c.size() >= a) {
      c(c);
    }
  }
  
  private static void c(List paramList)
  {
    ArrayList localArrayList;
    do
    {
      do
      {
        try
        {
          localObject = new StringBuilder();
          localArrayList = new ArrayList();
          localArrayList.addAll(paramList);
          paramList = localArrayList.iterator();
          while (paramList.hasNext()) {
            ((StringBuilder)localObject).append(b.a((com.tencent.beacon.scheduler.c.d)paramList.next()));
          }
          paramList = b.a(((StringBuilder)localObject).toString().getBytes());
        }
        catch (Exception paramList)
        {
          paramList.printStackTrace();
          return;
        }
        localObject = new a("ABC1234567890DEF".getBytes()).a(paramList);
      } while (localObject.length <= 0);
      paramList = HttpAccessClientFactory.getHttpAccessClient();
      Object localObject = paramList.createHttpPostRequest("zxcv.3g.qq.com", null, "/sdk/beacon.jsp?type=real&size=" + localObject.length, (byte[])localObject);
      ((HttpAccessRequest)localObject).setReport(false);
      paramList = paramList.doRequest((HttpAccessRequest)localObject);
    } while ((paramList == null) || (paramList.getRetCode() != 0));
    c.removeAll(localArrayList);
  }
}
