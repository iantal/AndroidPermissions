package com.tencent.beacon.scheduler.a;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.SystemClock;

final class c
{
  private static c a = null;
  private f b;
  private BroadcastReceiver c = new d(this);
  private BroadcastReceiver d = new e(this);
  
  c() {}
  
  public static c a()
  {
    try
    {
      if (a == null) {
        a = new c();
      }
      c localC = a;
      return localC;
    }
    finally {}
  }
  
  public final void a(f paramF)
  {
    this.b = paramF;
    paramF = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
    g.b().registerReceiver(this.c, paramF);
    com.tencent.beacon.scheduler.e.c.b("AccessSchedulerTrigger", "startListenNetworkChange...");
    com.tencent.beacon.scheduler.e.c.b("AccessSchedulerTrigger", "try startAccessSchedulerTimer...");
    paramF = new IntentFilter("action.scheduler.access.trigger.timer");
    g.b().registerReceiver(this.d, paramF);
    paramF = (AlarmManager)g.b().getSystemService("alarm");
    if (paramF != null)
    {
      long l = SystemClock.elapsedRealtime();
      Intent localIntent = new Intent("action.scheduler.access.trigger.timer");
      paramF.setRepeating(3, l + 1800000L, 1800000L, PendingIntent.getBroadcast(g.b(), 0, localIntent, 0));
      com.tencent.beacon.scheduler.e.c.a("AccessSchedulerTrigger", "startAccessSchedulerTimer timer start...");
    }
  }
  
  public final void b()
  {
    if (this.b != null)
    {
      this.b.a();
      return;
    }
    com.tencent.beacon.scheduler.e.c.c("AccessSchedulerTrigger", "onAccessSchedulerTriggered not call for triggerlistener is null");
  }
}
