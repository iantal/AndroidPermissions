package com.ltad.promotion;

import android.app.Activity;
import android.util.Log;
import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.Map;

public class Promotion
{
  private static final String TAG = "Joy_Promotion";
  private static Map mIconViews = new HashMap();
  private static Promotion mInstance = new Promotion();
  private boolean hasInit = false;
  private WeakReference mActivityRef;
  private ImageIcon mIcon;
  
  private Promotion() {}
  
  public static Promotion getInstance(Activity paramActivity)
  {
    if ((mInstance.mActivityRef == null) || (paramActivity != mInstance.mActivityRef.get())) {
      mInstance.mActivityRef = new WeakReference(paramActivity);
    }
    return mInstance;
  }
  
  private void init() {}
  
  public void destroy()
  {
    Object localObject = ((Activity)this.mActivityRef.get()).toString();
    localObject = (WeakReference)mIconViews.get(localObject);
    if (localObject != null) {
      ((ImageIcon)((WeakReference)localObject).get()).destroy();
    }
    mIconViews.remove(((Activity)this.mActivityRef.get()).toString());
    Log.i("Joy_Promotion", "Destroy Complete");
  }
  
  public void show(int paramInt)
  {
    if (!this.hasInit)
    {
      this.hasInit = true;
      init();
    }
    WeakReference localWeakReference = (WeakReference)mIconViews.get(((Activity)this.mActivityRef.get()).toString());
    if ((localWeakReference == null) || (localWeakReference.get() == null))
    {
      this.mIcon = new ImageIcon((Activity)this.mActivityRef.get());
      mIconViews.put(((Activity)this.mActivityRef.get()).toString(), new WeakReference(this.mIcon));
    }
    for (;;)
    {
      this.mIcon.show(paramInt);
      return;
      this.mIcon = ((ImageIcon)localWeakReference.get());
    }
  }
}
