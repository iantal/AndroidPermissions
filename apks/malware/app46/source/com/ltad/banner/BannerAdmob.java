package com.ltad.banner;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.View;
import com.google.android.gms.ads.AdRequest.Builder;
import com.google.android.gms.ads.AdSize;
import com.google.android.gms.ads.AdView;
import com.ltad.a.i;
import com.ltad.util.BannerUtil;
import com.ltad.util.PropertyUtil;

public class BannerAdmob
  extends BannerAdapter
{
  private static final String TAG = "Joy_BannerAdmob";
  private boolean isLoaded = false;
  private boolean isShow = false;
  private int loadTimes = 0;
  private AdView mAdView = null;
  private Context mAppContext;
  private String mAppId;
  private String mTestDevice;
  
  public BannerAdmob() {}
  
  public View create(Activity paramActivity)
  {
    this.isShow = true;
    if ((this.isLoaded) && (this.mAdView != null))
    {
      this.isLoaded = false;
      return this.mAdView;
    }
    return preload(paramActivity);
  }
  
  public void destroy()
  {
    this.mAppContext = null;
    this.mAppId = null;
    this.mTestDevice = null;
    this.isLoaded = false;
    this.isShow = false;
    Log.i("Joy_BannerAdmob", "destroy complete");
  }
  
  public String getTag()
  {
    return "Joy_BannerAdmob";
  }
  
  public void init(Context paramContext)
  {
    this.mAppContext = paramContext.getApplicationContext();
    this.mAppId = PropertyUtil.getPropertyDefault(this.mAppContext, i.a(262153), "");
    if ("".equals(this.mAppId))
    {
      Log.e("Joy_BannerAdmob", "AppId is not exist");
      return;
    }
    Log.i("Joy_BannerAdmob", i.a(262153) + ":" + this.mAppId);
    this.mTestDevice = PropertyUtil.getPropertyDefault(this.mAppContext, i.a(262154), "");
    try
    {
      Class.forName(i.a(262155));
      BannerUtil.getInstance(this.mAppContext).addSupportBanner(i.a(262150), this);
      Log.i("Joy_BannerAdmob", "Init success");
      return;
    }
    catch (ClassNotFoundException paramContext)
    {
      Log.e("Joy_BannerAdmob", "Exception:" + paramContext.getMessage());
    }
  }
  
  public View preload(Activity paramActivity)
  {
    this.mAdView = new AdView(paramActivity);
    this.mAdView.setAdSize(AdSize.BANNER);
    this.mAdView.setAdUnitId(this.mAppId);
    this.mAdView.setAdListener(new BannerAdmob.1(this, paramActivity));
    AdRequest.Builder localBuilder = new AdRequest.Builder();
    paramActivity = localBuilder;
    if (this.mTestDevice != null)
    {
      paramActivity = localBuilder;
      if (!"".equals(this.mTestDevice)) {
        paramActivity = localBuilder.addTestDevice(this.mTestDevice);
      }
    }
    this.mAdView.loadAd(paramActivity.build());
    return this.mAdView;
  }
  
  public boolean preloadResult()
  {
    return this.isLoaded;
  }
}
