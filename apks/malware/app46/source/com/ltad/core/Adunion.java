package com.ltad.core;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
import android.util.Log;
import com.ltad.a.i;
import com.ltad.banner.BannerAd;
import com.ltad.interstitial.InterstitialAd;
import com.ltad.interstitial.UnityAdListener;
import com.ltad.linkto.LinkTo;
import com.ltad.promotion.Promotion;
import com.ltad.util.PropertyUtil;
import java.lang.ref.SoftReference;

public class Adunion
{
  public static final int BAD_POS_BOTTOM_CENTER = 7;
  public static final int BAD_POS_BOTTOM_LEFT = 6;
  public static final int BAD_POS_BOTTOM_RIGHT = 8;
  public static final int BAD_POS_CENTER_CENTER = 4;
  public static final int BAD_POS_CENTER_LEFT = 3;
  public static final int BAD_POS_CENTER_RIGHT = 5;
  public static final int BAD_POS_TOP_CENTER = 1;
  public static final int BAD_POS_TOP_LEFT = 0;
  public static final int BAD_POS_TOP_RIGHT = 2;
  public static String IAD_TYPE_GAMEEXIT;
  public static String IAD_TYPE_GAMEGIFT;
  public static String IAD_TYPE_GAMEPAUSE;
  public static String IAD_TYPE_GAMESTART = "";
  public static String LINK_TYPE_GAINCOINS = "";
  public static String LINK_TYPE_GAMESCORE;
  public static String LINK_TYPE_MOREGAME;
  public static final int PROM_POS_BOTTOM_CENTER = 7;
  public static final int PROM_POS_BOTTOM_LEFT = 6;
  public static final int PROM_POS_BOTTOM_RIGHT = 8;
  public static final int PROM_POS_CENTER_CENTER = 4;
  public static final int PROM_POS_CENTER_LEFT = 3;
  public static final int PROM_POS_CENTER_RIGHT = 5;
  public static final int PROM_POS_TOP_CENTER = 1;
  public static final int PROM_POS_TOP_LEFT = 0;
  public static final int PROM_POS_TOP_RIGHT = 2;
  private static final String TAG = "Joy_Adunion";
  private static Adunion mInstance = new Adunion();
  private SoftReference mActivityRef;
  private Context mAppContext;
  
  static
  {
    IAD_TYPE_GAMEEXIT = "";
    IAD_TYPE_GAMEPAUSE = "";
    IAD_TYPE_GAMEGIFT = "";
    LINK_TYPE_MOREGAME = "";
    LINK_TYPE_GAMESCORE = "";
  }
  
  private Adunion() {}
  
  private void autoShowFreeGift()
  {
    String str = i.a(131072);
    if (PreferenceManager.getDefaultSharedPreferences(this.mAppContext).getBoolean(str, false))
    {
      Log.w("Joy_Adunion", "promotion auto show");
      str = PropertyUtil.getPropertyDefault(this.mAppContext, i.a(327690), i.a(327691));
      try
      {
        int i = Integer.parseInt(str);
        Promotion.getInstance((Activity)this.mActivityRef.get()).show(i);
        return;
      }
      catch (Exception localException)
      {
        Log.e("Joy_Adunion", "Exception: " + localException.getMessage());
        return;
      }
    }
    Log.w("Joy_Adunion", "promotion is not auto show");
  }
  
  private void autoShowMoreGame()
  {
    String str = PropertyUtil.getPropertyDefault(this.mAppContext, i.a(327687), i.a(327688));
    if (i.a(327689).equals(str))
    {
      Log.w("Joy_Adunion", i.a(327687));
      str = PropertyUtil.getPropertyDefault(this.mAppContext, i.a(327690), i.a(327691));
    }
    try
    {
      int i = Integer.parseInt(str);
      Promotion.getInstance((Activity)this.mActivityRef.get()).show(i);
      return;
    }
    catch (Exception localException)
    {
      Log.e("Joy_Adunion", "Exception: " + localException.getMessage());
    }
  }
  
  public static Adunion getInstance(Activity paramActivity)
  {
    if ((mInstance.mActivityRef == null) || (mInstance.mActivityRef.get() == null) || (mInstance.mActivityRef.get() != paramActivity)) {
      mInstance.init(paramActivity);
    }
    com.ltad.common.a.a = com.ltad.a.a.c(paramActivity);
    return mInstance;
  }
  
  private void init(Activity paramActivity)
  {
    this.mActivityRef = new SoftReference(paramActivity);
    this.mAppContext = paramActivity.getApplicationContext();
    i.a(((Activity)this.mActivityRef.get()).getApplicationContext());
    IAD_TYPE_GAMESTART = i.a(327680);
    IAD_TYPE_GAMEEXIT = i.a(327681);
    IAD_TYPE_GAMEPAUSE = i.a(327682);
    IAD_TYPE_GAMEGIFT = i.a(327683);
    LINK_TYPE_MOREGAME = i.a(327684);
    LINK_TYPE_GAMESCORE = i.a(327685);
    LINK_TYPE_GAINCOINS = i.a(327686);
    autoShowFreeGift();
  }
  
  public void closeBannerAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    BannerAd.getInstance((Activity)this.mActivityRef.get()).close();
  }
  
  public void destory()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    destroy();
  }
  
  public void destroy()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    this.mActivityRef.clear();
    Log.i("Joy_Adunion", "Destroy Complete");
  }
  
  public void destroyBannerAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    BannerAd.getInstance((Activity)this.mActivityRef.get()).destroy();
  }
  
  public void destroyInterstitialAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).destroy();
    Log.i("Joy_Adunion", "destroy complete");
  }
  
  public void destroyPromotion()
  {
    Promotion.getInstance((Activity)this.mActivityRef.get()).destroy();
    Log.i("Joy_Adunion", "Destroy Complete");
  }
  
  public String linkTo(String paramString)
  {
    return LinkTo.getInstance((Activity)this.mActivityRef.get()).link(paramString);
  }
  
  public void preloadBannerAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    BannerAd.getInstance((Activity)this.mActivityRef.get()).preload();
  }
  
  public void preloadInterstitialAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).preload();
  }
  
  public void setUnityAdListener(UnityAdListener paramUnityAdListener)
  {
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).setUnityAdListener(paramUnityAdListener);
  }
  
  public void showBannerAd(int paramInt)
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    BannerAd.getInstance((Activity)this.mActivityRef.get()).show(paramInt);
  }
  
  public void showInterstitial(String paramString)
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).showInterstitial(paramString);
  }
  
  @Deprecated
  public void showInterstitialAd(String paramString)
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).show(paramString);
  }
  
  public void showPromotion(int paramInt)
  {
    Promotion.getInstance((Activity)this.mActivityRef.get()).show(paramInt);
  }
  
  public void stopLoadingInterstitialAd()
  {
    if (!com.ltad.common.a.a) {
      return;
    }
    InterstitialAd.getInstance((Activity)this.mActivityRef.get()).stopLoading();
  }
}
