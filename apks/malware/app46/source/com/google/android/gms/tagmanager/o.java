package com.google.android.gms.tagmanager;

import android.content.Context;
import android.os.Looper;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.common.api.a.a;
import com.google.android.gms.internal.c.f;
import com.google.android.gms.internal.c.j;
import com.google.android.gms.internal.ij;
import com.google.android.gms.internal.il;
import com.google.android.gms.internal.le.a;

class o
  extends a.a
{
  private final Looper DF;
  private final TagManager aeF;
  private final o.d aeI;
  private final cf aeJ;
  private final int aeK;
  private o.f aeL;
  private volatile n aeM;
  private volatile boolean aeN;
  private c.j aeO;
  private String aeP;
  private o.e aeQ;
  private o.a aeR;
  private final ij aef;
  private final String aet;
  private long aey;
  private final Context mContext;
  
  o(Context paramContext, TagManager paramTagManager, Looper paramLooper, String paramString, int paramInt, o.f paramF, o.e paramE, ij paramIj, cf paramCf) {}
  
  public o(Context paramContext, TagManager paramTagManager, Looper paramLooper, String paramString, int paramInt, r paramR)
  {
    this(paramContext, paramTagManager, paramLooper, paramString, paramInt, new cp(paramContext, paramString), new co(paramContext, paramString, paramR), il.gb(), new bf(30, 900000L, 5000L, "refreshing", il.gb()));
  }
  
  private void H(boolean paramBoolean)
  {
    this.aeL.a(new o.b(this, null));
    this.aeQ.a(new o.c(this, null));
    cq.c localC = this.aeL.dn(this.aeK);
    if (localC != null) {
      this.aeM = new n(this.aeF, this.DF, new Container(this.mContext, this.aeF.getDataLayer(), this.aet, 0L, localC), this.aeI);
    }
    this.aeR = new o.2(this, paramBoolean);
    if (lu())
    {
      this.aeQ.e(0L, "");
      return;
    }
    this.aeL.lw();
  }
  
  private void a(c.j paramJ)
  {
    try
    {
      if (this.aeL != null)
      {
        le.a localA = new le.a();
        localA.aiG = this.aey;
        localA.fK = new c.f();
        localA.aiH = paramJ;
        this.aeL.b(localA);
      }
      return;
    }
    finally
    {
      paramJ = finally;
      throw paramJ;
    }
  }
  
  private void a(c.j paramJ, long paramLong, boolean paramBoolean)
  {
    if (paramBoolean) {}
    for (;;)
    {
      try
      {
        paramBoolean = this.aeN;
        if (paramBoolean) {
          return;
        }
        if ((isReady()) && (this.aeM == null)) {}
        this.aeO = paramJ;
        this.aey = paramLong;
        w(Math.max(0L, Math.min(43200000L, this.aey + 43200000L - this.aef.currentTimeMillis())));
        paramJ = new Container(this.mContext, this.aeF.getDataLayer(), this.aet, paramLong, paramJ);
        if (this.aeM == null)
        {
          this.aeM = new n(this.aeF, this.DF, paramJ, this.aeI);
          if ((!isReady()) && (this.aeR.b(paramJ))) {
            b(this.aeM);
          }
        }
        else
        {
          this.aeM.a(paramJ);
        }
      }
      finally {}
    }
  }
  
  private boolean lu()
  {
    cd localCd = cd.md();
    return ((localCd.me() == cd.a.agC) || (localCd.me() == cd.a.agD)) && (this.aet.equals(localCd.getContainerId()));
  }
  
  /* Error */
  private void w(long paramLong)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 60	com/google/android/gms/tagmanager/o:aeQ	Lcom/google/android/gms/tagmanager/o$e;
    //   6: ifnonnull +12 -> 18
    //   9: ldc_w 287
    //   12: invokestatic 292	com/google/android/gms/tagmanager/bh:D	(Ljava/lang/String;)V
    //   15: aload_0
    //   16: monitorexit
    //   17: return
    //   18: aload_0
    //   19: getfield 60	com/google/android/gms/tagmanager/o:aeQ	Lcom/google/android/gms/tagmanager/o$e;
    //   22: lload_1
    //   23: aload_0
    //   24: getfield 74	com/google/android/gms/tagmanager/o:aeO	Lcom/google/android/gms/internal/c$j;
    //   27: getfield 295	com/google/android/gms/internal/c$j:fL	Ljava/lang/String;
    //   30: invokeinterface 179 4 0
    //   35: goto -20 -> 15
    //   38: astore_3
    //   39: aload_0
    //   40: monitorexit
    //   41: aload_3
    //   42: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	43	0	this	o
    //   0	43	1	paramLong	long
    //   38	4	3	localObject	Object
    // Exception table:
    //   from	to	target	type
    //   2	15	38	finally
    //   18	35	38	finally
  }
  
  protected ContainerHolder ap(Status paramStatus)
  {
    if (this.aeM != null) {
      return this.aeM;
    }
    if (paramStatus == Status.Eq) {
      bh.A("timer expired: setting result to failure");
    }
    return new n(paramStatus);
  }
  
  void bJ(String paramString)
  {
    try
    {
      this.aeP = paramString;
      if (this.aeQ != null) {
        this.aeQ.bM(paramString);
      }
      return;
    }
    finally
    {
      paramString = finally;
      throw paramString;
    }
  }
  
  String lo()
  {
    try
    {
      String str = this.aeP;
      return str;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public void lr()
  {
    Object localObject = this.aeL.dn(this.aeK);
    if (localObject != null)
    {
      localObject = new Container(this.mContext, this.aeF.getDataLayer(), this.aet, 0L, (cq.c)localObject);
      b(new n(this.aeF, this.DF, (Container)localObject, new o.1(this)));
    }
    for (;;)
    {
      this.aeQ = null;
      this.aeL = null;
      return;
      bh.A("Default was requested, but no default container was found");
      b(ap(new Status(10, "Default was requested, but no default container was found", null)));
    }
  }
  
  public void ls()
  {
    H(false);
  }
  
  public void lt()
  {
    H(true);
  }
}
