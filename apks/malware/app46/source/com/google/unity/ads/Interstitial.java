package com.google.unity.ads;

import android.app.Activity;
import android.util.Log;
import com.google.android.gms.ads.AdListener;
import com.google.android.gms.ads.AdRequest;
import com.google.android.gms.ads.InterstitialAd;
import com.google.android.gms.ads.purchase.PlayStorePurchaseListener;

public class Interstitial
{
  private Activity activity;
  private UnityAdListener adListener;
  private InterstitialAd interstitial;
  private boolean isLoaded;
  
  public Interstitial(Activity paramActivity, UnityAdListener paramUnityAdListener)
  {
    this.activity = paramActivity;
    this.adListener = paramUnityAdListener;
    this.isLoaded = false;
  }
  
  public void create(final String paramString)
  {
    this.activity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        Interstitial.access$002(Interstitial.this, new InterstitialAd(Interstitial.this.activity));
        Interstitial.this.interstitial.setAdUnitId(paramString);
        Interstitial.this.interstitial.setAdListener(new AdListener()
        {
          public void onAdClosed()
          {
            Interstitial.this.adListener.onAdClosed();
          }
          
          public void onAdFailedToLoad(int paramAnonymous2Int)
          {
            Interstitial.this.adListener.onAdFailedToLoad(PluginUtils.getErrorReason(paramAnonymous2Int));
          }
          
          public void onAdLeftApplication()
          {
            Interstitial.this.adListener.onAdLeftApplication();
          }
          
          public void onAdLoaded()
          {
            Interstitial.access$202(Interstitial.this, true);
            Interstitial.this.adListener.onAdLoaded();
          }
          
          public void onAdOpened()
          {
            Interstitial.this.adListener.onAdOpened();
          }
        });
      }
    });
  }
  
  public void destroy() {}
  
  public boolean isLoaded()
  {
    return this.isLoaded;
  }
  
  public void loadAd(final AdRequest paramAdRequest)
  {
    this.activity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        Interstitial.this.interstitial.loadAd(paramAdRequest);
      }
    });
  }
  
  public void setPlayStorePurchaseParams(final PlayStorePurchaseListener paramPlayStorePurchaseListener, final String paramString)
  {
    this.activity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        Interstitial.this.interstitial.setPlayStorePurchaseParams(paramPlayStorePurchaseListener, paramString);
      }
    });
  }
  
  public void show()
  {
    this.activity.runOnUiThread(new Runnable()
    {
      public void run()
      {
        if (Interstitial.this.interstitial.isLoaded())
        {
          Interstitial.access$202(Interstitial.this, false);
          Interstitial.this.interstitial.show();
          return;
        }
        Log.d("AdsUnity", "Interstitial was not ready to be shown.");
      }
    });
  }
}
