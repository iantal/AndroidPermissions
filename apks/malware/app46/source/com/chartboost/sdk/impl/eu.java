package com.chartboost.sdk.impl;

import java.io.Closeable;
import java.io.IOException;
import java.io.InterruptedIOException;
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.SynchronousQueue;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public final class eu
  implements Closeable
{
  private static final ExecutorService l;
  final cj a;
  final boolean b;
  long c = 0L;
  long d;
  final es e = new es();
  final es f = new es();
  final eh g;
  final ei h;
  final long i;
  final eu.b j;
  private final eo m;
  private final Map n = new HashMap();
  private final String o;
  private int p;
  private int q;
  private boolean r;
  private long s = System.nanoTime();
  private Map t;
  private final er u;
  private int v;
  private boolean w = false;
  private final Set x = new LinkedHashSet();
  
  static
  {
    if (!eu.class.desiredAssertionStatus()) {}
    for (boolean bool = true;; bool = false)
    {
      k = bool;
      l = new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue(), cs.a("OkHttp SpdyConnection", true));
      return;
    }
  }
  
  private eu(eu.a paramA)
  {
    this.a = eu.a.a(paramA);
    this.u = eu.a.b(paramA);
    this.b = eu.a.c(paramA);
    this.m = eu.a.d(paramA);
    int i1;
    if (eu.a.c(paramA))
    {
      i1 = 1;
      this.q = i1;
      if (!eu.a.c(paramA)) {
        break label271;
      }
      i1 = i2;
      label122:
      this.v = i1;
      if (eu.a.c(paramA)) {
        this.e.a(7, 0, 16777216);
      }
      this.o = eu.a.e(paramA);
      if (this.a != cj.a) {
        break label276;
      }
    }
    for (Object localObject = new em();; localObject = new et())
    {
      this.d = this.f.d(65536);
      this.g = ((ew)localObject).a(eu.a.f(paramA), this.b);
      this.h = ((ew)localObject).a(eu.a.g(paramA), this.b);
      this.i = ((ew)localObject).a();
      this.j = new eu.b(this, null);
      new Thread(this.j).start();
      return;
      i1 = 2;
      break;
      label271:
      i1 = 2;
      break label122;
      label276:
      if (this.a != cj.b) {
        break label298;
      }
    }
    label298:
    throw new AssertionError(this.a);
  }
  
  private ev a(int paramInt, List paramList, boolean paramBoolean1, boolean paramBoolean2)
  {
    boolean bool;
    if (!paramBoolean1)
    {
      bool = true;
      if (paramBoolean2) {
        break label60;
      }
    }
    label60:
    for (paramBoolean2 = true;; paramBoolean2 = false)
    {
      synchronized (this.h)
      {
        try
        {
          if (!this.r) {
            break label66;
          }
          throw new IOException("shutdown");
        }
        finally {}
      }
      bool = false;
      break;
    }
    label66:
    int i1 = this.q;
    this.q += 2;
    ev localEv = new ev(i1, this, bool, paramBoolean2, -1, paramList);
    if (localEv.a())
    {
      this.n.put(Integer.valueOf(i1), localEv);
      a(false);
    }
    if (paramInt == 0) {
      this.h.a(bool, paramBoolean2, i1, paramInt, -1, 0, paramList);
    }
    for (;;)
    {
      if (!paramBoolean1) {
        this.h.c();
      }
      return localEv;
      if (this.b) {
        throw new IllegalArgumentException("client streams shouldn't have associated stream IDs");
      }
      this.h.a(paramInt, i1, paramList);
    }
  }
  
  private void a(int paramInt1, dr paramDr, int paramInt2, boolean paramBoolean)
  {
    dx localDx = new dx();
    paramDr.a(paramInt2);
    paramDr.b(localDx, paramInt2);
    if (localDx.l() != paramInt2) {
      throw new IOException(localDx.l() + " != " + paramInt2);
    }
    l.submit(new eu.6(this, "OkHttp %s Push Data[%s]", new Object[] { this.o, Integer.valueOf(paramInt1) }, paramInt1, localDx, paramInt2, paramBoolean));
  }
  
  private void a(int paramInt, List paramList)
  {
    try
    {
      if (this.x.contains(Integer.valueOf(paramInt)))
      {
        a(paramInt, eg.b);
        return;
      }
      this.x.add(Integer.valueOf(paramInt));
      l.submit(new eu.4(this, "OkHttp %s Push Request[%s]", new Object[] { this.o, Integer.valueOf(paramInt) }, paramInt, paramList));
      return;
    }
    finally {}
  }
  
  private void a(int paramInt, List paramList, boolean paramBoolean)
  {
    l.submit(new eu.5(this, "OkHttp %s Push Headers[%s]", new Object[] { this.o, Integer.valueOf(paramInt) }, paramInt, paramList, paramBoolean));
  }
  
  private void a(eg paramEg1, eg paramEg2)
  {
    if ((!k) && (Thread.holdsLock(this))) {
      throw new AssertionError();
    }
    try
    {
      a(paramEg1);
      paramEg1 = null;
    }
    catch (IOException paramEg1)
    {
      for (;;) {}
    }
    for (;;)
    {
      int i2;
      int i1;
      try
      {
        if (this.n.isEmpty()) {
          break label288;
        }
        arrayOfEv = (ev[])this.n.values().toArray(new ev[this.n.size()]);
        this.n.clear();
        a(false);
        if (this.t == null) {
          break label282;
        }
        arrayOfEq = (eq[])this.t.values().toArray(new eq[this.t.size()]);
        this.t = null;
        localObject = paramEg1;
        if (arrayOfEv == null) {
          break label206;
        }
        i2 = arrayOfEv.length;
        i1 = 0;
        if (i1 >= i2) {
          break label203;
        }
        localObject = arrayOfEv[i1];
      }
      finally {}
      try
      {
        ((ev)localObject).a(paramEg2);
        localObject = paramEg1;
      }
      catch (IOException localIOException)
      {
        localObject = paramEg1;
        if (paramEg1 == null) {
          continue;
        }
        localObject = localIOException;
        continue;
      }
      i1 += 1;
      paramEg1 = (eg)localObject;
      continue;
      label203:
      Object localObject = paramEg1;
      label206:
      if (arrayOfEq != null)
      {
        i2 = arrayOfEq.length;
        i1 = 0;
        while (i1 < i2)
        {
          arrayOfEq[i1].c();
          i1 += 1;
        }
      }
      try
      {
        this.g.close();
        paramEg1 = (eg)localObject;
      }
      catch (IOException paramEg1)
      {
        label261:
        for (;;) {}
      }
      try
      {
        this.h.close();
        paramEg2 = paramEg1;
      }
      catch (IOException paramEg2)
      {
        if (paramEg1 == null) {
          break label261;
        }
        paramEg2 = paramEg1;
        break label261;
      }
      if (paramEg2 != null) {
        throw paramEg2;
      }
      return;
      label282:
      eq[] arrayOfEq = null;
      continue;
      label288:
      ev[] arrayOfEv = null;
    }
  }
  
  private void a(boolean paramBoolean)
  {
    if (paramBoolean) {}
    for (;;)
    {
      try
      {
        l1 = System.nanoTime();
        this.s = l1;
        return;
      }
      finally {}
      long l1 = Long.MAX_VALUE;
    }
  }
  
  private void a(boolean paramBoolean, int paramInt1, int paramInt2, eq paramEq)
  {
    l.submit(new eu.3(this, "OkHttp %s ping %08x%08x", new Object[] { this.o, Integer.valueOf(paramInt1), Integer.valueOf(paramInt2) }, paramBoolean, paramInt1, paramInt2, paramEq));
  }
  
  private void b(boolean paramBoolean, int paramInt1, int paramInt2, eq paramEq)
  {
    ei localEi = this.h;
    if (paramEq != null) {}
    try
    {
      paramEq.a();
      this.h.a(paramBoolean, paramInt1, paramInt2);
      return;
    }
    finally {}
  }
  
  /* Error */
  private eq c(int paramInt)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 370	com/chartboost/sdk/impl/eu:t	Ljava/util/Map;
    //   6: ifnull +24 -> 30
    //   9: aload_0
    //   10: getfield 370	com/chartboost/sdk/impl/eu:t	Ljava/util/Map;
    //   13: iload_1
    //   14: invokestatic 235	java/lang/Integer:valueOf	(I)Ljava/lang/Integer;
    //   17: invokeinterface 432 2 0
    //   22: checkcast 372	com/chartboost/sdk/impl/eq
    //   25: astore_2
    //   26: aload_0
    //   27: monitorexit
    //   28: aload_2
    //   29: areturn
    //   30: aconst_null
    //   31: astore_2
    //   32: goto -6 -> 26
    //   35: astore_2
    //   36: aload_0
    //   37: monitorexit
    //   38: aload_2
    //   39: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	40	0	this	eu
    //   0	40	1	paramInt	int
    //   25	7	2	localEq	eq
    //   35	4	2	localObject	Object
    // Exception table:
    //   from	to	target	type
    //   2	26	35	finally
  }
  
  private void c(int paramInt, eg paramEg)
  {
    l.submit(new eu.7(this, "OkHttp %s Push Reset[%s]", new Object[] { this.o, Integer.valueOf(paramInt) }, paramInt, paramEg));
  }
  
  private boolean d(int paramInt)
  {
    return (this.a == cj.a) && (paramInt != 0) && ((paramInt & 0x1) == 0);
  }
  
  public cj a()
  {
    return this.a;
  }
  
  ev a(int paramInt)
  {
    try
    {
      ev localEv = (ev)this.n.get(Integer.valueOf(paramInt));
      return localEv;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public ev a(List paramList, boolean paramBoolean1, boolean paramBoolean2)
  {
    return a(0, paramList, paramBoolean1, paramBoolean2);
  }
  
  void a(int paramInt, long paramLong)
  {
    l.submit(new eu.2(this, "OkHttp Window Update %s stream %d", new Object[] { this.o, Integer.valueOf(paramInt) }, paramInt, paramLong));
  }
  
  void a(int paramInt, eg paramEg)
  {
    l.submit(new eu.1(this, "OkHttp %s stream %d", new Object[] { this.o, Integer.valueOf(paramInt) }, paramInt, paramEg));
  }
  
  public void a(int paramInt, boolean paramBoolean, dx paramDx, long paramLong)
  {
    long l1 = paramLong;
    if (paramLong == 0L)
    {
      this.h.a(paramBoolean, paramInt, paramDx, 0);
      return;
    }
    for (;;)
    {
      try
      {
        int i1 = (int)Math.min(Math.min(l1, this.d), this.i);
        this.d -= i1;
        l1 -= i1;
        ei localEi = this.h;
        if ((paramBoolean) && (l1 == 0L))
        {
          bool = true;
          localEi.a(bool, paramInt, paramDx, i1);
          if (l1 <= 0L) {
            break;
          }
          try
          {
            if (this.d > 0L) {
              continue;
            }
            wait();
            continue;
            paramDx = finally;
          }
          catch (InterruptedException paramDx)
          {
            throw new InterruptedIOException();
          }
        }
        boolean bool = false;
      }
      finally {}
    }
  }
  
  void a(long paramLong)
  {
    this.d += paramLong;
    if (paramLong > 0L) {
      notifyAll();
    }
  }
  
  public void a(eg paramEg)
  {
    int i1;
    synchronized (this.h) {}
  }
  
  ev b(int paramInt)
  {
    try
    {
      ev localEv = (ev)this.n.remove(Integer.valueOf(paramInt));
      if ((localEv != null) && (this.n.isEmpty())) {
        a(true);
      }
      return localEv;
    }
    finally {}
  }
  
  void b(int paramInt, eg paramEg)
  {
    this.h.a(paramInt, paramEg);
  }
  
  /* Error */
  public boolean b()
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 98	com/chartboost/sdk/impl/eu:s	J
    //   6: lstore_1
    //   7: lload_1
    //   8: ldc2_w 402
    //   11: lcmp
    //   12: ifeq +9 -> 21
    //   15: iconst_1
    //   16: istore_3
    //   17: aload_0
    //   18: monitorexit
    //   19: iload_3
    //   20: ireturn
    //   21: iconst_0
    //   22: istore_3
    //   23: goto -6 -> 17
    //   26: astore 4
    //   28: aload_0
    //   29: monitorexit
    //   30: aload 4
    //   32: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	33	0	this	eu
    //   6	2	1	l1	long
    //   16	7	3	bool	boolean
    //   26	5	4	localObject	Object
    // Exception table:
    //   from	to	target	type
    //   2	7	26	finally
  }
  
  public long c()
  {
    try
    {
      long l1 = this.s;
      return l1;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public void close()
  {
    a(eg.a, eg.l);
  }
  
  public void d()
  {
    this.h.c();
  }
  
  public void e()
  {
    this.h.a();
    this.h.a(this.e);
  }
}
