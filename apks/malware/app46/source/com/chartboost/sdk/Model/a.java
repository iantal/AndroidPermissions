package com.chartboost.sdk.Model;

import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.text.TextUtils;
import com.chartboost.sdk.Chartboost;
import com.chartboost.sdk.Libraries.CBLogging;
import com.chartboost.sdk.Libraries.e.a;
import com.chartboost.sdk.b;
import com.chartboost.sdk.d;
import com.chartboost.sdk.d.a;
import com.chartboost.sdk.impl.ab;
import com.chartboost.sdk.impl.ac;
import com.chartboost.sdk.impl.ad;
import com.chartboost.sdk.impl.ae;
import com.chartboost.sdk.impl.as;
import com.chartboost.sdk.impl.at;
import com.chartboost.sdk.impl.av;
import com.chartboost.sdk.impl.bn;
import com.chartboost.sdk.impl.bn.a;
import com.chartboost.sdk.impl.bq;
import java.util.Date;
import java.util.List;

public final class a
{
  public e.a a;
  public Date b;
  public a.b c = a.b.a;
  public a.c d;
  public String e;
  public boolean f;
  public boolean g;
  public boolean h;
  public bn i;
  public boolean j;
  public boolean k = false;
  public boolean l = false;
  public av m;
  public boolean n = false;
  public boolean o = false;
  private d p;
  private a.a q;
  private Runnable r;
  private Runnable s;
  
  public a(a.c paramC, boolean paramBoolean1, String paramString, boolean paramBoolean2)
  {
    this.f = paramBoolean1;
    this.g = paramBoolean1;
    this.h = false;
    this.d = paramC;
    this.j = paramBoolean2;
    this.a = e.a.a;
    this.e = paramString;
    if (this.e == null) {
      this.e = "Default";
    }
  }
  
  public void a()
  {
    if (this.q != null) {
      this.q.b(this);
    }
  }
  
  public void a(e.a paramA, a.a paramA1)
  {
    e.a localA = paramA;
    if (paramA == null) {
      localA = e.a.a();
    }
    this.a = localA;
    this.b = new Date();
    this.c = a.b.a;
    this.q = paramA1;
    if (localA.a("type").equals("native")) {
      switch (a.1.a[this.d.ordinal()])
      {
      }
    }
    for (;;)
    {
      this.p.a(localA);
      return;
      this.p = new ad(this);
      continue;
      this.p = new ae(this);
      continue;
      this.p = new at(this);
      continue;
      this.p = new bq(this);
    }
  }
  
  public void a(CBError.CBImpressionError paramCBImpressionError)
  {
    if (this.q != null) {
      this.q.a(this, paramCBImpressionError);
    }
  }
  
  public void a(Runnable paramRunnable)
  {
    this.r = paramRunnable;
  }
  
  public void a(String paramString, e.a paramA)
  {
    if ((this.c != a.b.c) || (this.l)) {
      return;
    }
    if (paramString != null) {}
    for (;;)
    {
      String str3 = this.a.e("deep-link");
      String str1 = paramString;
      if (!TextUtils.isEmpty(str3)) {}
      try
      {
        boolean bool = a(str3);
        str1 = paramString;
        if (bool) {
          str1 = str3;
        }
      }
      catch (Exception localException)
      {
        for (;;)
        {
          String str2 = paramString;
        }
      }
      this.q.a(this, str1, paramA);
      return;
      paramString = this.a.e("link");
    }
  }
  
  public boolean a(String paramString)
  {
    paramString = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
    return Chartboost.sharedChartboost().getContext().getPackageManager().queryIntentActivities(paramString, 65536).size() > 0;
  }
  
  public void b()
  {
    if (this.q != null) {
      this.q.a(this);
    }
  }
  
  public void b(Runnable paramRunnable)
  {
    this.s = paramRunnable;
  }
  
  public void c()
  {
    if (this.q != null) {
      this.q.c(this);
    }
  }
  
  public void d()
  {
    if (this.q != null) {
      this.q.d(this);
    }
  }
  
  public boolean e()
  {
    this.p.b();
    return this.p.e() != null;
  }
  
  public void f()
  {
    g();
    if ((this.g) && (!this.h))
    {
      this.c = a.b.d;
      return;
    }
    if (this.p != null) {
      this.p.d();
    }
    this.p = null;
  }
  
  public void g()
  {
    if (this.i != null) {
      this.i.d();
    }
    try
    {
      if (this.p.e().getParent() != null) {
        this.i.removeView(this.p.e());
      }
      this.i = null;
      if (this.p != null) {
        this.p.f();
      }
      return;
    }
    catch (Exception localException)
    {
      for (;;)
      {
        CBLogging.b("CBImpression", "Exception raised while cleaning up views", localException);
      }
    }
  }
  
  public CBError.CBImpressionError h()
  {
    return this.p.c();
  }
  
  public bn.a i()
  {
    return this.p.e();
  }
  
  public void j()
  {
    if ((this.p != null) && (this.p.e() != null)) {
      this.p.e().setVisibility(8);
    }
    if (this.r != null)
    {
      this.r.run();
      this.r = null;
    }
  }
  
  public void k()
  {
    this.l = true;
  }
  
  public void l()
  {
    if (this.s != null)
    {
      this.s.run();
      this.s = null;
    }
    this.l = false;
    this.k = false;
  }
  
  public String m()
  {
    return this.a.e("ad_id");
  }
  
  public b n()
  {
    switch (a.1.a[this.d.ordinal()])
    {
    default: 
      return ab.e();
    case 3: 
      return as.e();
    }
    return ac.f();
  }
  
  public void o()
  {
    n().i(this);
  }
  
  public boolean p()
  {
    if (this.p != null) {
      return this.p.j();
    }
    return false;
  }
  
  public void q()
  {
    if (this.p != null) {
      this.p.k();
    }
  }
  
  public void r()
  {
    if (this.p != null) {
      this.p.l();
    }
  }
}
