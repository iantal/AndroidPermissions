package com.inmobi.ads;

import android.os.Handler;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.view.View;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;
import java.util.WeakHashMap;

class q
{
  private static final String a = q.class.getSimpleName();
  @NonNull
  private final ArrayList b;
  private long c = 0L;
  @NonNull
  private final Map d;
  @NonNull
  private final q.b e;
  @Nullable
  private q.d f;
  @NonNull
  private final q.c g;
  @NonNull
  private final Handler h;
  private boolean i;
  @NonNull
  private b.e j;
  
  public q(b.e paramE)
  {
    this(new WeakHashMap(10), new q.b(), new Handler(), paramE);
  }
  
  q(@NonNull Map paramMap, @NonNull q.b paramB, @NonNull Handler paramHandler, @NonNull b.e paramE)
  {
    this.d = paramMap;
    this.e = paramB;
    this.h = paramHandler;
    this.g = new q.c(this);
    this.j = paramE;
    this.b = new ArrayList(50);
  }
  
  private void a(long paramLong)
  {
    Iterator localIterator = this.d.entrySet().iterator();
    while (localIterator.hasNext())
    {
      Map.Entry localEntry = (Map.Entry)localIterator.next();
      if (((q.a)localEntry.getValue()).b < paramLong) {
        this.b.add(localEntry.getKey());
      }
    }
    localIterator = this.b.iterator();
    while (localIterator.hasNext()) {
      a((View)localIterator.next());
    }
    this.b.clear();
  }
  
  void a()
  {
    this.d.clear();
    this.h.removeMessages(0);
    this.i = false;
  }
  
  void a(@NonNull View paramView)
  {
    this.d.remove(paramView);
  }
  
  void a(@NonNull View paramView, int paramInt)
  {
    q.a localA2 = (q.a)this.d.get(paramView);
    q.a localA1 = localA2;
    if (localA2 == null)
    {
      localA1 = new q.a();
      this.d.put(paramView, localA1);
      c();
    }
    localA1.a = paramInt;
    localA1.b = this.c;
    this.c += 1L;
    if (this.c % 50L == 0L) {
      a(this.c - 50L);
    }
  }
  
  void a(@Nullable q.d paramD)
  {
    this.f = paramD;
  }
  
  void b()
  {
    a();
    this.f = null;
  }
  
  void c()
  {
    if (this.i) {
      return;
    }
    this.i = true;
    this.h.postDelayed(this.g, this.j.c());
  }
}
