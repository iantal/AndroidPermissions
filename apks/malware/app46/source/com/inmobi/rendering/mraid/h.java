package com.inmobi.rendering.mraid;

import android.content.Context;
import android.content.Intent;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.webkit.URLUtil;
import android.widget.FrameLayout;
import android.widget.RelativeLayout.LayoutParams;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;
import com.inmobi.rendering.InMobiAdActivity;
import com.inmobi.rendering.RenderView;
import com.inmobi.rendering.RenderingProperties;
import com.inmobi.rendering.RenderingProperties.PlacementType;

public final class h
{
  private static final String a = h.class.getSimpleName();
  private RenderView b;
  private boolean c;
  private ViewGroup d;
  private int e;
  
  public h(RenderView paramRenderView)
  {
    this.b = paramRenderView;
    this.c = false;
  }
  
  private void b()
  {
    FrameLayout localFrameLayout = new FrameLayout(this.b.getContext());
    ViewGroup.LayoutParams localLayoutParams = new ViewGroup.LayoutParams(this.b.getWidth(), this.b.getHeight());
    localFrameLayout.setId(65535);
    this.d.addView(localFrameLayout, this.e, localLayoutParams);
    this.d.removeView(this.b);
  }
  
  public void a()
  {
    if (this.b.getOriginalRenderView() == null)
    {
      View localView = this.d.getRootView().findViewById(65535);
      ((ViewGroup)this.b.getParent()).removeView(this.b);
      ((ViewGroup)localView.getParent()).removeView(localView);
      this.d.addView(this.b, this.e, new RelativeLayout.LayoutParams(this.d.getWidth(), this.d.getHeight()));
      this.b.l();
    }
  }
  
  public void a(String paramString1, String paramString2)
  {
    if (this.d == null)
    {
      this.d = ((ViewGroup)this.b.getParent());
      this.e = this.d.indexOfChild(this.b);
    }
    if (this.b == null)
    {
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Please check if the MRAID processor was initialized correctly.");
      return;
    }
    paramString1 = this.b.getExpandProperties();
    this.c = URLUtil.isValidUrl(paramString2);
    RenderView localRenderView;
    if (this.c)
    {
      localRenderView = new RenderView(this.b.getContext(), new RenderingProperties(RenderingProperties.PlacementType.INLINE));
      localRenderView.a(this.b.getListener(), this.b.getRenderingConfig(), this.b.getMraidConfig());
      localRenderView.setOriginalRenderView(this.b);
      localRenderView.loadUrl(paramString2);
    }
    for (int i = InMobiAdActivity.a(localRenderView);; i = InMobiAdActivity.a(this.b))
    {
      paramString2 = new Intent(this.b.getContext(), InMobiAdActivity.class);
      paramString2.putExtra("com.inmobi.rendering.InMobiAdActivity.EXTRA_AD_ACTIVITY_TYPE", 102);
      paramString2.putExtra("com.inmobi.rendering.InMobiAdActivity.EXTRA_AD_RENDERVIEW_INDEX", i);
      this.b.getContext().startActivity(paramString2);
      if (paramString1 == null) {
        break;
      }
      InMobiAdActivity.a().setUseCustomClose(this.b.d());
      return;
      b();
    }
  }
}
