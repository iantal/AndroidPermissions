package com.inmobi.signals;

import android.content.Context;
import android.os.Build.VERSION;
import android.os.HandlerThread;
import com.inmobi.commons.a.a;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;

class i
{
  private static final String a = i.class.getSimpleName();
  private HandlerThread b = new HandlerThread("DataCollectionHandler");
  private i.a c;
  
  public i()
  {
    this.b.start();
    this.c = new i.a(this.b.getLooper());
  }
  
  public void a()
  {
    for (;;)
    {
      try
      {
        if ((Build.VERSION.SDK_INT < 14) && (!b()))
        {
          Logger.a(Logger.InternalLogLevel.INTERNAL, a, "User data collection can not be started as the data collector is not properly initialized.");
          return;
        }
        if (!this.c.hasMessages(3))
        {
          this.c.removeMessages(2);
          this.c.sendEmptyMessage(1);
        }
        else
        {
          Logger.a(Logger.InternalLogLevel.INTERNAL, a, "User data collection already running.");
        }
      }
      finally {}
    }
  }
  
  public boolean b()
  {
    return a.b().checkCallingOrSelfPermission("android.permission.GET_TASKS") == 0;
  }
  
  public void c()
  {
    this.c.sendEmptyMessageDelayed(2, p.a().e().c() * 1000);
  }
}
