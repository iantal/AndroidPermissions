package com.ltstat.b;

import android.content.Context;
import android.os.Environment;
import android.provider.Settings.Secure;
import android.telephony.TelephonyManager;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.UUID;
import org.apache.http.util.EncodingUtils;

public final class n
{
  private static String a = null;
  
  public static String a(Context paramContext)
  {
    if ((a != null) && (a.matches("\\S{8}-\\S{4}-\\S{4}-\\S{4}-\\S{12}"))) {
      return a;
    }
    if ("mounted".equals(Environment.getExternalStorageState())) {}
    for (String str1 = Environment.getExternalStorageDirectory() + "/.android/juuid.bk";; str1 = paramContext.getFilesDir().getAbsolutePath() + "/temp/juuid.bk")
    {
      String str3 = a(new File(str1));
      String str2;
      if (str3 != null)
      {
        str2 = str3;
        if (str3.matches("\\S{8}-\\S{4}-\\S{4}-\\S{4}-\\S{12}")) {}
      }
      else
      {
        str2 = b(paramContext);
        a(str1, str2);
      }
      a = str2;
      return str2;
    }
  }
  
  private static String a(File paramFile)
  {
    Object localObject3 = null;
    Object localObject2 = null;
    Object localObject1 = localObject3;
    try
    {
      if (paramFile.exists())
      {
        localObject1 = localObject3;
        paramFile = new FileInputStream(paramFile);
        localObject1 = localObject3;
        localObject2 = new byte[paramFile.available()];
        localObject1 = localObject3;
        paramFile.read((byte[])localObject2);
        localObject1 = localObject3;
        localObject2 = EncodingUtils.getString((byte[])localObject2, "UTF-8");
        localObject1 = localObject2;
        paramFile.close();
      }
      return localObject2;
    }
    catch (Exception paramFile)
    {
      paramFile.printStackTrace();
    }
    return localObject1;
  }
  
  private static boolean a(String paramString1, String paramString2)
  {
    try
    {
      paramString1 = new File(paramString1);
      if (!paramString1.exists())
      {
        paramString1.getParentFile().mkdirs();
        paramString1.createNewFile();
      }
      paramString1 = new DataOutputStream(new FileOutputStream(paramString1));
      paramString1.write(paramString2.getBytes("utf-8"));
      paramString1.close();
      return true;
    }
    catch (Exception paramString1)
    {
      paramString1.printStackTrace();
    }
    return false;
  }
  
  private static String b(Context paramContext)
  {
    try
    {
      Object localObject = (TelephonyManager)paramContext.getSystemService("phone");
      String str = ((TelephonyManager)localObject).getDeviceId();
      localObject = ((TelephonyManager)localObject).getSimSerialNumber();
      long l1 = Settings.Secure.getString(paramContext.getContentResolver(), "android_id").hashCode();
      long l2 = str.hashCode();
      paramContext = new UUID(l1, ((String)localObject).hashCode() | l2 << 32).toString();
      return paramContext;
    }
    catch (Exception paramContext) {}
    return "";
  }
}
