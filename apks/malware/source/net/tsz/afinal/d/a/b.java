package net.tsz.afinal.d.a;

import android.text.TextUtils;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import org.apache.http.HttpEntity;

public class b
{
  private boolean a = false;
  
  public b() {}
  
  public Object a(HttpEntity paramHttpEntity, a paramA, String paramString, boolean paramBoolean)
  {
    if ((TextUtils.isEmpty(paramString)) || (paramString.trim().length() == 0)) {
      return null;
    }
    File localFile = new File(paramString);
    if (!localFile.exists()) {
      localFile.createNewFile();
    }
    if (this.a) {
      return localFile;
    }
    long l1;
    if (paramBoolean)
    {
      l1 = localFile.length();
      paramString = new FileOutputStream(paramString, true);
    }
    while (this.a)
    {
      return localFile;
      paramString = new FileOutputStream(paramString);
      l1 = 0L;
    }
    InputStream localInputStream = paramHttpEntity.getContent();
    long l2 = paramHttpEntity.getContentLength() + l1;
    if ((l1 >= l2) || (this.a)) {
      return localFile;
    }
    paramHttpEntity = new byte['Ð€'];
    for (;;)
    {
      int i;
      if ((!this.a) && (l1 < l2))
      {
        i = localInputStream.read(paramHttpEntity, 0, 1024);
        if (i > 0) {}
      }
      else
      {
        paramA.a(l2, l1, true);
        if ((!this.a) || (l1 >= l2)) {
          break;
        }
        throw new IOException("user stop download thread");
      }
      paramString.write(paramHttpEntity, 0, i);
      l1 += i;
      paramA.a(l2, l1, false);
    }
    return localFile;
  }
}
