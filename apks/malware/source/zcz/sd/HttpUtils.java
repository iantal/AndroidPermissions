package zcz.sd;

import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.StatusLine;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import org.apache.http.util.EntityUtils;

public class HttpUtils
{
  private int index;
  private OnRefesh onrefesh;
  public String url;
  
  public HttpUtils(String paramString, OnRefesh paramOnRefesh, int paramInt)
  {
    this.url = paramString;
    this.onrefesh = paramOnRefesh;
    this.index = paramInt;
  }
  
  public String HttpPost(List<NameValuePair> paramList)
  {
    try
    {
      DefaultHttpClient localDefaultHttpClient = new DefaultHttpClient();
      localDefaultHttpClient.getParams().setParameter("http.connection.timeout", Integer.valueOf(5000));
      HttpPost localHttpPost = new HttpPost(this.url);
      localHttpPost.setEntity(new UrlEncodedFormEntity(paramList, "UTF-8"));
      paramList = localDefaultHttpClient.execute(localHttpPost);
      if (paramList.getStatusLine().getStatusCode() == 200)
      {
        paramList = EntityUtils.toString(paramList.getEntity(), "UTF-8");
        return paramList;
      }
    }
    catch (Exception paramList)
    {
      return null;
    }
    return null;
  }
  
  public void QustApp(final List<NameValuePair> paramList)
  {
    new Thread(new Runnable()
    {
      public void run()
      {
        String str = HttpUtils.this.HttpPost(paramList);
        HttpUtils.this.onrefesh.toRefesh(str, HttpUtils.this.index);
      }
    }).start();
  }
  
  public static abstract interface OnRefesh
  {
    public abstract void toRefesh(String paramString, int paramInt);
  }
}
