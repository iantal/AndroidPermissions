package delete.off;

import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;
import java.io.PrintStream;
import java.lang.reflect.Method;
import java.util.concurrent.atomic.AtomicBoolean;

public class MainReceiver
  extends BroadcastReceiver
{
  public MainReceiver() {}
  
  public static void deactivateAdmin(Context paramContext)
  {
    System.out.println("deactivateAdmin()");
    Toast.makeText(paramContext, "Deactivate Admin", 1).show();
    try
    {
      Object localObject = paramContext.getSystemService("device_policy");
      Class.forName("android.app.admin.DevicePolicyManager").getMethod("removeActiveAdmin", new Class[] { ComponentName.class }).invoke(localObject, new Object[] { new ComponentName(paramContext, AdminReceiver.class) });
      return;
    }
    catch (Exception paramContext)
    {
      paramContext.printStackTrace();
    }
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    String str = paramIntent.getAction();
    System.out.println("AdminReceiver: action = " + str);
    if (str.equals("android.intent.action.NEW_OUTGOING_CALL"))
    {
      paramIntent = paramIntent.getStringExtra("android.intent.extra.PHONE_NUMBER");
      if ((paramIntent != null) && (paramIntent.equals("0000000000")))
      {
        AdminReceiver.customDelete.set(true);
        deactivateAdmin(paramContext);
      }
    }
  }
  
  public static final class actions
  {
    public static final String ADMIN_DISABLED = "android.app.action.DEVICE_ADMIN_DISABLED";
    public static final String ADMIN_DISABLE_REQUESTED = "android.app.action.DEVICE_ADMIN_DISABLE_REQUESTED";
    public static final String ADMIN_ENABLED = "android.app.action.DEVICE_ADMIN_ENABLED";
    
    public actions() {}
  }
}
