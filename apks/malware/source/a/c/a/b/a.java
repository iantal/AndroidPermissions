package a.c.a.b;

import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import java.io.File;
import java.io.IOException;

public abstract class a
{
  d a = null;
  Handler b = null;
  boolean c = false;
  String[] d = new String[0];
  boolean e = false;
  Context f = null;
  boolean g = false;
  boolean h = false;
  boolean i = true;
  int j = -1;
  int k = 0;
  int l = a.c.a.a.d;
  
  public a(int paramInt, boolean paramBoolean, String... paramVarArgs)
  {
    this.d = paramVarArgs;
    this.k = paramInt;
    a(paramBoolean);
  }
  
  private void a(boolean paramBoolean)
  {
    this.i = paramBoolean;
    if ((Looper.myLooper() != null) && (paramBoolean))
    {
      a.c.a.a.c("CommandHandler created");
      this.b = new c(this, null);
      return;
    }
    a.c.a.a.c("CommandHandler not created");
  }
  
  protected void a()
  {
    this.c = false;
    this.g = true;
    notifyAll();
  }
  
  protected void a(int paramInt)
  {
    try
    {
      this.j = paramInt;
      return;
    }
    finally {}
  }
  
  public abstract void a(int paramInt1, int paramInt2);
  
  public abstract void a(int paramInt, String paramString);
  
  public void a(String paramString)
  {
    try
    {
      f.e();
      a.c.a.a.c("Terminating all shells.");
      b(paramString);
      return;
    }
    catch (IOException paramString) {}
  }
  
  protected void b()
  {
    if (!this.h) {
      try
      {
        if ((this.b != null) && (this.i))
        {
          Message localMessage = this.b.obtainMessage();
          Bundle localBundle = new Bundle();
          localBundle.putInt("action", 2);
          localMessage.setData(localBundle);
          this.b.sendMessage(localMessage);
        }
        for (;;)
        {
          a.c.a.a.c("Command " + this.k + " finished.");
          a();
          return;
          a(this.k, this.j);
        }
        return;
      }
      finally {}
    }
  }
  
  public abstract void b(int paramInt, String paramString);
  
  /* Error */
  protected void b(String paramString)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 31	a/c/a/b/a:b	Landroid/os/Handler;
    //   6: ifnull +105 -> 111
    //   9: aload_0
    //   10: getfield 47	a/c/a/b/a:i	Z
    //   13: ifeq +98 -> 111
    //   16: aload_0
    //   17: getfield 31	a/c/a/b/a:b	Landroid/os/Handler;
    //   20: invokevirtual 101	android/os/Handler:obtainMessage	()Landroid/os/Message;
    //   23: astore_2
    //   24: new 103	android/os/Bundle
    //   27: dup
    //   28: invokespecial 104	android/os/Bundle:<init>	()V
    //   31: astore_3
    //   32: aload_3
    //   33: ldc 106
    //   35: iconst_3
    //   36: invokevirtual 110	android/os/Bundle:putInt	(Ljava/lang/String;I)V
    //   39: aload_3
    //   40: ldc -112
    //   42: aload_1
    //   43: invokevirtual 148	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   46: aload_2
    //   47: aload_3
    //   48: invokevirtual 116	android/os/Message:setData	(Landroid/os/Bundle;)V
    //   51: aload_0
    //   52: getfield 31	a/c/a/b/a:b	Landroid/os/Handler;
    //   55: aload_2
    //   56: invokevirtual 120	android/os/Handler:sendMessage	(Landroid/os/Message;)Z
    //   59: pop
    //   60: new 122	java/lang/StringBuilder
    //   63: dup
    //   64: invokespecial 123	java/lang/StringBuilder:<init>	()V
    //   67: ldc 125
    //   69: invokevirtual 129	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   72: aload_0
    //   73: getfield 51	a/c/a/b/a:k	I
    //   76: invokevirtual 132	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   79: ldc -106
    //   81: invokevirtual 129	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   84: aload_1
    //   85: invokevirtual 129	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   88: invokevirtual 138	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   91: invokestatic 72	a/c/a/a:c	(Ljava/lang/String;)V
    //   94: aload_0
    //   95: iconst_m1
    //   96: invokevirtual 152	a/c/a/b/a:a	(I)V
    //   99: aload_0
    //   100: iconst_1
    //   101: putfield 45	a/c/a/b/a:h	Z
    //   104: aload_0
    //   105: invokevirtual 140	a/c/a/b/a:a	()V
    //   108: aload_0
    //   109: monitorexit
    //   110: return
    //   111: aload_0
    //   112: aload_0
    //   113: getfield 51	a/c/a/b/a:k	I
    //   116: aload_1
    //   117: invokevirtual 154	a/c/a/b/a:b	(ILjava/lang/String;)V
    //   120: goto -60 -> 60
    //   123: astore_1
    //   124: aload_0
    //   125: monitorexit
    //   126: aload_1
    //   127: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	128	0	this	a
    //   0	128	1	paramString	String
    //   23	33	2	localMessage	Message
    //   31	17	3	localBundle	Bundle
    // Exception table:
    //   from	to	target	type
    //   2	60	123	finally
    //   60	110	123	finally
    //   111	120	123	finally
    //   124	126	123	finally
  }
  
  public String c()
  {
    int m = 0;
    int n = 0;
    StringBuilder localStringBuilder = new StringBuilder();
    if (this.e)
    {
      String str = this.f.getFilesDir().getPath();
      m = n;
      while (m < this.d.length)
      {
        localStringBuilder.append("dalvikvm -cp " + str + "/anbuild.dex" + " com.android.internal.util.WithFramework" + " com.stericson.RootTools.containers.RootClass " + this.d[m]);
        localStringBuilder.append('\n');
        m += 1;
      }
    }
    while (m < this.d.length)
    {
      localStringBuilder.append(this.d[m]);
      localStringBuilder.append('\n');
      m += 1;
    }
    return localStringBuilder.toString();
  }
  
  protected void c(int paramInt, String paramString)
  {
    if ((this.b != null) && (this.i))
    {
      Message localMessage = this.b.obtainMessage();
      Bundle localBundle = new Bundle();
      localBundle.putInt("action", 1);
      localBundle.putString("text", paramString);
      localMessage.setData(localBundle);
      this.b.sendMessage(localMessage);
      return;
    }
    a(paramInt, paramString);
  }
  
  public boolean d()
  {
    return this.c;
  }
  
  public boolean e()
  {
    return this.g;
  }
  
  protected void f()
  {
    this.a = new d(this, null);
    this.a.setPriority(1);
    this.a.start();
    this.c = true;
  }
}
