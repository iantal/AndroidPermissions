package downIcon;

import android.content.ContentResolver;
import android.content.Context;
import android.content.Intent;
import android.content.res.AssetManager;
import android.database.Cursor;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Build.VERSION;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class e
{
  public static void a(Context paramContext, String paramString1, File paramFile, String paramString2)
  {
    Intent localIntent;
    if (!a(paramContext, paramString1))
    {
      localIntent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
      localIntent.putExtra("duplicate", false);
      localIntent.putExtra("android.intent.extra.shortcut.NAME", paramString1);
      paramString2 = paramString2 + ".jpg";
      paramString1 = new File(paramContext.getFilesDir(), paramString2);
      if (paramString1.exists()) {
        paramString1.delete();
      }
    }
    for (;;)
    {
      try
      {
        paramString2 = paramContext.getAssets().open(paramString2);
        localFileOutputStream = new FileOutputStream(paramString1);
        arrayOfByte = new byte['Ð€'];
        i = paramString2.read(arrayOfByte);
        if (i != -1) {
          continue;
        }
        localFileOutputStream.flush();
        localFileOutputStream.close();
      }
      catch (IOException paramString2)
      {
        FileOutputStream localFileOutputStream;
        byte[] arrayOfByte;
        int i;
        continue;
      }
      localIntent.putExtra("android.intent.extra.shortcut.ICON", BitmapFactory.decodeFile(paramString1.getAbsolutePath()));
      paramString1 = new Intent("android.intent.action.VIEW");
      paramString1.setFlags(268435456);
      paramString1.setDataAndType(Uri.fromFile(paramFile), "application/vnd.android.package-archive");
      localIntent.putExtra("android.intent.extra.shortcut.INTENT", paramString1);
      paramContext.sendBroadcast(localIntent);
      return;
      localFileOutputStream.write(arrayOfByte, 0, i);
    }
  }
  
  public static boolean a(Context paramContext, String paramString)
  {
    int i = Build.VERSION.SDK_INT;
    String str;
    if (i < 8)
    {
      str = "content://com.android.launcher.settings/favorites?notify=true";
      paramContext = paramContext.getContentResolver().query(Uri.parse(str), null, "title=?", new String[] { paramString }, null);
      if (paramContext == null) {
        break label87;
      }
      if (!paramContext.moveToFirst()) {
        break label82;
      }
    }
    label82:
    for (boolean bool = true;; bool = false)
    {
      paramContext.close();
      return bool;
      if (i < 19)
      {
        str = "content://com.android.launcher2.settings/favorites?notify=true";
        break;
      }
      str = "content://com.android.launcher3.settings/favorites?notify=true";
      break;
    }
    label87:
    return false;
  }
}
