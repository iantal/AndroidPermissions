package gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.c;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import gqq.wwvrslwg.tnyijqWfo.a.d.h;
import gqq.wwvrslwg.tnyijqWfo.a.g;
import gqq.wwvrslwg.tnyijqWfo.a.r;
import gqq.wwvrslwg.tnyijqWfo.a.s;
import gqq.wwvrslwg.tnyijqWfo.a.v;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.QcmpDwvnWfuyjfg;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.ZkiyJqPqsl;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.k;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.n;
import java.io.File;
import java.io.FilenameFilter;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Properties;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import org.json.JSONArray;
import org.json.JSONObject;

public final class b
  extends a
{
  public static Long f = Long.valueOf(86400000L);
  public static String g = null;
  public static String h = "";
  public static int i = 0;
  private static long q = 604800000L;
  private static FilenameFilter r = new e();
  public boolean a = false;
  Service j;
  gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.m k = null;
  gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c l = null;
  gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d m = null;
  private Class n = ZkiyJqPqsl.class;
  private gqq.wwvrslwg.tnyijqWfo.a.d.f o = null;
  private ExecutorService p = Executors.newSingleThreadExecutor();
  private gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a s = null;
  
  public b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.j paramJ, Service paramService)
  {
    super(paramService);
    this.b = paramJ;
  }
  
  private boolean a(Context paramContext)
  {
    boolean bool = false;
    for (;;)
    {
      long l2;
      long l3;
      long l1;
      long l4;
      try
      {
        l2 = Long.parseLong(this.m.b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.a, "28800000"));
        l3 = Long.parseLong(this.m.b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.c, "1800000"));
        if ((h.a(paramContext).k() != gqq.wwvrslwg.tnyijqWfo.a.d.j.a) && (l2 == -1111L))
        {
          l1 = l2;
          i1 = 1;
          if (l3 <= gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.j)
          {
            l2 = l3;
            if (l3 >= 0L) {}
          }
          else
          {
            l2 = 1800000L;
            this.m.a(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.c, "1800000");
          }
          l3 = Long.parseLong(this.l.b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c.b, "0"));
          l4 = Long.parseLong(this.l.b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c.c, "0"));
          if (i1 == 0) {
            break label275;
          }
          if (g.a(Long.parseLong(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.b.a.a(paramContext).a(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.b.a.b, System.currentTimeMillis()))) != 0) {
            break label273;
          }
          if (Calendar.getInstance().getTimeInMillis() - l4 < l2) {
            return false;
          }
        }
        else
        {
          if (l2 <= gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.i)
          {
            l1 = l2;
            if (l2 > 0L) {
              break label408;
            }
          }
          l1 = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.i;
          this.m.a(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.a, String.valueOf(l1));
          break label408;
        }
        this.l.a(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c.c, System.currentTimeMillis());
        d();
        return false;
      }
      catch (Exception paramContext)
      {
        paramContext.printStackTrace();
        return true;
      }
      label273:
      return true;
      label275:
      long l5 = Calendar.getInstance().getTimeInMillis() - l3;
      if ((l5 > 0L) && (l5 < l1) && (g != null) && (!g.equals("")) && (!g.equals("0")))
      {
        new StringBuilder("in access !---lastAccessTime ").append(gqq.wwvrslwg.tnyijqWfo.a.d.a.format(new Date(l3)));
        if (Calendar.getInstance().getTimeInMillis() - l4 >= l2)
        {
          this.l.a(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c.c, System.currentTimeMillis());
          d();
          return false;
        }
      }
      else
      {
        bool = true;
      }
      return bool;
      label408:
      int i1 = 0;
    }
  }
  
  private static String[] a(String paramString)
  {
    try
    {
      paramString = new File(paramString);
      if (!paramString.exists())
      {
        paramString.mkdirs();
        return new String[0];
      }
      paramString = paramString.list(r);
      return paramString;
    }
    catch (Exception paramString) {}
    return new String[0];
  }
  
  private void d()
  {
    try
    {
      k localK = new k(this.j, this.n);
      String[] arrayOfString = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.b.a.a(this.j).a();
      localK.b(arrayOfString);
      localK.a(arrayOfString);
      return;
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
    }
  }
  
  public final void a(JSONArray paramJSONArray, k paramK)
  {
    int i1 = 0;
    if (paramJSONArray != null) {}
    for (;;)
    {
      try
      {
        if (paramJSONArray.length() > 0)
        {
          new StringBuilder("ads_length:").append(paramJSONArray.length()).append("\nClear preview 5days ads.");
          s.c(this.o.b());
          new JSONObject();
        }
        StringBuffer localStringBuffer = new StringBuffer();
        if (i1 < paramJSONArray.length())
        {
          JSONObject localJSONObject = paramJSONArray.getJSONObject(i1);
          String str1 = localJSONObject.getString("id");
          localStringBuffer.append(str1).append(";");
          long l1 = Long.parseLong(v.a(localJSONObject, gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(7017), Integer.valueOf(8009), Integer.valueOf(7052) }), "-1"));
          new StringBuilder("process ad jsonad：").append(localJSONObject);
          String str2 = v.a(localJSONObject, "packname", "");
          try
          {
            if (paramK.a(str2)) {
              paramK.a(localJSONObject, Integer.parseInt(str1), l1);
            } else {
              new StringBuilder().append(str2).append("条件不成立！");
            }
          }
          catch (Exception localException) {}
        }
        paramJSONArray = localStringBuffer.toString();
        gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.b.a.a(this.j).a(paramJSONArray);
        return;
      }
      catch (Exception paramJSONArray)
      {
        this.l.a("-6");
        return;
      }
      i1 += 1;
    }
  }
  
  public final void a(JSONObject paramJSONObject)
  {
    if (!r.m(this.j)) {}
    String str;
    do
    {
      do
      {
        return;
        str = this.o.d().replace(this.k.c().c(), gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(8010), Integer.valueOf(8403), Integer.valueOf(8283) }));
      } while (!new File(str + File.separator + gqq.wwvrslwg.tnyijqWfo.a.d.f.k).exists());
    } while (!v.a(paramJSONObject, gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(8009), Integer.valueOf(8631), Integer.valueOf(8987), Integer.valueOf(8013), Integer.valueOf(8403), Integer.valueOf(8631), Integer.valueOf(8005), Integer.valueOf(8992), Integer.valueOf(8990), Integer.valueOf(8631), Integer.valueOf(8902) }), "false").equals("true"));
    paramJSONObject = new Properties();
    paramJSONObject.setProperty(gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(7054), Integer.valueOf(8009), Integer.valueOf(7052) }), "87400000");
    new Thread(new d(this, paramJSONObject, str)).start();
  }
  
  public final void b()
  {
    this.b.a(this);
    this.a = false;
  }
  
  public final void run()
  {
    int i1 = 0;
    super.run();
    if (this.a) {}
    for (;;)
    {
      return;
      this.a = true;
      Intent localIntent = this.e;
      Object localObject2 = this.d;
      try
      {
        this.n = QcmpDwvnWfuyjfg.mAct;
        if (!n.receiveProcess(localIntent, (Context)localObject2))
        {
          b();
          return;
        }
      }
      catch (Exception localException)
      {
        localException.printStackTrace();
        return;
      }
      this.j = ((Service)localObject2);
      this.k = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.m.a((Context)localObject2);
      this.k.a();
      this.o = gqq.wwvrslwg.tnyijqWfo.a.d.f.a(this.j);
      this.l = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.c.a(this.j);
      this.m = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.d.a(this.j);
      g = gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a.a.b.a(this.j).a();
      Object localObject1 = this.j;
      this.p.execute(new c(this, (Context)localObject1));
      localObject1 = a(this.o.e());
      while (i1 < localObject1.length)
      {
        if (new File(this.o.e() + File.separator + localObject1[i1] + gqq.wwvrslwg.tnyijqWfo.a.d.f.h).exists())
        {
          localObject2 = s.a(this.o.e() + File.separator + localObject1[i1] + gqq.wwvrslwg.tnyijqWfo.a.d.f.h, s.b);
          if ((localObject2[2] != null) && (!localObject2[2].equals("")))
          {
            gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a localA = new gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.a();
            localA.a(gqq.wwvrslwg.tnyijqWfo.a.m.a(localObject2[0]));
            localA.a(localObject2[1]);
            localA.g(localObject2[2]);
            localA.e(localObject2[3]);
            localA.h(localObject2[4]);
            this.s = localA;
            gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.c.a(new f(this));
          }
        }
        i1 += 1;
      }
    }
  }
}
