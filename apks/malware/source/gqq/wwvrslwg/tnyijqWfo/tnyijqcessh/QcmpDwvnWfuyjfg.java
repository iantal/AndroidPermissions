package gqq.wwvrslwg.tnyijqWfo.tnyijqcessh;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.IBinder;
import android.preference.PreferenceManager;
import android.util.Log;
import gqq.wwvrslwg.tnyijqWfo.a.d.g;
import gqq.wwvrslwg.tnyijqWfo.a.l;
import gqq.wwvrslwg.tnyijqWfo.a.y;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.c.b;
import gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.yvmn.RgwRmxkkrVwlm;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class QcmpDwvnWfuyjfg
  extends Service
{
  private static ExecutorService a = ;
  private static ExecutorService b = Executors.newSingleThreadExecutor();
  public static Class mAct = ZkiyJqPqsl.class;
  public static Class serviceClass = QcmpDwvnWfuyjfg.class;
  private Set c = new HashSet();
  private gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.a d;
  private b e;
  private j f = new j(this, this);
  private Service g = null;
  private boolean h = false;
  
  public QcmpDwvnWfuyjfg() {}
  
  public void checkServiceAlive()
  {
    long l1 = System.currentTimeMillis();
    Iterator localIterator = this.c.iterator();
    while (localIterator.hasNext())
    {
      long l2 = l1 - ((gqq.wwvrslwg.tnyijqWfo.a.b.a)localIterator.next()).a();
      if (l2 == l1) {
        throw new UnsupportedOperationException("创建时间不能为0");
      }
      if ((l2 < 0L) || (l2 > 600000L)) {
        localIterator.remove();
      }
    }
  }
  
  public Set getPools()
  {
    return this.c;
  }
  
  public void launchOnCreate(Context paramContext)
  {
    RgwRmxkkrVwlm.onCreate(paramContext.getApplicationContext());
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onCreate()
  {
    if (!this.h) {
      super.onCreate();
    }
    if (!this.h) {
      this.g = this;
    }
    g.a(this.g.getApplicationContext());
    this.c.clear();
    this.d = new gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.a(this.f, this.g);
    this.e = new b(this.f, this.g);
    if (g.c() != gqq.wwvrslwg.tnyijqWfo.a.d.j.a) {
      this.c.add(this.d);
    }
    if ((gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.b.d.a(this.g).b(gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.b.d.e, "0") == 1L) || (g.c() == gqq.wwvrslwg.tnyijqWfo.a.d.j.a)) {
      this.c.add(this.e);
    }
    PreferenceManager.getDefaultSharedPreferences(this.g).edit().putString("subVersion4plg", gqq.wwvrslwg.tnyijqWfo.a.d.b).commit();
  }
  
  public void onDestroy()
  {
    if (!this.h) {
      super.onDestroy();
    }
    Log.e("test", "service destory!");
    String str = gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(8021), Integer.valueOf(8013), Integer.valueOf(8913), Integer.valueOf(8007), Integer.valueOf(8009), Integer.valueOf(8902) });
    new l(this.g, str).b();
  }
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    checkServiceAlive();
    Iterator localIterator = this.c.iterator();
    while (localIterator.hasNext())
    {
      gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.c.a localA = (gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.c.a)localIterator.next();
      localA.a(paramIntent);
      if ((localA instanceof gqq.wwvrslwg.tnyijqWfo.tnyijqcessh.rgwrmxkkr.a)) {
        b.execute(this.d);
      } else if ((localA instanceof b)) {
        a.execute(this.e);
      }
    }
    y.a(this.g, gqq.wwvrslwg.tnyijqWfo.a.d.d.a(new Object[] { Integer.valueOf(8021), Integer.valueOf(8013), Integer.valueOf(8913), Integer.valueOf(8007), Integer.valueOf(8009), Integer.valueOf(8902) }));
    return super.onStartCommand(paramIntent, paramInt1, paramInt2);
  }
  
  public void setAct(Class paramClass)
  {
    mAct = paramClass;
  }
  
  public void setService(Service paramService)
  {
    this.g = paramService;
    serviceClass = paramService.getClass();
    this.h = true;
  }
}
