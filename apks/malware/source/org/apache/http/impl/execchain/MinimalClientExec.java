package org.apache.http.impl.execchain;

import java.net.URI;
import java.net.URISyntaxException;
import org.apache.http.ConnectionReuseStrategy;
import org.apache.http.HttpRequestInterceptor;
import org.apache.http.ProtocolException;
import org.apache.http.RequestLine;
import org.apache.http.annotation.Immutable;
import org.apache.http.client.methods.HttpRequestWrapper;
import org.apache.http.client.protocol.RequestClientConnControl;
import org.apache.http.client.utils.URIUtilsHC4;
import org.apache.http.conn.ConnectionKeepAliveStrategy;
import org.apache.http.conn.HttpClientConnectionManager;
import org.apache.http.conn.routing.HttpRoute;
import org.apache.http.protocol.HttpProcessor;
import org.apache.http.protocol.HttpRequestExecutor;
import org.apache.http.protocol.ImmutableHttpProcessor;
import org.apache.http.protocol.RequestContentHC4;
import org.apache.http.protocol.RequestTargetHostHC4;
import org.apache.http.protocol.RequestUserAgentHC4;
import org.apache.http.util.Args;
import org.apache.http.util.VersionInfoHC4;

@Immutable
public class MinimalClientExec
  implements ClientExecChain
{
  private final HttpClientConnectionManager connManager;
  private final HttpProcessor httpProcessor;
  private final ConnectionKeepAliveStrategy keepAliveStrategy;
  private final HttpRequestExecutor requestExecutor;
  private final ConnectionReuseStrategy reuseStrategy;
  
  public MinimalClientExec(HttpRequestExecutor paramHttpRequestExecutor, HttpClientConnectionManager paramHttpClientConnectionManager, ConnectionReuseStrategy paramConnectionReuseStrategy, ConnectionKeepAliveStrategy paramConnectionKeepAliveStrategy)
  {
    Args.notNull(paramHttpRequestExecutor, "HTTP request executor");
    Args.notNull(paramHttpClientConnectionManager, "Client connection manager");
    Args.notNull(paramConnectionReuseStrategy, "Connection reuse strategy");
    Args.notNull(paramConnectionKeepAliveStrategy, "Connection keep alive strategy");
    this.httpProcessor = new ImmutableHttpProcessor(new HttpRequestInterceptor[] { new RequestContentHC4(), new RequestTargetHostHC4(), new RequestClientConnControl(), new RequestUserAgentHC4(VersionInfoHC4.getUserAgent("Apache-HttpClient", "org.apache.http.client", getClass())) });
    this.requestExecutor = paramHttpRequestExecutor;
    this.connManager = paramHttpClientConnectionManager;
    this.reuseStrategy = paramConnectionReuseStrategy;
    this.keepAliveStrategy = paramConnectionKeepAliveStrategy;
  }
  
  static void rewriteRequestURI(HttpRequestWrapper paramHttpRequestWrapper, HttpRoute paramHttpRoute)
    throws ProtocolException
  {
    try
    {
      paramHttpRoute = paramHttpRequestWrapper.getURI();
      if (paramHttpRoute != null)
      {
        if (paramHttpRoute.isAbsolute()) {}
        for (paramHttpRoute = URIUtilsHC4.rewriteURI(paramHttpRoute, null, true);; paramHttpRoute = URIUtilsHC4.rewriteURI(paramHttpRoute))
        {
          paramHttpRequestWrapper.setURI(paramHttpRoute);
          return;
        }
      }
      return;
    }
    catch (URISyntaxException paramHttpRoute)
    {
      throw new ProtocolException("Invalid URI: " + paramHttpRequestWrapper.getRequestLine().getUri(), paramHttpRoute);
    }
  }
  
  /* Error */
  public org.apache.http.client.methods.CloseableHttpResponse execute(HttpRoute paramHttpRoute, HttpRequestWrapper paramHttpRequestWrapper, org.apache.http.client.protocol.HttpClientContext paramHttpClientContext, org.apache.http.client.methods.HttpExecutionAware paramHttpExecutionAware)
    throws java.io.IOException, org.apache.http.HttpException
  {
    // Byte code:
    //   0: aload_1
    //   1: ldc -101
    //   3: invokestatic 30	org/apache/http/util/Args:notNull	(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
    //   6: pop
    //   7: aload_2
    //   8: ldc -99
    //   10: invokestatic 30	org/apache/http/util/Args:notNull	(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
    //   13: pop
    //   14: aload_3
    //   15: ldc -97
    //   17: invokestatic 30	org/apache/http/util/Args:notNull	(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
    //   20: pop
    //   21: aload_2
    //   22: aload_1
    //   23: invokestatic 161	org/apache/http/impl/execchain/MinimalClientExec:rewriteRequestURI	(Lorg/apache/http/client/methods/HttpRequestWrapper;Lorg/apache/http/conn/routing/HttpRoute;)V
    //   26: aload_0
    //   27: getfield 77	org/apache/http/impl/execchain/MinimalClientExec:connManager	Lorg/apache/http/conn/HttpClientConnectionManager;
    //   30: aload_1
    //   31: aconst_null
    //   32: invokeinterface 167 3 0
    //   37: astore 9
    //   39: aload 4
    //   41: ifnull +40 -> 81
    //   44: aload 4
    //   46: invokeinterface 172 1 0
    //   51: ifeq +21 -> 72
    //   54: aload 9
    //   56: invokeinterface 177 1 0
    //   61: pop
    //   62: new 179	org/apache/http/impl/execchain/RequestAbortedException
    //   65: dup
    //   66: ldc -75
    //   68: invokespecial 182	org/apache/http/impl/execchain/RequestAbortedException:<init>	(Ljava/lang/String;)V
    //   71: athrow
    //   72: aload 4
    //   74: aload 9
    //   76: invokeinterface 186 2 0
    //   81: aload_3
    //   82: invokevirtual 192	org/apache/http/client/protocol/HttpClientContext:getRequestConfig	()Lorg/apache/http/client/config/RequestConfig;
    //   85: astore 8
    //   87: aload 8
    //   89: invokevirtual 198	org/apache/http/client/config/RequestConfig:getConnectionRequestTimeout	()I
    //   92: istore 5
    //   94: iload 5
    //   96: ifle +86 -> 182
    //   99: iload 5
    //   101: i2l
    //   102: lstore 6
    //   104: aload 9
    //   106: lload 6
    //   108: getstatic 204	java/util/concurrent/TimeUnit:MILLISECONDS	Ljava/util/concurrent/TimeUnit;
    //   111: invokeinterface 208 4 0
    //   116: astore 10
    //   118: new 210	org/apache/http/impl/execchain/ConnectionHolder
    //   121: dup
    //   122: aload_0
    //   123: getfield 77	org/apache/http/impl/execchain/MinimalClientExec:connManager	Lorg/apache/http/conn/HttpClientConnectionManager;
    //   126: aload 10
    //   128: invokespecial 213	org/apache/http/impl/execchain/ConnectionHolder:<init>	(Lorg/apache/http/conn/HttpClientConnectionManager;Lorg/apache/http/HttpClientConnection;)V
    //   131: astore 9
    //   133: aload 4
    //   135: ifnull +105 -> 240
    //   138: aload 4
    //   140: invokeinterface 172 1 0
    //   145: ifeq +86 -> 231
    //   148: aload 9
    //   150: invokevirtual 216	org/apache/http/impl/execchain/ConnectionHolder:close	()V
    //   153: new 179	org/apache/http/impl/execchain/RequestAbortedException
    //   156: dup
    //   157: ldc -75
    //   159: invokespecial 182	org/apache/http/impl/execchain/RequestAbortedException:<init>	(Ljava/lang/String;)V
    //   162: athrow
    //   163: astore_1
    //   164: new 218	java/io/InterruptedIOException
    //   167: dup
    //   168: ldc -36
    //   170: invokespecial 221	java/io/InterruptedIOException:<init>	(Ljava/lang/String;)V
    //   173: astore_2
    //   174: aload_2
    //   175: aload_1
    //   176: invokevirtual 225	java/io/InterruptedIOException:initCause	(Ljava/lang/Throwable;)Ljava/lang/Throwable;
    //   179: pop
    //   180: aload_2
    //   181: athrow
    //   182: lconst_0
    //   183: lstore 6
    //   185: goto -81 -> 104
    //   188: astore_1
    //   189: invokestatic 231	java/lang/Thread:currentThread	()Ljava/lang/Thread;
    //   192: invokevirtual 234	java/lang/Thread:interrupt	()V
    //   195: new 179	org/apache/http/impl/execchain/RequestAbortedException
    //   198: dup
    //   199: ldc -75
    //   201: aload_1
    //   202: invokespecial 235	org/apache/http/impl/execchain/RequestAbortedException:<init>	(Ljava/lang/String;Ljava/lang/Throwable;)V
    //   205: athrow
    //   206: astore_2
    //   207: aload_2
    //   208: invokevirtual 239	java/util/concurrent/ExecutionException:getCause	()Ljava/lang/Throwable;
    //   211: astore_3
    //   212: aload_3
    //   213: astore_1
    //   214: aload_3
    //   215: ifnonnull +5 -> 220
    //   218: aload_2
    //   219: astore_1
    //   220: new 179	org/apache/http/impl/execchain/RequestAbortedException
    //   223: dup
    //   224: ldc -15
    //   226: aload_1
    //   227: invokespecial 235	org/apache/http/impl/execchain/RequestAbortedException:<init>	(Ljava/lang/String;Ljava/lang/Throwable;)V
    //   230: athrow
    //   231: aload 4
    //   233: aload 9
    //   235: invokeinterface 186 2 0
    //   240: aload 10
    //   242: invokeinterface 246 1 0
    //   247: ifne +47 -> 294
    //   250: aload 8
    //   252: invokevirtual 249	org/apache/http/client/config/RequestConfig:getConnectTimeout	()I
    //   255: istore 5
    //   257: aload_0
    //   258: getfield 77	org/apache/http/impl/execchain/MinimalClientExec:connManager	Lorg/apache/http/conn/HttpClientConnectionManager;
    //   261: astore 4
    //   263: iload 5
    //   265: ifle +320 -> 585
    //   268: aload 4
    //   270: aload 10
    //   272: aload_1
    //   273: iload 5
    //   275: aload_3
    //   276: invokeinterface 253 5 0
    //   281: aload_0
    //   282: getfield 77	org/apache/http/impl/execchain/MinimalClientExec:connManager	Lorg/apache/http/conn/HttpClientConnectionManager;
    //   285: aload 10
    //   287: aload_1
    //   288: aload_3
    //   289: invokeinterface 257 4 0
    //   294: aload 8
    //   296: invokevirtual 260	org/apache/http/client/config/RequestConfig:getSocketTimeout	()I
    //   299: istore 5
    //   301: iload 5
    //   303: iflt +12 -> 315
    //   306: aload 10
    //   308: iload 5
    //   310: invokeinterface 264 2 0
    //   315: aconst_null
    //   316: astore 8
    //   318: aload_2
    //   319: invokevirtual 268	org/apache/http/client/methods/HttpRequestWrapper:getOriginal	()Lorg/apache/http/HttpRequest;
    //   322: astore 11
    //   324: aload 8
    //   326: astore 4
    //   328: aload 11
    //   330: instanceof 270
    //   333: ifeq +51 -> 384
    //   336: aload 11
    //   338: checkcast 270	org/apache/http/client/methods/HttpUriRequest
    //   341: invokeinterface 271 1 0
    //   346: astore 11
    //   348: aload 8
    //   350: astore 4
    //   352: aload 11
    //   354: invokevirtual 100	java/net/URI:isAbsolute	()Z
    //   357: ifeq +27 -> 384
    //   360: new 273	org/apache/http/HttpHost
    //   363: dup
    //   364: aload 11
    //   366: invokevirtual 276	java/net/URI:getHost	()Ljava/lang/String;
    //   369: aload 11
    //   371: invokevirtual 279	java/net/URI:getPort	()I
    //   374: aload 11
    //   376: invokevirtual 282	java/net/URI:getScheme	()Ljava/lang/String;
    //   379: invokespecial 285	org/apache/http/HttpHost:<init>	(Ljava/lang/String;ILjava/lang/String;)V
    //   382: astore 4
    //   384: aload 4
    //   386: astore 8
    //   388: aload 4
    //   390: ifnonnull +9 -> 399
    //   393: aload_1
    //   394: invokevirtual 291	org/apache/http/conn/routing/HttpRoute:getTargetHost	()Lorg/apache/http/HttpHost;
    //   397: astore 8
    //   399: aload_3
    //   400: ldc_w 293
    //   403: aload 8
    //   405: invokevirtual 297	org/apache/http/client/protocol/HttpClientContext:setAttribute	(Ljava/lang/String;Ljava/lang/Object;)V
    //   408: aload_3
    //   409: ldc_w 299
    //   412: aload_2
    //   413: invokevirtual 297	org/apache/http/client/protocol/HttpClientContext:setAttribute	(Ljava/lang/String;Ljava/lang/Object;)V
    //   416: aload_3
    //   417: ldc_w 301
    //   420: aload 10
    //   422: invokevirtual 297	org/apache/http/client/protocol/HttpClientContext:setAttribute	(Ljava/lang/String;Ljava/lang/Object;)V
    //   425: aload_3
    //   426: ldc_w 303
    //   429: aload_1
    //   430: invokevirtual 297	org/apache/http/client/protocol/HttpClientContext:setAttribute	(Ljava/lang/String;Ljava/lang/Object;)V
    //   433: aload_0
    //   434: getfield 73	org/apache/http/impl/execchain/MinimalClientExec:httpProcessor	Lorg/apache/http/protocol/HttpProcessor;
    //   437: aload_2
    //   438: aload_3
    //   439: invokeinterface 309 3 0
    //   444: aload_0
    //   445: getfield 75	org/apache/http/impl/execchain/MinimalClientExec:requestExecutor	Lorg/apache/http/protocol/HttpRequestExecutor;
    //   448: aload_2
    //   449: aload 10
    //   451: aload_3
    //   452: invokevirtual 314	org/apache/http/protocol/HttpRequestExecutor:execute	(Lorg/apache/http/HttpRequest;Lorg/apache/http/HttpClientConnection;Lorg/apache/http/protocol/HttpContext;)Lorg/apache/http/HttpResponse;
    //   455: astore_1
    //   456: aload_0
    //   457: getfield 73	org/apache/http/impl/execchain/MinimalClientExec:httpProcessor	Lorg/apache/http/protocol/HttpProcessor;
    //   460: aload_1
    //   461: aload_3
    //   462: invokeinterface 317 3 0
    //   467: aload_0
    //   468: getfield 79	org/apache/http/impl/execchain/MinimalClientExec:reuseStrategy	Lorg/apache/http/ConnectionReuseStrategy;
    //   471: aload_1
    //   472: aload_3
    //   473: invokeinterface 323 3 0
    //   478: ifeq +62 -> 540
    //   481: aload 9
    //   483: aload_0
    //   484: getfield 81	org/apache/http/impl/execchain/MinimalClientExec:keepAliveStrategy	Lorg/apache/http/conn/ConnectionKeepAliveStrategy;
    //   487: aload_1
    //   488: aload_3
    //   489: invokeinterface 329 3 0
    //   494: getstatic 204	java/util/concurrent/TimeUnit:MILLISECONDS	Ljava/util/concurrent/TimeUnit;
    //   497: invokevirtual 333	org/apache/http/impl/execchain/ConnectionHolder:setValidFor	(JLjava/util/concurrent/TimeUnit;)V
    //   500: aload 9
    //   502: invokevirtual 336	org/apache/http/impl/execchain/ConnectionHolder:markReusable	()V
    //   505: aload_1
    //   506: invokeinterface 342 1 0
    //   511: astore_2
    //   512: aload_2
    //   513: ifnull +12 -> 525
    //   516: aload_2
    //   517: invokeinterface 347 1 0
    //   522: ifne +34 -> 556
    //   525: aload 9
    //   527: invokevirtual 350	org/apache/http/impl/execchain/ConnectionHolder:releaseConnection	()V
    //   530: new 352	org/apache/http/impl/execchain/HttpResponseProxy
    //   533: dup
    //   534: aload_1
    //   535: aconst_null
    //   536: invokespecial 355	org/apache/http/impl/execchain/HttpResponseProxy:<init>	(Lorg/apache/http/HttpResponse;Lorg/apache/http/impl/execchain/ConnectionHolder;)V
    //   539: areturn
    //   540: aload 9
    //   542: invokevirtual 358	org/apache/http/impl/execchain/ConnectionHolder:markNonReusable	()V
    //   545: goto -40 -> 505
    //   548: astore_1
    //   549: aload 9
    //   551: invokevirtual 361	org/apache/http/impl/execchain/ConnectionHolder:abortConnection	()V
    //   554: aload_1
    //   555: athrow
    //   556: new 352	org/apache/http/impl/execchain/HttpResponseProxy
    //   559: dup
    //   560: aload_1
    //   561: aload 9
    //   563: invokespecial 355	org/apache/http/impl/execchain/HttpResponseProxy:<init>	(Lorg/apache/http/HttpResponse;Lorg/apache/http/impl/execchain/ConnectionHolder;)V
    //   566: astore_1
    //   567: aload_1
    //   568: areturn
    //   569: astore_1
    //   570: aload 9
    //   572: invokevirtual 361	org/apache/http/impl/execchain/ConnectionHolder:abortConnection	()V
    //   575: aload_1
    //   576: athrow
    //   577: astore_1
    //   578: aload 9
    //   580: invokevirtual 361	org/apache/http/impl/execchain/ConnectionHolder:abortConnection	()V
    //   583: aload_1
    //   584: athrow
    //   585: iconst_0
    //   586: istore 5
    //   588: goto -320 -> 268
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	591	0	this	MinimalClientExec
    //   0	591	1	paramHttpRoute	HttpRoute
    //   0	591	2	paramHttpRequestWrapper	HttpRequestWrapper
    //   0	591	3	paramHttpClientContext	org.apache.http.client.protocol.HttpClientContext
    //   0	591	4	paramHttpExecutionAware	org.apache.http.client.methods.HttpExecutionAware
    //   92	495	5	i	int
    //   102	82	6	l	long
    //   85	319	8	localObject1	Object
    //   37	542	9	localObject2	Object
    //   116	334	10	localHttpClientConnection	org.apache.http.HttpClientConnection
    //   322	53	11	localObject3	Object
    // Exception table:
    //   from	to	target	type
    //   138	163	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   231	240	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   240	263	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   268	294	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   294	301	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   306	315	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   318	324	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   328	348	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   352	384	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   393	399	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   399	505	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   505	512	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   516	525	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   525	540	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   540	545	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   556	567	163	org/apache/http/impl/conn/ConnectionShutdownException
    //   87	94	188	java/lang/InterruptedException
    //   104	118	188	java/lang/InterruptedException
    //   87	94	206	java/util/concurrent/ExecutionException
    //   104	118	206	java/util/concurrent/ExecutionException
    //   138	163	548	org/apache/http/HttpException
    //   231	240	548	org/apache/http/HttpException
    //   240	263	548	org/apache/http/HttpException
    //   268	294	548	org/apache/http/HttpException
    //   294	301	548	org/apache/http/HttpException
    //   306	315	548	org/apache/http/HttpException
    //   318	324	548	org/apache/http/HttpException
    //   328	348	548	org/apache/http/HttpException
    //   352	384	548	org/apache/http/HttpException
    //   393	399	548	org/apache/http/HttpException
    //   399	505	548	org/apache/http/HttpException
    //   505	512	548	org/apache/http/HttpException
    //   516	525	548	org/apache/http/HttpException
    //   525	540	548	org/apache/http/HttpException
    //   540	545	548	org/apache/http/HttpException
    //   556	567	548	org/apache/http/HttpException
    //   138	163	569	java/io/IOException
    //   231	240	569	java/io/IOException
    //   240	263	569	java/io/IOException
    //   268	294	569	java/io/IOException
    //   294	301	569	java/io/IOException
    //   306	315	569	java/io/IOException
    //   318	324	569	java/io/IOException
    //   328	348	569	java/io/IOException
    //   352	384	569	java/io/IOException
    //   393	399	569	java/io/IOException
    //   399	505	569	java/io/IOException
    //   505	512	569	java/io/IOException
    //   516	525	569	java/io/IOException
    //   525	540	569	java/io/IOException
    //   540	545	569	java/io/IOException
    //   556	567	569	java/io/IOException
    //   138	163	577	java/lang/RuntimeException
    //   231	240	577	java/lang/RuntimeException
    //   240	263	577	java/lang/RuntimeException
    //   268	294	577	java/lang/RuntimeException
    //   294	301	577	java/lang/RuntimeException
    //   306	315	577	java/lang/RuntimeException
    //   318	324	577	java/lang/RuntimeException
    //   328	348	577	java/lang/RuntimeException
    //   352	384	577	java/lang/RuntimeException
    //   393	399	577	java/lang/RuntimeException
    //   399	505	577	java/lang/RuntimeException
    //   505	512	577	java/lang/RuntimeException
    //   516	525	577	java/lang/RuntimeException
    //   525	540	577	java/lang/RuntimeException
    //   540	545	577	java/lang/RuntimeException
    //   556	567	577	java/lang/RuntimeException
  }
}
