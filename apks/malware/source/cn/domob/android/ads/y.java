package cn.domob.android.ads;

import android.content.Context;

class y
  extends DomobAdView
  implements DomobAdListener
{
  private static H u = new H(y.class.getSimpleName());
  private String v;
  private String w;
  private int x;
  private DomobSplashAdListener y;
  private v.a z;
  
  y(Context paramContext, String paramString)
  {
    super(paramContext, paramString, null);
    u.a("Init SplashAdView.");
    if (this.a != null)
    {
      this.a.a(false);
      this.a.b(false);
    }
    this.f.setVisibility(0);
    this.b = DomobAdView.b.d.ordinal();
  }
  
  private boolean p()
  {
    I localI = new d().b(this.c);
    if (localI == null)
    {
      u.a("There is no available cache ad.");
      ((x)this.a).a(null, "sp_no_creative");
    }
    for (;;)
    {
      return false;
      if (System.currentTimeMillis() / 1000L >= localI.d())
      {
        u.a("Cached ad expires.");
        ((x)this.a).a(i.a(localI.c()), "sp_expire");
      }
      else
      {
        this.v = localI.b();
        this.w = localI.c();
        this.x = new d().b(this.c, this.v);
        if (this.x != -1)
        {
          u.a("All resources of creative is ok.");
          return true;
        }
        u.a("Some resources of creative is not ok.");
        ((x)this.a).a(i.a(this.w), "sp_res_incomplete");
      }
    }
  }
  
  void a(Context paramContext)
  {
    u.b("Load cached Ad:" + this.w);
    this.c = paramContext;
    super.setOnAdListener(this);
    this.a.c(true);
    paramContext = i.a(this.w);
    if ((paramContext != null) && (paramContext.d() != null)) {
      paramContext.d().a(this.x);
    }
    this.a.a(paramContext, -1);
  }
  
  void a(DomobSplashAdListener paramDomobSplashAdListener)
  {
    this.y = paramDomobSplashAdListener;
  }
  
  protected void a(String paramString)
  {
    this.a = new x(this, paramString);
  }
  
  protected void j() {}
  
  protected void k()
  {
    if (this.z != null) {
      this.z.a();
    }
  }
  
  boolean m()
  {
    if (p())
    {
      u.a("Both splash ad response and it's resources are OK.");
      return true;
    }
    requestRefreshAd();
    return false;
  }
  
  protected void n()
  {
    boolean bool2 = false;
    try
    {
      Thread.sleep(100L);
      invalidate();
      bool1 = this.a.u().d().o();
      int i = this.a.u().d().p();
      int j = this.a.u().d().q();
      v.a localA = new v.a(this.c).a(this.k, this.l).a(bool1);
      if (i != 0)
      {
        bool1 = true;
        localA = localA.a(bool1, i);
        bool1 = bool2;
        if (j != 0) {
          bool1 = true;
        }
        this.z = localA.b(bool1, j).b(true).a(new v.b()
        {
          public void a()
          {
            if (y.a(y.this) != null) {
              y.a(y.this).onSplashPresent();
            }
            y.this.a.a("s", "s", 0L);
          }
          
          public void b()
          {
            y.this.a.a("m", "s", y.this.a.e());
          }
          
          public void c()
          {
            y.this.a.a("f", "s", y.this.a.e());
            if (y.a(y.this) != null) {
              y.a(y.this).onSplashDismiss();
            }
            y.o().a("Request another Ad when current cached Ad is shown.");
            y.o().a("Delete old cached ad response.");
            new d().a(y.this.c, y.b(y.this));
            new d().c(y.this.c);
            y.this.setOnAdListener(null);
            y.this.requestRefreshAd();
          }
        });
        this.z.a(this);
        return;
      }
    }
    catch (Exception localException)
    {
      for (;;)
      {
        u.a(localException);
        continue;
        boolean bool1 = false;
      }
    }
  }
  
  protected void onAttachedToWindow()
  {
    invalidate();
  }
  
  public void onFailedToReceiveFreshAd(DomobAdView paramDomobAdView)
  {
    u.e("Failed to load ad or get ad responce.");
    if (this.y != null) {
      this.y.onSplashLoadFailed();
    }
  }
  
  public void onLandingPageClose() {}
  
  public void onLandingPageOpening() {}
  
  public void onReceivedFreshAd(DomobAdView paramDomobAdView)
  {
    u.a("Get new splash ad responce.");
  }
}
