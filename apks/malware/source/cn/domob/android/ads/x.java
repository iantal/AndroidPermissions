package cn.domob.android.ads;

import android.app.Activity;
import android.util.Log;
import android.widget.FrameLayout.LayoutParams;
import org.json.JSONObject;
import org.json.JSONTokener;

class x
  extends f
  implements C.a
{
  private static H i = new H(x.class.getSimpleName());
  
  public x(DomobAdView paramDomobAdView, String paramString)
  {
    super(paramDomobAdView, paramString);
    i.b("Init Splash controller.");
  }
  
  public void a(i paramI, int paramInt)
  {
    i.a("An ad response is received by splash controller.");
    if (paramI != null)
    {
      if (paramInt == -1)
      {
        i.a("There is a cached ad witch is about to be show.");
        super.a(paramI, paramInt);
      }
      label360:
      do
      {
        return;
        if (paramI.d() != null)
        {
          Object localObject2 = paramI.d().e();
          Object localObject1 = paramI;
          if (localObject2 != null)
          {
            localObject1 = paramI;
            if (((String)localObject2).length() != 0)
            {
              localObject1 = paramI;
              if (((String)localObject2).equals("url"))
              {
                localObject1 = new l(this.a, paramI.d().d(), null);
                ((l)localObject1).c();
                localObject1 = ((l)localObject1).e();
                if ((localObject1 == null) || (((String)localObject1).length() == 0)) {
                  break label360;
                }
              }
            }
          }
          try
          {
            i.a("Download content from ad url:" + (String)localObject1);
            paramI = new JSONObject(new JSONTokener(paramI.a()));
            localObject2 = paramI.optJSONObject("ad");
            if (localObject2 != null)
            {
              ((JSONObject)localObject2).put("ct", "content");
              ((JSONObject)localObject2).put("content", localObject1);
            }
            paramI = paramI.toString();
            i.a("Modified ad response after downloading ad content: " + paramI);
            localObject1 = i.a(paramI);
            i.a("There is a new ad witch is about to be inserted into DB.");
            paramI = new I();
            paramI.b(((i)localObject1).d().a());
            paramI.d(((i)localObject1).d().b() + "*" + ((i)localObject1).d().c());
            paramI.c(((i)localObject1).a());
            paramI.a(((i)localObject1).d().r());
            paramI.b(System.currentTimeMillis());
            new d().a(this.a, paramI);
            super.a((i)localObject1, paramInt);
            return;
          }
          catch (Exception paramI)
          {
            i.a(paramI);
            i.e("Failed to modify response.");
            return;
          }
          i.e("Failed to download creative content. This AD response won't be saved.");
          return;
        }
      } while (paramI.e() == null);
      i.e("There is a error info response.");
      Log.e("DomobSDK", String.format("Response contains error info. Error code is [%d] and error content is [%s]", new Object[] { Integer.valueOf(paramI.e().a()), paramI.e().b() }));
      return;
    }
    super.a(paramI, paramInt);
  }
  
  protected void a(i paramI, String paramString)
  {
    i.b("Failed to splash.Report fail event type " + paramString);
    w localW = new w(this.a);
    w.c localC;
    Object localObject;
    if ((paramI != null) && (paramI.d() != null))
    {
      localW.getClass();
      localC = new w.c(localW);
      localObject = paramI.d().k();
      localC.a = paramI.d().l();
    }
    for (paramI = (i)localObject;; paramI = null)
    {
      if (paramI != null)
      {
        localObject = paramI;
        if (paramI.length() != 0) {}
      }
      else
      {
        localObject = "http://e.domob.cn/event_report";
      }
      localW.a((String)localObject, w.h.i, paramString, localC, null);
      return;
      localC = null;
    }
  }
  
  public void d(C paramC)
  {
    i.b("All resources are replaced. Show Splash.");
    ((y)this.b).n();
  }
  
  protected void z()
  {
    ((Activity)this.a).runOnUiThread(new Runnable()
    {
      public void run()
      {
        x.H().b("Start to load Splash Ad page.");
        Object localObject = x.this.c.d();
        int i = (int)(((i.b)localObject).b() * n.u(x.this.a));
        int j = (int)(((i.b)localObject).c() * n.u(x.this.a));
        x.this.b.a(i, j);
        x.this.e = x.this.b.f();
        localObject = x.this.e.a();
        x.H().a("Background WebView is:" + ((C)localObject).a());
        ((C)localObject).setLayoutParams(new FrameLayout.LayoutParams(i, j));
        ((C)localObject).setWebViewClient(new D(x.this));
        ((C)localObject).a(x.this.c.d().f(), x.this.c.d().g(), x.this.c.d().u(), x.this);
        x.this.c((C)localObject);
      }
    });
  }
}
