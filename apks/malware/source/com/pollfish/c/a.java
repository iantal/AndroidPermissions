package com.pollfish.c;

import android.app.Activity;
import android.content.Context;
import com.pollfish.f.b;
import com.pollfish.interfaces.a.d;
import java.io.File;

public class a
  extends g
{
  Activity a;
  private String b = "";
  private a.d c = null;
  private String d;
  
  public a(String paramString, Activity paramActivity, a.d paramD)
  {
    this.b = paramString;
    this.a = paramActivity;
    this.c = paramD;
    this.d = (paramActivity.getApplicationContext().getCacheDir().getAbsolutePath() + "/" + "pollfish_queue");
  }
  
  protected Void a(Void... paramVarArgs)
  {
    b.a("CheckQueueOnReturnTask", "check queue on return from server for file: " + this.b);
    for (;;)
    {
      try
      {
        paramVarArgs = new File(this.d);
        if (paramVarArgs.exists())
        {
          Object localObject = paramVarArgs.listFiles();
          if (localObject != null)
          {
            b.a("CheckQueueOnReturnTask", "Queue size: " + localObject.length + " after returning from server before deleting file: " + this.b);
            localObject = new File(this.d + "/" + this.b);
            if (((File)localObject).exists())
            {
              b.a("CheckQueueOnReturnTask", "File in queue with name: " + this.b + " exists in queue");
              boolean bool = ((File)localObject).delete();
              b.a("CheckQueueOnReturnTask", "File in queue with name: " + this.b + " deleted: " + bool);
              paramVarArgs = paramVarArgs.listFiles();
              if (paramVarArgs != null)
              {
                b.a("CheckQueueOnReturnTask", "Queue size: " + paramVarArgs.length + " after deleting: " + this.b);
                if ((this.c == null) || (paramVarArgs.length != 0)) {
                  break label409;
                }
                b.a("CheckQueueOnReturnTask", "Queue is empty proceed to register");
                this.c.a();
                break label409;
                if (i < paramVarArgs.length)
                {
                  b.a("CheckQueueOnReturnTask", "Files left in queue [" + i + "]: " + paramVarArgs[i].getName());
                  i += 1;
                  continue;
                }
              }
            }
            else
            {
              b.a("CheckQueueOnReturnTask", "File in queue with name: " + this.b + " does not exist");
              continue;
            }
          }
        }
        return null;
      }
      catch (Exception paramVarArgs)
      {
        com.pollfish.f.b.a.a(paramVarArgs);
        b.b("CheckQueueOnReturnTask", "Error while cleaning queue after returning from sucessfuly sent on server: " + paramVarArgs);
      }
      label409:
      int i = 0;
    }
  }
  
  protected void a()
  {
    super.a();
  }
  
  protected void a(Void paramVoid)
  {
    super.a(paramVoid);
  }
}
