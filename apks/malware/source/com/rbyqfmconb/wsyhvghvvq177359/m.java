package com.rbyqfmconb.wsyhvghvvq177359;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.Dialog;
import android.content.ActivityNotFoundException;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.content.DialogInterface.OnDismissListener;
import android.content.Intent;
import android.graphics.drawable.ColorDrawable;
import android.net.Uri;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.webkit.JavascriptInterface;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.RelativeLayout;
import android.widget.RelativeLayout.LayoutParams;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.util.EntityUtils;

class m
  extends Dialog
  implements DialogInterface.OnCancelListener, DialogInterface.OnDismissListener
{
  static final String AD_TYPE_DIALOG_CC = "DCC";
  static final String AD_TYPE_DIALOG_CM = "DCM";
  static final String AD_TYPE_DIALOG_U = "DAU";
  static final String AD_TYPE_OVERLAY = "OLAU";
  private static int l = 250;
  private static int m = 300;
  private static String n;
  private static boolean o = false;
  private static String p;
  private static String r = "";
  Activity a;
  View.OnTouchListener b = new View.OnTouchListener()
  {
    public boolean onTouch(View paramAnonymousView, MotionEvent paramAnonymousMotionEvent)
    {
      if ((paramAnonymousView == m.c(m.this)) && (paramAnonymousMotionEvent.getAction() == 0)) {
        m.b(m.this, true);
      }
      return false;
    }
  };
  private final String c = "BunSDK";
  private final String d = "23";
  private final String e = "24";
  private final String f = "25";
  private final String g = "43";
  private final String h = "44";
  private final String i = "45";
  private final String j = "184";
  private final String k = "183";
  private WebView q;
  private boolean s = false;
  private boolean t = false;
  
  @SuppressLint({"SetJavaScriptEnabled"})
  public m(Activity paramActivity)
  {
    super(paramActivity);
    try
    {
      this.a = paramActivity;
      requestWindowFeature(1);
      getWindow().setBackgroundDrawable(new ColorDrawable(0));
      setCancelable(false);
      setCanceledOnTouchOutside(false);
      setOnCancelListener(this);
      setOnDismissListener(this);
      RelativeLayout localRelativeLayout = new RelativeLayout(paramActivity);
      localRelativeLayout.setId(76);
      RelativeLayout.LayoutParams localLayoutParams = new RelativeLayout.LayoutParams(-2, -2);
      localLayoutParams.addRule(13);
      localRelativeLayout.setLayoutParams(localLayoutParams);
      this.q = new WebView(paramActivity);
      this.q.setId(54);
      this.q.getSettings().setJavaScriptEnabled(true);
      this.q.setWebChromeClient(new WebChromeClient());
      this.q.setHorizontalScrollBarEnabled(false);
      this.q.setVerticalScrollBarEnabled(false);
      this.q.getSettings().setCacheMode(-1);
      this.q.setBackgroundColor(0);
      this.q.setScrollBarStyle(33554432);
      this.q.addJavascriptInterface(new a(null), "Overlay");
      this.q.setOnTouchListener(this.b);
      this.q.setWebViewClient(new WebViewClient()
      {
        public void onLoadResource(WebView paramAnonymousWebView, String paramAnonymousString)
        {
          if ((m.a(m.this)) && (m.this.isShowing()))
          {
            m.a(m.this, paramAnonymousString);
            return;
          }
          super.onLoadResource(paramAnonymousWebView, paramAnonymousString);
        }
        
        public void onPageFinished(WebView paramAnonymousWebView, String paramAnonymousString)
        {
          super.onPageFinished(paramAnonymousWebView, paramAnonymousString);
          try
          {
            if (m.b(m.this))
            {
              Log.i("BunSDK", "Error in loading");
              m.this.dismiss();
              if ((m.a().equals("DAU")) || (m.a().equals("DCC")) || (m.a().equals("DCM")))
              {
                m.this.a("184");
                return;
              }
              m.this.a("183");
              return;
            }
          }
          catch (Exception paramAnonymousWebView)
          {
            paramAnonymousWebView.printStackTrace();
            m.this.a.finish();
            return;
          }
          m.this.show();
          if ((m.a().equals("DAU")) || (m.a().equals("DCC")) || (m.a().equals("DCM"))) {
            m.this.a("43");
          }
          while (MA.adListener != null)
          {
            MA.adListener.onSmartWallAdShowing();
            return;
            m.this.a("23");
          }
        }
        
        public void onReceivedError(WebView paramAnonymousWebView, int paramAnonymousInt, String paramAnonymousString1, String paramAnonymousString2)
        {
          m.a(m.this, true);
          try
          {
            m.this.dismiss();
            m.this.a.finish();
            super.onReceivedError(paramAnonymousWebView, paramAnonymousInt, paramAnonymousString1, paramAnonymousString2);
            return;
          }
          catch (Throwable localThrowable)
          {
            for (;;)
            {
              Log.e("BunSDK", "Error occurred while loading Overlay Ad: code " + paramAnonymousInt + ", desc: " + paramAnonymousString1);
            }
          }
        }
        
        public boolean shouldOverrideUrlLoading(WebView paramAnonymousWebView, String paramAnonymousString)
        {
          try
          {
            if (m.a(m.this))
            {
              m.a(m.this, paramAnonymousString);
              return true;
            }
          }
          catch (Exception localException)
          {
            localException.printStackTrace();
            m.this.dismiss();
            m.this.a.finish();
            paramAnonymousWebView.loadUrl(paramAnonymousString);
          }
          return true;
        }
      });
      this.q.loadDataWithBaseURL(null, n, "text/html", "UTF-8", null);
      localLayoutParams = new RelativeLayout.LayoutParams(m, l);
      localLayoutParams.addRule(13);
      this.q.setLayoutParams(localLayoutParams);
      localRelativeLayout.addView(this.q);
      setContentView(localRelativeLayout);
      return;
    }
    catch (Exception localException)
    {
      Log.e("BunSDK", "An error occured while starting Overlay Ad.");
      try
      {
        dismiss();
        paramActivity.finish();
        return;
      }
      catch (Exception paramActivity) {}
    }
  }
  
  public static void a(int paramInt)
  {
    l = paramInt;
  }
  
  public static void a(boolean paramBoolean)
  {
    o = paramBoolean;
  }
  
  public static void b(int paramInt)
  {
    m = paramInt;
  }
  
  public static void b(String paramString)
  {
    n = paramString;
  }
  
  public static void c(String paramString)
  {
    p = paramString;
  }
  
  public static void d(String paramString)
  {
    r = paramString;
  }
  
  private void e(String paramString)
  {
    try
    {
      dismiss();
      try
      {
        Intent localIntent = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
        localIntent.setFlags(268435456);
        localIntent.addFlags(8388608);
        localIntent.addCategory("android.intent.category.LAUNCHER");
        localIntent.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
        this.a.startActivity(localIntent);
        if ((r.equals("DAU")) || (r.equals("DCC")) || (r.equals("DCM")))
        {
          a("44");
          return;
        }
        a("24");
        return;
      }
      catch (ActivityNotFoundException localActivityNotFoundException)
      {
        Log.i("BunSDK", "Browser not found.");
        paramString = new Intent("android.intent.action.VIEW", Uri.parse(paramString));
        paramString.setFlags(268435456);
        paramString.addFlags(8388608);
        this.a.startActivity(paramString);
        if (r.equals("DAU")) {
          break label191;
        }
      }
      if ((!r.equals("DCC")) && (!r.equals("DCM"))) {
        break label243;
      }
      label191:
      a("44");
    }
    catch (ActivityNotFoundException paramString)
    {
      for (;;)
      {
        Log.e("BunSDK", "Error whlie displaying dialog ad......: " + paramString.getMessage());
        this.a.finish();
        return;
        a("24");
      }
    }
    catch (Exception paramString)
    {
      label243:
      paramString.printStackTrace();
      this.a.finish();
    }
    this.a.finish();
    return;
  }
  
  final void a(final String paramString)
  {
    try
    {
      if (!Util.s(getContext())) {
        return;
      }
      new Thread(new Runnable()
      {
        public void run()
        {
          for (;;)
          {
            try
            {
              Log.i("BunSDK", "Sending overlay event: ");
              if ((!m.b()) && ((paramString.equals("184")) || (paramString.equals("183"))))
              {
                Util.a("Error reporting is off.");
                return;
              }
              Object localObject2 = m.c();
              Object localObject1 = localObject2;
              if (m.c().contains("%event%")) {
                localObject1 = ((String)localObject2).replace("%event%", paramString);
              }
              Util.a("URL: " + (String)localObject1);
              localObject2 = new DefaultHttpClient();
              localObject1 = new HttpPost((String)localObject1);
              BasicHttpParams localBasicHttpParams = new BasicHttpParams();
              ((HttpPost)localObject1).setParams(localBasicHttpParams);
              HttpConnectionParams.setConnectionTimeout(localBasicHttpParams, 15000);
              HttpConnectionParams.setSoTimeout(localBasicHttpParams, 10000);
              localObject1 = ((HttpClient)localObject2).execute((HttpUriRequest)localObject1);
              if (localObject1 == null)
              {
                i = 0;
                Log.i("BunSDK", "Status code: " + i);
                if (i != 200) {
                  break;
                }
                localObject1 = EntityUtils.toString(((HttpResponse)localObject1).getEntity());
                Log.i("BunSDK", "Overlay Data: " + (String)localObject1);
                return;
              }
            }
            catch (Exception localException)
            {
              Log.e("BunSDK", "Exception in overlay: ", localException);
              return;
            }
            int i = localException.getStatusLine().getStatusCode();
          }
        }
      }, "overlay_event").start();
      return;
    }
    finally {}
  }
  
  public void onCancel(DialogInterface paramDialogInterface)
  {
    if (paramDialogInterface != null) {}
    try
    {
      paramDialogInterface.dismiss();
      this.a.finish();
      return;
    }
    catch (Exception paramDialogInterface) {}
  }
  
  public void onDismiss(DialogInterface paramDialogInterface)
  {
    if (this != null) {}
    for (;;)
    {
      try
      {
        if (this.q != null)
        {
          this.q.stopLoading();
          this.q.removeAllViews();
          this.q.destroy();
        }
        dismiss();
      }
      catch (Throwable paramDialogInterface)
      {
        continue;
      }
      catch (Exception paramDialogInterface)
      {
        continue;
      }
      try
      {
        this.a.finish();
        return;
      }
      catch (Exception paramDialogInterface)
      {
        this.a.finish();
        return;
      }
    }
  }
  
  private class a
  {
    private a() {}
    
    @JavascriptInterface
    public void call(String paramString)
    {
      for (;;)
      {
        try
        {
          m.this.dismiss();
          paramString = new Intent("android.intent.action.DIAL", Uri.parse("tel:" + paramString));
          paramString.addFlags(268435456);
          m.this.a.startActivity(paramString);
          if ((!m.a().equals("DAU")) && (!m.a().equals("DCC")) && (!m.a().equals("DCM"))) {
            continue;
          }
          m.this.a("44");
        }
        catch (ActivityNotFoundException paramString)
        {
          paramString.printStackTrace();
          continue;
        }
        catch (Exception paramString)
        {
          continue;
        }
        m.this.a.finish();
        return;
        m.this.a("24");
      }
    }
    
    @JavascriptInterface
    public void close()
    {
      m.this.dismiss();
      if ((m.a().equals("DAU")) || (m.a().equals("DCC")) || (m.a().equals("DCM"))) {
        m.this.a("45");
      }
      for (;;)
      {
        m.this.a.finish();
        return;
        m.this.a("25");
      }
    }
    
    @JavascriptInterface
    public void open(String paramString)
    {
      m.a(m.this, paramString);
      m.this.a.finish();
    }
    
    @JavascriptInterface
    public void sms(String paramString1, String paramString2)
    {
      try
      {
        m.this.dismiss();
        Intent localIntent = new Intent("android.intent.action.VIEW");
        localIntent.addFlags(268435456);
        localIntent.setType("vnd.android-dir/mms-sms");
        localIntent.putExtra("address", paramString1);
        localIntent.putExtra("sms_body", paramString2);
        m.this.a.startActivity(localIntent);
        if ((m.a().equals("DAU")) || (m.a().equals("DCC")) || (m.a().equals("DCM")))
        {
          m.this.a("44");
          return;
        }
        m.this.a("24");
        return;
      }
      catch (Exception paramString1)
      {
        m.this.a.finish();
        paramString1.printStackTrace();
      }
    }
  }
}
