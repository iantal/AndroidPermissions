package com.revmob.ads.popup.client;

import com.revmob.RevMobAdsListener;
import com.revmob.ads.internal.Ad;
import com.revmob.ads.internal.AdRevMobClientListener;
import com.revmob.internal.RMLog;
import org.json.JSONException;
import org.json.JSONObject;

public class PopupClientListener
  extends AdRevMobClientListener
{
  public PopupClientListener(Ad paramAd, RevMobAdsListener paramRevMobAdsListener)
  {
    super(paramAd, paramRevMobAdsListener);
  }
  
  public static PopupData createData(String paramString)
    throws JSONException
  {
    Object localObject2 = new JSONObject(paramString).getJSONObject("pop_up");
    String str2 = getAppOrSite((JSONObject)localObject2);
    boolean bool1 = getOpenInside((JSONObject)localObject2);
    paramString = ((JSONObject)localObject2).getJSONArray("links");
    String str3 = getClickUrl(paramString);
    boolean bool2 = getFollowRedirect((JSONObject)localObject2);
    String str4 = getImpressionUrl(paramString);
    String str5 = ((JSONObject)localObject2).getString("message");
    RMLog.i("Popup loaded");
    String str1 = new String();
    Object localObject1 = new String();
    paramString = str1;
    try
    {
      localObject2 = ((JSONObject)localObject2).getJSONObject("sound");
      paramString = str1;
      str1 = ((JSONObject)localObject2).getString("on_show");
      paramString = str1;
      localObject2 = ((JSONObject)localObject2).getString("on_click");
      localObject1 = localObject2;
      paramString = str1;
    }
    catch (JSONException localJSONException)
    {
      for (;;) {}
    }
    return new PopupData(str4, str3, bool2, str5, str2, bool1, paramString, (String)localObject1);
  }
  
  public void handleResponse(String paramString)
    throws JSONException
  {
    this.ad.updateWithData(createData(paramString));
  }
}
