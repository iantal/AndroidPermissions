package com.inmobi.commons.a;

import android.annotation.TargetApi;
import android.content.Context;
import android.os.Build.VERSION;
import android.os.Handler;
import android.webkit.WebSettings;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;
import com.inmobi.commons.core.utilities.b;
import java.io.File;
import java.util.concurrent.atomic.AtomicBoolean;

public final class a
{
  private static final String a = a.class.getSimpleName();
  private static Context b;
  private static String c = "";
  private static String d = "";
  private static AtomicBoolean e = new AtomicBoolean();
  
  public a() {}
  
  public static File a(Context paramContext)
  {
    return new File(paramContext.getCacheDir(), "im_cached_content");
  }
  
  public static void a(Context paramContext, String paramString)
  {
    if (!a())
    {
      b = paramContext.getApplicationContext();
      d = paramString;
      e.set(true);
      b(paramContext);
      c(paramContext);
    }
  }
  
  public static void a(File paramFile, String paramString)
  {
    if ((paramString != null) && (paramString.trim().length() != 0))
    {
      b.a(new File(paramFile, paramString));
      return;
    }
    b.a(paramFile);
  }
  
  public static void a(boolean paramBoolean)
  {
    e.set(paramBoolean);
  }
  
  public static boolean a()
  {
    return b != null;
  }
  
  public static Context b()
  {
    return b;
  }
  
  private static void b(Context paramContext)
  {
    if (Build.VERSION.SDK_INT >= 17)
    {
      c = f();
      return;
    }
    new Handler(paramContext.getMainLooper()).post(new a.1(paramContext));
  }
  
  public static String c()
  {
    return d;
  }
  
  private static void c(Context paramContext)
  {
    paramContext = a(paramContext);
    a(paramContext, null);
    if ((!paramContext.mkdir()) && (!paramContext.isDirectory())) {
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Cannot create media cache directory");
    }
  }
  
  public static String d()
  {
    return c;
  }
  
  public static boolean e()
  {
    return e.get();
  }
  
  @TargetApi(17)
  private static String f()
  {
    return WebSettings.getDefaultUserAgent(b());
  }
}
