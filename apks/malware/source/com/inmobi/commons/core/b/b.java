package com.inmobi.commons.core.b;

import android.content.ContentValues;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;
import java.util.ArrayList;
import java.util.List;

public final class b
{
  private static final String a = b.class.getSimpleName();
  private static volatile b b;
  private static final Object c = new Object();
  private static final Object d = new Object();
  private static int e = 0;
  private SQLiteDatabase f;
  
  private b()
  {
    a localA = new a(com.inmobi.commons.a.a.b());
    try
    {
      this.f = localA.getWritableDatabase();
      b = this;
      return;
    }
    catch (SQLiteException localSQLiteException)
    {
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Problem while getting writable database connection.", localSQLiteException);
    }
  }
  
  /* Error */
  public static b a()
  {
    // Byte code:
    //   0: ldc 2
    //   2: monitorenter
    //   3: getstatic 32	com/inmobi/commons/core/b/b:d	Ljava/lang/Object;
    //   6: astore_0
    //   7: aload_0
    //   8: monitorenter
    //   9: getstatic 34	com/inmobi/commons/core/b/b:e	I
    //   12: iconst_1
    //   13: iadd
    //   14: putstatic 34	com/inmobi/commons/core/b/b:e	I
    //   17: aload_0
    //   18: monitorexit
    //   19: getstatic 55	com/inmobi/commons/core/b/b:b	Lcom/inmobi/commons/core/b/b;
    //   22: astore_1
    //   23: aload_1
    //   24: astore_0
    //   25: aload_1
    //   26: ifnonnull +35 -> 61
    //   29: getstatic 30	com/inmobi/commons/core/b/b:c	Ljava/lang/Object;
    //   32: astore_2
    //   33: aload_2
    //   34: monitorenter
    //   35: getstatic 55	com/inmobi/commons/core/b/b:b	Lcom/inmobi/commons/core/b/b;
    //   38: astore_1
    //   39: aload_1
    //   40: astore_0
    //   41: aload_1
    //   42: ifnonnull +17 -> 59
    //   45: new 2	com/inmobi/commons/core/b/b
    //   48: dup
    //   49: invokespecial 70	com/inmobi/commons/core/b/b:<init>	()V
    //   52: putstatic 55	com/inmobi/commons/core/b/b:b	Lcom/inmobi/commons/core/b/b;
    //   55: getstatic 55	com/inmobi/commons/core/b/b:b	Lcom/inmobi/commons/core/b/b;
    //   58: astore_0
    //   59: aload_2
    //   60: monitorexit
    //   61: ldc 2
    //   63: monitorexit
    //   64: aload_0
    //   65: areturn
    //   66: astore_1
    //   67: aload_0
    //   68: monitorexit
    //   69: aload_1
    //   70: athrow
    //   71: astore_0
    //   72: ldc 2
    //   74: monitorexit
    //   75: aload_0
    //   76: athrow
    //   77: astore_0
    //   78: aload_2
    //   79: monitorexit
    //   80: aload_0
    //   81: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   71	5	0	localObject2	Object
    //   77	4	0	localObject3	Object
    //   22	20	1	localB	b
    //   66	4	1	localObject4	Object
    // Exception table:
    //   from	to	target	type
    //   9	19	66	finally
    //   67	69	66	finally
    //   3	9	71	finally
    //   19	23	71	finally
    //   29	35	71	finally
    //   69	71	71	finally
    //   80	82	71	finally
    //   35	39	77	finally
    //   45	59	77	finally
    //   59	61	77	finally
    //   78	80	77	finally
  }
  
  public int a(String paramString)
  {
    paramString = "SELECT COUNT(*) FROM " + paramString + " ; ";
    paramString = this.f.rawQuery(paramString, null);
    paramString.moveToFirst();
    int i = paramString.getInt(0);
    paramString.close();
    return i;
  }
  
  public int a(String paramString1, ContentValues paramContentValues, String paramString2, String[] paramArrayOfString)
  {
    return this.f.updateWithOnConflict(paramString1, paramContentValues, paramString2, paramArrayOfString, 4);
  }
  
  public int a(String paramString1, String paramString2, String[] paramArrayOfString)
  {
    return this.f.delete(paramString1, paramString2, paramArrayOfString);
  }
  
  public List a(String paramString1, String[] paramArrayOfString1, String paramString2, String[] paramArrayOfString2, String paramString3, String paramString4, String paramString5, String paramString6)
  {
    paramString1 = this.f.query(paramString1, paramArrayOfString1, paramString2, paramArrayOfString2, paramString3, paramString4, paramString5, paramString6);
    paramArrayOfString1 = new ArrayList();
    if (paramString1.moveToFirst()) {
      do
      {
        paramString2 = new ContentValues();
        DatabaseUtils.cursorRowToContentValues(paramString1, paramString2);
        paramArrayOfString1.add(paramString2);
      } while (paramString1.moveToNext());
    }
    paramString1.close();
    return paramArrayOfString1;
  }
  
  public void a(String paramString1, String paramString2)
  {
    paramString1 = "CREATE TABLE IF NOT EXISTS " + paramString1 + paramString2 + ";";
    this.f.execSQL(paramString1);
  }
  
  public boolean a(String paramString, ContentValues paramContentValues)
  {
    return this.f.insertWithOnConflict(paramString, null, paramContentValues, 4) != -1L;
  }
  
  public int b(String paramString1, String paramString2, String[] paramArrayOfString)
  {
    paramString1 = "SELECT COUNT(*) FROM " + paramString1 + " WHERE " + paramString2 + " ; ";
    paramString1 = this.f.rawQuery(paramString1, paramArrayOfString);
    paramString1.moveToFirst();
    int i = paramString1.getInt(0);
    paramString1.close();
    return i;
  }
  
  public void b()
  {
    synchronized (d)
    {
      e -= 1;
      if (e == 0)
      {
        this.f.close();
        b = null;
      }
      return;
    }
  }
}
