package com.inmobi.commons.core.utilities.uid;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;

public class ImIdShareBroadCastReceiver
  extends BroadcastReceiver
{
  private static final String a = ImIdShareBroadCastReceiver.class.getSimpleName();
  
  public ImIdShareBroadCastReceiver() {}
  
  public static String a(String paramString1, String paramString2)
  {
    if ((paramString1 == null) && (paramString2 == null)) {
      paramString2 = null;
    }
    do
    {
      return paramString2;
      if ((paramString1 != null) && (paramString2 != null)) {
        break;
      }
    } while (paramString1 == null);
    return paramString1;
    String[] arrayOfString = paramString1.split(",");
    int i = 0;
    for (paramString1 = paramString2;; paramString1 = paramString2)
    {
      paramString2 = paramString1;
      if (i >= arrayOfString.length) {
        break;
      }
      paramString2 = paramString1;
      if (!paramString1.contains(arrayOfString[i])) {
        paramString2 = paramString1 + "," + arrayOfString[i];
      }
      i += 1;
    }
  }
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    if (paramIntent.getAction().equals("com.inmobi.share.id"))
    {
      b localB = new b(paramContext);
      String str4 = paramIntent.getExtras().getString("appid");
      String str1 = localB.d();
      String str5 = paramIntent.getExtras().getString("imid");
      String str2 = localB.f();
      String str3 = paramIntent.getExtras().getString("appendedid");
      long l1 = localB.e();
      long l2 = paramIntent.getExtras().getLong("imidts");
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Received broadcast for IDs. Received ID:" + str5 + " AppID:" + str4 + " AID:" + str3);
      if ((str2 != null) && (str4 != null))
      {
        if (!str2.contains(str4))
        {
          if (l2 < l1) {
            localB.c(str5);
          }
          paramIntent = new Intent();
          paramIntent.setAction("com.inmobi.share.id");
          paramIntent.putExtra("imid", str1);
          paramIntent.putExtra("appendedid", str2);
          paramIntent.putExtra("imidts", l1);
          paramIntent.putExtra("appid", c.a().c());
          paramContext.sendBroadcast(paramIntent);
        }
        localB.d(a(str3, str2));
      }
    }
  }
}
