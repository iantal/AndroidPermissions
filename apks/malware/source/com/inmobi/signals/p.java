package com.inmobi.signals;

import com.inmobi.commons.core.configs.a.a;
import com.inmobi.commons.core.configs.b;
import com.inmobi.commons.core.configs.b.b;
import com.inmobi.commons.core.utilities.Logger;
import com.inmobi.commons.core.utilities.Logger.InternalLogLevel;
import com.inmobi.commons.core.utilities.info.f;
import com.inmobi.commons.core.utilities.uid.d;

public class p
  implements b.b
{
  private static final String a = p.class.getSimpleName();
  private static final Object b = new Object();
  private static volatile p c;
  private i d;
  private g e;
  private q f = new q();
  private boolean g = false;
  
  private p()
  {
    b.a().a(this.f, this);
    f.a().a(e().i());
    n.a().a(e().h());
    com.inmobi.commons.core.c.a.a().a(this.f.a(), this.f.e());
  }
  
  public static p a()
  {
    Object localObject1 = c;
    if (localObject1 == null) {
      synchronized (b)
      {
        p localP2 = c;
        localObject1 = localP2;
        if (localP2 == null)
        {
          localObject1 = new p();
          c = (p)localObject1;
        }
        return localObject1;
      }
    }
    return localP1;
  }
  
  public void a(com.inmobi.commons.core.configs.a paramA)
  {
    this.f = ((q)paramA);
    n.a().a(e().h());
    f.a().a(e().i());
    com.inmobi.commons.core.c.a.a().a(this.f.a(), this.f.e());
  }
  
  public void b()
  {
    try
    {
      if (!this.g)
      {
        Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Starting signals component.");
        this.g = true;
        g();
      }
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public void c()
  {
    try
    {
      if (this.g)
      {
        Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Stopping signals component.");
        this.g = false;
        h();
      }
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  d d()
  {
    return new d(this.f.n().a());
  }
  
  public q.b e()
  {
    return this.f.f();
  }
  
  public q.a f()
  {
    return this.f.g();
  }
  
  void g()
  {
    for (;;)
    {
      try
      {
        if (!this.g)
        {
          Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Ice can not be started as Signals component has not been started.");
          return;
        }
        if (!e().a()) {
          break label82;
        }
        o.a().b();
        if (this.d == null)
        {
          this.d = new i();
          this.d.a();
          continue;
        }
        this.d.a();
      }
      finally {}
      continue;
      label82:
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "User data collection is disabled.");
    }
  }
  
  void h()
  {
    o.a().c();
    if (this.d != null) {
      this.d.c();
    }
  }
  
  public void i()
  {
    if (!this.g)
    {
      Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Carb can not be started as Signals component has not been started.");
      return;
    }
    if (f().a())
    {
      if (this.e == null)
      {
        this.e = new g();
        this.e.a(f());
        return;
      }
      this.e.a(f());
      return;
    }
    Logger.a(Logger.InternalLogLevel.INTERNAL, a, "Carb is disabled.");
  }
}
