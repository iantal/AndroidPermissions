package com.videoclient.player.d;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.view.WindowManager.BadTokenException;
import com.b.a.h;
import com.jshymedia.jshypay.net.Purl;
import com.jshymedia.jshypay.order.Worker;
import com.videoclient.player.VideoApp;
import java.util.concurrent.ExecutorService;

public class a
{
  public static final String a = "http://" + Purl.host + ":8080/pay/select_sdk";
  private static SharedPreferences b;
  private static ProgressDialog c;
  
  public static void a()
  {
    b.edit().putInt("pay_video", 2).commit();
    if (c != null) {
      c.cancel();
    }
  }
  
  public static void a(Context paramContext, int paramInt)
  {
    if (a(paramContext)) {
      return;
    }
    b(paramContext, paramInt);
    b = paramContext.getSharedPreferences("pay_xml", 0);
    b.edit().putInt("pay_video", 3).commit();
    long l = System.currentTimeMillis();
    b.edit().putLong("pay_last_time", l).commit();
    h.a("payMethond..start..");
    d();
    Worker.exec.execute(new b(paramContext));
  }
  
  public static boolean a(Context paramContext)
  {
    b = paramContext.getSharedPreferences("pay_xml", 0);
    return b.getInt("pay_video", 1) == 2;
  }
  
  public static void b()
  {
    int i = b.getInt("pay_video", 1);
    if (i == 2) {
      return;
    }
    if (i == 1) {
      b.edit().putInt("pay_video", 3).commit();
    }
    try
    {
      c = ProgressDialog.show(VideoApp.b, null, "支付处理中，请稍等...");
      return;
    }
    catch (WindowManager.BadTokenException localBadTokenException) {}
  }
  
  private static void b(Context paramContext, int paramInt)
  {
    new Thread(new g(paramContext, paramInt)).start();
  }
  
  public static boolean b(Context paramContext)
  {
    boolean bool = true;
    b = paramContext.getSharedPreferences("pay_xml", 0);
    int i = b.getInt("pay_video", 1);
    if ((i == 3) || (i == 2)) {
      bool = false;
    }
    return bool;
  }
  
  public static void c()
  {
    int i = b.getInt("pay_video", 1);
    if (i == 2) {}
    do
    {
      return;
      if (i == 3) {
        b.edit().putInt("pay_video", 1).commit();
      }
    } while (c == null);
    c.cancel();
  }
  
  private static void d()
  {
    long l = System.currentTimeMillis() - b.getLong("pay_last_time", 0L);
    h.a("timeD:" + l);
    if (l > 300000L) {
      b.edit().putInt("pay_video", 1).commit();
    }
  }
}
