package com.google.android.c2dm;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class C2DMessaging
{
  public static final String BACKOFF = "backoff";
  private static final long DEFAULT_BACKOFF = 30000L;
  public static final String EXTRA_APPLICATION_PENDING_INTENT = "app";
  public static final String EXTRA_SENDER = "sender";
  public static final String GSF_PACKAGE = "com.w545taxxxg9";
  public static final String LAST_REGISTRATION_CHANGE = "last_registration_change";
  public static final String REQUEST_REGISTRATION_INTENT = "com.google.android.c2dm.intent.REGISTER";
  public static final String REQUEST_UNREGISTRATION_INTENT = "com.google.android.c2dm.intent.UNREGISTER";
  
  public C2DMessaging() {}
  
  public static void clearRegistrationId(Context paramContext)
  {
    paramContext = paramContext.getSharedPreferences(paramContext.getPackageName(), 0).edit();
    paramContext.putString("dm_registration", "");
    paramContext.putLong("last_registration_change", System.currentTimeMillis());
    paramContext.commit();
  }
  
  static long getBackoff(Context paramContext)
  {
    return paramContext.getSharedPreferences(paramContext.getPackageName(), 0).getLong("backoff", 30000L);
  }
  
  public static long getLastRegistrationChange(Context paramContext)
  {
    return paramContext.getSharedPreferences(paramContext.getPackageName(), 0).getLong("last_registration_change", 0L);
  }
  
  public static String getRegistrationId(Context paramContext)
  {
    return paramContext.getSharedPreferences(paramContext.getPackageName(), 0).getString("dm_registration", "");
  }
  
  public static void register(Context paramContext, String paramString)
  {
    Intent localIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    localIntent.putExtra("app", PendingIntent.getBroadcast(paramContext, 0, new Intent(), 0));
    localIntent.putExtra("sender", paramString);
    paramContext.startService(localIntent);
  }
  
  static void setBackoff(Context paramContext, long paramLong)
  {
    paramContext = paramContext.getSharedPreferences(paramContext.getPackageName(), 0).edit();
    paramContext.putLong("backoff", paramLong);
    paramContext.commit();
  }
  
  static void setRegistrationId(Context paramContext, String paramString)
  {
    paramContext = paramContext.getSharedPreferences(paramContext.getPackageName(), 0).edit();
    paramContext.putString("dm_registration", paramString);
    paramContext.commit();
  }
  
  public static void unregister(Context paramContext)
  {
    Intent localIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
    localIntent.setPackage("com.w545taxxxg9");
    localIntent.putExtra("app", PendingIntent.getBroadcast(paramContext, 0, new Intent(), 0));
    paramContext.startService(localIntent);
  }
}
