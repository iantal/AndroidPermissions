package com.google.android.gms.iid;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.ResolveInfo;
import android.content.pm.ServiceInfo;
import android.os.Bundle;
import android.os.ConditionVariable;
import android.os.Message;
import android.os.Messenger;
import android.os.Process;
import android.os.RemoteException;
import android.os.SystemClock;
import android.util.Log;
import java.io.IOException;
import java.security.KeyPair;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Random;
import java.util.Set;

public final class j
{
  static String a = null;
  static int b = 0;
  static int c = 0;
  static int d = 0;
  Context e;
  Map<String, Object> f = new HashMap();
  Messenger g;
  Messenger h;
  MessengerCompat i;
  PendingIntent j;
  long k;
  long l;
  int m;
  int n;
  long o;
  
  public j(Context paramContext)
  {
    this.e = paramContext;
  }
  
  public static String a()
  {
    try
    {
      int i1 = d;
      d = i1 + 1;
      String str = Integer.toString(i1);
      return str;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public static String a(Context paramContext)
  {
    if (a != null) {
      return a;
    }
    b = Process.myUid();
    paramContext = paramContext.getPackageManager();
    Object localObject1 = paramContext.queryIntentServices(new Intent("com.google.android.c2dm.intent.REGISTER"), 0).iterator();
    while (((Iterator)localObject1).hasNext())
    {
      Object localObject2 = (ResolveInfo)((Iterator)localObject1).next();
      if (paramContext.checkPermission("com.google.android.c2dm.permission.RECEIVE", ((ResolveInfo)localObject2).serviceInfo.packageName) == 0) {
        try
        {
          ApplicationInfo localApplicationInfo = paramContext.getApplicationInfo(((ResolveInfo)localObject2).serviceInfo.packageName, 0);
          Log.w("InstanceID/Rpc", "Found " + localApplicationInfo.uid);
          c = localApplicationInfo.uid;
          localObject2 = ((ResolveInfo)localObject2).serviceInfo.packageName;
          a = (String)localObject2;
          return localObject2;
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException2) {}
      } else {
        Log.w("InstanceID/Rpc", "Possible malicious package " + localNameNotFoundException2.serviceInfo.packageName + " declares com.google.android.c2dm.intent.REGISTER without permission");
      }
    }
    Log.w("InstanceID/Rpc", "Failed to resolve REGISTER intent, falling back");
    try
    {
      localObject1 = paramContext.getApplicationInfo("com.google.android.gms", 0);
      a = ((ApplicationInfo)localObject1).packageName;
      c = ((ApplicationInfo)localObject1).uid;
      localObject1 = a;
      return localObject1;
    }
    catch (PackageManager.NameNotFoundException localNameNotFoundException1)
    {
      try
      {
        paramContext = paramContext.getApplicationInfo("com.google.android.gsf", 0);
        a = paramContext.packageName;
        c = paramContext.uid;
        paramContext = a;
        return paramContext;
      }
      catch (PackageManager.NameNotFoundException paramContext)
      {
        Log.w("InstanceID/Rpc", "Both Google Play Services and legacy GSF package are missing");
      }
    }
    return null;
  }
  
  static String a(Intent paramIntent)
  {
    if (paramIntent == null) {
      throw new IOException("SERVICE_NOT_AVAILABLE");
    }
    String str2 = paramIntent.getStringExtra("registration_id");
    String str1 = str2;
    if (str2 == null) {
      str1 = paramIntent.getStringExtra("unregistered");
    }
    paramIntent.getLongExtra("Retry-After", 0L);
    if (str1 == null)
    {
      str1 = paramIntent.getStringExtra("error");
      if (str1 != null) {
        throw new IOException(str1);
      }
      Log.w("InstanceID/Rpc", "Unexpected response from GCM " + paramIntent.getExtras(), new Throwable());
      throw new IOException("SERVICE_NOT_AVAILABLE");
    }
    return str1;
  }
  
  /* Error */
  private static String a(KeyPair paramKeyPair, String... paramVarArgs)
  {
    // Byte code:
    //   0: ldc -51
    //   2: aload_1
    //   3: invokestatic 211	android/text/TextUtils:join	(Ljava/lang/CharSequence;[Ljava/lang/Object;)Ljava/lang/String;
    //   6: ldc -43
    //   8: invokevirtual 219	java/lang/String:getBytes	(Ljava/lang/String;)[B
    //   11: astore_1
    //   12: aload_0
    //   13: invokevirtual 225	java/security/KeyPair:getPrivate	()Ljava/security/PrivateKey;
    //   16: astore_2
    //   17: aload_2
    //   18: instanceof 227
    //   21: ifeq +43 -> 64
    //   24: ldc -27
    //   26: astore_0
    //   27: aload_0
    //   28: invokestatic 235	java/security/Signature:getInstance	(Ljava/lang/String;)Ljava/security/Signature;
    //   31: astore_0
    //   32: aload_0
    //   33: aload_2
    //   34: invokevirtual 239	java/security/Signature:initSign	(Ljava/security/PrivateKey;)V
    //   37: aload_0
    //   38: aload_1
    //   39: invokevirtual 243	java/security/Signature:update	([B)V
    //   42: aload_0
    //   43: invokevirtual 247	java/security/Signature:sign	()[B
    //   46: invokestatic 252	com/google/android/gms/iid/a:a	([B)Ljava/lang/String;
    //   49: astore_0
    //   50: aload_0
    //   51: areturn
    //   52: astore_0
    //   53: ldc 124
    //   55: ldc -2
    //   57: aload_0
    //   58: invokestatic 256	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   61: pop
    //   62: aconst_null
    //   63: areturn
    //   64: ldc_w 258
    //   67: astore_0
    //   68: goto -41 -> 27
    //   71: astore_0
    //   72: ldc 124
    //   74: ldc_w 260
    //   77: aload_0
    //   78: invokestatic 256	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   81: pop
    //   82: aconst_null
    //   83: areturn
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	84	0	paramKeyPair	KeyPair
    //   0	84	1	paramVarArgs	String[]
    //   16	18	2	localPrivateKey	java.security.PrivateKey
    // Exception table:
    //   from	to	target	type
    //   0	12	52	java/io/UnsupportedEncodingException
    //   12	24	71	java/security/GeneralSecurityException
    //   27	50	71	java/security/GeneralSecurityException
  }
  
  private void a(Object paramObject)
  {
    synchronized (getClass())
    {
      Iterator localIterator = this.f.keySet().iterator();
      if (localIterator.hasNext())
      {
        String str = (String)localIterator.next();
        Object localObject = this.f.get(str);
        this.f.put(str, paramObject);
        a(localObject, paramObject);
      }
    }
  }
  
  private static void a(Object paramObject1, Object paramObject2)
  {
    if ((paramObject1 instanceof ConditionVariable)) {
      ((ConditionVariable)paramObject1).open();
    }
    Message localMessage;
    if ((paramObject1 instanceof Messenger))
    {
      paramObject1 = (Messenger)paramObject1;
      localMessage = Message.obtain();
      localMessage.obj = paramObject2;
    }
    try
    {
      paramObject1.send(localMessage);
      return;
    }
    catch (RemoteException paramObject1)
    {
      Log.w("InstanceID/Rpc", "Failed to send response " + paramObject1);
    }
  }
  
  private void a(String paramString, Object paramObject)
  {
    synchronized (getClass())
    {
      Object localObject = this.f.get(paramString);
      this.f.put(paramString, paramObject);
      a(localObject, paramObject);
      return;
    }
  }
  
  /* Error */
  private Intent b(Bundle arg1, KeyPair paramKeyPair)
  {
    // Byte code:
    //   0: new 289	android/os/ConditionVariable
    //   3: dup
    //   4: invokespecial 313	android/os/ConditionVariable:<init>	()V
    //   7: astore 7
    //   9: invokestatic 315	com/google/android/gms/iid/j:a	()Ljava/lang/String;
    //   12: astore 6
    //   14: aload_0
    //   15: invokevirtual 265	java/lang/Object:getClass	()Ljava/lang/Class;
    //   18: astore 8
    //   20: aload 8
    //   22: monitorenter
    //   23: aload_0
    //   24: getfield 48	com/google/android/gms/iid/j:f	Ljava/util/Map;
    //   27: aload 6
    //   29: aload 7
    //   31: invokeinterface 282 3 0
    //   36: pop
    //   37: aload 8
    //   39: monitorexit
    //   40: invokestatic 321	android/os/SystemClock:elapsedRealtime	()J
    //   43: lstore_3
    //   44: aload_0
    //   45: getfield 323	com/google/android/gms/iid/j:o	J
    //   48: lconst_0
    //   49: lcmp
    //   50: ifeq +70 -> 120
    //   53: lload_3
    //   54: aload_0
    //   55: getfield 323	com/google/android/gms/iid/j:o	J
    //   58: lcmp
    //   59: ifgt +61 -> 120
    //   62: ldc 124
    //   64: new 126	java/lang/StringBuilder
    //   67: dup
    //   68: ldc_w 325
    //   71: invokespecial 129	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   74: aload_0
    //   75: getfield 323	com/google/android/gms/iid/j:o	J
    //   78: lload_3
    //   79: lsub
    //   80: invokevirtual 328	java/lang/StringBuilder:append	(J)Ljava/lang/StringBuilder;
    //   83: ldc_w 330
    //   86: invokevirtual 150	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   89: aload_0
    //   90: getfield 332	com/google/android/gms/iid/j:n	I
    //   93: invokevirtual 138	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   96: invokevirtual 140	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   99: invokestatic 145	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
    //   102: pop
    //   103: new 164	java/io/IOException
    //   106: dup
    //   107: ldc_w 334
    //   110: invokespecial 167	java/io/IOException:<init>	(Ljava/lang/String;)V
    //   113: athrow
    //   114: astore_1
    //   115: aload 8
    //   117: monitorexit
    //   118: aload_1
    //   119: athrow
    //   120: aload_0
    //   121: getfield 336	com/google/android/gms/iid/j:g	Landroid/os/Messenger;
    //   124: ifnonnull +33 -> 157
    //   127: aload_0
    //   128: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   131: invokestatic 338	com/google/android/gms/iid/j:a	(Landroid/content/Context;)Ljava/lang/String;
    //   134: pop
    //   135: aload_0
    //   136: new 294	android/os/Messenger
    //   139: dup
    //   140: new 340	com/google/android/gms/iid/k
    //   143: dup
    //   144: aload_0
    //   145: invokestatic 346	android/os/Looper:getMainLooper	()Landroid/os/Looper;
    //   148: invokespecial 349	com/google/android/gms/iid/k:<init>	(Lcom/google/android/gms/iid/j;Landroid/os/Looper;)V
    //   151: invokespecial 352	android/os/Messenger:<init>	(Landroid/os/Handler;)V
    //   154: putfield 336	com/google/android/gms/iid/j:g	Landroid/os/Messenger;
    //   157: getstatic 32	com/google/android/gms/iid/j:a	Ljava/lang/String;
    //   160: ifnonnull +14 -> 174
    //   163: new 164	java/io/IOException
    //   166: dup
    //   167: ldc_w 354
    //   170: invokespecial 167	java/io/IOException:<init>	(Ljava/lang/String;)V
    //   173: athrow
    //   174: aload_0
    //   175: invokestatic 321	android/os/SystemClock:elapsedRealtime	()J
    //   178: putfield 356	com/google/android/gms/iid/j:k	J
    //   181: new 74	android/content/Intent
    //   184: dup
    //   185: ldc 76
    //   187: invokespecial 79	android/content/Intent:<init>	(Ljava/lang/String;)V
    //   190: astore 8
    //   192: aload 8
    //   194: getstatic 32	com/google/android/gms/iid/j:a	Ljava/lang/String;
    //   197: invokevirtual 360	android/content/Intent:setPackage	(Ljava/lang/String;)Landroid/content/Intent;
    //   200: pop
    //   201: aload_1
    //   202: ldc_w 362
    //   205: aload_0
    //   206: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   209: invokestatic 367	com/google/android/gms/gcm/a:b	(Landroid/content/Context;)I
    //   212: invokestatic 57	java/lang/Integer:toString	(I)Ljava/lang/String;
    //   215: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   218: aload_1
    //   219: ldc_w 375
    //   222: getstatic 380	android/os/Build$VERSION:SDK_INT	I
    //   225: invokestatic 57	java/lang/Integer:toString	(I)Ljava/lang/String;
    //   228: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   231: aload_1
    //   232: ldc_w 382
    //   235: aload_0
    //   236: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   239: invokestatic 384	com/google/android/gms/iid/a:a	(Landroid/content/Context;)I
    //   242: invokestatic 57	java/lang/Integer:toString	(I)Ljava/lang/String;
    //   245: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   248: aload_1
    //   249: ldc_w 386
    //   252: ldc_w 388
    //   255: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   258: aload_1
    //   259: ldc_w 390
    //   262: aload_2
    //   263: invokestatic 393	com/google/android/gms/iid/a:a	(Ljava/security/KeyPair;)Ljava/lang/String;
    //   266: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   269: aload_2
    //   270: invokevirtual 397	java/security/KeyPair:getPublic	()Ljava/security/PublicKey;
    //   273: invokeinterface 402 1 0
    //   278: invokestatic 252	com/google/android/gms/iid/a:a	([B)Ljava/lang/String;
    //   281: astore 9
    //   283: aload_1
    //   284: ldc_w 404
    //   287: aload 9
    //   289: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   292: aload_1
    //   293: ldc_w 406
    //   296: aload_2
    //   297: iconst_2
    //   298: anewarray 215	java/lang/String
    //   301: dup
    //   302: iconst_0
    //   303: aload_0
    //   304: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   307: invokevirtual 409	android/content/Context:getPackageName	()Ljava/lang/String;
    //   310: aastore
    //   311: dup
    //   312: iconst_1
    //   313: aload 9
    //   315: aastore
    //   316: invokestatic 411	com/google/android/gms/iid/j:a	(Ljava/security/KeyPair;[Ljava/lang/String;)Ljava/lang/String;
    //   319: invokevirtual 373	android/os/Bundle:putString	(Ljava/lang/String;Ljava/lang/String;)V
    //   322: aload 8
    //   324: aload_1
    //   325: invokevirtual 415	android/content/Intent:putExtras	(Landroid/os/Bundle;)Landroid/content/Intent;
    //   328: pop
    //   329: aload_0
    //   330: aload 8
    //   332: invokespecial 418	com/google/android/gms/iid/j:c	(Landroid/content/Intent;)V
    //   335: aload_0
    //   336: invokestatic 321	android/os/SystemClock:elapsedRealtime	()J
    //   339: putfield 356	com/google/android/gms/iid/j:k	J
    //   342: aload 8
    //   344: ldc_w 420
    //   347: new 126	java/lang/StringBuilder
    //   350: dup
    //   351: ldc_w 422
    //   354: invokespecial 129	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   357: aload 6
    //   359: invokevirtual 150	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   362: ldc_w 424
    //   365: invokevirtual 150	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   368: invokevirtual 140	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   371: invokevirtual 428	android/content/Intent:putExtra	(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
    //   374: pop
    //   375: aload 8
    //   377: ldc_w 430
    //   380: new 126	java/lang/StringBuilder
    //   383: dup
    //   384: ldc_w 422
    //   387: invokespecial 129	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   390: aload 6
    //   392: invokevirtual 150	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   395: ldc_w 424
    //   398: invokevirtual 150	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   401: invokevirtual 140	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   404: invokevirtual 428	android/content/Intent:putExtra	(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
    //   407: pop
    //   408: ldc -97
    //   410: getstatic 32	com/google/android/gms/iid/j:a	Ljava/lang/String;
    //   413: invokevirtual 434	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   416: istore 5
    //   418: aload 8
    //   420: ldc_w 436
    //   423: invokevirtual 173	android/content/Intent:getStringExtra	(Ljava/lang/String;)Ljava/lang/String;
    //   426: astore_1
    //   427: aload_1
    //   428: ifnull +12 -> 440
    //   431: ldc_w 388
    //   434: aload_1
    //   435: invokevirtual 434	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   438: istore 5
    //   440: ldc 124
    //   442: iconst_3
    //   443: invokestatic 440	android/util/Log:isLoggable	(Ljava/lang/String;I)Z
    //   446: ifeq +30 -> 476
    //   449: ldc 124
    //   451: new 126	java/lang/StringBuilder
    //   454: dup
    //   455: ldc_w 442
    //   458: invokespecial 129	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   461: aload 8
    //   463: invokevirtual 189	android/content/Intent:getExtras	()Landroid/os/Bundle;
    //   466: invokevirtual 192	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   469: invokevirtual 140	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   472: invokestatic 444	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   475: pop
    //   476: aload_0
    //   477: getfield 446	com/google/android/gms/iid/j:h	Landroid/os/Messenger;
    //   480: ifnull +97 -> 577
    //   483: aload 8
    //   485: ldc_w 448
    //   488: aload_0
    //   489: getfield 336	com/google/android/gms/iid/j:g	Landroid/os/Messenger;
    //   492: invokevirtual 451	android/content/Intent:putExtra	(Ljava/lang/String;Landroid/os/Parcelable;)Landroid/content/Intent;
    //   495: pop
    //   496: invokestatic 300	android/os/Message:obtain	()Landroid/os/Message;
    //   499: astore_1
    //   500: aload_1
    //   501: aload 8
    //   503: putfield 304	android/os/Message:obj	Ljava/lang/Object;
    //   506: aload_0
    //   507: getfield 446	com/google/android/gms/iid/j:h	Landroid/os/Messenger;
    //   510: aload_1
    //   511: invokevirtual 308	android/os/Messenger:send	(Landroid/os/Message;)V
    //   514: aload 7
    //   516: ldc2_w 452
    //   519: invokevirtual 457	android/os/ConditionVariable:block	(J)Z
    //   522: pop
    //   523: aload_0
    //   524: invokevirtual 265	java/lang/Object:getClass	()Ljava/lang/Class;
    //   527: astore_1
    //   528: aload_1
    //   529: monitorenter
    //   530: aload_0
    //   531: getfield 48	com/google/android/gms/iid/j:f	Ljava/util/Map;
    //   534: aload 6
    //   536: invokeinterface 460 2 0
    //   541: astore_2
    //   542: aload_2
    //   543: instanceof 74
    //   546: ifeq +166 -> 712
    //   549: aload_2
    //   550: checkcast 74	android/content/Intent
    //   553: astore_2
    //   554: aload_1
    //   555: monitorexit
    //   556: aload_2
    //   557: areturn
    //   558: astore_1
    //   559: ldc 124
    //   561: iconst_3
    //   562: invokestatic 440	android/util/Log:isLoggable	(Ljava/lang/String;I)Z
    //   565: ifeq +12 -> 577
    //   568: ldc 124
    //   570: ldc_w 462
    //   573: invokestatic 444	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   576: pop
    //   577: iload 5
    //   579: ifeq +48 -> 627
    //   582: new 74	android/content/Intent
    //   585: dup
    //   586: ldc_w 464
    //   589: invokespecial 79	android/content/Intent:<init>	(Ljava/lang/String;)V
    //   592: astore_1
    //   593: aload_1
    //   594: aload_0
    //   595: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   598: invokevirtual 409	android/content/Context:getPackageName	()Ljava/lang/String;
    //   601: invokevirtual 360	android/content/Intent:setPackage	(Ljava/lang/String;)Landroid/content/Intent;
    //   604: pop
    //   605: aload_1
    //   606: ldc_w 466
    //   609: aload 8
    //   611: invokevirtual 451	android/content/Intent:putExtra	(Ljava/lang/String;Landroid/os/Parcelable;)Landroid/content/Intent;
    //   614: pop
    //   615: aload_0
    //   616: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   619: aload_1
    //   620: invokevirtual 470	android/content/Context:startService	(Landroid/content/Intent;)Landroid/content/ComponentName;
    //   623: pop
    //   624: goto -110 -> 514
    //   627: aload 8
    //   629: ldc_w 448
    //   632: aload_0
    //   633: getfield 336	com/google/android/gms/iid/j:g	Landroid/os/Messenger;
    //   636: invokevirtual 451	android/content/Intent:putExtra	(Ljava/lang/String;Landroid/os/Parcelable;)Landroid/content/Intent;
    //   639: pop
    //   640: aload 8
    //   642: ldc_w 472
    //   645: ldc_w 388
    //   648: invokevirtual 428	android/content/Intent:putExtra	(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
    //   651: pop
    //   652: aload_0
    //   653: getfield 474	com/google/android/gms/iid/j:i	Lcom/google/android/gms/iid/MessengerCompat;
    //   656: ifnull +43 -> 699
    //   659: invokestatic 300	android/os/Message:obtain	()Landroid/os/Message;
    //   662: astore_1
    //   663: aload_1
    //   664: aload 8
    //   666: putfield 304	android/os/Message:obj	Ljava/lang/Object;
    //   669: aload_0
    //   670: getfield 474	com/google/android/gms/iid/j:i	Lcom/google/android/gms/iid/MessengerCompat;
    //   673: aload_1
    //   674: invokevirtual 478	com/google/android/gms/iid/MessengerCompat:b	(Landroid/os/Message;)V
    //   677: goto -163 -> 514
    //   680: astore_1
    //   681: ldc 124
    //   683: iconst_3
    //   684: invokestatic 440	android/util/Log:isLoggable	(Ljava/lang/String;I)Z
    //   687: ifeq +12 -> 699
    //   690: ldc 124
    //   692: ldc_w 462
    //   695: invokestatic 444	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   698: pop
    //   699: aload_0
    //   700: getfield 50	com/google/android/gms/iid/j:e	Landroid/content/Context;
    //   703: aload 8
    //   705: invokevirtual 470	android/content/Context:startService	(Landroid/content/Intent;)Landroid/content/ComponentName;
    //   708: pop
    //   709: goto -195 -> 514
    //   712: aload_2
    //   713: instanceof 215
    //   716: ifeq +20 -> 736
    //   719: new 164	java/io/IOException
    //   722: dup
    //   723: aload_2
    //   724: checkcast 215	java/lang/String
    //   727: invokespecial 167	java/io/IOException:<init>	(Ljava/lang/String;)V
    //   730: athrow
    //   731: astore_2
    //   732: aload_1
    //   733: monitorexit
    //   734: aload_2
    //   735: athrow
    //   736: ldc 124
    //   738: new 126	java/lang/StringBuilder
    //   741: dup
    //   742: ldc_w 480
    //   745: invokespecial 129	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   748: aload_2
    //   749: invokevirtual 192	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   752: invokevirtual 140	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   755: invokestatic 145	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
    //   758: pop
    //   759: new 164	java/io/IOException
    //   762: dup
    //   763: ldc_w 482
    //   766: invokespecial 167	java/io/IOException:<init>	(Ljava/lang/String;)V
    //   769: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	770	0	this	j
    //   0	770	2	paramKeyPair	KeyPair
    //   43	36	3	l1	long
    //   416	162	5	bool	boolean
    //   12	523	6	str1	String
    //   7	508	7	localConditionVariable	ConditionVariable
    //   18	686	8	localObject	Object
    //   281	33	9	str2	String
    // Exception table:
    //   from	to	target	type
    //   23	40	114	finally
    //   506	514	558	android/os/RemoteException
    //   669	677	680	android/os/RemoteException
    //   530	556	731	finally
    //   712	731	731	finally
    //   732	734	731	finally
    //   736	770	731	finally
  }
  
  private void c(Intent paramIntent)
  {
    try
    {
      if (this.j == null)
      {
        Intent localIntent = new Intent();
        localIntent.setPackage("com.google.example.invalidpackage");
        this.j = PendingIntent.getBroadcast(this.e, 0, localIntent, 0);
      }
      paramIntent.putExtra("app", this.j);
      return;
    }
    finally {}
  }
  
  final Intent a(Bundle paramBundle, KeyPair paramKeyPair)
  {
    Intent localIntent2 = b(paramBundle, paramKeyPair);
    Intent localIntent1 = localIntent2;
    if (localIntent2 != null)
    {
      localIntent1 = localIntent2;
      if (localIntent2.hasExtra("google.messenger")) {
        localIntent1 = b(paramBundle, paramKeyPair);
      }
    }
    return localIntent1;
  }
  
  public final void a(Message paramMessage)
  {
    if (paramMessage == null) {
      return;
    }
    if ((paramMessage.obj instanceof Intent))
    {
      Object localObject = (Intent)paramMessage.obj;
      ((Intent)localObject).setExtrasClassLoader(MessengerCompat.class.getClassLoader());
      if (((Intent)localObject).hasExtra("google.messenger"))
      {
        localObject = ((Intent)localObject).getParcelableExtra("google.messenger");
        if ((localObject instanceof MessengerCompat)) {
          this.i = ((MessengerCompat)localObject);
        }
        if ((localObject instanceof Messenger)) {
          this.h = ((Messenger)localObject);
        }
      }
      b((Intent)paramMessage.obj);
      return;
    }
    Log.w("InstanceID/Rpc", "Dropping invalid message");
  }
  
  final void b(Intent paramIntent)
  {
    if (paramIntent == null) {
      if (Log.isLoggable("InstanceID/Rpc", 3)) {
        Log.d("InstanceID/Rpc", "Unexpected response: null");
      }
    }
    do
    {
      return;
      localObject1 = paramIntent.getAction();
      if (("com.google.android.c2dm.intent.REGISTRATION".equals(localObject1)) || ("com.google.android.gms.iid.InstanceID".equals(localObject1))) {
        break;
      }
    } while (!Log.isLoggable("InstanceID/Rpc", 3));
    Log.d("InstanceID/Rpc", "Unexpected response " + paramIntent.getAction());
    return;
    Object localObject1 = paramIntent.getStringExtra("registration_id");
    if (localObject1 == null) {
      localObject1 = paramIntent.getStringExtra("unregistered");
    }
    for (;;)
    {
      Object localObject3;
      if (localObject1 == null)
      {
        String str = paramIntent.getStringExtra("error");
        if (str == null)
        {
          Log.w("InstanceID/Rpc", "Unexpected response, no error or registration id " + paramIntent.getExtras());
          return;
        }
        if (Log.isLoggable("InstanceID/Rpc", 3)) {
          Log.d("InstanceID/Rpc", "Received InstanceID error " + str);
        }
        localObject2 = null;
        localObject3 = null;
        localObject1 = str;
        if (str.startsWith("|"))
        {
          localObject1 = str.split("\\|");
          if (!"ID".equals(localObject1[1])) {
            Log.w("InstanceID/Rpc", "Unexpected structured response " + str);
          }
          if (localObject1.length > 2)
          {
            localObject3 = localObject1[2];
            str = localObject1[3];
            localObject2 = localObject3;
            localObject1 = str;
            if (str.startsWith(":"))
            {
              localObject1 = str.substring(1);
              localObject2 = localObject3;
            }
            paramIntent.putExtra("error", (String)localObject1);
          }
        }
        else
        {
          if (localObject2 != null) {
            break label407;
          }
          a(localObject1);
        }
        for (;;)
        {
          long l1 = paramIntent.getLongExtra("Retry-After", 0L);
          if (l1 <= 0L) {
            break label418;
          }
          this.l = SystemClock.elapsedRealtime();
          this.n = ((int)l1 * 1000);
          this.o = (SystemClock.elapsedRealtime() + this.n);
          Log.w("InstanceID/Rpc", "Explicit request from server to backoff: " + this.n);
          return;
          localObject1 = "UNKNOWN";
          localObject2 = localObject3;
          break;
          label407:
          a(localObject2, localObject1);
        }
        label418:
        if (((!"SERVICE_NOT_AVAILABLE".equals(localObject1)) && (!"AUTHENTICATION_FAILED".equals(localObject1))) || (!"com.google.android.gsf".equals(a))) {
          break;
        }
        this.m += 1;
        if (this.m < 3) {
          break;
        }
        if (this.m == 3) {
          this.n = (new Random().nextInt(1000) + 1000);
        }
        this.n *= 2;
        this.o = (SystemClock.elapsedRealtime() + this.n);
        Log.w("InstanceID/Rpc", "Backoff due to " + (String)localObject1 + " for " + this.n);
        return;
      }
      this.k = SystemClock.elapsedRealtime();
      this.o = 0L;
      this.m = 0;
      this.n = 0;
      if (Log.isLoggable("InstanceID/Rpc", 3)) {
        Log.d("InstanceID/Rpc", "AppIDResponse: " + (String)localObject1 + " " + paramIntent.getExtras());
      }
      Object localObject2 = null;
      if (((String)localObject1).startsWith("|"))
      {
        localObject3 = ((String)localObject1).split("\\|");
        if (!"ID".equals(localObject3[1])) {
          Log.w("InstanceID/Rpc", "Unexpected structured response " + (String)localObject1);
        }
        localObject2 = localObject3[2];
        if (localObject3.length > 4)
        {
          if (!"SYNC".equals(localObject3[3])) {
            break label773;
          }
          InstanceIDListenerService.a(this.e);
        }
      }
      label773:
      while (!"RST".equals(localObject3[3]))
      {
        localObject3 = localObject3[(localObject3.length - 1)];
        localObject1 = localObject3;
        if (((String)localObject3).startsWith(":")) {
          localObject1 = ((String)localObject3).substring(1);
        }
        paramIntent.putExtra("registration_id", (String)localObject1);
        if (localObject2 != null) {
          break;
        }
        a(paramIntent);
        return;
      }
      localObject1 = this.e;
      a.b(this.e);
      InstanceIDListenerService.a((Context)localObject1, a.b());
      paramIntent.removeExtra("registration_id");
      a(localObject2, paramIntent);
      return;
      a(localObject2, paramIntent);
      return;
    }
  }
}
