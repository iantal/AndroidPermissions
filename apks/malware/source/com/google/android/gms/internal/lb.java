package com.google.android.gms.internal;

import android.app.Activity;
import android.app.Application;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.res.Resources;
import android.os.Bundle;
import com.google.android.gms.common.g;
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Set;

public final class lb
  implements cy
{
  public static final String a;
  private static final lb c;
  public final String b = lo.d();
  private final Object d = new Object();
  private final lc e = new lc(this.b);
  private BigInteger f = BigInteger.ONE;
  private final HashSet<kz> g = new HashSet();
  private final HashMap<String, le> h = new HashMap();
  private boolean i = false;
  private boolean j = true;
  private boolean k = false;
  private Context l;
  private gt m;
  private boolean n = true;
  private ac o = null;
  private ad p = null;
  private ab q = null;
  private LinkedList<Thread> r = new LinkedList();
  private boolean s = false;
  private Bundle t = bt.a();
  private ib u = null;
  private String v;
  
  static
  {
    lb localLb = new lb();
    c = localLb;
    a = localLb.b;
  }
  
  private lb() {}
  
  public static Bundle a(Context paramContext, ld paramLd, String paramString)
  {
    return c.b(paramContext, paramLd, paramString);
  }
  
  public static lb a()
  {
    return c;
  }
  
  public static String a(int paramInt, String paramString)
  {
    Object localObject = c;
    if (((lb)localObject).m.f) {}
    for (localObject = ((lb)localObject).l.getResources(); localObject == null; localObject = g.c(((lb)localObject).l)) {
      return paramString;
    }
    return ((Resources)localObject).getString(paramInt);
  }
  
  public static void a(Context paramContext, gt paramGt)
  {
    lb localLb = c;
    for (;;)
    {
      Thread localThread;
      synchronized (localLb.d)
      {
        if (!localLb.k)
        {
          localLb.l = paramContext.getApplicationContext();
          localLb.m = paramGt;
          localLb.j = paramContext.getSharedPreferences("admob", 0).getBoolean("use_https", true);
          og.a(paramContext);
          if (g.a(paramContext) == 0) {
            break label138;
          }
          localLb.a(bt.a());
          localThread = Thread.currentThread();
        }
      }
      synchronized (localLb.d)
      {
        if (localLb.s)
        {
          ib.a(localLb.l, localThread, localLb.m);
          localLb.v = lo.a(paramContext, paramGt.c);
          localLb.k = true;
          return;
          label138:
          new cx(paramContext, localLb);
          continue;
          paramContext = finally;
          throw paramContext;
        }
        localLb.r.add(localThread);
      }
    }
  }
  
  public static void a(Context paramContext, boolean paramBoolean)
  {
    lb localLb = c;
    synchronized (localLb.d)
    {
      if (paramBoolean != localLb.j)
      {
        localLb.j = paramBoolean;
        paramContext = paramContext.getSharedPreferences("admob", 0).edit();
        paramContext.putBoolean("use_https", paramBoolean);
        paramContext.commit();
      }
      return;
    }
  }
  
  public static void a(Throwable paramThrowable)
  {
    lb localLb = c;
    if (localLb.k) {
      new ib(localLb.l, localLb.m, null, null).a(paramThrowable);
    }
  }
  
  public static void a(HashSet<kz> paramHashSet)
  {
    lb localLb = c;
    synchronized (localLb.d)
    {
      localLb.g.addAll(paramHashSet);
      return;
    }
  }
  
  private Bundle b(Context paramContext, ld paramLd, String paramString)
  {
    Bundle localBundle;
    synchronized (this.d)
    {
      localBundle = new Bundle();
      localBundle.putBundle("app", this.e.a(paramContext, paramString));
      paramContext = new Bundle();
      paramString = this.h.keySet().iterator();
      if (paramString.hasNext())
      {
        String str = (String)paramString.next();
        paramContext.putBundle(str, ((le)this.h.get(str)).a());
      }
    }
    localBundle.putBundle("slots", paramContext);
    paramContext = new ArrayList();
    paramString = this.g.iterator();
    while (paramString.hasNext()) {
      paramContext.add(((kz)paramString.next()).d());
    }
    localBundle.putParcelableArrayList("ads", paramContext);
    paramLd.a(this.g);
    this.g.clear();
    return localBundle;
  }
  
  public static String b()
  {
    return c.i();
  }
  
  public static lc c()
  {
    return c.j();
  }
  
  public static boolean d()
  {
    return c.k();
  }
  
  public static boolean e()
  {
    return c.l();
  }
  
  public static String f()
  {
    return c.m();
  }
  
  public static Bundle g()
  {
    return c.n();
  }
  
  private boolean h()
  {
    synchronized (this.d)
    {
      boolean bool = this.n;
      return bool;
    }
  }
  
  private String i()
  {
    synchronized (this.d)
    {
      String str = this.f.toString();
      this.f = this.f.add(BigInteger.ONE);
      return str;
    }
  }
  
  private lc j()
  {
    synchronized (this.d)
    {
      lc localLc = this.e;
      return localLc;
    }
  }
  
  private boolean k()
  {
    synchronized (this.d)
    {
      boolean bool = this.i;
      this.i = true;
      return bool;
    }
  }
  
  private boolean l()
  {
    synchronized (this.d)
    {
      boolean bool = this.j;
      return bool;
    }
  }
  
  private String m()
  {
    synchronized (this.d)
    {
      String str = this.v;
      return str;
    }
  }
  
  private Bundle n()
  {
    synchronized (this.d)
    {
      Bundle localBundle = this.t;
      return localBundle;
    }
  }
  
  public final ad a(Context paramContext)
  {
    if ((!c.n().getBoolean(bt.g.a(), false)) || (!po.a()) || (h())) {
      return null;
    }
    synchronized (this.d)
    {
      if (this.o != null) {
        break label86;
      }
      if (!(paramContext instanceof Activity)) {
        return null;
      }
    }
    this.o = new ac((Application)paramContext.getApplicationContext(), (Activity)paramContext);
    label86:
    if (this.q == null) {
      this.q = new ab();
    }
    if (this.p == null) {
      this.p = new ad(this.o, this.q, this.t, new ib(this.l, this.m, null, null));
    }
    this.p.a();
    paramContext = this.p;
    return paramContext;
  }
  
  public final void a(Bundle paramBundle)
  {
    synchronized (this.d)
    {
      this.s = true;
      this.t = paramBundle;
      if (!this.r.isEmpty()) {
        ib.a(this.l, (Thread)this.r.remove(0), this.m);
      }
    }
  }
  
  public final void a(kz paramKz)
  {
    synchronized (this.d)
    {
      this.g.add(paramKz);
      return;
    }
  }
  
  public final void a(String paramString, le paramLe)
  {
    synchronized (this.d)
    {
      this.h.put(paramString, paramLe);
      return;
    }
  }
  
  public final void a(boolean paramBoolean)
  {
    synchronized (this.d)
    {
      this.n = paramBoolean;
      return;
    }
  }
}
