package com.google.android.gms.ads.internal;

import android.app.Activity;
import android.content.Context;
import android.text.TextUtils;
import com.google.android.gms.ads.AdActivity;
import com.google.android.gms.ads.internal.client.MobileAdsSettingsParcel;
import com.google.android.gms.ads.internal.client.ag;
import com.google.android.gms.ads.internal.util.client.b;
import com.google.android.gms.ads.purchase.InAppPurchaseActivity;
import com.google.android.gms.analytics.h;
import com.google.android.gms.b.nj;
import com.google.android.gms.b.uh;
import com.google.android.gms.b.ui;
import com.google.android.gms.b.uq;
import com.google.android.gms.b.vp;
import com.google.android.gms.b.vq;
import com.google.android.gms.b.vr;
import com.google.android.gms.b.vt;
import java.util.regex.Pattern;

public final class o
  extends ag
  implements ui, vt
{
  private static final Object e = new Object();
  private static o f;
  vp a;
  String b;
  String c;
  private final Context d;
  private boolean g;
  private boolean h;
  
  private o(Context paramContext)
  {
    this.d = paramContext;
    this.g = false;
  }
  
  public static o a(Context paramContext)
  {
    synchronized (e)
    {
      if (f == null) {
        f = new o(paramContext.getApplicationContext());
      }
      paramContext = f;
      return paramContext;
    }
  }
  
  public final void a(uq paramUq) {}
  
  public final void a(uq paramUq, Activity paramActivity)
  {
    if ((paramUq == null) || (paramActivity == null)) {}
    do
    {
      return;
      if ((paramActivity instanceof AdActivity))
      {
        w.e();
        int i = nj.d(paramActivity);
        if (i == 1)
        {
          paramUq.a(true);
          paramUq.a("Interstitial Ad");
          return;
        }
        if ((i == 2) || (i == 3))
        {
          paramUq.a("Expanded Ad");
          return;
        }
        paramUq.a(null);
        return;
      }
    } while (!(paramActivity instanceof InAppPurchaseActivity));
    paramUq.a(null);
  }
  
  public final void a(String paramString, MobileAdsSettingsParcel paramMobileAdsSettingsParcel)
  {
    synchronized (e)
    {
      if (this.g)
      {
        b.e("Mobile ads is initialized already.");
        return;
      }
      if (this.d == null)
      {
        b.e("Fail to initialize mobile ads because context is null.");
        return;
      }
    }
    if (TextUtils.isEmpty(paramString))
    {
      b.e("Fail to initialize mobile ads because ApplicationCode is empty.");
      return;
    }
    this.g = true;
    if ((paramMobileAdsSettingsParcel != null) && (paramMobileAdsSettingsParcel.c))
    {
      w.e();
      if (nj.a(this.d.getPackageManager(), this.d.getPackageName(), "android.permission.INTERNET")) {
        break label106;
      }
      b.b("Missing permission android.permission.INTERNET");
    }
    for (;;)
    {
      return;
      label106:
      w.e();
      if (!nj.a(this.d.getPackageManager(), this.d.getPackageName(), "android.permission.ACCESS_NETWORK_STATE"))
      {
        b.b("Missing permission android.permission.ACCESS_NETWORK_STATE");
      }
      else
      {
        if (!Pattern.matches("ca-app-[a-z0-9_-]+~[a-z0-9_-]+", paramString)) {
          throw new IllegalArgumentException("Please provide a valid application code");
        }
        this.h = true;
        this.b = paramString;
        this.c = paramMobileAdsSettingsParcel.d;
        paramString = vr.a(this.d);
        paramMobileAdsSettingsParcel = new vq(this.b);
        if (!TextUtils.isEmpty(this.c)) {
          paramMobileAdsSettingsParcel.a(this.c);
        }
        paramString.a(paramMobileAdsSettingsParcel.a());
        paramString.a(this);
        uh.a(this.d).a(this);
        paramString.b();
      }
    }
  }
  
  public final boolean a()
  {
    synchronized (e)
    {
      boolean bool = this.h;
      return bool;
    }
  }
  
  public final void b()
  {
    this.a = vr.a(this.d).a();
  }
  
  public final int c()
  {
    synchronized (e)
    {
      if (!this.h) {
        return -1;
      }
      uq localUq = uh.a(this.d).a();
      if (localUq != null)
      {
        int i = localUq.b();
        return i;
      }
    }
    return -1;
  }
  
  public final String d()
  {
    synchronized (e)
    {
      if (!this.h) {
        return null;
      }
      String str = h.a(this.d).h();
      return str;
    }
  }
}
