package com.google.android.gms.ads.internal;

import android.net.Uri;
import android.net.Uri.Builder;
import android.os.RemoteException;
import android.text.TextUtils;
import android.view.View;
import com.google.android.gms.a.c;
import com.google.android.gms.a.f;
import com.google.android.gms.ads.internal.client.AdRequestParcel;
import com.google.android.gms.ads.internal.client.AdSizeParcel;
import com.google.android.gms.ads.internal.client.ac;
import com.google.android.gms.ads.internal.client.l;
import com.google.android.gms.ads.internal.client.n;
import com.google.android.gms.ads.internal.client.q;
import com.google.android.gms.ads.internal.client.u;
import com.google.android.gms.ads.internal.client.z;
import com.google.android.gms.ads.internal.overlay.v;
import com.google.android.gms.ads.internal.request.d;
import com.google.android.gms.ads.internal.util.client.VersionInfoParcel;
import com.google.android.gms.ads.internal.util.client.b;
import com.google.android.gms.b.ay;
import com.google.android.gms.b.ba;
import com.google.android.gms.b.cz;
import com.google.android.gms.b.dg;
import com.google.android.gms.b.dh;
import com.google.android.gms.b.dl;
import com.google.android.gms.b.do;
import com.google.android.gms.b.dp;
import com.google.android.gms.b.dv;
import com.google.android.gms.b.eu;
import com.google.android.gms.b.jm;
import com.google.android.gms.b.jy;
import com.google.android.gms.b.kr;
import com.google.android.gms.b.ml;
import com.google.android.gms.b.mm;
import com.google.android.gms.b.mn;
import com.google.android.gms.b.mp;
import com.google.android.gms.b.mr;
import com.google.android.gms.b.ms;
import com.google.android.gms.b.nj;
import com.google.android.gms.b.nm;
import com.google.android.gms.b.pa;
import com.google.android.gms.common.internal.aq;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

public abstract class a
  extends u
  implements com.google.android.gms.ads.internal.client.a, v, d, ay, eu, kr, mr
{
  protected final t a;
  protected final x b;
  protected transient AdRequestParcel c;
  protected final ba d;
  private dp e;
  private do f;
  private do g;
  
  a(x paramX)
  {
    this.b = paramX;
    this.a = new t(this);
    w.e().b(this.b.c);
    w.h().a(this.b.c, this.b.e);
    this.d = w.h().i();
  }
  
  private boolean q()
  {
    b.c("Ad leaving application.");
    if (this.b.n == null) {
      return false;
    }
    try
    {
      this.b.n.b();
      return true;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not call AdListener.onAdLeftApplication().", localRemoteException);
    }
    return false;
  }
  
  public final c a()
  {
    aq.b("getAdFrame must be called on the main UI thread.");
    return f.a(this.b.f);
  }
  
  final ArrayList<String> a(List<String> paramList, String paramString)
  {
    int i = o.a(this.b.c).c();
    ArrayList localArrayList = new ArrayList();
    Iterator localIterator = paramList.iterator();
    while (localIterator.hasNext())
    {
      String str = (String)localIterator.next();
      cz localCz = dh.L;
      paramList = str;
      if (((Boolean)w.n().a(localCz)).booleanValue())
      {
        paramList = str;
        if (o.a(this.b.c).a())
        {
          paramList = str;
          if (!TextUtils.isEmpty(str)) {
            paramList = Uri.parse(str).buildUpon().appendQueryParameter("ga_cid", paramString).appendQueryParameter("ga_hid", String.valueOf(i)).build().toString();
          }
        }
      }
      localArrayList.add(paramList);
    }
    return localArrayList;
  }
  
  protected final void a(View paramView)
  {
    this.b.f.addView(paramView, w.g().d());
  }
  
  public final void a(AdSizeParcel paramAdSizeParcel)
  {
    aq.b("setAdSize must be called on the main UI thread.");
    this.b.i = paramAdSizeParcel;
    if ((this.b.j != null) && (this.b.C == 0)) {
      this.b.j.b.a(paramAdSizeParcel);
    }
    if (this.b.f == null) {
      return;
    }
    if (this.b.f.getChildCount() > 1) {
      this.b.f.removeView(this.b.f.getNextView());
    }
    this.b.f.setMinimumWidth(paramAdSizeParcel.h);
    this.b.f.setMinimumHeight(paramAdSizeParcel.e);
    this.b.f.requestLayout();
  }
  
  public final void a(ac paramAc)
  {
    aq.b("setCorrelationIdProvider must be called on the main UI thread");
    this.b.p = paramAc;
  }
  
  public final void a(n paramN)
  {
    aq.b("setAdListener must be called on the main UI thread.");
    this.b.m = paramN;
  }
  
  public final void a(q paramQ)
  {
    aq.b("setAdListener must be called on the main UI thread.");
    this.b.n = paramQ;
  }
  
  public final void a(z paramZ)
  {
    aq.b("setAppEventListener must be called on the main UI thread.");
    this.b.o = paramZ;
  }
  
  public void a(dv paramDv)
  {
    throw new IllegalStateException("setOnCustomRenderedAdLoadedListener is not supported for current ad type");
  }
  
  public void a(jm paramJm)
  {
    throw new IllegalStateException("setInAppPurchaseListener is not supported for current ad type");
  }
  
  public void a(jy paramJy, String paramString)
  {
    throw new IllegalStateException("setPlayStorePurchaseParams is not supported for current ad type");
  }
  
  public final void a(mm paramMm)
  {
    this.e.a(this.f, new String[] { "arf" });
    dp localDp = this.e;
    this.g = dp.a();
    this.b.g = null;
    this.b.k = paramMm;
    if (b(paramMm)) {
      b.a("AdRenderer: " + this.b.h.getClass().getName());
    }
  }
  
  public final void a(String paramString1, String paramString2)
  {
    if (this.b.o != null) {}
    try
    {
      this.b.o.a(paramString1, paramString2);
      return;
    }
    catch (RemoteException paramString1)
    {
      b.c("Could not call the AppEventListener.", paramString1);
    }
  }
  
  public final void a(HashSet<mn> paramHashSet)
  {
    this.b.a(paramHashSet);
  }
  
  public final void a(boolean paramBoolean)
  {
    HashMap localHashMap;
    if ((this.b.j != null) && (this.b.j.b != null))
    {
      localHashMap = new HashMap();
      if (!paramBoolean) {
        break label70;
      }
    }
    label70:
    for (String str = "1";; str = "0")
    {
      localHashMap.put("isVisible", str);
      this.b.j.b.a("onAdVisibilityChanged", localHashMap);
      return;
    }
  }
  
  protected final boolean a(int paramInt)
  {
    b.e("Failed to load ad: " + paramInt);
    if (this.b.n == null) {
      return false;
    }
    try
    {
      this.b.n.a(paramInt);
      return true;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not call AdListener.onAdFailedToLoad().", localRemoteException);
    }
    return false;
  }
  
  public final boolean a(AdRequestParcel paramAdRequestParcel)
  {
    aq.b("loadAd must be called on the main UI thread.");
    if ((this.b.g != null) || (this.b.h != null))
    {
      if (this.c != null) {
        b.e("Aborting last ad request since another ad request is already in progress. The current request object will still be cached for future refreshes.");
      }
      this.c = paramAdRequestParcel;
      return false;
    }
    b.c("Starting ad request.");
    this.e = new dp("load_ad");
    this.f = new do(-1L, null, null);
    this.g = new do(-1L, null, null);
    Object localObject = this.e;
    this.f = dp.a();
    if (!paramAdRequestParcel.g)
    {
      localObject = new StringBuilder("Use AdRequest.Builder.addTestDevice(\"");
      l.a();
      b.c(com.google.android.gms.ads.internal.util.client.a.a(this.b.c) + "\") to get test ads on this device.");
    }
    return b(paramAdRequestParcel);
  }
  
  boolean a(ml paramMl)
  {
    return false;
  }
  
  protected abstract boolean a(ml paramMl1, ml paramMl2);
  
  public final void b()
  {
    aq.b("destroy must be called on the main UI thread.");
    this.a.a();
    this.d.b(this.b.j);
    this.b.g();
  }
  
  public void b(ml paramMl)
  {
    this.e.a(this.g, new String[] { "awr" });
    this.e.a(this.f, new String[] { "ttc" });
    this.b.h = null;
    if ((paramMl.d != -2) && (paramMl.d != 3)) {
      w.h().a(this.b.a());
    }
    if (paramMl.d == -1) {}
    do
    {
      do
      {
        return;
        if (a(paramMl)) {
          b.a("Ad refresh scheduled.");
        }
        if (paramMl.d != -2)
        {
          a(paramMl.d);
          return;
        }
        if (this.b.A == null) {
          this.b.A = new ms(this.b.b);
        }
        this.d.a(this.b.j);
      } while (!a(this.b.j, paramMl));
      this.b.j = paramMl;
      this.b.f();
      if (w.h().d() != null) {
        w.h().d().a(this.e);
      }
    } while (!this.b.d());
    o();
  }
  
  protected abstract boolean b(AdRequestParcel paramAdRequestParcel);
  
  protected abstract boolean b(mm paramMm);
  
  protected final void c(ml paramMl)
  {
    if (paramMl == null) {
      b.e("Ad state was null when trying to ping impression URLs.");
    }
    do
    {
      return;
      b.a("Pinging Impression URLs.");
      this.b.l.a();
    } while (paramMl.e == null);
    w.e();
    nj.a(this.b.c, this.b.e.c, a(paramMl.e, paramMl.x));
  }
  
  public final boolean c()
  {
    aq.b("isLoaded must be called on the main UI thread.");
    return (this.b.g == null) && (this.b.h == null) && (this.b.j != null);
  }
  
  protected boolean c(AdRequestParcel paramAdRequestParcel)
  {
    paramAdRequestParcel = this.b.f.getParent();
    return ((paramAdRequestParcel instanceof View)) && (((View)paramAdRequestParcel).isShown()) && (w.e().a());
  }
  
  public void d()
  {
    aq.b("pause must be called on the main UI thread.");
  }
  
  public final void d(AdRequestParcel paramAdRequestParcel)
  {
    if (c(paramAdRequestParcel))
    {
      a(paramAdRequestParcel);
      return;
    }
    b.c("Ad is not visible. Not refreshing ad.");
    this.a.a(paramAdRequestParcel);
  }
  
  public void e()
  {
    if (this.b.j == null) {
      b.e("Ad state was null when trying to ping click URLs.");
    }
    do
    {
      return;
      b.a("Pinging click URLs.");
      this.b.l.b();
      if (this.b.j.c != null)
      {
        w.e();
        nj.a(this.b.c, this.b.e.c, a(this.b.j.c, this.b.j.x));
      }
    } while (this.b.m == null);
    try
    {
      this.b.m.a();
      return;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not notify onAdClicked event.", localRemoteException);
    }
  }
  
  public void f()
  {
    aq.b("resume must be called on the main UI thread.");
  }
  
  public final void h()
  {
    aq.b("stopLoading must be called on the main UI thread.");
    this.b.a(true);
  }
  
  public final void i()
  {
    aq.b("recordManualImpression must be called on the main UI thread.");
    if (this.b.j == null) {
      b.e("Ad state was null when trying to ping manual tracking URLs.");
    }
    do
    {
      return;
      b.a("Pinging manual tracking URLs.");
    } while (this.b.j.f == null);
    w.e();
    nj.a(this.b.c, this.b.e.c, this.b.j.f);
  }
  
  public final AdSizeParcel j()
  {
    aq.b("getAdSize must be called on the main UI thread.");
    return this.b.i;
  }
  
  public final void l()
  {
    q();
  }
  
  protected final boolean m()
  {
    b.d("Ad closing.");
    if (this.b.n == null) {
      return false;
    }
    try
    {
      this.b.n.a();
      return true;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not call AdListener.onAdClosed().", localRemoteException);
    }
    return false;
  }
  
  protected final boolean n()
  {
    b.c("Ad opening.");
    if (this.b.n == null) {
      return false;
    }
    try
    {
      this.b.n.d();
      return true;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not call AdListener.onAdOpened().", localRemoteException);
    }
    return false;
  }
  
  protected boolean o()
  {
    b.c("Ad finished loading.");
    if (this.b.n == null) {
      return false;
    }
    try
    {
      this.b.n.c();
      return true;
    }
    catch (RemoteException localRemoteException)
    {
      b.c("Could not call AdListener.onAdLoaded().", localRemoteException);
    }
    return false;
  }
  
  protected void p()
  {
    c(this.b.j);
  }
}
