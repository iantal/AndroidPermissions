package com.google.android.gms.ads.internal;

import android.app.Activity;
import android.content.Context;
import android.graphics.Rect;
import android.os.Bundle;
import android.os.RemoteException;
import android.view.View;
import android.view.Window;
import com.google.android.gms.ads.internal.client.AdRequestParcel;
import com.google.android.gms.ads.internal.client.AdSizeParcel;
import com.google.android.gms.ads.internal.overlay.AdOverlayInfoParcel;
import com.google.android.gms.ads.internal.overlay.h;
import com.google.android.gms.ads.internal.util.client.VersionInfoParcel;
import com.google.android.gms.ads.internal.util.client.b;
import com.google.android.gms.b.ba;
import com.google.android.gms.b.bb;
import com.google.android.gms.b.cz;
import com.google.android.gms.b.dg;
import com.google.android.gms.b.dh;
import com.google.android.gms.b.fp;
import com.google.android.gms.b.hq;
import com.google.android.gms.b.ht;
import com.google.android.gms.b.ml;
import com.google.android.gms.b.nj;
import com.google.android.gms.b.nm;
import com.google.android.gms.b.pa;
import com.google.android.gms.b.pb;
import com.google.android.gms.b.pg;
import com.google.android.gms.common.internal.aq;

public final class m
  extends d
  implements fp
{
  protected transient boolean g = false;
  
  public m(Context paramContext, AdSizeParcel paramAdSizeParcel, String paramString, hq paramHq, VersionInfoParcel paramVersionInfoParcel)
  {
    super(paramContext, paramAdSizeParcel, paramString, paramHq, paramVersionInfoParcel);
  }
  
  private void a(Bundle paramBundle)
  {
    w.e();
    nj.a(this.b.c, this.b.e.c, "gmob-apps", paramBundle, false);
  }
  
  private void z()
  {
    if (this.b.d())
    {
      this.b.b();
      this.b.j = null;
      this.b.E = false;
      this.g = false;
    }
  }
  
  protected final pa a(g paramG)
  {
    w.f();
    pa localPa = pg.a(this.b.c, this.b.i, false, false, this.b.d, this.b.e);
    pb localPb = localPa.i();
    cz localCz = dh.I;
    localPb.a(this, null, this, this, ((Boolean)w.n().a(localCz)).booleanValue(), this, this, paramG, null);
    return localPa;
  }
  
  protected final boolean a(AdRequestParcel paramAdRequestParcel, ml paramMl, boolean paramBoolean)
  {
    if (this.b.d()) {
      w.g().a(paramMl.b.a());
    }
    return this.a.d();
  }
  
  public final boolean a(ml paramMl1, ml paramMl2)
  {
    if (!super.a(paramMl1, paramMl2)) {
      return false;
    }
    if (this.b.d()) {
      if (paramMl2.b != null) {
        paramMl2.b.i().d();
      }
    }
    for (;;)
    {
      return true;
      if ((this.b.B != null) && (paramMl2.j != null)) {
        this.d.a(this.b.i, paramMl2, this.b.B);
      }
    }
  }
  
  public final void a_()
  {
    z();
    super.a_();
  }
  
  public final void b(boolean paramBoolean)
  {
    this.b.E = paramBoolean;
  }
  
  public final boolean b(AdRequestParcel paramAdRequestParcel)
  {
    if (this.b.j != null)
    {
      b.e("An interstitial is already loading. Aborting.");
      return false;
    }
    return super.b(paramAdRequestParcel);
  }
  
  public final void b_()
  {
    p();
    super.b_();
  }
  
  public final void g()
  {
    aq.b("showInterstitial must be called on the main UI thread.");
    if (this.b.j == null)
    {
      b.e("The interstitial has not loaded.");
      return;
    }
    if (this.b.c.getApplicationContext() != null) {}
    Object localObject3;
    for (Object localObject1 = this.b.c.getApplicationContext().getPackageName();; localObject1 = this.b.c.getPackageName())
    {
      if (!this.g)
      {
        b.e("It is not recommended to show an interstitial before onAdLoaded completes.");
        localObject3 = new Bundle();
        ((Bundle)localObject3).putString("appid", (String)localObject1);
        ((Bundle)localObject3).putString("action", "show_interstitial_before_load_finish");
        a((Bundle)localObject3);
      }
      w.e();
      if (!nj.f(this.b.c))
      {
        b.e("It is not recommended to show an interstitial when app is not in foreground.");
        localObject3 = new Bundle();
        ((Bundle)localObject3).putString("appid", (String)localObject1);
        ((Bundle)localObject3).putString("action", "show_interstitial_app_not_in_foreground");
        a((Bundle)localObject3);
      }
      if (this.b.e()) {
        break;
      }
      if (!this.b.j.b.m()) {
        break label198;
      }
      b.e("The interstitial is already showing.");
      return;
    }
    label198:
    this.b.j.b.a(true);
    if ((this.b.j.b.i().b()) || (this.b.j.j != null))
    {
      localObject1 = this.d.a(this.b.i, this.b.j);
      if ((this.b.j.b.i().b()) && (localObject1 != null)) {
        ((bb)localObject1).a(this);
      }
    }
    if (this.b.j.k) {
      try
      {
        this.b.j.m.b();
        return;
      }
      catch (RemoteException localRemoteException)
      {
        b.c("Could not show interstitial.", localRemoteException);
        z();
        return;
      }
    }
    boolean bool2 = this.b.E;
    Object localObject2;
    boolean bool1;
    if ((this.b.c instanceof Activity))
    {
      localObject2 = ((Activity)this.b.c).getWindow();
      if ((localObject2 == null) || (((Window)localObject2).getDecorView() == null)) {
        bool1 = false;
      }
    }
    for (;;)
    {
      localObject2 = new InterstitialAdParameterParcel(bool2, bool1);
      int j = this.b.j.b.n();
      int i = j;
      if (j == -1) {
        i = this.b.j.g;
      }
      localObject2 = new AdOverlayInfoParcel(this, this, this, this.b.j.b, i, this.b.e, this.b.j.v, (InterstitialAdParameterParcel)localObject2);
      w.c();
      h.a(this.b.c, (AdOverlayInfoParcel)localObject2, true);
      return;
      localObject3 = new Rect();
      Rect localRect = new Rect();
      ((Window)localObject2).getDecorView().getGlobalVisibleRect((Rect)localObject3, null);
      ((Window)localObject2).getDecorView().getWindowVisibleDisplayFrame(localRect);
      if ((((Rect)localObject3).bottom != 0) && (localRect.bottom != 0) && (((Rect)localObject3).top == localRect.top)) {
        bool1 = true;
      } else {
        bool1 = false;
      }
    }
  }
  
  protected final boolean o()
  {
    if (super.o())
    {
      this.g = true;
      return true;
    }
    return false;
  }
}
