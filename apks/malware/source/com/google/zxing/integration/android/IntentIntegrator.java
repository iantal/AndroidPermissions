package com.google.zxing.integration.android;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.ActivityNotFoundException;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public final class IntentIntegrator
{
  public static final String ALL_CODE_TYPES = null;
  public static final String DEFAULT_MESSAGE = "This application requires Barcode Scanner. Would you like to install it?";
  public static final String DEFAULT_NO = "No";
  public static final String DEFAULT_TITLE = "Install Barcode Scanner?";
  public static final String DEFAULT_YES = "Yes";
  public static final String ONE_D_CODE_TYPES = "UPC_A,UPC_E,EAN_8,EAN_13,CODE_39,CODE_93,CODE_128";
  private static final String PACKAGE = "com.google.zxing.client.android";
  public static final Method PACKAGE_SETTER;
  public static final String PRODUCT_CODE_TYPES = "UPC_A,UPC_E,EAN_8,EAN_13";
  public static final String QR_CODE_TYPES = "QR_CODE";
  public static final int REQUEST_CODE = 49374;
  private static final String TAG = IntentIntegrator.class.getSimpleName();
  
  static
  {
    try
    {
      Method localMethod = Intent.class.getMethod("setPackage", new Class[] { String.class });
      PACKAGE_SETTER = localMethod;
      return;
    }
    catch (NoSuchMethodException localNoSuchMethodException)
    {
      for (;;)
      {
        Object localObject = null;
      }
    }
  }
  
  private IntentIntegrator() {}
  
  public static AlertDialog initiateScan(Activity paramActivity)
  {
    return initiateScan(paramActivity, "Install Barcode Scanner?", "This application requires Barcode Scanner. Would you like to install it?", "Yes", "No");
  }
  
  public static AlertDialog initiateScan(Activity paramActivity, int paramInt1, int paramInt2, int paramInt3, int paramInt4)
  {
    return initiateScan(paramActivity, paramActivity.getString(paramInt1), paramActivity.getString(paramInt2), paramActivity.getString(paramInt3), paramActivity.getString(paramInt4));
  }
  
  public static AlertDialog initiateScan(Activity paramActivity, CharSequence paramCharSequence1, CharSequence paramCharSequence2, CharSequence paramCharSequence3, CharSequence paramCharSequence4)
  {
    return initiateScan(paramActivity, paramCharSequence1, paramCharSequence2, paramCharSequence3, paramCharSequence4, ALL_CODE_TYPES);
  }
  
  public static AlertDialog initiateScan(Activity paramActivity, CharSequence paramCharSequence1, CharSequence paramCharSequence2, CharSequence paramCharSequence3, CharSequence paramCharSequence4, CharSequence paramCharSequence5)
  {
    Intent localIntent = new Intent("com.google.zxing.client.android.SCAN");
    setPackage(localIntent);
    localIntent.addCategory("android.intent.category.DEFAULT");
    if (paramCharSequence5 != null) {
      localIntent.putExtra("SCAN_FORMATS", paramCharSequence5);
    }
    try
    {
      paramActivity.startActivityForResult(localIntent, 49374);
      return null;
    }
    catch (ActivityNotFoundException paramCharSequence5) {}
    return showDownloadDialog(paramActivity, paramCharSequence1, paramCharSequence2, paramCharSequence3, paramCharSequence4);
  }
  
  public static IntentResult parseActivityResult(int paramInt1, int paramInt2, Intent paramIntent)
  {
    if (paramInt1 == 49374)
    {
      if (paramInt2 == -1) {
        return new IntentResult(paramIntent.getStringExtra("SCAN_RESULT"), paramIntent.getStringExtra("SCAN_RESULT_FORMAT"));
      }
      return new IntentResult(null, null);
    }
    return null;
  }
  
  private static void setPackage(Intent paramIntent)
  {
    if (PACKAGE_SETTER != null) {}
    try
    {
      PACKAGE_SETTER.invoke(paramIntent, new Object[] { "com.google.zxing.client.android" });
      return;
    }
    catch (InvocationTargetException paramIntent)
    {
      Log.w(TAG, paramIntent.getTargetException());
      return;
    }
    catch (IllegalAccessException paramIntent)
    {
      Log.w(TAG, paramIntent);
    }
  }
  
  public static void shareText(Activity paramActivity, CharSequence paramCharSequence)
  {
    shareText(paramActivity, paramCharSequence, "Install Barcode Scanner?", "This application requires Barcode Scanner. Would you like to install it?", "Yes", "No");
  }
  
  public static void shareText(Activity paramActivity, CharSequence paramCharSequence, int paramInt1, int paramInt2, int paramInt3, int paramInt4)
  {
    shareText(paramActivity, paramCharSequence, paramActivity.getString(paramInt1), paramActivity.getString(paramInt2), paramActivity.getString(paramInt3), paramActivity.getString(paramInt4));
  }
  
  public static void shareText(Activity paramActivity, CharSequence paramCharSequence1, CharSequence paramCharSequence2, CharSequence paramCharSequence3, CharSequence paramCharSequence4, CharSequence paramCharSequence5)
  {
    Intent localIntent = new Intent();
    localIntent.setAction("com.google.zxing.client.android.ENCODE");
    setPackage(localIntent);
    localIntent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
    localIntent.putExtra("ENCODE_DATA", paramCharSequence1);
    try
    {
      paramActivity.startActivity(localIntent);
      return;
    }
    catch (ActivityNotFoundException paramCharSequence1)
    {
      showDownloadDialog(paramActivity, paramCharSequence2, paramCharSequence3, paramCharSequence4, paramCharSequence5);
    }
  }
  
  private static AlertDialog showDownloadDialog(Activity paramActivity, CharSequence paramCharSequence1, CharSequence paramCharSequence2, CharSequence paramCharSequence3, CharSequence paramCharSequence4)
  {
    AlertDialog.Builder localBuilder = new AlertDialog.Builder(paramActivity);
    localBuilder.setTitle(paramCharSequence1);
    localBuilder.setMessage(paramCharSequence2);
    localBuilder.setPositiveButton(paramCharSequence3, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt)
      {
        paramAnonymousDialogInterface = new Intent("android.intent.action.VIEW", Uri.parse("market://search?q=pname:com.google.zxing.client.android"));
        this.val$activity.startActivity(paramAnonymousDialogInterface);
      }
    });
    localBuilder.setNegativeButton(paramCharSequence4, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface paramAnonymousDialogInterface, int paramAnonymousInt) {}
    });
    return localBuilder.show();
  }
}
