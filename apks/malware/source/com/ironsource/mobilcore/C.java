package com.ironsource.mobilcore;

import android.annotation.SuppressLint;
import android.content.Context;
import android.os.AsyncTask;
import android.os.CountDownTimer;
import android.util.SparseArray;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.TranslateAnimation;
import android.webkit.WebView;
import android.widget.LinearLayout;
import java.util.ArrayList;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

@SuppressLint({"UseSparseArrays"})
final class C
  extends G
  implements V.b
{
  E.a a;
  private ArrayList<O> b = new ArrayList();
  private boolean l = false;
  private boolean m = false;
  private boolean n = false;
  private JSONObject o;
  private int p = aQ.h().m();
  private int q = (int)(this.p * 0.9D);
  private JSONArray r;
  private SparseArray<Boolean> s = new SparseArray();
  private K t;
  private w.a u;
  private aM v;
  private LinearLayout w;
  private WebView x = new WebView(this.c);
  private N y;
  private aQ z;
  
  public C(Context paramContext, aw paramAw)
  {
    super(paramContext, paramAw);
    aE.a(this.x, null);
    this.z = aQ.h();
    this.u = new w.a()
    {
      public final void a(JSONObject paramAnonymousJSONObject)
      {
        if (C.a(C.this))
        {
          C.a(C.this, paramAnonymousJSONObject);
          if (C.b(C.this) != null) {
            C.c(C.this);
          }
          return;
        }
        C.b(C.this, paramAnonymousJSONObject);
      }
    };
    this.z.a(this.u);
    this.a = new E.a()
    {
      private boolean b = false;
      
      /* Error */
      public final void a(JSONObject paramAnonymousJSONObject)
      {
        // Byte code:
        //   0: aload_0
        //   1: monitorenter
        //   2: aload_0
        //   3: getfield 25	com/ironsource/mobilcore/C$2:b	Z
        //   6: istore_2
        //   7: iload_2
        //   8: ifeq +6 -> 14
        //   11: aload_0
        //   12: monitorexit
        //   13: return
        //   14: aload_0
        //   15: iconst_1
        //   16: putfield 25	com/ironsource/mobilcore/C$2:b	Z
        //   19: aload_0
        //   20: getfield 20	com/ironsource/mobilcore/C$2:a	Lcom/ironsource/mobilcore/C;
        //   23: invokestatic 32	com/ironsource/mobilcore/C:d	(Lcom/ironsource/mobilcore/C;)Lcom/ironsource/mobilcore/aQ;
        //   26: aload_0
        //   27: getfield 20	com/ironsource/mobilcore/C$2:a	Lcom/ironsource/mobilcore/C;
        //   30: getfield 36	com/ironsource/mobilcore/C:e	Landroid/app/Activity;
        //   33: aload_1
        //   34: new 13	com/ironsource/mobilcore/C$2$1
        //   37: dup
        //   38: aload_0
        //   39: invokespecial 39	com/ironsource/mobilcore/C$2$1:<init>	(Lcom/ironsource/mobilcore/C$2;)V
        //   42: invokevirtual 44	com/ironsource/mobilcore/aQ:a	(Landroid/app/Activity;Lorg/json/JSONObject;Lcom/ironsource/mobilcore/l$d;)V
        //   45: goto -34 -> 11
        //   48: astore_1
        //   49: aload_0
        //   50: monitorexit
        //   51: aload_1
        //   52: athrow
        // Local variable table:
        //   start	length	slot	name	signature
        //   0	53	0	this	2
        //   0	53	1	paramAnonymousJSONObject	JSONObject
        //   6	2	2	bool	boolean
        // Exception table:
        //   from	to	target	type
        //   2	7	48	finally
        //   14	45	48	finally
      }
    };
  }
  
  private void b(JSONObject paramJSONObject)
  {
    if (this.y != null)
    {
      this.w.removeView(this.y.i());
      this.y = null;
    }
    int j;
    int i;
    JSONObject localJSONObject;
    if ((paramJSONObject != null) && (paramJSONObject.length() > 0))
    {
      this.r = paramJSONObject.optJSONArray("ads");
      this.s.clear();
      if (!f()) {
        break label346;
      }
      j = 0;
      i = 1;
      if (j < this.r.length()) {
        localJSONObject = this.r.optJSONObject(j);
      }
    }
    for (;;)
    {
      try
      {
        localJSONObject.put("index", j);
        if (j < this.b.size())
        {
          paramJSONObject = (O)this.b.get(j);
          if (paramJSONObject.g()) {}
        }
        try
        {
          paramJSONObject.a(localJSONObject);
          boolean bool = paramJSONObject.b(localJSONObject);
          paramJSONObject.a(bool);
          i &= bool;
          j += 1;
        }
        catch (JSONException paramJSONObject)
        {
          View localView;
          ViewGroup.LayoutParams localLayoutParams;
          b(false);
        }
        paramJSONObject = new O(this.c, this.d, this.a);
        this.b.add(j, paramJSONObject);
        localView = paramJSONObject.i();
        localLayoutParams = localView.getLayoutParams();
        localLayoutParams.width = this.q;
        localLayoutParams.height = (this.q / 2);
        localView.setLayoutParams(localLayoutParams);
        this.w.addView(localView);
        this.w.invalidate();
        continue;
        b(true);
        return;
        j = this.r.length();
        if (j < this.b.size())
        {
          ((O)this.b.get(j)).a(false);
          j += 1;
          continue;
        }
        j = i;
        if (this.m)
        {
          A.a("APPBANNER: Scrolling to 0", 55);
          this.v.a(0);
          j = i;
        }
        if (j != 0) {
          continue;
        }
        b(false);
        continue;
        b(false);
        return;
      }
      catch (JSONException paramJSONObject)
      {
        continue;
      }
      label346:
      j = 1;
    }
  }
  
  private void b(boolean paramBoolean)
  {
    this.t.a(paramBoolean);
    a(paramBoolean);
  }
  
  private boolean f()
  {
    return (this.r != null) && (this.r.length() > 0);
  }
  
  private boolean g()
  {
    int i = 0;
    while (i < this.r.length())
    {
      Boolean localBoolean = (Boolean)this.s.get(i);
      if ((localBoolean == null) || (!localBoolean.booleanValue())) {
        return false;
      }
      i += 1;
    }
    return true;
  }
  
  private void m()
  {
    int i = this.v.a();
    Boolean localBoolean = (Boolean)this.s.get(i);
    if (((f()) && (localBoolean == null)) || (!localBoolean.booleanValue()))
    {
      A.a("MCAppBanner | reporting offer" + i, 55);
      if (i >= this.r.length()) {}
    }
    try
    {
      aE.a(new AsyncTask() {});
      this.s.put(i, Boolean.valueOf(true));
      if (g()) {
        this.z.g();
      }
      return;
    }
    catch (JSONException localJSONException)
    {
      for (;;)
      {
        localJSONException.printStackTrace();
      }
    }
  }
  
  public final String a()
  {
    return "ironsourceInlineApps";
  }
  
  public final void a(G.a paramA)
  {
    A.a("MCAppBannerWidget | notifyVisibilityState() | old state " + l().toString() + " new state: " + paramA.toString(), 55);
    if (l() == paramA) {
      return;
    }
    switch (7.a[paramA.ordinal()])
    {
    }
    for (;;)
    {
      super.a(paramA);
      return;
      this.l = true;
      if (f()) {
        if ((!this.m) && (this.n))
        {
          new CountDownTimer(1000L, 10L)
          {
            public final void onFinish()
            {
              C.f(C.this).a(0);
              C.g(C.this);
            }
            
            public final void onTick(long paramAnonymousLong)
            {
              int i = (int)Math.ceil((float)(C.e(C.this) * paramAnonymousLong) / 1000.0F);
              C.f(C.this).scrollTo(i, 0);
            }
          }.start();
          this.m = true;
        }
        else
        {
          m();
          continue;
          this.l = false;
          if (this.o != null)
          {
            b(this.o);
            this.o = null;
          }
          else if (f())
          {
            int i = this.v.a();
            int j = this.r.length();
            this.v.a((i + 1) % j);
            continue;
            if ((f()) && (!this.m) && (!this.n))
            {
              this.v.scrollBy(this.q, 0);
              this.n = true;
            }
          }
        }
      }
    }
  }
  
  public final void a(JSONObject paramJSONObject)
    throws JSONException
  {
    A.a("MCAppBanner | first build of buildFromJSON", 55);
    super.a(paramJSONObject, true);
    this.t.a(paramJSONObject);
    b(false);
    paramJSONObject = this.z;
    paramJSONObject = aQ.k();
    if (paramJSONObject != null) {
      b(paramJSONObject);
    }
    while (!aK.b(this.c)) {
      return;
    }
    this.y = new N(this.c, this.d, null);
    paramJSONObject = this.y.i();
    ViewGroup.LayoutParams localLayoutParams = paramJSONObject.getLayoutParams();
    localLayoutParams.width = this.p;
    localLayoutParams.height = (this.q / 2);
    paramJSONObject.setLayoutParams(localLayoutParams);
    this.w.addView(paramJSONObject);
    this.w.invalidate();
    paramJSONObject = new JSONObject();
    this.y.a(paramJSONObject);
    this.y.b(paramJSONObject);
    this.y.a(true);
    b(true);
  }
  
  protected final boolean b()
  {
    return false;
  }
  
  protected final void c()
  {
    this.h = new LinearLayout(this.c);
    ((LinearLayout)this.h).setOrientation(1);
  }
  
  protected final void d()
  {
    this.t = new K(this.c, this.d);
    View localView = this.t.i();
    ViewGroup localViewGroup = (ViewGroup)this.h;
    localViewGroup.addView(localView);
    this.v = new aM(this.c, null, this.q);
    this.v.setHorizontalScrollBarEnabled(false);
    this.v.a(new aM.a()
    {
      public final void a(int paramAnonymousInt)
      {
        C.g(C.this);
      }
    });
    this.w = new LinearLayout(this.c);
    this.w.setOrientation(0);
    this.v.addView(this.w);
    localViewGroup.addView(this.v);
  }
  
  protected final void e() {}
}
