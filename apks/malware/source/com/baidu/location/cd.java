package com.baidu.location;

import android.util.Log;
import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;

class cd
  extends Thread
{
  cd(cb paramCb) {}
  
  public void run()
  {
    this.a.e = bh.d();
    this.a.a();
    int i = this.a.f;
    cb.a(this.a);
    Object localObject1 = null;
    if (i > 0) {}
    for (;;)
    {
      try
      {
        HttpPost localHttpPost = new HttpPost(this.a.e);
        try
        {
          localObject1 = new UrlEncodedFormEntity(this.a.h, "utf-8");
          localHttpPost.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");
          localHttpPost.setHeader("Accept-Charset", "UTF-8;");
          localHttpPost.setEntity((HttpEntity)localObject1);
          localObject1 = new DefaultHttpClient();
          ((HttpClient)localObject1).getParams().setParameter("http.connection.timeout", Integer.valueOf(12000));
          ((HttpClient)localObject1).getParams().setParameter("http.socket.timeout", Integer.valueOf(12000));
          HttpProtocolParams.setUseExpectContinue(((HttpClient)localObject1).getParams(), false);
          if (((cb.f() == 1) || (cb.f() == 4)) && ((this.a.f - i) % 2 == 0))
          {
            HttpHost localHttpHost = new HttpHost(cb.g(), cb.h(), "http");
            ((HttpClient)localObject1).getParams().setParameter("http.route.default-proxy", localHttpHost);
          }
          localObject1 = ((HttpClient)localObject1).execute(localHttpPost);
          if (((HttpResponse)localObject1).getStatusLine().getStatusCode() == 200)
          {
            this.a.g = ((HttpResponse)localObject1).getEntity();
            this.a.a(true);
            if (i > 0) {
              continue;
            }
            cb.k += 1;
            this.a.g = null;
            this.a.a(false);
            cb.a(this.a, false);
            return;
          }
          localHttpPost.abort();
          localObject1 = localHttpPost;
          i -= 1;
        }
        catch (Exception localException1)
        {
          localObject2 = localHttpPost;
        }
      }
      catch (Exception localException2)
      {
        Object localObject2;
        continue;
      }
      localObject2.abort();
      Log.d("baidu_location_service", "NetworkCommunicationException!");
      continue;
      cb.k = 0;
    }
  }
}
