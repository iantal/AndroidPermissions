package com.yl.ml.common;

import android.content.Context;
import android.os.Handler;
import android.os.Message;
import com.yl.codelib.comm.MyPreference;
import com.yl.codelib.encryption.DESEncryptor;
import com.yl.codelib.encryption.MD5Encoder;
import com.yl.codelib.utils.HttpConnent;
import com.yl.codelib.utils.TextUtil;
import com.yl.codelib.utils.TimeUtil;
import com.yl.ml.date.ConFigFile;
import com.yl.ml.thread.BaseHttpThread;
import java.util.Map;
import org.json.JSONException;
import org.json.JSONObject;

final class c
  implements Runnable
{
  c(Context paramContext, Handler paramHandler) {}
  
  public final void run()
  {
    Object localObject1 = new MyPreference(this.a);
    int i = 0;
    for (;;)
    {
      if (i >= 6)
      {
        if (i != 100) {
          break;
        }
        localObject1 = new Message();
        ((Message)localObject1).what = 2;
        ((Message)localObject1).obj = "";
        this.G.sendMessage((Message)localObject1);
        return;
      }
      Object localObject2 = AppDo.getUserBaseDeviceInfo(this.a);
      String str = TimeUtil.getNowTimeNum();
      ((Map)localObject2).put("signkey", MD5Encoder.EncoderByMd5(str + DESEncryptor.getDec(BaseHttpThread.API_KEY)));
      ((Map)localObject2).put("reqTime", str);
      localObject2 = HttpConnent.doHttpPost(ConFigFile.Url_JSMain + "/queryMobileInfoapiInitMobile.do", BaseHttpThread.getPostParams((Map)localObject2), 0);
      try
      {
        localObject2 = new JSONObject((String)localObject2).getString("province");
        ((MyPreference)localObject1).write("province", (String)localObject2);
        boolean bool = TextUtil.notNull((String)localObject2);
        if (bool) {
          i = 100;
        }
      }
      catch (JSONException localJSONException)
      {
        ((MyPreference)localObject1).write("province", "");
        i += 1;
        try
        {
          Thread.sleep(2000L);
        }
        catch (InterruptedException localInterruptedException) {}
      }
    }
    this.G.sendEmptyMessage(-2);
  }
}
