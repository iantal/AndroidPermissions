package com.c101416193190.view;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.animation.DecelerateInterpolator;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Scroller;
import com.c101416193190.f.g;

public class XListView
  extends ListView
  implements AbsListView.OnScrollListener
{
  private float a = -1.0F;
  private Scroller b;
  private AbsListView.OnScrollListener c;
  private c d;
  private XListViewFooter e;
  private XListViewHeader f;
  private boolean g = false;
  private boolean h;
  private boolean i = false;
  private int j;
  
  public XListView(Context paramContext)
  {
    super(paramContext);
    a(paramContext);
  }
  
  public XListView(Context paramContext, AttributeSet paramAttributeSet)
  {
    super(paramContext, paramAttributeSet);
    a(paramContext);
  }
  
  public XListView(Context paramContext, AttributeSet paramAttributeSet, int paramInt)
  {
    super(paramContext, paramAttributeSet, paramInt);
    a(paramContext);
  }
  
  private void a()
  {
    this.h = true;
    this.e.a(2);
    if (this.d != null) {
      this.d.f();
    }
  }
  
  private void a(Context paramContext)
  {
    this.b = new Scroller(paramContext, new DecelerateInterpolator());
    super.setOnScrollListener(this);
    this.e = new XListViewFooter(paramContext);
    this.f = new XListViewHeader(paramContext);
    addHeaderView(this.f);
  }
  
  public final void a(g paramG)
  {
    this.f.a(paramG);
  }
  
  public final void a(c paramC)
  {
    this.d = paramC;
  }
  
  public final void a(boolean paramBoolean)
  {
    this.g = paramBoolean;
    if (!this.g)
    {
      this.e.b();
      this.e.setOnClickListener(null);
      return;
    }
    this.h = false;
    this.e.c();
    this.e.a(0);
    this.e.setOnClickListener(new b(this));
  }
  
  public void computeScroll()
  {
    if (this.b.computeScrollOffset())
    {
      this.e.b(this.b.getCurrY());
      postInvalidate();
      if ((this.c instanceof d)) {
        AbsListView.OnScrollListener localOnScrollListener = this.c;
      }
    }
    super.computeScroll();
  }
  
  public void onScroll(AbsListView paramAbsListView, int paramInt1, int paramInt2, int paramInt3)
  {
    this.j = paramInt3;
    if (this.c != null) {
      this.c.onScroll(paramAbsListView, paramInt1, paramInt2, paramInt3);
    }
  }
  
  public void onScrollStateChanged(AbsListView paramAbsListView, int paramInt)
  {
    if (this.c != null) {
      this.c.onScrollStateChanged(paramAbsListView, paramInt);
    }
  }
  
  public boolean onTouchEvent(MotionEvent paramMotionEvent)
  {
    if (this.a == -1.0F) {
      this.a = paramMotionEvent.getRawY();
    }
    switch (paramMotionEvent.getAction())
    {
    case 1: 
    default: 
      this.a = -1.0F;
      if (getLastVisiblePosition() == this.j - 1)
      {
        if ((this.g) && (this.e.a() > 50)) {
          a();
        }
        k = this.e.a();
        if (k > 0)
        {
          this.b.startScroll(0, k, 0, -k, 400);
          invalidate();
        }
      }
      break;
    }
    do
    {
      for (;;)
      {
        return super.onTouchEvent(paramMotionEvent);
        this.a = paramMotionEvent.getRawY();
      }
      f1 = paramMotionEvent.getRawY() - this.a;
      this.a = paramMotionEvent.getRawY();
    } while ((getLastVisiblePosition() != this.j - 1) || ((this.e.a() <= 0) && (f1 >= 0.0F)) || (!this.g));
    float f1 = -f1 / 1.8F;
    int k = this.e.a();
    k = (int)f1 + k;
    if ((this.g) && (!this.h))
    {
      if (k <= 50) {
        break label250;
      }
      this.e.a(1);
    }
    for (;;)
    {
      this.e.b(k);
      break;
      label250:
      this.e.a(0);
    }
  }
  
  public void setAdapter(ListAdapter paramListAdapter)
  {
    if (!this.i)
    {
      this.i = true;
      addFooterView(this.e);
    }
    super.setAdapter(paramListAdapter);
  }
  
  public void setOnScrollListener(AbsListView.OnScrollListener paramOnScrollListener)
  {
    this.c = paramOnScrollListener;
  }
}
