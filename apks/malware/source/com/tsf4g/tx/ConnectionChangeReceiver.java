package com.tsf4g.tx;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.util.Log;

public class ConnectionChangeReceiver
  extends BroadcastReceiver
{
  private static int LastState = NetworkState.NotReachable.ordinal();
  private static final String TAG = "ConnectionChangeReceiver";
  
  public ConnectionChangeReceiver() {}
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    Log.i("ConnectionChangeReceiver", "NetWork State Change");
    paramContext = ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo();
    if (paramContext == null) {
      if (LastState != NetworkState.NotReachable.ordinal())
      {
        Log.i("ConnectionChangeReceiver", "ApolloNetInfo : null. Network State change to None");
        TX.Instance.NetworkStateChangeNotify(NetworkState.NotReachable.ordinal());
        LastState = NetworkState.NotReachable.ordinal();
      }
    }
    do
    {
      do
      {
        return;
        Log.i("ConnectionChangeReceiver", "ApolloNetInfo : not null");
        switch (paramContext.getType())
        {
        default: 
          Log.i("ConnectionChangeReceiver", "Network Type : Other Network Type:" + paramContext.getType());
          return;
        }
      } while (LastState == NetworkState.ReachableViaWWAN.ordinal());
      Log.i("ConnectionChangeReceiver", "Network State change to TYPE_MOBILE");
      TX.Instance.NetworkStateChangeNotify(NetworkState.ReachableViaWWAN.ordinal());
      LastState = NetworkState.ReachableViaWWAN.ordinal();
      return;
    } while (LastState == NetworkState.ReachableViaWiFi.ordinal());
    Log.i("ConnectionChangeReceiver", "Network State change to TYPE_WIFI");
    TX.Instance.NetworkStateChangeNotify(NetworkState.ReachableViaWiFi.ordinal());
    LastState = NetworkState.ReachableViaWiFi.ordinal();
  }
  
  public void runNetworkStateChange(int paramInt) {}
}
