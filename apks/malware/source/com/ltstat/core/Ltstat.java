package com.ltstat.core;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.os.Build.VERSION;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import android.util.Base64;
import android.util.DisplayMetrics;
import android.view.Display;
import android.view.WindowManager;
import com.ltstat.a.g;
import com.ltstat.a.h;
import com.ltstat.b.f;
import com.ltstat.b.i;
import com.ltstat.b.m;
import com.ltstat.b.n;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.util.List;
import java.util.Locale;
import java.util.Random;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import java.util.zip.GZIPOutputStream;
import org.json.JSONObject;

public class Ltstat
{
  private static Ltstat a = new Ltstat();
  private static boolean b = false;
  private static Executor f = Executors.newSingleThreadExecutor();
  private Context c;
  private int d;
  private String e;
  
  public Ltstat() {}
  
  public static void a(Context paramContext)
  {
    g.a(paramContext);
    b().a(paramContext, Integer.parseInt(g.b()), g.c(), 1);
  }
  
  private void a(Context paramContext, int paramInt1, String paramString, int paramInt2)
  {
    f.execute(new c(this, paramContext, paramString, paramInt1, paramInt2));
  }
  
  private static Ltstat b()
  {
    if (!b)
    {
      b = true;
      h.a(">>Ltstat SDK Version: 3.058");
      Thread.setDefaultUncaughtExceptionHandler(new a(Thread.getDefaultUncaughtExceptionHandler()));
    }
    return a;
  }
  
  private JSONObject b(String paramString)
  {
    localJSONObject = new JSONObject();
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8013), Integer.valueOf(8332), Integer.valueOf(8631), Integer.valueOf(8332), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8321), Integer.valueOf(7018) }), paramString);
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(7027), Integer.valueOf(8321), Integer.valueOf(8009), Integer.valueOf(8004) }), Integer.valueOf(this.d));
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(4004), Integer.valueOf(8902), Integer.valueOf(8902), Integer.valueOf(8005), Integer.valueOf(8013), Integer.valueOf(8321), Integer.valueOf(8009), Integer.valueOf(8004) }), this.e);
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8913), Integer.valueOf(8913), Integer.valueOf(8009), Integer.valueOf(8004) }), n.a(this.c));
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8111), Integer.valueOf(8001), Integer.valueOf(8003) }), m.b(this.c));
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8005), Integer.valueOf(8009) }), ((TelephonyManager)this.c.getSystemService("phone")).getDeviceId());
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8021), Integer.valueOf(8102), Integer.valueOf(8902), Integer.valueOf(8001), Integer.valueOf(8111), Integer.valueOf(8005) }), this.c.getPackageName());
    localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(7023), Integer.valueOf(8321), Integer.valueOf(7036) }), Integer.valueOf(m.c(this.c)));
    paramString = com.ltstat.a.c.a(new Object[] { Integer.valueOf(7045), Integer.valueOf(8997), Integer.valueOf(8283), Integer.valueOf(8631), Integer.valueOf(8332), Integer.valueOf(8005), Integer.valueOf(8111), Integer.valueOf(8986), Integer.valueOf(8021), Integer.valueOf(8021) });
    Object localObject1 = m.e(this.c);
    int i;
    if ((localObject1 != null) && ((((PackageInfo)localObject1).applicationInfo.flags & 0x1) != 0)) {
      i = 1;
    }
    for (;;)
    {
      label673:
      label875:
      label881:
      label1008:
      label1014:
      Object localObject2;
      Object localObject3;
      label1515:
      Object localObject4;
      if (i != 0)
      {
        i = 1;
        localJSONObject.putOpt(paramString, Integer.valueOf(i));
        paramString = com.ltstat.a.c.a(new Object[] { Integer.valueOf(7045), Integer.valueOf(8997), Integer.valueOf(8283), Integer.valueOf(8631), Integer.valueOf(8332), Integer.valueOf(8005), Integer.valueOf(8111), Integer.valueOf(8113), Integer.valueOf(8021), Integer.valueOf(8004), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8005), Integer.valueOf(8986), Integer.valueOf(8021), Integer.valueOf(8021) });
        localObject1 = m.e(this.c);
        if ((localObject1 == null) || ((((PackageInfo)localObject1).applicationInfo.flags & 0x80) == 0)) {
          break label3662;
        }
        i = 1;
        if (i == 0) {
          break label3667;
        }
        i = 1;
        localJSONObject.putOpt(paramString, Integer.valueOf(i));
        paramString = com.ltstat.a.c.a(new Object[] { Integer.valueOf(8003), Integer.valueOf(8001), Integer.valueOf(8902), Integer.valueOf(8997), Integer.valueOf(8009), Integer.valueOf(8013), Integer.valueOf(8005), Integer.valueOf(8902), Integer.valueOf(8332) });
        localObject1 = this.c;
        if (((Context)localObject1).getPackageManager().checkPermission("android.permission.INSTALL_PACKAGES", ((Context)localObject1).getPackageName()) != 0) {
          break label3672;
        }
        i = 1;
        if (i == 0) {
          break label3677;
        }
        i = 1;
        localJSONObject.putOpt(paramString, Integer.valueOf(i));
        localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8332), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8009), Integer.valueOf(8631), Integer.valueOf(8990), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8631), Integer.valueOf(7034) }), Float.valueOf(3.058F));
        localObject2 = com.ltstat.a.c.a(new Object[] { Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8631), Integer.valueOf(8009) });
        localObject1 = ((TelephonyManager)this.c.getSystemService("phone")).getSubscriberId();
        paramString = (String)localObject1;
        if (localObject1 == null) {
          paramString = "";
        }
        localJSONObject.putOpt((String)localObject2, paramString);
        localJSONObject.putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8002), Integer.valueOf(8913), Integer.valueOf(8009), Integer.valueOf(8013), Integer.valueOf(8004), Integer.valueOf(8985), Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8005) }), Build.TIME);
        localObject2 = com.ltstat.a.c.a(new Object[] { Integer.valueOf(8003), Integer.valueOf(8403), Integer.valueOf(8913), Integer.valueOf(8902), Integer.valueOf(8332), Integer.valueOf(8163), Integer.valueOf(8283), Integer.valueOf(8987), Integer.valueOf(8403), Integer.valueOf(8004), Integer.valueOf(8005) });
        localObject3 = new StringBuilder();
        f.a();
        if (!new Random().nextBoolean()) {
          break label3682;
        }
        localObject1 = f.b(true);
        paramString = (String)localObject1;
        if (TextUtils.isEmpty((CharSequence)localObject1))
        {
          localObject1 = f.a(true);
          paramString = (String)localObject1;
          if (TextUtils.isEmpty((CharSequence)localObject1))
          {
            f.a();
            paramString = (String)localObject1;
          }
        }
        localJSONObject.putOpt((String)localObject2, paramString);
        localObject1 = new JSONObject();
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8001), Integer.valueOf(7041), Integer.valueOf(8996), Integer.valueOf(8004) }), m.a(this.c));
        paramString = (TelephonyManager)this.c.getSystemService("phone");
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(7019), Integer.valueOf(8292), Integer.valueOf(8403), Integer.valueOf(8163), Integer.valueOf(8102), Integer.valueOf(8992), Integer.valueOf(8021), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8403), Integer.valueOf(8163), Integer.valueOf(8989), Integer.valueOf(8001), Integer.valueOf(8111), Integer.valueOf(8005) }), paramString.getNetworkOperatorName());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8987), Integer.valueOf(8403), Integer.valueOf(8913), Integer.valueOf(8902), Integer.valueOf(8332), Integer.valueOf(8163), Integer.valueOf(8283), Integer.valueOf(8996), Integer.valueOf(8631), Integer.valueOf(8403) }), paramString.getSimCountryIso());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8997), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8009), Integer.valueOf(8001), Integer.valueOf(8013), Integer.valueOf(8989), Integer.valueOf(8913), Integer.valueOf(8111), Integer.valueOf(8002), Integer.valueOf(8005), Integer.valueOf(8163) }), paramString.getSimSerialNumber());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8009), Integer.valueOf(8111), Integer.valueOf(8992), Integer.valueOf(8021), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8403), Integer.valueOf(8163) }), paramString.getSimOperator());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(7019), Integer.valueOf(8292), Integer.valueOf(8403), Integer.valueOf(8163), Integer.valueOf(8102), Integer.valueOf(8992), Integer.valueOf(8021), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8001), Integer.valueOf(8332), Integer.valueOf(8403), Integer.valueOf(8163) }), paramString.getNetworkOperator());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8111), Integer.valueOf(8403), Integer.valueOf(8004), Integer.valueOf(8005), Integer.valueOf(8013) }), Build.MODEL);
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8002), Integer.valueOf(8163), Integer.valueOf(8001), Integer.valueOf(8902), Integer.valueOf(8004) }), Build.BRAND);
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8013), Integer.valueOf(8403), Integer.valueOf(8003), Integer.valueOf(8001), Integer.valueOf(8013), Integer.valueOf(8005) }), Locale.getDefault().toString());
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8163), Integer.valueOf(8005), Integer.valueOf(8013), Integer.valueOf(8005), Integer.valueOf(8001), Integer.valueOf(8631), Integer.valueOf(8005) }), Build.VERSION.RELEASE);
        if (Build.VERSION.SDK_INT >= 9) {
          ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8005), Integer.valueOf(8001), Integer.valueOf(8163), Integer.valueOf(8009), Integer.valueOf(8001), Integer.valueOf(8013) }), Build.SERIAL);
        }
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8004), Integer.valueOf(8102), Integer.valueOf(8990), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8631), Integer.valueOf(7034) }), Integer.valueOf(Build.VERSION.SDK_INT));
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8006), Integer.valueOf(8009), Integer.valueOf(8902), Integer.valueOf(8007), Integer.valueOf(8005), Integer.valueOf(8163), Integer.valueOf(8021), Integer.valueOf(8163), Integer.valueOf(8009), Integer.valueOf(8902), Integer.valueOf(8332) }), Build.FINGERPRINT);
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8021), Integer.valueOf(8163), Integer.valueOf(8403), Integer.valueOf(8004), Integer.valueOf(8913), Integer.valueOf(8003), Integer.valueOf(8332) }), Build.PRODUCT);
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8111), Integer.valueOf(8001), Integer.valueOf(8902), Integer.valueOf(8913), Integer.valueOf(8006), Integer.valueOf(8001), Integer.valueOf(8003), Integer.valueOf(8332), Integer.valueOf(8913), Integer.valueOf(8163), Integer.valueOf(8005), Integer.valueOf(8163) }), Build.MANUFACTURER);
        paramString = com.ltstat.a.c.a(new Object[] { Integer.valueOf(8631), Integer.valueOf(8003), Integer.valueOf(8163), Integer.valueOf(8005), Integer.valueOf(8005), Integer.valueOf(8902) });
        localObject2 = new StringBuilder();
        localObject3 = (WindowManager)this.c.getSystemService("window");
        localObject4 = new DisplayMetrics();
        ((WindowManager)localObject3).getDefaultDisplay().getMetrics((DisplayMetrics)localObject4);
        localObject2 = ((StringBuilder)localObject2).append(((DisplayMetrics)localObject4).widthPixels).append("-");
        localObject3 = (WindowManager)this.c.getSystemService("window");
        localObject4 = new DisplayMetrics();
        ((WindowManager)localObject3).getDefaultDisplay().getMetrics((DisplayMetrics)localObject4);
        ((JSONObject)localObject1).putOpt(paramString, ((DisplayMetrics)localObject4).heightPixels);
        ((JSONObject)localObject1).putOpt(com.ltstat.a.c.a(new Object[] { Integer.valueOf(8163), Integer.valueOf(8005), Integer.valueOf(8003), Integer.valueOf(8005), Integer.valueOf(8902), Integer.valueOf(8332), Integer.valueOf(8986), Integer.valueOf(8021), Integer.valueOf(8021), Integer.valueOf(8631) }), m.h(this.c).toString());
        localObject2 = com.ltstat.a.c.a(new Object[] { Integer.valueOf(8009), Integer.valueOf(8902), Integer.valueOf(8631), Integer.valueOf(8332), Integer.valueOf(8001), Integer.valueOf(8013), Integer.valueOf(8013), Integer.valueOf(8986), Integer.valueOf(8021), Integer.valueOf(8021), Integer.valueOf(8631) });
        localObject3 = m.g(this.c);
        paramString = localObject3.toString();
        localObject4 = i.a.b(this.c, i.f, "");
        if (((String)localObject4).matches("^\\[.*\\]$")) {
          break label3719;
        }
        i.a.a(this.c, i.f, paramString);
        label3606:
        ((JSONObject)localObject1).putOpt((String)localObject2, paramString);
      }
      try
      {
        paramString = ((JSONObject)localObject1).toString();
        if ((paramString == null) || (paramString.length() == 0)) {
          paramString = paramString.getBytes();
        }
        for (;;)
        {
          localJSONObject.putOpt("more", Base64.encodeToString(paramString, 2));
          return localJSONObject;
          i = 0;
          break;
          i = 0;
          break label673;
          label3662:
          i = 0;
          break label875;
          label3667:
          i = 0;
          break label881;
          label3672:
          i = 0;
          break label1008;
          label3677:
          i = 0;
          break label1014;
          label3682:
          localObject1 = f.a(true);
          paramString = (String)localObject1;
          if (!TextUtils.isEmpty((CharSequence)localObject1)) {
            break label1515;
          }
          localObject1 = f.b(true);
          paramString = (String)localObject1;
          if (!TextUtils.isEmpty((CharSequence)localObject1)) {
            break label1515;
          }
          f.a();
          paramString = (String)localObject1;
          break label1515;
          label3719:
          localObject3 = com.ltstat.a.d.a((List)localObject3, com.ltstat.a.d.a((String)localObject4));
          if (((List)localObject3).size() != 0)
          {
            i.a.a(this.c, i.f, paramString);
            paramString = localObject3.toString();
            break label3606;
          }
          paramString = "0";
          break label3606;
          localObject1 = new ByteArrayOutputStream();
          localObject2 = new GZIPOutputStream((OutputStream)localObject1);
          ((GZIPOutputStream)localObject2).write(paramString.getBytes());
          ((GZIPOutputStream)localObject2).close();
          paramString = ((ByteArrayOutputStream)localObject1).toByteArray();
          ((ByteArrayOutputStream)localObject1).close();
        }
        return localJSONObject;
      }
      catch (IOException paramString)
      {
        paramString.printStackTrace();
      }
    }
  }
  
  public static native String[] getRts(Context paramContext, JSONObject paramJSONObject);
  
  public static void initOnCreate(Context paramContext)
  {
    g.a(paramContext);
    b().a(paramContext, Integer.parseInt(g.b()), g.c(), -1);
  }
  
  public final File a(String paramString)
  {
    File localFile = new File(this.c.getFilesDir().getAbsolutePath() + "/" + paramString);
    if ((!localFile.exists()) && (!com.ltstat.b.d.a(this.c, paramString, localFile))) {
      throw new RuntimeException("copy fail");
    }
    return localFile;
  }
}
