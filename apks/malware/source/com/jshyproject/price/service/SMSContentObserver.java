package com.jshyproject.price.service;

import android.content.ContentResolver;
import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

public class SMSContentObserver
  extends ContentObserver
{
  private Context a;
  private ContentResolver b;
  private Uri c = Uri.parse("content://sms/inbox");
  private int d;
  private Handler e;
  
  public SMSContentObserver(Handler paramHandler)
  {
    super(paramHandler);
    this.e = paramHandler;
  }
  
  public SMSContentObserver(Handler paramHandler, Context paramContext, int paramInt)
  {
    super(paramHandler);
    this.a = paramContext;
    this.d = paramInt;
    this.e = paramHandler;
    this.b = this.a.getContentResolver();
  }
  
  public void onChange(boolean paramBoolean)
  {
    super.onChange(paramBoolean);
    Cursor localCursor = this.b.query(this.c, new String[] { "_id", "address", "body", "type" }, null, null, "date desc");
    if ((localCursor != null) && (localCursor.moveToFirst()))
    {
      String str1 = localCursor.getString(localCursor.getColumnIndex("body"));
      int i = localCursor.getInt(localCursor.getColumnIndex("_id"));
      String str2 = localCursor.getString(localCursor.getColumnIndex("address"));
      Object localObject = localCursor.getString(localCursor.getColumnIndex("type"));
      Log.e("com.lms.codemo.SMSContentObserver", "msgId : " + i);
      Log.e("com.lms.codemo.SMSContentObserver", "msgAddr : " + str2);
      Log.e("com.lms.codemo.SMSContentObserver", "msgBody : " + str1);
      Log.e("com.lms.codemo.SMSContentObserver", "msgType : " + (String)localObject);
      localObject = Message.obtain();
      Bundle localBundle = new Bundle();
      localBundle.putString("msgBody", str1);
      localBundle.putString("msgAddr", str2);
      ((Message)localObject).setData(localBundle);
      ((Message)localObject).what = this.d;
      ((Message)localObject).setTarget(this.e);
      ((Message)localObject).sendToTarget();
      localCursor.close();
    }
  }
}
