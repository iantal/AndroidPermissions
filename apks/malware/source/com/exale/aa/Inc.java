package com.exale.aa;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.HttpParams;
import org.apache.http.util.EntityUtils;

public class Inc
{
  public static final int Type_Get = 0;
  public static final int Type_Post = 1;
  Context context;
  Handler handler = new Inc.1(this);
  private Inc.RequestBack requestback;
  
  public Inc(Context paramContext)
  {
    this.context = paramContext;
  }
  
  private void Get(String paramString, HashMap<String, String> paramHashMap)
  {
    Object localObject;
    Iterator localIterator;
    if ((paramString != null) && (!paramString.equals("")))
    {
      localObject = paramString;
      if (paramHashMap != null)
      {
        localObject = paramString;
        if (paramHashMap.size() > 0)
        {
          localObject = new StringBuffer();
          localIterator = paramHashMap.keySet().iterator();
        }
      }
    }
    for (;;)
    {
      if (!localIterator.hasNext())
      {
        if (((StringBuffer)localObject).length() != 0)
        {
          ((StringBuffer)localObject).deleteCharAt(((StringBuffer)localObject).length() - 1);
          ((StringBuffer)localObject).insert(0, "?");
        }
        localObject = paramString + ((StringBuffer)localObject).toString().trim();
        paramString = new HttpGet((String)localObject);
      }
      try
      {
        paramHashMap = new DefaultHttpClient();
        paramHashMap.getParams().setParameter("http.connection.timeout", Integer.valueOf(20000));
        paramHashMap.getParams().setParameter("http.socket.timeout", Integer.valueOf(10000));
        paramString = paramHashMap.execute(paramString);
        int i = paramString.getStatusLine().getStatusCode();
        if (i == 200)
        {
          paramHashMap = EntityUtils.toString(paramString.getEntity());
          paramString = paramHashMap;
          if (paramHashMap == null) {
            paramString = "";
          }
          paramHashMap = new Message();
          paramHashMap.what = 1;
          paramHashMap.obj = paramString.trim();
          paramHashMap.arg1 = i;
          this.handler.sendMessage(paramHashMap);
          return;
          String str = ((String)localIterator.next()).trim();
          try
          {
            ((StringBuffer)localObject).append(str + "=" + URLEncoder.encode((String)paramHashMap.get(str), "UTF-8") + "&");
          }
          catch (UnsupportedEncodingException localUnsupportedEncodingException) {}
        }
        else
        {
          paramString = new Message();
          paramString.what = 3;
          paramString.arg1 = i;
          this.handler.sendMessage(paramString);
          return;
        }
      }
      catch (ClientProtocolException paramString)
      {
        paramHashMap = new Message();
        paramHashMap.what = 0;
        paramHashMap.obj = paramString.toString();
        this.handler.sendMessage(paramHashMap);
        return;
      }
      catch (IOException paramString)
      {
        paramHashMap = new Message();
        paramHashMap.what = 2;
        paramHashMap.obj = paramString.toString();
        this.handler.sendMessage(paramHashMap);
      }
    }
  }
  
  public static boolean IsWifi(Context paramContext)
  {
    paramContext = (ConnectivityManager)paramContext.getSystemService("connectivity");
    if (paramContext != null)
    {
      paramContext = paramContext.getActiveNetworkInfo();
      if ((paramContext != null) && (paramContext.getType() == 1)) {
        return true;
      }
    }
    return false;
  }
  
  public static boolean NetWorkIsAble(Context paramContext)
  {
    return ((ConnectivityManager)paramContext.getSystemService("connectivity")).getActiveNetworkInfo() != null;
  }
  
  private void Post(String paramString, HashMap<String, String> paramHashMap)
  {
    ArrayList localArrayList = new ArrayList();
    Iterator localIterator = paramHashMap.keySet().iterator();
    StringBuffer localStringBuffer = new StringBuffer();
    for (;;)
    {
      if (!localIterator.hasNext())
      {
        localStringBuffer.deleteCharAt(localStringBuffer.length() - 1);
        paramString = new HttpPost(paramString);
      }
      try
      {
        paramString.setEntity(new UrlEncodedFormEntity(localArrayList, "UTF-8"));
        paramHashMap = new DefaultHttpClient();
        paramHashMap.getParams().setParameter("http.connection.timeout", Integer.valueOf(20000));
        paramHashMap.getParams().setParameter("http.socket.timeout", Integer.valueOf(10000));
        paramString = paramHashMap.execute(paramString);
        int i = paramString.getStatusLine().getStatusCode();
        if (i == 200)
        {
          paramString = EntityUtils.toString(paramString.getEntity());
          paramHashMap = new Message();
          paramHashMap.what = 1;
          paramHashMap.obj = paramString.trim();
          paramHashMap.arg1 = i;
          this.handler.sendMessage(paramHashMap);
          return;
          String str = ((String)localIterator.next()).trim();
          localStringBuffer.append("KEY:" + str + "==VALUE:" + (String)paramHashMap.get(str) + ";");
          localArrayList.add(new BasicNameValuePair(str, (String)paramHashMap.get(str)));
        }
        else
        {
          paramString = new Message();
          paramString.what = 3;
          paramString.arg1 = i;
          this.handler.sendMessage(paramString);
          return;
        }
      }
      catch (UnsupportedEncodingException paramString)
      {
        this.handler.sendEmptyMessage(0);
        return;
      }
      catch (ClientProtocolException paramString)
      {
        this.handler.sendEmptyMessage(0);
        return;
      }
      catch (IOException paramString)
      {
        this.handler.sendEmptyMessage(0);
      }
    }
  }
  
  public static String getChannel(Context paramContext)
  {
    try
    {
      paramContext = paramContext.getPackageManager().getApplicationInfo(paramContext.getPackageName(), 128).metaData.get("NOICON_CHANNEL").toString();
      return paramContext;
    }
    catch (PackageManager.NameNotFoundException paramContext) {}
    return null;
  }
  
  public static String getImei(Context paramContext)
  {
    return ((TelephonyManager)paramContext.getSystemService("phone")).getDeviceId();
  }
  
  public static String getNativePhoneNumber(Context paramContext)
  {
    String str = ((TelephonyManager)paramContext.getSystemService("phone")).getLine1Number();
    if (!TextUtils.isEmpty(str))
    {
      paramContext = str;
      if (!str.equals("0")) {}
    }
    else
    {
      paramContext = "";
    }
    return paramContext;
  }
  
  public void RequestData(int paramInt, String paramString, HashMap<String, String> paramHashMap, Inc.RequestBack paramRequestBack)
  {
    this.requestback = paramRequestBack;
    new Thread(new Inc.2(this, paramInt, paramString, paramHashMap)).start();
  }
}
