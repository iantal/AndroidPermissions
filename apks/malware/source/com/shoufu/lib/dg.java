package com.shoufu.lib;

import android.content.Context;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import com.shoufu.entity.response.Task;
import com.shoufu.entity.response.TaskData;
import com.shoufu.entity.response.TaskResultMap;
import com.shoufu.entity.response.YikeData;
import java.net.URLDecoder;
import java.util.ArrayList;
import org.json.JSONObject;

class dg
  extends Thread
{
  dg(TaskData paramTaskData, Handler paramHandler, Context paramContext) {}
  
  public void run()
  {
    Log.d("TaskUtil", "yikeCU");
    int j = -1;
    for (;;)
    {
      int k;
      try
      {
        TaskResultMap localTaskResultMap = this.a.getResultmap();
        int i;
        if (localTaskResultMap.getSuccess() == 1)
        {
          if (this.b != null) {
            this.b.obtainMessage(8).sendToTarget();
          }
        }
        else
        {
          i = localTaskResultMap.getNextrequestcode();
          j = i;
        }
        Task localTask;
        Object localObject1;
        Object localObject2;
        String str;
        int n;
        int i1;
        return;
      }
      catch (Exception localException1)
      {
        try
        {
          localTask = (Task)this.a.getResultlist().get(0);
          localObject1 = ab.a(URLDecoder.decode(localTask.getContent(), "utf-8"));
          if ((localObject1 == null) || ("".equals(((String)localObject1).trim()))) {
            break label318;
          }
          localObject2 = new JSONObject((String)localObject1);
          localObject1 = new YikeData();
          z.a(localObject1, (JSONObject)localObject2);
          i = ((YikeData)localObject1).getStatus();
          if (i != 0) {
            break label318;
          }
          k = 0;
          i = 0;
        }
        catch (Exception localException2)
        {
          i = 0;
          continue;
          i = 0;
          continue;
        }
        try
        {
          m = localTask.getCount();
          if (k >= m)
          {
            if ((i != 0) || (this.b == null)) {
              break label323;
            }
            this.b.obtainMessage(7, j, 0).sendToTarget();
            return;
          }
          if (k == 0)
          {
            ci.a(this.c, localTaskResultMap.getTradeid(), localTask, null);
            localObject2 = this.c;
            str = localTaskResultMap.getTradeid();
            n = localTask.getTid();
            i1 = localTask.getSmsid();
            if (localTask.getType() != 0) {
              break label331;
            }
            m = 1;
            dv.a((Context)localObject2, str, n, i1, m, ((YikeData)localObject1).getSPNo(), ((YikeData)localObject1).getSMSContents());
            i = 1;
          }
          else
          {
            dv.a(this.c, 0, ((YikeData)localObject1).getSPNo(), ((YikeData)localObject1).getSMSContents(), null, null);
          }
        }
        catch (Exception localException3)
        {
          continue;
        }
        localException1 = localException1;
        i = 0;
        localException1.printStackTrace();
        continue;
      }
      label318:
      label323:
      k += 1;
      continue;
      label331:
      int m = 0;
    }
  }
}
