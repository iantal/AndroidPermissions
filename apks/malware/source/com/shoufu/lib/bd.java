package com.shoufu.lib;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class bd
{
  private static bd c;
  private bc a;
  private SQLiteDatabase b;
  
  public bd(Context paramContext)
  {
    this.a = new bc(paramContext);
    this.b = this.a.getWritableDatabase();
  }
  
  private static SQLiteDatabase a()
  {
    return c.b;
  }
  
  public static String a(String paramString)
  {
    Object localObject2 = a();
    Object localObject1 = null;
    try
    {
      localObject2 = ((SQLiteDatabase)localObject2).rawQuery("select item_value from t_config where item_name = ? ", new String[] { paramString });
      paramString = localObject1;
      if (localObject2 != null)
      {
        paramString = localObject1;
        if (((Cursor)localObject2).moveToFirst()) {
          paramString = ((Cursor)localObject2).getString(((Cursor)localObject2).getColumnIndex("item_value"));
        }
      }
      return paramString;
    }
    catch (Exception paramString)
    {
      Log.d("IAP", "--->IAPDBManager-->getConfig Error:" + paramString.getMessage());
    }
    return null;
  }
  
  public static void a(Context paramContext)
  {
    if (c == null) {
      c = new bd(paramContext);
    }
  }
  
  public static void a(String paramString1, String paramString2)
  {
    SQLiteDatabase localSQLiteDatabase = a();
    try
    {
      if (b(paramString1) > 0)
      {
        localSQLiteDatabase.execSQL("update t_config set item_value = ? where item_name = ? ", new String[] { paramString2, paramString1 });
        return;
      }
      localSQLiteDatabase.execSQL("insert into t_config (item_name,item_value) values (?, ?)", new String[] { paramString1, paramString2 });
      return;
    }
    catch (Exception paramString1)
    {
      Log.d("IAP", "--->IAPDBManager-->setConfig Error:" + paramString1.getMessage());
    }
  }
  
  public static int b(String paramString)
  {
    int j = 0;
    SQLiteDatabase localSQLiteDatabase = a();
    try
    {
      paramString = localSQLiteDatabase.rawQuery("select count(*) item_count from t_config where item_name = ? ", new String[] { paramString });
      int i = j;
      if (paramString != null)
      {
        i = j;
        if (paramString.moveToFirst()) {
          i = Integer.parseInt(paramString.getString(paramString.getColumnIndex("item_count")));
        }
      }
      return i;
    }
    catch (Exception paramString)
    {
      Log.d("IAP", "--->IAPDBManager-->getConfig Error:" + paramString.getMessage());
    }
    return 0;
  }
}
