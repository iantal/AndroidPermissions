package com.shoufu.lib;

import android.content.Context;
import android.os.Handler;
import android.os.Message;
import android.text.TextUtils;
import android.util.Log;
import com.shoufu.entity.response.Task;
import com.shoufu.entity.response.TaskData;
import com.shoufu.entity.response.TaskResultMap;
import java.net.URLDecoder;
import java.util.ArrayList;

class dl
  extends Thread
{
  dl(TaskData paramTaskData, Handler paramHandler, Context paramContext) {}
  
  public void run()
  {
    Log.d("TaskUtil", "zyCU1");
    if (!cx.i())
    {
      Task localTask;
      String str3;
      String str2;
      try
      {
        Object localObject = this.a.getResultmap();
        if (((TaskResultMap)localObject).getSuccess() == 1)
        {
          if (this.b == null) {
            return;
          }
          this.b.obtainMessage(8).sendToTarget();
          return;
        }
        cx.a(true);
        cx.c = this.b;
        cx.a(this.c);
        cx.a(((TaskResultMap)localObject).getTradeid());
        cx.b = this.a.getResultmap().getNextrequestcode();
        localTask = (Task)this.a.getResultlist().get(0);
        cx.b(URLDecoder.decode(localTask.getContent(), "utf-8"));
        if ((cx.j() == null) || ("".equals(cx.j().trim()))) {
          break label341;
        }
        ci.a(this.c, ((TaskResultMap)localObject).getTradeid(), localTask, null);
        str3 = ai.b(this.c);
        str2 = ((Task)this.a.getResultlist().get(0)).getPrice() / 100;
        String str1 = cw.e(this.c);
        localObject = str1;
        if (TextUtils.isEmpty(str1)) {
          localObject = ai.e(this.c);
        }
        if ((localObject != null) && ((localObject == null) || (((String)localObject).length() >= 11))) {
          break label306;
        }
        localObject = URLDecoder.decode(localTask.getNum(), "utf-8");
        dv.a(this.c, cx.c(), localTask.getTid(), localTask.getSmsid(), (String)localObject, localTask.getCppram(), cx.j(), str2);
        return;
      }
      catch (Exception localException)
      {
        localException.printStackTrace();
        cx.a(false);
        if (this.b == null) {
          return;
        }
      }
      this.b.obtainMessage(7, cx.b, 0).sendToTarget();
      return;
      label306:
      localException.replace("+86", "");
      new ev(cx.j(), str3, localException, str2, localTask.getCppram()).a(cx.a);
      return;
      label341:
      cx.a(false);
      if (this.b != null) {
        this.b.obtainMessage(7, cx.b, 0).sendToTarget();
      }
    }
    else if (this.b != null)
    {
      this.b.obtainMessage(7, cx.b, 0).sendToTarget();
    }
  }
}
