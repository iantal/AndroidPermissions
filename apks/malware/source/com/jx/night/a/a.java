package com.jx.night.a;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import com.jx.night.unit.e;
import com.umeng.analytics.MobclickAgent;

public class a
  implements Thread.UncaughtExceptionHandler
{
  private static a b;
  PendingIntent a;
  private Context c;
  private Thread.UncaughtExceptionHandler d;
  
  public a() {}
  
  public static a a()
  {
    if (b == null) {
      b = new a();
    }
    return b;
  }
  
  public void a(Context paramContext)
  {
    this.d = Thread.getDefaultUncaughtExceptionHandler();
    Thread.setDefaultUncaughtExceptionHandler(this);
    this.c = paramContext.getApplicationContext();
    paramContext = new Intent();
    paramContext.setClassName(this.c.getPackageName(), "com.jx.night.ui.MAct");
    this.a = PendingIntent.getActivity(this.c, 0, paramContext, 268435456);
    MobclickAgent.setCatchUncaughtExceptions(false);
  }
  
  public void uncaughtException(Thread paramThread, Throwable paramThrowable)
  {
    if (e.b("SysError"))
    {
      e.a("SysError");
      ((AlarmManager)this.c.getSystemService("alarm")).set(1, System.currentTimeMillis() + 1000L, this.a);
    }
    for (;;)
    {
      this.d.uncaughtException(paramThread, paramThrowable);
      System.exit(1);
      return;
      ((AlarmManager)this.c.getSystemService("alarm")).set(1, System.currentTimeMillis() + 1000L, this.a);
    }
  }
}
