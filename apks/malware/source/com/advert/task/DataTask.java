package com.advert.task;

import android.os.AsyncTask;
import java.io.IOException;
import org.json.JSONException;

public class DataTask
  extends AsyncTask<DataOperation, Exception, DataEvent>
{
  private DataConsumer consumer;
  
  public DataTask(DataConsumer paramDataConsumer)
  {
    this.consumer = paramDataConsumer;
  }
  
  protected final DataEvent doInBackground(DataOperation... paramVarArgs)
  {
    DataEvent localDataEvent = null;
    if (paramVarArgs != null) {}
    try
    {
      localDataEvent = new DataEvent(paramVarArgs[0].launch(), paramVarArgs[0].getEventType());
      return localDataEvent;
    }
    catch (IOException paramVarArgs)
    {
      publishProgress(new Exception[] { paramVarArgs });
      paramVarArgs.printStackTrace();
      return null;
    }
    catch (IllegalStateException paramVarArgs)
    {
      publishProgress(new Exception[] { paramVarArgs });
      return null;
    }
    catch (JSONException paramVarArgs)
    {
      publishProgress(new Exception[] { paramVarArgs });
    }
    return null;
  }
  
  protected final void onPostExecute(DataEvent paramDataEvent)
  {
    if (paramDataEvent != null) {
      this.consumer.handleEvent(paramDataEvent);
    }
  }
  
  protected final void onProgressUpdate(Exception... paramVarArgs)
  {
    super.onProgressUpdate(paramVarArgs);
    try
    {
      throw paramVarArgs[0];
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
      this.consumer.handleExeption(paramVarArgs[0]);
    }
  }
}
