package com.ltad.interstitial;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import com.inmobi.ads.InMobiInterstitial;
import com.inmobi.sdk.InMobiSdk;
import com.inmobi.sdk.InMobiSdk.LogLevel;
import com.ltad.a.i;
import com.ltad.util.InterstitialUtil;
import com.ltad.util.PropertyUtil;
import java.lang.ref.SoftReference;

public class InterstitialInmobi
  extends InterstitialAdapter
{
  private static final String TAG = "Joy_InterstitialInmobi";
  private boolean isAdClosed = true;
  private boolean isLoaded = false;
  private boolean isShow = false;
  private int loadTimes = 0;
  private String mAccountId = "";
  private SoftReference mActivityRef;
  private Context mAppContext;
  private InMobiInterstitial mInterstitial = null;
  private long mInterstitialPlacement = 0L;
  
  public InterstitialInmobi() {}
  
  public void destroy()
  {
    this.isAdClosed = true;
    Log.i("Joy_InterstitialInmobi", "destroy complete");
  }
  
  public String getTag()
  {
    return "Joy_InterstitialInmobi";
  }
  
  public void init(Context paramContext)
  {
    this.mAppContext = paramContext.getApplicationContext();
    this.mAccountId = PropertyUtil.getPropertyDefault(this.mAppContext, "inmobi_account", "");
    this.mInterstitialPlacement = Long.parseLong(PropertyUtil.getPropertyDefault(this.mAppContext, "inmobi_interstitial_placement", "0"));
    if (("".equals(this.mAccountId)) && (this.mInterstitialPlacement == 0L))
    {
      Log.w("Joy_InterstitialInmobi", "inmobi AccountId or InterstitialPlacement is null");
      return;
    }
    Log.i("Joy_InterstitialInmobi", "inmobi AccountId: " + this.mAccountId + "; InterstitialPlacement:" + this.mInterstitialPlacement);
    try
    {
      Class.forName("com.inmobi.sdk.InMobiSdk");
      InMobiSdk.setLogLevel(InMobiSdk.LogLevel.DEBUG);
      InMobiSdk.init(paramContext, this.mAccountId);
      InterstitialUtil.getInstance(this.mAppContext).addSupportInterstitial(i.a(458759), this);
      Log.i("Joy_InterstitialInmobi", "init complete");
      return;
    }
    catch (ClassNotFoundException paramContext)
    {
      Log.e("Joy_InterstitialInmobi", "Exception:" + paramContext.getMessage());
    }
  }
  
  public void preload(Activity paramActivity)
  {
    this.mInterstitial = new InMobiInterstitial(paramActivity, this.mInterstitialPlacement, new InterstitialInmobi.1(this, paramActivity));
    this.mInterstitial.load();
  }
  
  public boolean preloadResult()
  {
    return this.isLoaded;
  }
  
  public void setAdClosed(boolean paramBoolean)
  {
    this.isAdClosed = paramBoolean;
  }
  
  public void show(Activity paramActivity)
  {
    this.mActivityRef = new SoftReference(paramActivity);
    this.isAdClosed = false;
    this.isShow = true;
    if ((this.isLoaded) && (this.isShow) && (!this.isAdClosed) && (this.mInterstitial != null))
    {
      this.mInterstitial.show();
      this.isShow = false;
      this.isLoaded = false;
    }
    preload(paramActivity);
  }
}
