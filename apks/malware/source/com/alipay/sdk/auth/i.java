package com.alipay.sdk.auth;

import android.app.Activity;
import android.content.Intent;
import android.text.TextUtils;
import com.alipay.sdk.data.e;
import com.alipay.sdk.exception.NetErrorException;
import com.alipay.sdk.net.d;
import com.alipay.sdk.protocol.b;
import com.alipay.sdk.protocol.c;
import org.json.JSONObject;

final class i
  implements Runnable
{
  i(d paramD, Activity paramActivity, e paramE, APAuthInfo paramAPAuthInfo) {}
  
  public final void run()
  {
    try
    {
      c localC = this.a.a(this.b, this.c, false);
      if (h.a() != null)
      {
        h.a().c();
        h.b();
      }
      if (localC == null)
      {
        h.a(this.d.getRedirectUri() + "?resultCode=202");
        h.a(this.b, h.c());
        return;
      }
    }
    catch (NetErrorException localNetErrorException)
    {
      for (;;)
      {
        localNetErrorException.printStackTrace();
        localObject1 = null;
      }
      Object localObject1 = com.alipay.sdk.protocol.a.a(b.a(((c)localObject1).c.optJSONObject("form"), "onload"));
      int j = localObject1.length;
      int i = 0;
      for (;;)
      {
        if (i < j)
        {
          Object localObject3 = localObject1[i];
          if (localObject3 == com.alipay.sdk.protocol.a.a) {
            h.a(com.alipay.sdk.util.a.a(localObject3.e())[0]);
          }
        }
        else
        {
          if (!TextUtils.isEmpty(h.c())) {
            break;
          }
          h.a(this.d.getRedirectUri() + "?resultCode=202");
          h.a(this.b, h.c());
          return;
        }
        i += 1;
      }
      localObject1 = new Intent(this.b, AuthActivity.class);
      ((Intent)localObject1).putExtra("params", h.c());
      ((Intent)localObject1).putExtra("redirectUri", this.d.getRedirectUri());
      this.b.startActivity((Intent)localObject1);
      return;
    }
    catch (Exception localException) {}finally
    {
      if (h.a() != null) {
        h.a().c();
      }
    }
  }
}
