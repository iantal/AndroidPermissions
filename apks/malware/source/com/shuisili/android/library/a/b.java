package com.shuisili.android.library.a;

import android.util.Log;
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class b
{
  private String a = "su";
  private DataOutputStream b = null;
  private BufferedReader c = null;
  private BufferedReader d = null;
  private Process e = null;
  
  public b() {}
  
  public BufferedReader a()
  {
    if (this.e != null) {
      return this.c;
    }
    try
    {
      this.e = Runtime.getRuntime().exec(this.a);
      this.b = new DataOutputStream(this.e.getOutputStream());
      this.c = new BufferedReader(new InputStreamReader(this.e.getInputStream()));
      this.d = new BufferedReader(new InputStreamReader(this.e.getErrorStream()));
      return this.c;
    }
    catch (Exception localException)
    {
      for (;;)
      {
        localException.printStackTrace();
        this.e = null;
        this.b = null;
        this.c = null;
        this.d = null;
      }
    }
  }
  
  public BufferedReader a(String paramString)
  {
    String str = paramString + "\n";
    try
    {
      this.b.writeBytes(str);
      this.b.flush();
      Log.d("Shell exec: ", paramString);
      return this.c;
    }
    catch (NullPointerException paramString)
    {
      for (;;)
      {
        paramString.printStackTrace();
      }
    }
    catch (IOException paramString)
    {
      for (;;)
      {
        paramString.printStackTrace();
      }
    }
  }
  
  public BufferedReader b()
  {
    try
    {
      this.b.writeBytes("exit\n");
      this.b.flush();
      this.e.waitFor();
      return this.c;
    }
    catch (InterruptedException localInterruptedException)
    {
      for (;;)
      {
        localInterruptedException.printStackTrace();
      }
    }
    catch (IOException localIOException)
    {
      for (;;)
      {
        localIOException.printStackTrace();
      }
    }
  }
}
