package com.urbanairship.restclient;

import com.urbanairship.Logger;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.List;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;

public class Post
  extends HttpPost
{
  protected DefaultHttpClient httpclient = null;
  
  public Post(String paramString, List<BasicNameValuePair> paramList)
  {
    super(paramString);
    paramString = new BasicHttpParams();
    this.httpclient = new DefaultHttpClient(paramString);
    HttpConnectionParams.setConnectionTimeout(paramString, 10000);
    try
    {
      setEntity(new UrlEncodedFormEntity(paramList, "UTF-8"));
      return;
    }
    catch (UnsupportedEncodingException paramString)
    {
      Logger.error("UTF-8 Unsupported.", paramString);
    }
  }
  
  public Response execute()
    throws IOException
  {
    return new Response(this.httpclient.execute(this));
  }
}
