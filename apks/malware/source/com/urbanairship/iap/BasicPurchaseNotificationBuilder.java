package com.urbanairship.iap;

import android.app.Notification;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ApplicationInfo;
import com.urbanairship.UAirship;

public class BasicPurchaseNotificationBuilder
  implements PurchaseNotificationBuilder
{
  Context context = UAirship.shared().getApplicationContext();
  int iconDrawable = UAirship.getAppInfo().icon;
  
  public BasicPurchaseNotificationBuilder() {}
  
  public Notification buildNotification(PurchaseNotificationInfo paramPurchaseNotificationInfo)
  {
    PendingIntent localPendingIntent = PendingIntent.getActivity(this.context, 0, new Intent(), 0);
    Notification localNotification = new Notification(this.iconDrawable, paramPurchaseNotificationInfo.getProductName(), paramPurchaseNotificationInfo.getTimestamp());
    localNotification.flags = paramPurchaseNotificationInfo.getFlags();
    localNotification.setLatestEventInfo(this.context, paramPurchaseNotificationInfo.getProductName(), getNotificationMessage(paramPurchaseNotificationInfo), localPendingIntent);
    return localNotification;
  }
  
  protected String getNotificationMessage(PurchaseNotificationInfo paramPurchaseNotificationInfo)
  {
    switch (1.$SwitchMap$com$urbanairship$iap$PurchaseNotificationInfo$NotificationType[paramPurchaseNotificationInfo.getNotificationType().ordinal()])
    {
    default: 
      return "";
    case 1: 
      return String.format("Downloading %s...", new Object[] { paramPurchaseNotificationInfo.getProductName() });
    case 2: 
      return String.format("Decompressing %s...", new Object[] { paramPurchaseNotificationInfo.getProductName() });
    case 3: 
      return String.format("Extraction of %s failed", new Object[] { paramPurchaseNotificationInfo.getProductName() });
    case 4: 
      return String.format("Download of %s failed", new Object[] { paramPurchaseNotificationInfo.getProductName() });
    case 5: 
      return paramPurchaseNotificationInfo.getProductName() + " was sucessfully installed";
    }
    return "Verifying " + paramPurchaseNotificationInfo.getProductName();
  }
}
