package com.urbanairship.iap;

import android.app.Notification;
import android.app.NotificationManager;
import android.content.Context;
import com.urbanairship.UAirship;
import java.util.HashMap;

class NotificationController
{
  private HashMap<String, PurchaseNotificationInfo> notifications = new HashMap();
  
  NotificationController() {}
  
  boolean contains(String paramString)
  {
    return this.notifications.containsKey(paramString);
  }
  
  PurchaseNotificationInfo get(String paramString)
  {
    return (PurchaseNotificationInfo)this.notifications.get(paramString);
  }
  
  void registerPurchaseNotification(String paramString1, String paramString2, PurchaseNotificationInfo.NotificationType paramNotificationType)
  {
    paramString2 = new PurchaseNotificationInfo(paramNotificationType, paramString2, paramString1);
    this.notifications.put(paramString1, paramString2);
  }
  
  void removePurchaseNotification(String paramString)
  {
    PurchaseNotificationInfo localPurchaseNotificationInfo = (PurchaseNotificationInfo)this.notifications.get(paramString);
    localPurchaseNotificationInfo.setFlags(16);
    sendNotification(localPurchaseNotificationInfo);
    this.notifications.remove(paramString);
  }
  
  void sendNotification(PurchaseNotificationInfo paramPurchaseNotificationInfo)
  {
    Notification localNotification = IAPManager.shared().getNotificationBuilder().buildNotification(paramPurchaseNotificationInfo);
    ((NotificationManager)UAirship.shared().getApplicationContext().getSystemService("notification")).notify(paramPurchaseNotificationInfo.getNotificationId(), localNotification);
  }
}
