package com.appbrain.a;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import com.appbrain.AdService;
import com.appbrain.RemoteSettings;
import com.appbrain.e.q;
import java.util.Timer;
import java.util.concurrent.atomic.AtomicBoolean;

public final class ax
  implements AdService
{
  private static ax b = new ax();
  protected boolean a = true;
  private au c;
  private final AtomicBoolean d = new AtomicBoolean(false);
  private Activity e = null;
  private Timer f = new Timer(true);
  private int g = 0;
  private RemoteSettings h = null;
  private SharedPreferences i = null;
  private Context j = null;
  
  private ax() {}
  
  public static ax a()
  {
    return b;
  }
  
  private void a(Context paramContext)
  {
    try
    {
      if (this.h == null)
      {
        this.h = ao.a(paramContext, true);
        this.i = paramContext.getSharedPreferences("ab_sdk_pref", 0);
        this.j = paramContext;
      }
      return;
    }
    finally
    {
      paramContext = finally;
      throw paramContext;
    }
  }
  
  private boolean b(boolean paramBoolean)
  {
    if ((!this.d.get()) && (p()))
    {
      int k = Integer.parseInt(this.h.get("offerwall", "3"));
      if (k > 0)
      {
        long l1 = this.i.getLong("last_offer_time", 0L);
        l1 = Math.max(this.i.getLong("last_offer_wall_shown", 0L), l1);
        long l2 = System.currentTimeMillis();
        SharedPreferences.Editor localEditor;
        if (System.currentTimeMillis() > k * 86400L * 1000L + l1) {
          if (paramBoolean)
          {
            localEditor = this.i.edit();
            localEditor.putLong("last_offer_time", System.currentTimeMillis());
            cmn.a.a().a(localEditor);
          }
        }
        for (k = 1; k != 0; k = 0)
        {
          return true;
          if (l1 > l2)
          {
            localEditor = this.i.edit();
            localEditor.putLong("last_offer_time", System.currentTimeMillis());
            cmn.a.a().a(localEditor);
          }
        }
      }
    }
    return false;
  }
  
  private void o()
  {
    try
    {
      if (this.c == null) {
        this.c = new ay(this, "ping", Integer.parseInt(b.h.get("ping_interval", "86400")) * 1000L);
      }
      this.f.schedule(new ba(this), 10000L);
      return;
    }
    finally {}
  }
  
  private boolean p()
  {
    try
    {
      NetworkInfo localNetworkInfo = ((ConnectivityManager)this.j.getSystemService("connectivity")).getActiveNetworkInfo();
      if (localNetworkInfo != null)
      {
        boolean bool = localNetworkInfo.isConnectedOrConnecting();
        if (bool) {
          return true;
        }
      }
      return false;
    }
    catch (Exception localException) {}
    return true;
  }
  
  final double a(boolean paramBoolean)
  {
    if (paramBoolean) {}
    for (String str = this.h.get("bmedsample", "1.0");; str = this.h.get("bsample", "1.0")) {
      try
      {
        double d1 = Math.max(0.0D, Math.min(1.0D, Double.parseDouble(str)));
        return d1;
      }
      catch (Exception localException) {}
    }
    return 0.0D;
  }
  
  public final void a(Activity paramActivity)
  {
    this.e = paramActivity;
  }
  
  /* Error */
  public final void a(Context paramContext, boolean paramBoolean)
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_1
    //   3: invokevirtual 250	android/content/Context:getApplicationContext	()Landroid/content/Context;
    //   6: astore_1
    //   7: getstatic 33	com/appbrain/a/ax:b	Lcom/appbrain/a/ax;
    //   10: invokevirtual 252	com/appbrain/a/ax:b	()Z
    //   13: istore 8
    //   15: iload 8
    //   17: ifne +289 -> 306
    //   20: aload_1
    //   21: invokevirtual 256	android/content/Context:getPackageManager	()Landroid/content/pm/PackageManager;
    //   24: new 258	android/content/ComponentName
    //   27: dup
    //   28: aload_1
    //   29: ldc_w 260
    //   32: invokespecial 263	android/content/ComponentName:<init>	(Landroid/content/Context;Ljava/lang/String;)V
    //   35: iconst_0
    //   36: invokevirtual 269	android/content/pm/PackageManager:getActivityInfo	(Landroid/content/ComponentName;I)Landroid/content/pm/ActivityInfo;
    //   39: pop
    //   40: aload_1
    //   41: invokevirtual 256	android/content/Context:getPackageManager	()Landroid/content/pm/PackageManager;
    //   44: new 258	android/content/ComponentName
    //   47: dup
    //   48: aload_1
    //   49: ldc_w 271
    //   52: invokespecial 263	android/content/ComponentName:<init>	(Landroid/content/Context;Ljava/lang/String;)V
    //   55: iconst_0
    //   56: invokevirtual 275	android/content/pm/PackageManager:getServiceInfo	(Landroid/content/ComponentName;I)Landroid/content/pm/ServiceInfo;
    //   59: pop
    //   60: aload_1
    //   61: ldc_w 277
    //   64: invokevirtual 280	android/content/Context:checkCallingOrSelfPermission	(Ljava/lang/String;)I
    //   67: ifeq +43 -> 110
    //   70: new 282	java/lang/IllegalStateException
    //   73: dup
    //   74: ldc_w 284
    //   77: invokespecial 287	java/lang/IllegalStateException:<init>	(Ljava/lang/String;)V
    //   80: athrow
    //   81: astore_1
    //   82: aload_0
    //   83: monitorexit
    //   84: aload_1
    //   85: athrow
    //   86: astore_1
    //   87: new 282	java/lang/IllegalStateException
    //   90: dup
    //   91: ldc_w 289
    //   94: invokespecial 287	java/lang/IllegalStateException:<init>	(Ljava/lang/String;)V
    //   97: athrow
    //   98: astore_1
    //   99: new 282	java/lang/IllegalStateException
    //   102: dup
    //   103: ldc_w 291
    //   106: invokespecial 287	java/lang/IllegalStateException:<init>	(Ljava/lang/String;)V
    //   109: athrow
    //   110: ldc_w 293
    //   113: ldc_w 295
    //   116: iconst_1
    //   117: anewarray 297	java/lang/Class
    //   120: dup
    //   121: iconst_0
    //   122: ldc_w 299
    //   125: aastore
    //   126: invokevirtual 303	java/lang/Class:getMethod	(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
    //   129: astore 9
    //   131: aload 9
    //   133: invokevirtual 309	java/lang/reflect/Method:getName	()Ljava/lang/String;
    //   136: ldc_w 311
    //   139: invokevirtual 315	java/lang/String:contains	(Ljava/lang/CharSequence;)Z
    //   142: istore 8
    //   144: iload 8
    //   146: ifne +289 -> 435
    //   149: iconst_0
    //   150: istore_3
    //   151: iload_3
    //   152: istore 4
    //   154: getstatic 320	android/os/Build$VERSION:SDK_INT	I
    //   157: bipush 17
    //   159: if_icmplt +261 -> 420
    //   162: iload_3
    //   163: istore 4
    //   165: aload_1
    //   166: invokevirtual 256	android/content/Context:getPackageManager	()Landroid/content/pm/PackageManager;
    //   169: aload_1
    //   170: invokevirtual 323	android/content/Context:getPackageName	()Ljava/lang/String;
    //   173: iconst_0
    //   174: invokevirtual 327	android/content/pm/PackageManager:getApplicationInfo	(Ljava/lang/String;I)Landroid/content/pm/ApplicationInfo;
    //   177: getfield 332	android/content/pm/ApplicationInfo:targetSdkVersion	I
    //   180: bipush 17
    //   182: if_icmplt +238 -> 420
    //   185: aload 9
    //   187: invokevirtual 336	java/lang/reflect/Method:getAnnotations	()[Ljava/lang/annotation/Annotation;
    //   190: ifnull +70 -> 260
    //   193: aload 9
    //   195: invokevirtual 336	java/lang/reflect/Method:getAnnotations	()[Ljava/lang/annotation/Annotation;
    //   198: astore 9
    //   200: aload 9
    //   202: arraylength
    //   203: istore 7
    //   205: iconst_0
    //   206: istore 5
    //   208: iconst_0
    //   209: istore 4
    //   211: iload 4
    //   213: istore 6
    //   215: iload 5
    //   217: iload 7
    //   219: if_icmpge +44 -> 263
    //   222: aload 9
    //   224: iload 5
    //   226: aaload
    //   227: invokeinterface 342 1 0
    //   232: invokevirtual 343	java/lang/Class:getName	()Ljava/lang/String;
    //   235: ldc_w 345
    //   238: invokevirtual 315	java/lang/String:contains	(Ljava/lang/CharSequence;)Z
    //   241: istore 8
    //   243: iload 8
    //   245: ifeq +6 -> 251
    //   248: iconst_1
    //   249: istore 4
    //   251: iload 5
    //   253: iconst_1
    //   254: iadd
    //   255: istore 5
    //   257: goto -46 -> 211
    //   260: iconst_0
    //   261: istore 6
    //   263: iload_3
    //   264: istore 4
    //   266: iload 6
    //   268: ifne +152 -> 420
    //   271: iconst_0
    //   272: istore_3
    //   273: iload_3
    //   274: ifne +28 -> 302
    //   277: getstatic 349	java/lang/System:err	Ljava/io/PrintStream;
    //   280: ldc_w 351
    //   283: invokevirtual 356	java/io/PrintStream:println	(Ljava/lang/String;)V
    //   286: aload_1
    //   287: ldc_w 358
    //   290: iconst_1
    //   291: invokestatic 364	android/widget/Toast:makeText	(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;
    //   294: invokevirtual 367	android/widget/Toast:show	()V
    //   297: aload_0
    //   298: iconst_0
    //   299: putfield 46	com/appbrain/a/ax:a	Z
    //   302: aload_1
    //   303: invokestatic 371	com/appbrain/a/aw:a	(Landroid/content/Context;)V
    //   306: aload_0
    //   307: aload_1
    //   308: invokespecial 372	com/appbrain/a/ax:a	(Landroid/content/Context;)V
    //   311: aload_1
    //   312: invokestatic 375	com/appbrain/a/bb:a	(Landroid/content/Context;)V
    //   315: iload_2
    //   316: ifeq +49 -> 365
    //   319: aload_0
    //   320: getfield 57	com/appbrain/a/ax:i	Landroid/content/SharedPreferences;
    //   323: invokeinterface 91 1 0
    //   328: astore_1
    //   329: aload_1
    //   330: ldc_w 377
    //   333: aload_0
    //   334: getfield 57	com/appbrain/a/ax:i	Landroid/content/SharedPreferences;
    //   337: ldc_w 377
    //   340: iconst_0
    //   341: invokeinterface 97 3 0
    //   346: iconst_1
    //   347: iadd
    //   348: invokeinterface 103 3 0
    //   353: pop
    //   354: invokestatic 108	cmn/a:a	()Lcmn/a;
    //   357: aload_1
    //   358: invokevirtual 111	cmn/a:a	(Landroid/content/SharedPreferences$Editor;)V
    //   361: aload_0
    //   362: invokespecial 125	com/appbrain/a/ax:o	()V
    //   365: aload_0
    //   366: getfield 55	com/appbrain/a/ax:h	Lcom/appbrain/RemoteSettings;
    //   369: ldc_w 379
    //   372: ldc_w 381
    //   375: invokeinterface 142 3 0
    //   380: invokestatic 148	java/lang/Integer:parseInt	(Ljava/lang/String;)I
    //   383: ifeq +11 -> 394
    //   386: aload_0
    //   387: getfield 42	com/appbrain/a/ax:d	Ljava/util/concurrent/atomic/AtomicBoolean;
    //   390: iconst_1
    //   391: invokevirtual 384	java/util/concurrent/atomic/AtomicBoolean:set	(Z)V
    //   394: aload_0
    //   395: monitorexit
    //   396: return
    //   397: astore 9
    //   399: iconst_0
    //   400: istore_3
    //   401: goto -128 -> 273
    //   404: astore 9
    //   406: iconst_1
    //   407: istore_3
    //   408: getstatic 349	java/lang/System:err	Ljava/io/PrintStream;
    //   411: ldc_w 386
    //   414: invokevirtual 356	java/io/PrintStream:println	(Ljava/lang/String;)V
    //   417: iload_3
    //   418: istore 4
    //   420: iload 4
    //   422: istore_3
    //   423: goto -150 -> 273
    //   426: astore_1
    //   427: goto -33 -> 394
    //   430: astore 9
    //   432: goto -24 -> 408
    //   435: iconst_1
    //   436: istore_3
    //   437: goto -286 -> 151
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	440	0	this	ax
    //   0	440	1	paramContext	Context
    //   0	440	2	paramBoolean	boolean
    //   150	287	3	k	int
    //   152	269	4	m	int
    //   206	50	5	n	int
    //   213	54	6	i1	int
    //   203	17	7	i2	int
    //   13	231	8	bool	boolean
    //   129	94	9	localObject	Object
    //   397	1	9	localNoSuchMethodException	NoSuchMethodException
    //   404	1	9	localNameNotFoundException1	android.content.pm.PackageManager.NameNotFoundException
    //   430	1	9	localNameNotFoundException2	android.content.pm.PackageManager.NameNotFoundException
    // Exception table:
    //   from	to	target	type
    //   2	15	81	finally
    //   20	40	81	finally
    //   40	60	81	finally
    //   60	81	81	finally
    //   87	98	81	finally
    //   99	110	81	finally
    //   110	144	81	finally
    //   154	162	81	finally
    //   165	205	81	finally
    //   222	243	81	finally
    //   277	302	81	finally
    //   302	306	81	finally
    //   306	315	81	finally
    //   319	365	81	finally
    //   365	394	81	finally
    //   408	417	81	finally
    //   20	40	86	android/content/pm/PackageManager$NameNotFoundException
    //   40	60	98	android/content/pm/PackageManager$NameNotFoundException
    //   110	144	397	java/lang/NoSuchMethodException
    //   154	162	397	java/lang/NoSuchMethodException
    //   165	205	397	java/lang/NoSuchMethodException
    //   222	243	397	java/lang/NoSuchMethodException
    //   110	144	404	android/content/pm/PackageManager$NameNotFoundException
    //   365	394	426	java/lang/Exception
    //   154	162	430	android/content/pm/PackageManager$NameNotFoundException
    //   165	205	430	android/content/pm/PackageManager$NameNotFoundException
    //   222	243	430	android/content/pm/PackageManager$NameNotFoundException
  }
  
  /* Error */
  public final boolean b()
  {
    // Byte code:
    //   0: aload_0
    //   1: monitorenter
    //   2: aload_0
    //   3: getfield 59	com/appbrain/a/ax:j	Landroid/content/Context;
    //   6: astore_2
    //   7: aload_2
    //   8: ifnull +9 -> 17
    //   11: iconst_1
    //   12: istore_1
    //   13: aload_0
    //   14: monitorexit
    //   15: iload_1
    //   16: ireturn
    //   17: iconst_0
    //   18: istore_1
    //   19: goto -6 -> 13
    //   22: astore_2
    //   23: aload_0
    //   24: monitorexit
    //   25: aload_2
    //   26: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	27	0	this	ax
    //   12	7	1	bool	boolean
    //   6	2	2	localContext	Context
    //   22	4	2	localObject	Object
    // Exception table:
    //   from	to	target	type
    //   2	7	22	finally
  }
  
  public final boolean c()
  {
    return this.d.get();
  }
  
  final SharedPreferences d()
  {
    return this.i;
  }
  
  public final String e()
  {
    return this.h.get("adserver", "http://applift-a.apptornado.com,http://applift-b.apptornado.com");
  }
  
  public final String f()
  {
    return this.h.get("owserver", "http://applift-a.apptornado.com");
  }
  
  public final String g()
  {
    return this.h.get("pserver", "http://sdk.appbrain.com,http://sdk-b.apptornado.com");
  }
  
  final int h()
  {
    String str = this.h.get("bcsample", "3");
    try
    {
      int k = Integer.parseInt(str);
      return k;
    }
    catch (Exception localException) {}
    return 10;
  }
  
  public final RemoteSettings i()
  {
    return this.h;
  }
  
  public final Context j()
  {
    return this.j;
  }
  
  final int k()
  {
    return this.i.getInt("ow_imp", 0);
  }
  
  public final void l()
  {
    SharedPreferences.Editor localEditor = this.i.edit();
    localEditor.putLong("last_offer_wall_shown", System.currentTimeMillis());
    cmn.a.a().b(localEditor);
  }
  
  public final RemoteSettings m()
  {
    return ao.a(this.j, false);
  }
  
  /* Error */
  public final boolean maybeShowInterstitial(Context paramContext)
  {
    // Byte code:
    //   0: iconst_1
    //   1: istore_2
    //   2: aload_0
    //   3: monitorenter
    //   4: aload_0
    //   5: aload_1
    //   6: iconst_0
    //   7: invokevirtual 414	com/appbrain/a/ax:a	(Landroid/content/Context;Z)V
    //   10: aload_0
    //   11: iconst_1
    //   12: invokespecial 416	com/appbrain/a/ax:b	(Z)Z
    //   15: ifeq +15 -> 30
    //   18: aload_1
    //   19: iconst_1
    //   20: invokestatic 421	com/appbrain/a/b:a	()Lcom/appbrain/a/b;
    //   23: invokestatic 426	com/appbrain/a/a:a	(Landroid/content/Context;ZLcom/appbrain/a/b;)V
    //   26: aload_0
    //   27: monitorexit
    //   28: iload_2
    //   29: ireturn
    //   30: aload_0
    //   31: invokevirtual 429	com/appbrain/a/ax:n	()V
    //   34: iconst_0
    //   35: istore_2
    //   36: goto -10 -> 26
    //   39: astore_1
    //   40: aload_0
    //   41: monitorexit
    //   42: aload_1
    //   43: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	44	0	this	ax
    //   0	44	1	paramContext	Context
    //   1	35	2	bool	boolean
    // Exception table:
    //   from	to	target	type
    //   4	26	39	finally
    //   30	34	39	finally
  }
  
  public final void n()
  {
    if (this.e != null) {
      this.e.finish();
    }
  }
  
  public final boolean shouldShowInterstitial(Context paramContext)
  {
    a(paramContext, false);
    return b(false);
  }
  
  /* Error */
  public final boolean showInterstitial(Context paramContext)
  {
    // Byte code:
    //   0: iconst_0
    //   1: istore_2
    //   2: aload_0
    //   3: monitorenter
    //   4: aload_0
    //   5: aload_1
    //   6: iconst_0
    //   7: invokevirtual 414	com/appbrain/a/ax:a	(Landroid/content/Context;Z)V
    //   10: aload_0
    //   11: getfield 42	com/appbrain/a/ax:d	Ljava/util/concurrent/atomic/AtomicBoolean;
    //   14: invokevirtual 130	java/util/concurrent/atomic/AtomicBoolean:get	()Z
    //   17: ifne +10 -> 27
    //   20: aload_0
    //   21: invokespecial 133	com/appbrain/a/ax:p	()Z
    //   24: ifne +11 -> 35
    //   27: aload_0
    //   28: invokevirtual 429	com/appbrain/a/ax:n	()V
    //   31: aload_0
    //   32: monitorexit
    //   33: iload_2
    //   34: ireturn
    //   35: aload_1
    //   36: iconst_0
    //   37: invokestatic 421	com/appbrain/a/b:a	()Lcom/appbrain/a/b;
    //   40: invokestatic 426	com/appbrain/a/a:a	(Landroid/content/Context;ZLcom/appbrain/a/b;)V
    //   43: iconst_1
    //   44: istore_2
    //   45: goto -14 -> 31
    //   48: astore_1
    //   49: aload_0
    //   50: monitorexit
    //   51: aload_1
    //   52: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	53	0	this	ax
    //   0	53	1	paramContext	Context
    //   1	44	2	bool	boolean
    // Exception table:
    //   from	to	target	type
    //   4	27	48	finally
    //   27	31	48	finally
    //   35	43	48	finally
  }
  
  public final void showOfferWall(Context paramContext)
  {
    a(paramContext, false);
    if (!this.d.get()) {
      a.a(paramContext, q.b);
    }
  }
}
