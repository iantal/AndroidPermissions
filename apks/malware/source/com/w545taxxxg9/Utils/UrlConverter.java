package com.w545taxxxg9.Utils;

import android.content.Context;
import android.content.res.AssetFileDescriptor;
import android.content.res.AssetManager;
import android.webkit.WebView;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

public class UrlConverter
{
  private WebView _parentWebView;
  
  public UrlConverter(WebView paramWebView)
  {
    this._parentWebView = paramWebView;
  }
  
  public String toAbsolute(String paramString)
  {
    try
    {
      if (!paramString.contains("://"))
      {
        URL localURL = new URL(this._parentWebView.getUrl());
        if (paramString.startsWith("/")) {
          return localURL.getProtocol() + "://" + localURL.getHost() + paramString;
        }
        paramString = localURL.getProtocol() + "://" + localURL.getFile().replaceAll("/[^/]+$", "/") + paramString;
        return paramString;
      }
      return paramString;
    }
    catch (MalformedURLException paramString)
    {
      paramString.printStackTrace();
    }
    return "";
  }
  
  public AssetFileDescriptor toFileDescriptor(String paramString)
  {
    paramString = toAbsolute(paramString);
    if (paramString.length() == 0) {}
    for (;;)
    {
      return null;
      try
      {
        if (paramString.startsWith("file:///"))
        {
          paramString = this._parentWebView.getContext().getAssets().openFd(paramString.replace("file:///android_asset/", ""));
          return paramString;
        }
      }
      catch (IOException paramString)
      {
        paramString.printStackTrace();
      }
    }
    return null;
  }
  
  public InputStream toStream(String paramString)
  {
    paramString = toAbsolute(paramString);
    if (paramString.length() == 0) {
      return null;
    }
    try
    {
      if (paramString.startsWith("file:///")) {
        return this._parentWebView.getContext().getAssets().open(paramString.replace("file:///android_asset/", ""));
      }
      paramString = new URL(paramString).openStream();
      return paramString;
    }
    catch (IOException paramString)
    {
      paramString.printStackTrace();
    }
    return null;
  }
}
