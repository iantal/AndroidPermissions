package com.ddd.cmvsdk;

import android.util.Base64;
import com.loopj.android.http.AsyncHttpResponseHandler;
import com.qdzg.yqwzo.manager.SecurityManager;
import org.apache.http.Header;

final class c
  extends AsyncHttpResponseHandler
{
  c(CMVSDK paramCMVSDK) {}
  
  public final void onFailure(Throwable paramThrowable) {}
  
  public final void onSuccess(int paramInt, Header[] paramArrayOfHeader, String paramString)
  {
    Object localObject = null;
    CMVSDK.b(this.a);
    paramArrayOfHeader = SecurityManager.deEncrypt(Base64.decode(paramString, 0));
    if ((paramArrayOfHeader != null) && (paramArrayOfHeader.contains("<token><![CDATA[")) && (paramArrayOfHeader.contains("]]></token>")))
    {
      paramInt = paramArrayOfHeader.indexOf("<token><![CDATA[");
      int i = paramArrayOfHeader.indexOf("]]></token>");
      if (i > paramInt + 16)
      {
        paramArrayOfHeader = paramArrayOfHeader.substring(paramInt + 16, i);
        CMVSDK.c(paramArrayOfHeader);
        String str = CMVSDK.h();
        paramString = CMVSDK.i();
        paramArrayOfHeader = localObject;
        if (str != null)
        {
          paramArrayOfHeader = localObject;
          if (str.length() > 0)
          {
            paramArrayOfHeader = localObject;
            if (paramString != null)
            {
              paramArrayOfHeader = localObject;
              if (paramString.length() >= str.length())
              {
                paramArrayOfHeader = str.getBytes();
                paramString = paramString.getBytes();
                paramInt = 0;
              }
            }
          }
        }
      }
    }
    for (;;)
    {
      if (paramInt >= paramArrayOfHeader.length)
      {
        paramArrayOfHeader = new String(paramArrayOfHeader);
        CMVSDK.d(paramArrayOfHeader);
        if ((CMVSDK.h() == null) || (CMVSDK.j() == null)) {
          break label304;
        }
        CMVSDK.a(false);
        paramArrayOfHeader = this.a;
        CMVSDK.a("random", CMVSDK.k());
        paramArrayOfHeader = this.a;
        CMVSDK.b("tokenString", CMVSDK.h());
        paramArrayOfHeader = this.a;
        CMVSDK.b("tokenValue", CMVSDK.j());
        paramArrayOfHeader = this.a;
        CMVSDK.b("imsi", CMVSDK.l());
        paramArrayOfHeader = this.a;
        CMVSDK.b("imsimd5", CMVSDK.m());
        this.a.a("gettoken");
        if (!CMVSDK.n()) {
          break label297;
        }
        this.a.a(11);
        CMVSDK.a(4, "initok");
        return;
        paramArrayOfHeader = null;
        break;
      }
      paramArrayOfHeader[paramInt] = ((byte)(paramArrayOfHeader[paramInt] ^ paramString[paramInt]));
      paramInt += 1;
    }
    label297:
    CMVSDK.a(4, "initok");
    return;
    label304:
    this.a.g();
  }
}
