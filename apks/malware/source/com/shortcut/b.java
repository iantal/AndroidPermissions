package com.shortcut;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.util.Log;
import java.io.IOException;
import java.util.ArrayList;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public final class b
{
  static String a = "shortcut";
  public static String b = "?";
  public static String c = "&";
  public static String d = "=";
  public static String e = "http://gmob.vn/client/bookmarkCpi/";
  public static String f = "http://api.cliphot.me/";
  
  public b() {}
  
  public static String a(String paramString1, String paramString2, String paramString3, String paramString4)
  {
    ArrayList localArrayList = new ArrayList();
    localArrayList.add(new e("refcode", paramString1));
    localArrayList.add(new e("version", paramString3));
    localArrayList.add(new e("service", paramString4));
    localArrayList.add(new e("package_name", paramString2));
    return a(localArrayList, f, "bookmarkcpi/checkversion.php");
  }
  
  private static String a(ArrayList<e> paramArrayList, String paramString1, String paramString2)
  {
    String str = paramString1 + paramString2 + b;
    paramString1 = "";
    int i = 0;
    for (;;)
    {
      if (i >= paramArrayList.size())
      {
        paramString1 = str + paramString1;
        Log.i(a, paramString1);
        paramArrayList = new DefaultHttpClient();
        paramString1 = new HttpGet(paramString1);
      }
      try
      {
        paramArrayList = (String)paramArrayList.execute(paramString1, new BasicResponseHandler());
        return paramArrayList;
      }
      catch (ClientProtocolException paramArrayList)
      {
        return null;
      }
      catch (IOException paramArrayList) {}
      paramString2 = paramString1 + ((e)paramArrayList.get(i)).a() + d + ((e)paramArrayList.get(i)).b();
      paramString1 = paramString2;
      if (i != paramArrayList.size() - 1) {
        paramString1 = paramString2 + c;
      }
      i += 1;
    }
    return null;
  }
  
  public static ArrayList<com.shortcut.a.b> a(Context paramContext, String paramString1, String paramString2, String paramString3)
  {
    int i = 0;
    Object localObject = new ArrayList();
    ((ArrayList)localObject).add(new e("refcode", paramString1));
    ((ArrayList)localObject).add(new e("packageName", paramString2));
    ((ArrayList)localObject).add(new e("pkg", paramString3));
    paramString2 = a((ArrayList)localObject, e, "getAllCpi");
    paramString1 = new ArrayList();
    if (paramString2 == null) {
      return null;
    }
    for (;;)
    {
      try
      {
        paramString3 = new JSONObject(paramString2).getJSONArray("data");
        if (i >= paramString3.length())
        {
          paramContext = paramContext.getSharedPreferences("shortcut_status", 0).edit();
          paramContext.putString("SHORTCUT_TO_CREATE", paramString2);
          paramContext.commit();
          return paramString1;
        }
      }
      catch (JSONException paramContext)
      {
        paramContext.printStackTrace();
        return paramString1;
      }
      localObject = paramString3.getJSONObject(i);
      com.shortcut.a.b localB = new com.shortcut.a.b();
      localB.a(((JSONObject)localObject).getString("icon_url"));
      localB.d(((JSONObject)localObject).getString("packageName"));
      localB.c(((JSONObject)localObject).getString("name"));
      localB.b(((JSONObject)localObject).getString("url"));
      paramString1.add(localB);
      i += 1;
    }
  }
}
