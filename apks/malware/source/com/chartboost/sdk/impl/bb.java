package com.chartboost.sdk.impl;

import android.os.Bundle;
import android.os.Handler;
import android.widget.ImageView;
import com.chartboost.sdk.Libraries.g;
import com.chartboost.sdk.Libraries.i.a;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.ExecutorService;

public final class bb
{
  private static volatile bb c = null;
  private static Handler d = new Handler();
  private g a = new g("CBImagesDirectory", true);
  private Map b = new HashMap();
  
  private bb() {}
  
  private i.a a(String paramString)
  {
    if (b(paramString))
    {
      if (this.b.containsKey(paramString)) {
        return (i.a)this.b.get(paramString);
      }
      i.a localA = new i.a(paramString, this.a.c(String.format("%s%s", new Object[] { paramString, ".png" })), this.a);
      this.b.put(paramString, localA);
      return localA;
    }
    if (this.b.containsKey(paramString)) {
      this.b.remove(paramString);
    }
    return null;
  }
  
  public static bb a()
  {
    if (c == null) {}
    try
    {
      if (c == null) {
        c = new bb();
      }
      return c;
    }
    finally {}
  }
  
  private static bb.a b(ImageView paramImageView)
  {
    if (paramImageView != null)
    {
      paramImageView = paramImageView.getDrawable();
      if ((paramImageView instanceof bb.c)) {
        return ((bb.c)paramImageView).a();
      }
    }
    return null;
  }
  
  private boolean b(String paramString)
  {
    return this.a.b(String.format("%s%s", new Object[] { paramString, ".png" }));
  }
  
  public void a(String paramString1, String paramString2, bb.b paramB, ImageView paramImageView, Bundle paramBundle)
  {
    i.a localA = a(paramString2);
    if (localA != null)
    {
      if (paramImageView != null) {
        paramImageView.setImageBitmap(localA.a());
      }
      if (paramB != null) {
        paramB.a(localA, paramBundle);
      }
      return;
    }
    paramString1 = new bb.a(this, paramImageView, paramB, paramString2, paramBundle, paramString1);
    aw.a().execute(paramString1);
  }
  
  public void b()
  {
    this.a.b();
    this.b.clear();
  }
}
