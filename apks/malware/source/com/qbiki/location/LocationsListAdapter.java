package com.qbiki.location;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.qbiki.feedback.LocationModel;
import com.qbiki.util.ImageResourceFetcher;
import java.util.List;

public class LocationsListAdapter
  extends BaseAdapter
{
  private boolean isDistanceInMiles = true;
  private ImageResourceFetcher mImageFetcher;
  private LayoutInflater mInflater;
  private List<LocationModel> mLocations;
  
  public LocationsListAdapter(Context paramContext, List<LocationModel> paramList, ImageResourceFetcher paramImageResourceFetcher, boolean paramBoolean)
  {
    this.mInflater = LayoutInflater.from(paramContext);
    this.mLocations = paramList;
    this.mImageFetcher = paramImageResourceFetcher;
    this.isDistanceInMiles = paramBoolean;
  }
  
  public int getCount()
  {
    return this.mLocations.size();
  }
  
  public Object getItem(int paramInt)
  {
    return this.mLocations.get(paramInt);
  }
  
  public long getItemId(int paramInt)
  {
    return paramInt;
  }
  
  public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
  {
    LocationModel localLocationModel = (LocationModel)getItem(paramInt);
    TextView localTextView;
    double d;
    if (paramView == null)
    {
      paramViewGroup = this.mInflater.inflate(2130903154, paramViewGroup, false);
      paramView = new ViewHolder(null);
      paramView.text = ((TextView)paramViewGroup.findViewById(2131099839));
      paramView.distanceText = ((TextView)paramViewGroup.findViewById(2131099840));
      paramView.typeText = ((TextView)paramViewGroup.findViewById(2131099990));
      paramView.detailText = ((TextView)paramViewGroup.findViewById(2131099991));
      paramView.imageView = ((ImageView)paramViewGroup.findViewById(2131099989));
      paramViewGroup.setTag(paramView);
      paramView.text.setText(localLocationModel.locationName);
      localTextView = paramView.distanceText;
      d = localLocationModel.distance;
      if (!this.isDistanceInMiles) {
        break label242;
      }
    }
    label242:
    for (String str = "mi";; str = "km")
    {
      localTextView.setText(String.format("%.1f %s", new Object[] { Double.valueOf(d), str }));
      paramView.detailText.setText(localLocationModel.locationDescription);
      paramView.typeText.setText(localLocationModel.locationType);
      if ((localLocationModel.locationImage == null) || (localLocationModel.locationImage.length() <= 0)) {
        break label249;
      }
      this.mImageFetcher.loadImage(localLocationModel.locationImage, paramView.imageView);
      return paramViewGroup;
      paramViewGroup = paramView;
      paramView = (ViewHolder)paramViewGroup.getTag();
      break;
    }
    label249:
    paramView.imageView.setImageResource(2130837719);
    return paramViewGroup;
  }
  
  private static class ViewHolder
  {
    public TextView detailText = null;
    public TextView distanceText = null;
    public ImageView imageView = null;
    public TextView text = null;
    public TextView typeText = null;
    
    private ViewHolder() {}
  }
}
