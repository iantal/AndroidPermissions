package com.qbiki.seattleclouds;

import android.graphics.drawable.BitmapDrawable;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.view.View;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import com.qbiki.widget.SCFragmentTabHost;
import java.util.List;

public class SCTabsAppActivity
  extends BaseAppActivity
{
  private static final String TAG = "SCTabsAppActivity";
  private SCFragmentTabHost mTabHost;
  
  public SCTabsAppActivity() {}
  
  private void loadContent()
  {
    this.mTabHost = ((SCFragmentTabHost)findViewById(16908306));
    this.mTabHost.setup(this, getSupportFragmentManager(), 2131099722, App.appConfig.getNavigationSettings(), App.appConfig.getNavigationItems());
    int i = 0;
    if (i < App.appConfig.getNavigationItems().size())
    {
      String str2 = "tab" + (i + 1) + ".html";
      Object localObject = super.getRootPageFragmentInfo(str2);
      Bundle localBundle = new Bundle();
      localBundle.putParcelable("ARG_ROOT_FRAGMENT_INFO", (Parcelable)localObject);
      BitmapDrawable localBitmapDrawable;
      if (App.appConfig.getNavigationSettings().isLegacyTabWidgetEnabled())
      {
        localObject = (NavigationItem)App.appConfig.getNavigationItems().get(i);
        localBitmapDrawable = App.getScaledDrawableResource(((NavigationItem)localObject).getIcon());
        String str1 = ((NavigationItem)localObject).getText();
        localObject = str1;
        if (str1 == null) {
          localObject = getString(2131361900) + " " + i;
        }
      }
      for (localObject = this.mTabHost.newTabSpec(str2).setIndicator((CharSequence)localObject, localBitmapDrawable);; localObject = this.mTabHost.newTabSpec(str2).setIndicator(new View(this)))
      {
        this.mTabHost.addTab((TabHost.TabSpec)localObject, NavigationFragment.class, localBundle);
        i += 1;
        break;
      }
    }
    this.mTabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener()
    {
      public void onTabChanged(String paramAnonymousString)
      {
        SCTabsAppActivity.this.onTabChanged(paramAnonymousString);
      }
    });
  }
  
  public void onBackPressed()
  {
    Fragment localFragment = getSupportFragmentManager().findFragmentByTag(this.mTabHost.getCurrentTabTag());
    if ((localFragment instanceof NavigationFragment))
    {
      if (!((NavigationFragment)localFragment).onBackPressed()) {
        super.onBackPressed();
      }
      return;
    }
    super.onBackPressed();
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    if (App.appConfig.isInitialized())
    {
      setContentView(2130903064);
      loadContent();
    }
  }
}
