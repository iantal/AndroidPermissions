package com.qbiki.seattleclouds;

import android.content.res.Configuration;
import android.content.res.Resources;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.ActionBar.TabListener;
import java.util.List;

public class ActionBarTabsAppActivity
  extends BaseAppActivity
{
  public ActionBarTabsAppActivity() {}
  
  private void loadContent()
  {
    updateUiForOrientation(getResources().getConfiguration().orientation);
    ActionBar localActionBar = getSupportActionBar();
    localActionBar.setNavigationMode(2);
    int i = 0;
    while (i < App.appConfig.getNavigationItems().size())
    {
      String str3 = "tab" + (i + 1) + ".html";
      FragmentInfo localFragmentInfo = super.getRootPageFragmentInfo(str3);
      String str2 = ((NavigationItem)App.appConfig.getNavigationItems().get(i)).getText();
      String str1 = str2;
      if (str2 == null) {
        str1 = getString(2131361900) + " " + i;
      }
      localActionBar.addTab(localActionBar.newTab().setText(str1).setTabListener(new TabListener(this, str3, localFragmentInfo)));
      i += 1;
    }
  }
  
  private void updateUiForOrientation(int paramInt)
  {
    boolean bool = true;
    ActionBar localActionBar = getSupportActionBar();
    if (paramInt == 1) {}
    for (;;)
    {
      localActionBar.setDisplayShowTitleEnabled(bool);
      return;
      bool = false;
    }
  }
  
  public void onConfigurationChanged(Configuration paramConfiguration)
  {
    getSupportActionBar().setNavigationMode(1);
    super.onConfigurationChanged(paramConfiguration);
    getSupportActionBar().setNavigationMode(2);
    updateUiForOrientation(paramConfiguration.orientation);
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    if (App.appConfig.isInitialized()) {
      loadContent();
    }
  }
  
  private static class TabListener
    implements ActionBar.TabListener
  {
    private final ActionBarTabsAppActivity mActivity;
    private Fragment mFragment;
    private final FragmentInfo mFragmentInfo;
    private final String mTag;
    
    public TabListener(ActionBarTabsAppActivity paramActionBarTabsAppActivity, String paramString, FragmentInfo paramFragmentInfo)
    {
      this.mActivity = paramActionBarTabsAppActivity;
      this.mTag = paramString;
      this.mFragmentInfo = paramFragmentInfo;
    }
    
    public void onTabReselected(ActionBar.Tab paramTab, FragmentTransaction paramFragmentTransaction) {}
    
    public void onTabSelected(ActionBar.Tab paramTab, FragmentTransaction paramFragmentTransaction)
    {
      if (this.mFragment == null)
      {
        this.mFragment = Fragment.instantiate(this.mActivity, this.mFragmentInfo.getClassName(), this.mFragmentInfo.getArguments());
        paramFragmentTransaction.add(16908290, this.mFragment, this.mTag);
      }
      for (;;)
      {
        this.mActivity.onTabChanged(this.mTag);
        return;
        paramFragmentTransaction.show(this.mFragment);
      }
    }
    
    public void onTabUnselected(ActionBar.Tab paramTab, FragmentTransaction paramFragmentTransaction)
    {
      if (this.mFragment != null) {
        paramFragmentTransaction.hide(this.mFragment);
      }
    }
  }
}
