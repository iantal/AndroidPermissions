package com.qbiki.modules.fbfanpage;

import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;
import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.BaseRequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.SessionEvents;
import com.facebook.android.SessionEvents.AuthListener;
import com.facebook.android.SessionEvents.LogoutListener;
import com.facebook.android.SessionStore;
import com.qbiki.seattleclouds.App;
import com.qbiki.seattleclouds.AppConfig;
import com.qbiki.seattleclouds.FragmentInfo;
import com.qbiki.seattleclouds.SCFragment;
import com.qbiki.util.ImageCache;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

public class FacebookFunPageFragment
  extends SCFragment
{
  private static boolean needUpdate = true;
  public final int REQUEST_BECOME_FAN = 2;
  public final int REQUEST_IS_FAN = 3;
  public final int REQUEST_ME = 1;
  public final int REQUEST_PAGE_FEED = 5;
  public final int REQUEST_PAGE_STATUS = 4;
  private View fView = null;
  private Facebook fb;
  private String fbApiKey = "";
  private String fbpageid = "";
  private ImageCache imageCache = new ImageCache();
  private boolean isFan = false;
  private ListView listView;
  private int loadingCount = 0;
  private AsyncFacebookRunner mAsyncRunner;
  private Button multiButton;
  private String pageurl = "";
  private ImageView profileImageView;
  private ProgressBar progressIndicator;
  private TextView statusText = null;
  private String uid = "";
  
  public FacebookFunPageFragment() {}
  
  private Bitmap loadImageFromNetwork(String paramString)
  {
    Object localObject1 = this.imageCache.get(paramString);
    Object localObject2 = localObject1;
    if (localObject1 == null) {
      try
      {
        localObject2 = BitmapFactory.decodeStream((InputStream)new URL(paramString).getContent());
        localObject1 = localObject2;
        this.imageCache.put(paramString, (Bitmap)localObject2);
        return localObject2;
      }
      catch (Exception paramString)
      {
        localObject2 = localObject1;
      }
    }
    return localObject2;
  }
  
  private void loginToFacebook()
  {
    Facebook localFacebook = this.fb;
    FragmentActivity localFragmentActivity = getActivity();
    LoginDialogListener localLoginDialogListener = new LoginDialogListener(null);
    localFacebook.authorize(localFragmentActivity, new String[] { "publish_stream" }, -1, localLoginDialogListener);
  }
  
  protected void hideLoading()
  {
    this.loadingCount -= 1;
    if (this.loadingCount < 0) {
      this.loadingCount = 0;
    }
    if (this.loadingCount == 0) {
      getActivity().runOnUiThread(new Runnable()
      {
        public void run()
        {
          FacebookFunPageFragment.this.multiButton.setVisibility(0);
          FacebookFunPageFragment.this.progressIndicator.setVisibility(8);
        }
      });
    }
  }
  
  protected void init()
  {
    Bundle localBundle = getArguments();
    if (localBundle != null)
    {
      this.fbApiKey = localBundle.getString("fb_id");
      if ((this.fbApiKey == null) || (this.fbApiKey.length() == 0)) {
        this.fbApiKey = App.appConfig.getFacebookAppID();
      }
      this.fbpageid = localBundle.getString("fbpageid");
    }
    this.statusText = ((TextView)this.fView.findViewById(2131099856));
    this.profileImageView = ((ImageView)this.fView.findViewById(2131099855));
    this.listView = ((ListView)this.fView.findViewById(2131099859));
    this.multiButton = ((Button)this.fView.findViewById(2131099857));
    this.progressIndicator = ((ProgressBar)this.fView.findViewById(2131099858));
    this.listView.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
      public void onItemClick(AdapterView<?> paramAnonymousAdapterView, View paramAnonymousView, int paramAnonymousInt, long paramAnonymousLong)
      {
        paramAnonymousAdapterView = ((FacebookFunPageFragment.FFPCommentsAdapter)paramAnonymousAdapterView.getAdapter()).commentAt(paramAnonymousInt);
        if (paramAnonymousAdapterView.commentLink.length() > 0)
        {
          FacebookFunPageFragment.access$002(false);
          paramAnonymousView = new Bundle();
          paramAnonymousView.putString("pageurl", paramAnonymousAdapterView.commentLink);
          App.showPage(new FragmentInfo(FBFanPageWebViewFragment.class.getName(), paramAnonymousView), FacebookFunPageFragment.this);
        }
      }
    });
    this.multiButton.setOnClickListener(new View.OnClickListener()
    {
      public void onClick(View paramAnonymousView)
      {
        if (FacebookFunPageFragment.this.fb.isSessionValid())
        {
          if (FacebookFunPageFragment.this.isFan)
          {
            FacebookFunPageFragment.this.postQuestion();
            return;
          }
          FacebookFunPageFragment.this.requestMethod(2);
          return;
        }
        FacebookFunPageFragment.this.loginToFacebook();
      }
    });
    this.fb = new Facebook(this.fbApiKey);
    this.mAsyncRunner = new AsyncFacebookRunner(this.fb);
    SessionStore.restore(this.fb, getActivity());
    SessionEvents.addAuthListener(new FFPAuthListener());
    SessionEvents.addLogoutListener(new FFPLogoutListener());
  }
  
  /* Error */
  public Bitmap loadBitmap(String paramString)
  {
    // Byte code:
    //   0: aconst_null
    //   1: astore 5
    //   3: aconst_null
    //   4: astore 8
    //   6: aconst_null
    //   7: astore 4
    //   9: aconst_null
    //   10: astore 6
    //   12: aconst_null
    //   13: astore 7
    //   15: aload 4
    //   17: astore_3
    //   18: aload 8
    //   20: astore_2
    //   21: new 170	java/net/URL
    //   24: dup
    //   25: aload_1
    //   26: invokespecial 173	java/net/URL:<init>	(Ljava/lang/String;)V
    //   29: invokevirtual 309	java/net/URL:openConnection	()Ljava/net/URLConnection;
    //   32: astore_1
    //   33: aload 4
    //   35: astore_3
    //   36: aload 8
    //   38: astore_2
    //   39: aload_1
    //   40: invokevirtual 314	java/net/URLConnection:connect	()V
    //   43: aload 4
    //   45: astore_3
    //   46: aload 8
    //   48: astore_2
    //   49: aload_1
    //   50: invokevirtual 318	java/net/URLConnection:getInputStream	()Ljava/io/InputStream;
    //   53: astore_1
    //   54: aload_1
    //   55: astore_3
    //   56: aload_1
    //   57: astore_2
    //   58: new 320	java/io/BufferedInputStream
    //   61: dup
    //   62: aload_1
    //   63: sipush 8192
    //   66: invokespecial 323	java/io/BufferedInputStream:<init>	(Ljava/io/InputStream;I)V
    //   69: astore 4
    //   71: aload 4
    //   73: invokestatic 185	android/graphics/BitmapFactory:decodeStream	(Ljava/io/InputStream;)Landroid/graphics/Bitmap;
    //   76: astore_2
    //   77: aload 4
    //   79: ifnull +8 -> 87
    //   82: aload 4
    //   84: invokevirtual 326	java/io/BufferedInputStream:close	()V
    //   87: aload_1
    //   88: ifnull +100 -> 188
    //   91: aload_1
    //   92: invokevirtual 327	java/io/InputStream:close	()V
    //   95: aload_2
    //   96: areturn
    //   97: astore_1
    //   98: aload_2
    //   99: areturn
    //   100: astore_1
    //   101: aload_3
    //   102: astore_1
    //   103: aload 7
    //   105: astore_2
    //   106: aload_2
    //   107: ifnull +7 -> 114
    //   110: aload_2
    //   111: invokevirtual 326	java/io/BufferedInputStream:close	()V
    //   114: aload 5
    //   116: astore_2
    //   117: aload_1
    //   118: ifnull -23 -> 95
    //   121: aload_1
    //   122: invokevirtual 327	java/io/InputStream:close	()V
    //   125: aconst_null
    //   126: areturn
    //   127: astore_1
    //   128: aconst_null
    //   129: areturn
    //   130: astore_1
    //   131: aload 6
    //   133: astore_3
    //   134: aload_3
    //   135: ifnull +7 -> 142
    //   138: aload_3
    //   139: invokevirtual 326	java/io/BufferedInputStream:close	()V
    //   142: aload_2
    //   143: ifnull +7 -> 150
    //   146: aload_2
    //   147: invokevirtual 327	java/io/InputStream:close	()V
    //   150: aload_1
    //   151: athrow
    //   152: astore_3
    //   153: goto -66 -> 87
    //   156: astore_2
    //   157: goto -43 -> 114
    //   160: astore_3
    //   161: goto -19 -> 142
    //   164: astore_2
    //   165: goto -15 -> 150
    //   168: astore 5
    //   170: aload 4
    //   172: astore_3
    //   173: aload_1
    //   174: astore_2
    //   175: aload 5
    //   177: astore_1
    //   178: goto -44 -> 134
    //   181: astore_2
    //   182: aload 4
    //   184: astore_2
    //   185: goto -79 -> 106
    //   188: aload_2
    //   189: areturn
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	190	0	this	FacebookFunPageFragment
    //   0	190	1	paramString	String
    //   20	127	2	localObject1	Object
    //   156	1	2	localIOException1	IOException
    //   164	1	2	localIOException2	IOException
    //   174	1	2	str	String
    //   181	1	2	localException	Exception
    //   184	5	2	localBufferedInputStream1	java.io.BufferedInputStream
    //   17	122	3	localObject2	Object
    //   152	1	3	localIOException3	IOException
    //   160	1	3	localIOException4	IOException
    //   172	1	3	localBufferedInputStream2	java.io.BufferedInputStream
    //   7	176	4	localBufferedInputStream3	java.io.BufferedInputStream
    //   1	114	5	localObject3	Object
    //   168	8	5	localObject4	Object
    //   10	122	6	localObject5	Object
    //   13	91	7	localObject6	Object
    //   4	43	8	localObject7	Object
    // Exception table:
    //   from	to	target	type
    //   91	95	97	java/io/IOException
    //   21	33	100	java/lang/Exception
    //   39	43	100	java/lang/Exception
    //   49	54	100	java/lang/Exception
    //   58	71	100	java/lang/Exception
    //   121	125	127	java/io/IOException
    //   21	33	130	finally
    //   39	43	130	finally
    //   49	54	130	finally
    //   58	71	130	finally
    //   82	87	152	java/io/IOException
    //   110	114	156	java/io/IOException
    //   138	142	160	java/io/IOException
    //   146	150	164	java/io/IOException
    //   71	77	168	finally
    //   71	77	181	java/lang/Exception
  }
  
  public void onActivityResult(int paramInt1, int paramInt2, Intent paramIntent)
  {
    this.fb.authorizeCallback(paramInt1, paramInt2, paramIntent);
  }
  
  public void onCreateOptionsMenu(Menu paramMenu, MenuInflater paramMenuInflater)
  {
    paramMenuInflater.inflate(2131558411, paramMenu);
    super.onCreateOptionsMenu(paramMenu, paramMenuInflater);
  }
  
  public View onCreateView(LayoutInflater paramLayoutInflater, ViewGroup paramViewGroup, Bundle paramBundle)
  {
    this.fView = paramLayoutInflater.inflate(2130903107, paramViewGroup, false);
    init();
    return this.fView;
  }
  
  public void onDestroy()
  {
    super.onDestroy();
  }
  
  public boolean onOptionsItemSelected(MenuItem paramMenuItem)
  {
    switch (paramMenuItem.getItemId())
    {
    }
    for (;;)
    {
      return super.onOptionsItemSelected(paramMenuItem);
      if (this.loadingCount == 0) {
        updateAll();
      }
    }
  }
  
  public void onResume()
  {
    updateAll();
    super.onResume();
  }
  
  protected void postComment(String paramString)
  {
    Bundle localBundle = new Bundle();
    localBundle.putString("api_key", this.fbApiKey);
    localBundle.putString("user_message_prompt", "Comment:");
    localBundle.putString("target_id", paramString);
    localBundle.putString("page_id", this.fbpageid);
    this.fb.dialog(getActivity(), "stream.publish", localBundle, new PostDialogListener(null));
  }
  
  protected void postQuestion()
  {
    Bundle localBundle = new Bundle();
    localBundle.putString("api_key", this.fbApiKey);
    localBundle.putString("user_message_prompt", "Post your question:");
    localBundle.putString("target_id", this.fbpageid);
    localBundle.putString("page_id", this.fbpageid);
    this.fb.dialog(getActivity(), "stream.publish", localBundle, new PostDialogListener(null));
  }
  
  protected void requestMethod(int paramInt)
  {
    if (paramInt != 0) {
      showLoading();
    }
    Object localObject;
    switch (paramInt)
    {
    default: 
      return;
    case 1: 
      localObject = new FFPRequestListener();
      ((FFPRequestListener)localObject).setRequestMethod(1);
      ((FFPRequestListener)localObject).setNextRequest(3);
      this.mAsyncRunner.request("me", (AsyncFacebookRunner.RequestListener)localObject);
      return;
    case 2: 
      needUpdate = true;
      localObject = new Bundle();
      ((Bundle)localObject).putString("pageurl", this.pageurl);
      App.showPage(new FragmentInfo(FBFanPageWebViewFragment.class.getName(), (Bundle)localObject), this);
      hideLoading();
      return;
    case 3: 
      updateFanStatus();
      return;
    case 4: 
      updatePageStatus();
      return;
    }
    updateFeed();
  }
  
  protected void showLoading()
  {
    this.loadingCount += 1;
    if (this.loadingCount == 1) {
      getActivity().runOnUiThread(new Runnable()
      {
        public void run()
        {
          FacebookFunPageFragment.this.multiButton.setVisibility(8);
          FacebookFunPageFragment.this.progressIndicator.setVisibility(0);
        }
      });
    }
  }
  
  protected void updateAll()
  {
    if ((this.fb.isSessionValid()) && (needUpdate)) {
      requestMethod(1);
    }
    requestMethod(5);
    requestMethod(4);
  }
  
  protected void updateFanStatus()
  {
    if ((this.fb.isSessionValid()) && (this.uid != null) && (this.uid.length() > 0))
    {
      Bundle localBundle = new Bundle();
      localBundle.putString("method", "pages.isFan");
      localBundle.putString("format", "json");
      localBundle.putString("access_token", this.fb.getAccessToken());
      localBundle.putString("page_id", this.fbpageid);
      localBundle.putString("uid", this.uid);
      FFPRequestListener localFFPRequestListener = new FFPRequestListener();
      localFFPRequestListener.setRequestMethod(3);
      localFFPRequestListener.setNextRequest(5);
      this.mAsyncRunner.request(localBundle, localFFPRequestListener);
    }
  }
  
  protected void updateFeed()
  {
    if (this.fb.isSessionValid())
    {
      localObject = new FFPRequestListener();
      ((FFPRequestListener)localObject).setRequestMethod(5);
      this.mAsyncRunner.request(this.fbpageid + "/feed", (AsyncFacebookRunner.RequestListener)localObject);
      return;
    }
    Object localObject = new FFPComment("", "", "", "", "Please login to view content.", "");
    this.listView.setAdapter(new FFPCommentsAdapter(getActivity(), 2130903102, new FFPComment[] { localObject }));
    hideLoading();
  }
  
  protected void updatePageStatus()
  {
    FFPRequestListener localFFPRequestListener = new FFPRequestListener();
    localFFPRequestListener.setRequestMethod(4);
    this.mAsyncRunner.request(this.fbpageid, localFFPRequestListener);
  }
  
  private class DownloadImageTask
    extends AsyncTask<String, Void, Bitmap>
  {
    private ImageView imageView;
    public int position = -1;
    
    private DownloadImageTask() {}
    
    protected Bitmap doInBackground(String... paramVarArgs)
    {
      return FacebookFunPageFragment.this.loadImageFromNetwork(paramVarArgs[0]);
    }
    
    protected void onPostExecute(Bitmap paramBitmap)
    {
      if ((this.imageView != null) && (this.imageView.getTag() != null) && (this.position == ((Integer)this.imageView.getTag()).intValue())) {
        this.imageView.setImageBitmap(paramBitmap);
      }
    }
    
    public void setImageView(ImageView paramImageView)
    {
      this.imageView = paramImageView;
    }
  }
  
  public class FFPAuthListener
    implements SessionEvents.AuthListener
  {
    public FFPAuthListener() {}
    
    public void onAuthFail(String paramString)
    {
      Toast.makeText(FacebookFunPageFragment.this.getActivity(), "Login failed", 0).show();
    }
    
    public void onAuthSucceed()
    {
      SessionStore.save(FacebookFunPageFragment.this.fb, FacebookFunPageFragment.this.getActivity());
      FacebookFunPageFragment.this.updateAll();
    }
  }
  
  public final class FFPComment
  {
    public String cid = "";
    public String commentLink = "";
    public String created_time = "";
    public String from = "";
    public String imageLink = "";
    public String message = "";
    
    public FFPComment(String paramString1, String paramString2, String paramString3, String paramString4, String paramString5, String paramString6)
    {
      this.cid = paramString1;
      this.commentLink = paramString2;
      this.from = paramString3;
      this.imageLink = paramString4;
      this.message = paramString5;
      this.created_time = paramString6;
    }
  }
  
  public class FFPCommentsAdapter
    extends ArrayAdapter<FacebookFunPageFragment.FFPComment>
  {
    Context context;
    FacebookFunPageFragment.FFPComment[] data = null;
    int layoutResourceId;
    
    public FFPCommentsAdapter(Context paramContext, int paramInt, FacebookFunPageFragment.FFPComment[] paramArrayOfFFPComment)
    {
      super(paramInt, paramArrayOfFFPComment);
      this.layoutResourceId = paramInt;
      this.context = paramContext;
      this.data = paramArrayOfFFPComment;
    }
    
    public FacebookFunPageFragment.FFPComment commentAt(int paramInt)
    {
      return this.data[paramInt];
    }
    
    public FacebookFunPageFragment.FFPComment[] getData()
    {
      return this.data;
    }
    
    public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
    {
      Object localObject = paramView;
      if (localObject == null)
      {
        paramViewGroup = FacebookFunPageFragment.this.getActivity().getLayoutInflater().inflate(this.layoutResourceId, paramViewGroup, false);
        paramView = new FacebookFunPageFragment.FFPCommentsHolder();
        paramView.image = ((ImageView)paramViewGroup.findViewById(2131099733));
        paramView.title = ((TextView)paramViewGroup.findViewById(2131099734));
        paramView.description = ((TextView)paramViewGroup.findViewById(2131099735));
        paramView.label = ((TextView)paramViewGroup.findViewById(2131099736));
        paramView.arrowRight = ((ImageView)paramViewGroup.findViewById(2131099737));
        paramViewGroup.setTag(paramView);
        localObject = this.data[paramInt];
        if ((((FacebookFunPageFragment.FFPComment)localObject).commentLink != null) && (((FacebookFunPageFragment.FFPComment)localObject).commentLink.length() != 0)) {
          break label279;
        }
        paramView.arrowRight.setVisibility(8);
        label142:
        paramView.image.setImageBitmap(null);
        paramView.image.setTag(Integer.valueOf(paramInt));
        if (FacebookFunPageFragment.this.imageCache.get(((FacebookFunPageFragment.FFPComment)localObject).imageLink) != null) {
          break label290;
        }
        FacebookFunPageFragment.DownloadImageTask localDownloadImageTask = new FacebookFunPageFragment.DownloadImageTask(FacebookFunPageFragment.this, null);
        localDownloadImageTask.position = paramInt;
        localDownloadImageTask.setImageView(paramView.image);
        localDownloadImageTask.execute(new String[] { ((FacebookFunPageFragment.FFPComment)localObject).imageLink });
      }
      for (;;)
      {
        paramView.title.setText(((FacebookFunPageFragment.FFPComment)localObject).from);
        paramView.description.setText(((FacebookFunPageFragment.FFPComment)localObject).message);
        paramView.label.setText(((FacebookFunPageFragment.FFPComment)localObject).created_time);
        return paramViewGroup;
        paramView = (FacebookFunPageFragment.FFPCommentsHolder)((View)localObject).getTag();
        paramViewGroup = (ViewGroup)localObject;
        break;
        label279:
        paramView.arrowRight.setVisibility(0);
        break label142;
        label290:
        paramView.image.setImageBitmap(FacebookFunPageFragment.this.imageCache.get(((FacebookFunPageFragment.FFPComment)localObject).imageLink));
      }
    }
  }
  
  static class FFPCommentsHolder
  {
    ImageView arrowRight;
    TextView description;
    ImageView image;
    TextView label;
    TextView title;
    
    FFPCommentsHolder() {}
  }
  
  public class FFPLogoutListener
    implements SessionEvents.LogoutListener
  {
    public FFPLogoutListener() {}
    
    public void onLogoutBegin()
    {
      Toast.makeText(FacebookFunPageFragment.this.getActivity(), "Logging out...", 0).show();
    }
    
    public void onLogoutFinish()
    {
      Toast.makeText(FacebookFunPageFragment.this.getActivity(), "You have logged out!", 0).show();
      SessionStore.clear(FacebookFunPageFragment.this.getActivity());
    }
  }
  
  public class FFPRequestListener
    extends BaseRequestListener
  {
    private int nextRequest = 0;
    private int requestMethod = 0;
    
    public FFPRequestListener() {}
    
    public int getNextRequest()
    {
      return this.nextRequest;
    }
    
    public int getRequestMethod()
    {
      return this.requestMethod;
    }
    
    /* Error */
    public void onComplete(final String paramString, Object paramObject)
    {
      // Byte code:
      //   0: aload_0
      //   1: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   4: invokevirtual 41	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:getActivity	()Landroid/support/v4/app/FragmentActivity;
      //   7: ifnonnull +4 -> 11
      //   10: return
      //   11: aload_0
      //   12: getfield 27	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:requestMethod	I
      //   15: tableswitch	default:+33->48, 1:+52->67, 2:+33->48, 3:+106->121, 4:+139->154, 5:+297->312
      //   48: aload_0
      //   49: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   52: aload_0
      //   53: getfield 29	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:nextRequest	I
      //   56: invokevirtual 44	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:requestMethod	(I)V
      //   59: aload_0
      //   60: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   63: invokevirtual 47	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:hideLoading	()V
      //   66: return
      //   67: aload_1
      //   68: invokestatic 53	com/facebook/android/Util:parseJson	(Ljava/lang/String;)Lorg/json/JSONObject;
      //   71: astore_1
      //   72: aload_0
      //   73: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   76: aload_1
      //   77: ldc 55
      //   79: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   82: invokestatic 65	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:access$802	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Ljava/lang/String;)Ljava/lang/String;
      //   85: pop
      //   86: goto -38 -> 48
      //   89: astore_1
      //   90: ldc 67
      //   92: new 69	java/lang/StringBuilder
      //   95: dup
      //   96: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   99: ldc 72
      //   101: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   104: aload_1
      //   105: invokevirtual 80	java/lang/Exception:getMessage	()Ljava/lang/String;
      //   108: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   111: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   114: invokestatic 89	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
      //   117: pop
      //   118: goto -70 -> 48
      //   121: aload_0
      //   122: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   125: aload_1
      //   126: invokestatic 95	java/lang/Boolean:parseBoolean	(Ljava/lang/String;)Z
      //   129: invokestatic 99	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:access$202	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Z)Z
      //   132: pop
      //   133: aload_0
      //   134: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   137: invokevirtual 41	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:getActivity	()Landroid/support/v4/app/FragmentActivity;
      //   140: new 9	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$1
      //   143: dup
      //   144: aload_0
      //   145: invokespecial 102	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$1:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener;)V
      //   148: invokevirtual 108	android/support/v4/app/FragmentActivity:runOnUiThread	(Ljava/lang/Runnable;)V
      //   151: goto -103 -> 48
      //   154: aload_1
      //   155: invokestatic 53	com/facebook/android/Util:parseJson	(Ljava/lang/String;)Lorg/json/JSONObject;
      //   158: astore_2
      //   159: aload_2
      //   160: ldc 110
      //   162: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   165: astore 4
      //   167: aload_2
      //   168: ldc 55
      //   170: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   173: astore 5
      //   175: aload_2
      //   176: ldc 112
      //   178: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   181: astore_1
      //   182: aload_0
      //   183: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   186: aload_2
      //   187: ldc 114
      //   189: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   192: invokestatic 117	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:access$902	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Ljava/lang/String;)Ljava/lang/String;
      //   195: pop
      //   196: aload_0
      //   197: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   200: invokevirtual 41	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:getActivity	()Landroid/support/v4/app/FragmentActivity;
      //   203: new 11	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$2
      //   206: dup
      //   207: aload_0
      //   208: aload 4
      //   210: aload_1
      //   211: invokespecial 120	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$2:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener;Ljava/lang/String;Ljava/lang/String;)V
      //   214: invokevirtual 108	android/support/v4/app/FragmentActivity:runOnUiThread	(Ljava/lang/Runnable;)V
      //   217: goto -169 -> 48
      //   220: astore_1
      //   221: ldc 67
      //   223: new 69	java/lang/StringBuilder
      //   226: dup
      //   227: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   230: ldc 72
      //   232: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   235: aload_1
      //   236: invokevirtual 80	java/lang/Exception:getMessage	()Ljava/lang/String;
      //   239: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   242: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   245: invokestatic 89	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
      //   248: pop
      //   249: goto -201 -> 48
      //   252: astore 6
      //   254: new 69	java/lang/StringBuilder
      //   257: dup
      //   258: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   261: ldc 122
      //   263: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   266: aload 5
      //   268: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   271: ldc 124
      //   273: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   276: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   279: astore_1
      //   280: ldc 67
      //   282: new 69	java/lang/StringBuilder
      //   285: dup
      //   286: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   289: ldc 126
      //   291: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   294: aload 6
      //   296: invokevirtual 80	java/lang/Exception:getMessage	()Ljava/lang/String;
      //   299: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   302: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   305: invokestatic 89	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
      //   308: pop
      //   309: goto -127 -> 182
      //   312: new 128	java/util/ArrayList
      //   315: dup
      //   316: invokespecial 129	java/util/ArrayList:<init>	()V
      //   319: astore 4
      //   321: aload_1
      //   322: invokestatic 53	com/facebook/android/Util:parseJson	(Ljava/lang/String;)Lorg/json/JSONObject;
      //   325: ldc -125
      //   327: invokevirtual 135	org/json/JSONObject:getJSONArray	(Ljava/lang/String;)Lorg/json/JSONArray;
      //   330: astore 5
      //   332: iconst_0
      //   333: istore_3
      //   334: iload_3
      //   335: aload 5
      //   337: invokevirtual 140	org/json/JSONArray:length	()I
      //   340: if_icmpge +186 -> 526
      //   343: aload 5
      //   345: iload_3
      //   346: invokevirtual 144	org/json/JSONArray:getJSONObject	(I)Lorg/json/JSONObject;
      //   349: astore_2
      //   350: aload_2
      //   351: ldc -110
      //   353: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   356: astore 6
      //   358: aload_2
      //   359: ldc -108
      //   361: invokevirtual 150	org/json/JSONObject:getJSONObject	(Ljava/lang/String;)Lorg/json/JSONObject;
      //   364: astore_1
      //   365: aload_1
      //   366: ldc 110
      //   368: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   371: astore 7
      //   373: aload_1
      //   374: ldc 55
      //   376: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   379: astore_1
      //   380: new 69	java/lang/StringBuilder
      //   383: dup
      //   384: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   387: ldc 122
      //   389: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   392: aload_1
      //   393: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   396: ldc -104
      //   398: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   401: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   404: astore 8
      //   406: aload_2
      //   407: ldc -102
      //   409: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   412: astore 9
      //   414: ldc -100
      //   416: astore_1
      //   417: aload_2
      //   418: ldc 55
      //   420: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   423: astore 10
      //   425: aload_2
      //   426: ldc 114
      //   428: invokevirtual 61	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
      //   431: astore_2
      //   432: aload_2
      //   433: astore_1
      //   434: aload 4
      //   436: new 158	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment
      //   439: dup
      //   440: aload_0
      //   441: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   444: aload 10
      //   446: aload_1
      //   447: aload 7
      //   449: aload 8
      //   451: aload 6
      //   453: aload 9
      //   455: invokespecial 161	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      //   458: invokevirtual 165	java/util/ArrayList:add	(Ljava/lang/Object;)Z
      //   461: pop
      //   462: goto +186 -> 648
      //   465: astore_1
      //   466: ldc 67
      //   468: new 69	java/lang/StringBuilder
      //   471: dup
      //   472: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   475: ldc 72
      //   477: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   480: aload_1
      //   481: invokevirtual 80	java/lang/Exception:getMessage	()Ljava/lang/String;
      //   484: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   487: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   490: invokestatic 89	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
      //   493: pop
      //   494: goto +154 -> 648
      //   497: astore_1
      //   498: ldc 67
      //   500: new 69	java/lang/StringBuilder
      //   503: dup
      //   504: invokespecial 70	java/lang/StringBuilder:<init>	()V
      //   507: ldc 72
      //   509: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   512: aload_1
      //   513: invokevirtual 80	java/lang/Exception:getMessage	()Ljava/lang/String;
      //   516: invokevirtual 76	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   519: invokevirtual 83	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   522: invokestatic 89	android/util/Log:w	(Ljava/lang/String;Ljava/lang/String;)I
      //   525: pop
      //   526: aload 4
      //   528: invokevirtual 168	java/util/ArrayList:size	()I
      //   531: ifne +32 -> 563
      //   534: aload 4
      //   536: new 158	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment
      //   539: dup
      //   540: aload_0
      //   541: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   544: ldc -100
      //   546: ldc -100
      //   548: ldc -100
      //   550: ldc -100
      //   552: ldc -86
      //   554: ldc -100
      //   556: invokespecial 161	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      //   559: invokevirtual 165	java/util/ArrayList:add	(Ljava/lang/Object;)Z
      //   562: pop
      //   563: aload 4
      //   565: aload 4
      //   567: invokevirtual 168	java/util/ArrayList:size	()I
      //   570: anewarray 158	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment
      //   573: invokevirtual 174	java/util/ArrayList:toArray	([Ljava/lang/Object;)[Ljava/lang/Object;
      //   576: checkcast 176	[Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment;
      //   579: checkcast 176	[Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment;
      //   582: astore_1
      //   583: new 178	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPCommentsAdapter
      //   586: dup
      //   587: aload_0
      //   588: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   591: aload_0
      //   592: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   595: invokevirtual 41	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:getActivity	()Landroid/support/v4/app/FragmentActivity;
      //   598: ldc -77
      //   600: aload_1
      //   601: invokespecial 182	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPCommentsAdapter:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;Landroid/content/Context;I[Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPComment;)V
      //   604: astore_1
      //   605: aload_1
      //   606: aload_0
      //   607: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   610: invokestatic 186	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:access$1300	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;)Landroid/widget/ListView;
      //   613: invokevirtual 192	android/widget/ListView:getAdapter	()Landroid/widget/ListAdapter;
      //   616: invokevirtual 197	java/lang/Object:equals	(Ljava/lang/Object;)Z
      //   619: ifne -571 -> 48
      //   622: aload_0
      //   623: getfield 22	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener:this$0	Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment;
      //   626: invokevirtual 41	com/qbiki/modules/fbfanpage/FacebookFunPageFragment:getActivity	()Landroid/support/v4/app/FragmentActivity;
      //   629: new 13	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$3
      //   632: dup
      //   633: aload_0
      //   634: aload_1
      //   635: invokespecial 200	com/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener$3:<init>	(Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPRequestListener;Lcom/qbiki/modules/fbfanpage/FacebookFunPageFragment$FFPCommentsAdapter;)V
      //   638: invokevirtual 108	android/support/v4/app/FragmentActivity:runOnUiThread	(Ljava/lang/Runnable;)V
      //   641: goto -593 -> 48
      //   644: astore_2
      //   645: goto -211 -> 434
      //   648: iload_3
      //   649: iconst_1
      //   650: iadd
      //   651: istore_3
      //   652: goto -318 -> 334
      // Local variable table:
      //   start	length	slot	name	signature
      //   0	655	0	this	FFPRequestListener
      //   0	655	1	paramString	String
      //   0	655	2	paramObject	Object
      //   333	319	3	i	int
      //   165	401	4	localObject1	Object
      //   173	171	5	localObject2	Object
      //   252	43	6	localException	Exception
      //   356	96	6	str1	String
      //   371	77	7	str2	String
      //   404	46	8	str3	String
      //   412	42	9	str4	String
      //   423	22	10	str5	String
      // Exception table:
      //   from	to	target	type
      //   67	86	89	java/lang/Exception
      //   154	175	220	java/lang/Exception
      //   182	217	220	java/lang/Exception
      //   254	309	220	java/lang/Exception
      //   175	182	252	java/lang/Exception
      //   350	358	465	java/lang/Exception
      //   321	332	497	java/lang/Exception
      //   334	350	497	java/lang/Exception
      //   358	414	497	java/lang/Exception
      //   417	425	497	java/lang/Exception
      //   434	462	497	java/lang/Exception
      //   466	494	497	java/lang/Exception
      //   425	432	644	java/lang/Exception
    }
    
    public void onFacebookError(FacebookError paramFacebookError, Object paramObject)
    {
      FacebookFunPageFragment.this.hideLoading();
      super.onFacebookError(paramFacebookError, paramObject);
    }
    
    public void onFileNotFoundException(FileNotFoundException paramFileNotFoundException, Object paramObject)
    {
      FacebookFunPageFragment.this.hideLoading();
      super.onFileNotFoundException(paramFileNotFoundException, paramObject);
    }
    
    public void onIOException(IOException paramIOException, Object paramObject)
    {
      FacebookFunPageFragment.this.hideLoading();
      super.onIOException(paramIOException, paramObject);
    }
    
    public void onMalformedURLException(MalformedURLException paramMalformedURLException, Object paramObject)
    {
      FacebookFunPageFragment.this.hideLoading();
      super.onMalformedURLException(paramMalformedURLException, paramObject);
    }
    
    public void setNextRequest(int paramInt)
    {
      this.nextRequest = paramInt;
    }
    
    public void setRequestMethod(int paramInt)
    {
      this.requestMethod = paramInt;
    }
  }
  
  private final class LoginDialogListener
    implements Facebook.DialogListener
  {
    private LoginDialogListener() {}
    
    public void onCancel()
    {
      SessionEvents.onLoginError("Action Canceled");
    }
    
    public void onComplete(Bundle paramBundle)
    {
      SessionEvents.onLoginSuccess();
      FacebookFunPageFragment.this.updateFanStatus();
    }
    
    public void onError(DialogError paramDialogError)
    {
      SessionEvents.onLoginError(paramDialogError.getMessage());
    }
    
    public void onFacebookError(FacebookError paramFacebookError)
    {
      SessionEvents.onLoginError(paramFacebookError.getMessage());
    }
  }
  
  private final class PostDialogListener
    implements Facebook.DialogListener
  {
    private PostDialogListener() {}
    
    public void onCancel() {}
    
    public void onComplete(Bundle paramBundle)
    {
      FacebookFunPageFragment.this.updateAll();
    }
    
    public void onError(DialogError paramDialogError) {}
    
    public void onFacebookError(FacebookError paramFacebookError) {}
  }
}
