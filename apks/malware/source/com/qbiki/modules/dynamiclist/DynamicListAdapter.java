package com.qbiki.modules.dynamiclist;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Build.VERSION;
import android.support.v4.util.LruCache;
import android.util.Log;
import android.util.SparseIntArray;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ImageView.ScaleType;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.SectionIndexer;
import android.widget.TextView;
import com.google.android.bitmapfun.Utils;
import com.qbiki.util.DeviceUtil;
import com.qbiki.util.StringUtil;
import java.io.IOException;
import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.List;

public class DynamicListAdapter
  extends BaseAdapter
  implements SectionIndexer
{
  private LayoutInflater mInflater;
  private List<DynamicListItem> mItems;
  private LruCache<String, BitmapDrawable> mMemoryCache;
  private SparseIntArray mSectionPositions;
  private String[] mSections;
  private HashMap<String, DynamicItemStyle> mStyles;
  
  public DynamicListAdapter(Context paramContext, List<DynamicListItem> paramList, String[] paramArrayOfString, SparseIntArray paramSparseIntArray, HashMap<String, DynamicItemStyle> paramHashMap)
  {
    this.mInflater = LayoutInflater.from(paramContext);
    this.mItems = paramList;
    this.mSections = paramArrayOfString;
    this.mSectionPositions = paramSparseIntArray;
    this.mStyles = paramHashMap;
    this.mMemoryCache = new LruCache((int)(Runtime.getRuntime().maxMemory() / 1024L) / 8)
    {
      protected int sizeOf(String paramAnonymousString, BitmapDrawable paramAnonymousBitmapDrawable)
      {
        return DynamicListAdapter.getBitmapSize(paramAnonymousBitmapDrawable) / 1024;
      }
    };
  }
  
  private void applyStyles(DynamicListItem paramDynamicListItem, ViewHolder paramViewHolder, View paramView)
  {
    if ((this.mStyles == null) || (paramDynamicListItem == null) || (StringUtil.isEmpty(paramDynamicListItem.getStyle()))) {}
    Object localObject1;
    int j;
    int k;
    Object localObject2;
    int m;
    label789:
    label802:
    do
    {
      do
      {
        return;
        localObject1 = (DynamicItemStyle)this.mStyles.get(paramDynamicListItem.getStyle());
      } while (localObject1 == null);
      if (((DynamicItemStyle)localObject1).getBackgroundColor().intValue() != Integer.MIN_VALUE) {
        paramView.setBackgroundColor(((DynamicItemStyle)localObject1).getBackgroundColor().intValue());
      }
      if (((DynamicItemStyle)localObject1).getCellHeight().intValue() != Integer.MIN_VALUE) {
        paramView.setMinimumHeight(DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getCellHeight().intValue()));
      }
      if (paramViewHolder.text != null)
      {
        i = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
        if (((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue() != Integer.MIN_VALUE) {
          i = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue());
        }
        j = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
        if (((DynamicItemStyle)localObject1).getTextPaddingTop().intValue() != Integer.MIN_VALUE) {
          j = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingTop().intValue());
        }
        k = 0;
        if (((DynamicItemStyle)localObject1).getTextPaddingBottom().intValue() != Integer.MIN_VALUE) {
          k = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingBottom().intValue());
        }
        if (((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue() != Integer.MIN_VALUE)
        {
          localObject2 = paramViewHolder.text;
          n = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
          Context localContext = this.mInflater.getContext();
          if (paramDynamicListItem.getType() != 5) {
            break;
          }
          m = 2;
          ((TextView)localObject2).setPadding(0, n, i * -1, DeviceUtil.dpToPx(localContext, m));
        }
        localObject2 = (ViewGroup.MarginLayoutParams)paramViewHolder.text.getLayoutParams();
        ((ViewGroup.MarginLayoutParams)localObject2).setMargins(i, j, 0, k);
        paramViewHolder.text.setLayoutParams((ViewGroup.LayoutParams)localObject2);
        paramViewHolder.text.setTextColor(((DynamicItemStyle)localObject1).getTextColor().intValue());
        paramViewHolder.text.setTextSize(((DynamicItemStyle)localObject1).getTextSize().intValue());
        if (((DynamicItemStyle)localObject1).getTextLines().intValue() > 0) {
          paramViewHolder.text.setMaxLines(((DynamicItemStyle)localObject1).getTextLines().intValue());
        }
        paramViewHolder.text.setTypeface(null, DynamicItemStyle.getTypeface(((DynamicItemStyle)localObject1).getTextStyle()));
        if (((DynamicItemStyle)localObject1).getTextWidth().intValue() != Integer.MIN_VALUE) {
          paramViewHolder.text.setWidth(DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextWidth().intValue()));
        }
      }
      if (paramViewHolder.detailText != null)
      {
        i = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
        if (((DynamicItemStyle)localObject1).getDetailTextPaddingLeft().intValue() != Integer.MIN_VALUE) {
          i = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getDetailTextPaddingLeft().intValue());
        }
        j = i;
        if (((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue() != Integer.MIN_VALUE)
        {
          j = i;
          if (paramDynamicListItem.getType() == 8) {
            j = i + DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue());
          }
        }
        i = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
        if (((DynamicItemStyle)localObject1).getDetailTextPaddingTop().intValue() != Integer.MIN_VALUE) {
          i = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getDetailTextPaddingTop().intValue());
        }
        k = i;
        if (((DynamicItemStyle)localObject1).getTextPaddingTop().intValue() != Integer.MIN_VALUE) {
          k = i + DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingTop().intValue());
        }
        i = DeviceUtil.dpToPx(this.mInflater.getContext(), 8.0F);
        if (((DynamicItemStyle)localObject1).getDetailTextPaddingBottom().intValue() != Integer.MIN_VALUE) {
          i = DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getDetailTextPaddingBottom().intValue());
        }
        m = i;
        if (((DynamicItemStyle)localObject1).getTextPaddingBottom().intValue() != Integer.MIN_VALUE) {
          m = i + DeviceUtil.dpToPx(this.mInflater.getContext(), ((DynamicItemStyle)localObject1).getTextPaddingBottom().intValue());
        }
        if ((((DynamicItemStyle)localObject1).getTextPaddingLeft().intValue() != Integer.MIN_VALUE) && (paramDynamicListItem.getType() == 8))
        {
          paramDynamicListItem = paramViewHolder.detailText;
          if (m < 8) {
            break label1379;
          }
          i = m * -1;
          if (k < 8) {
            break label1391;
          }
          n = k * -1;
          paramDynamicListItem.setPadding(0, i, j * -1, n);
        }
        paramDynamicListItem = (ViewGroup.MarginLayoutParams)paramViewHolder.detailText.getLayoutParams();
        paramDynamicListItem.setMargins(j, k, 0, m);
        paramViewHolder.detailText.setLayoutParams(paramDynamicListItem);
        paramViewHolder.detailText.setTextColor(((DynamicItemStyle)localObject1).getDetailTextColor().intValue());
        paramViewHolder.detailText.setTextSize(((DynamicItemStyle)localObject1).getDetailTextSize().intValue());
        if (((DynamicItemStyle)localObject1).getDetailTextLines().intValue() > 0) {
          paramViewHolder.detailText.setMaxLines(((DynamicItemStyle)localObject1).getDetailTextLines().intValue());
        }
        paramViewHolder.detailText.setTypeface(null, DynamicItemStyle.getTypeface(((DynamicItemStyle)localObject1).getDetailTextStyle()));
      }
    } while ((paramViewHolder.image == null) || (StringUtil.isEmpty(((DynamicItemStyle)localObject1).getParent())) || (!((DynamicItemStyle)localObject1).getParent().equalsIgnoreCase("image")));
    int i2 = paramView.getWidth();
    int n = ((DynamicItemStyle)localObject1).getImageWidth().intValue();
    int i1 = ((DynamicItemStyle)localObject1).getImageHeight().intValue();
    if (paramViewHolder.image.getDrawable() != null)
    {
      k = paramViewHolder.image.getDrawable().getIntrinsicWidth();
      label997:
      if (paramViewHolder.image.getDrawable() == null) {
        break label1410;
      }
      i = paramViewHolder.image.getDrawable().getIntrinsicHeight();
      label1019:
      if ((((DynamicItemStyle)localObject1).getImageWidth().intValue() != Integer.MAX_VALUE) || (k > i2)) {
        break label1417;
      }
      j = i1;
      m = k;
      if (((DynamicItemStyle)localObject1).getImageHeight().intValue() == Integer.MAX_VALUE)
      {
        m = k;
        j = i;
      }
      label1070:
      if ((m == Integer.MIN_VALUE) || (m == Integer.MAX_VALUE)) {
        break label1479;
      }
      i = DeviceUtil.dpToPx(this.mInflater.getContext(), m);
      label1100:
      if ((j == Integer.MIN_VALUE) || (j == Integer.MAX_VALUE)) {
        break label1486;
      }
      k = DeviceUtil.dpToPx(this.mInflater.getContext(), j);
      label1130:
      paramDynamicListItem = new RelativeLayout.LayoutParams(i, k);
      if ((m == Integer.MAX_VALUE) || (m <= i2)) {
        break label1578;
      }
      k = 0;
      n = m - paramView.getWidth();
      localObject2 = ((DynamicItemStyle)localObject1).getImageAlign();
      if (localObject2 != SCDynamicStyleAlign.SCDynamicStyleAlignRight) {
        break label1493;
      }
      i = (n - DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue()) * -1;
      label1202:
      paramDynamicListItem.leftMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), i);
      paramDynamicListItem.rightMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), k);
      label1236:
      paramDynamicListItem.topMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), DynamicItemStyle.getIntValueOrDefault(((DynamicItemStyle)localObject1).getImagePaddingTop(), Integer.valueOf(3)).intValue());
      paramDynamicListItem.bottomMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), DynamicItemStyle.getIntValueOrDefault(((DynamicItemStyle)localObject1).getImagePaddingBottom(), Integer.valueOf(3)).intValue());
      paramDynamicListItem.addRule(DynamicItemStyle.getLayoutAlign(((DynamicItemStyle)localObject1).getImageAlign()));
      paramViewHolder.image.setLayoutParams(paramDynamicListItem);
      localObject1 = paramViewHolder.image;
      if (paramDynamicListItem.bottomMargin == 3) {
        break label1635;
      }
    }
    label1379:
    label1391:
    label1410:
    label1417:
    label1479:
    label1486:
    label1493:
    label1578:
    label1635:
    for (int i = paramDynamicListItem.bottomMargin;; i = 0)
    {
      ((ImageView)localObject1).setPadding(0, 0, 0, i);
      if ((m != Integer.MAX_VALUE) || (j != Integer.MAX_VALUE)) {
        break label1641;
      }
      paramViewHolder.image.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
      return;
      m = 0;
      break;
      i = paramViewHolder.detailText.getPaddingTop();
      break label789;
      n = paramViewHolder.detailText.getPaddingBottom();
      break label802;
      k = Integer.MIN_VALUE;
      break label997;
      i = Integer.MIN_VALUE;
      break label1019;
      if (((DynamicItemStyle)localObject1).getImageWidth().intValue() == Integer.MAX_VALUE)
      {
        j = i1;
        m = n;
        if (k > i2) {
          break label1070;
        }
      }
      j = i1;
      m = n;
      if (((DynamicItemStyle)localObject1).getImageHeight().intValue() != Integer.MAX_VALUE) {
        break label1070;
      }
      j = i;
      m = n;
      break label1070;
      i = -2;
      break label1100;
      k = -2;
      break label1130;
      if (localObject2 == SCDynamicStyleAlign.SCDynamicStyleAlignCenter)
      {
        i = (n / 2 - DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue()) * -1;
        k = (n / 2 + DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue()) * -1;
        break label1202;
      }
      k = (DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue() + n) * -1;
      i = DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue();
      break label1202;
      paramDynamicListItem.leftMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue());
      paramDynamicListItem.rightMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), DynamicItemStyle.getIntValueOrZero(((DynamicItemStyle)localObject1).getImagePaddingLeft()).intValue() * -1);
      break label1236;
    }
    label1641:
    if ((m == Integer.MIN_VALUE) && (j == Integer.MIN_VALUE))
    {
      paramViewHolder.image.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
      return;
    }
    if (m > paramView.getWidth())
    {
      paramViewHolder.image.setScaleType(ImageView.ScaleType.FIT_XY);
      return;
    }
    paramViewHolder.image.setScaleType(ImageView.ScaleType.FIT_XY);
  }
  
  public static boolean cancelPotentialWork(String paramString, ImageView paramImageView)
  {
    paramImageView = getBitmapWorkerTask(paramImageView);
    if (paramImageView != null)
    {
      String str = paramImageView.getData();
      if ((str == null) || (str != paramString)) {
        paramImageView.cancel(true);
      }
    }
    else
    {
      return true;
    }
    return false;
  }
  
  @SuppressLint({"NewApi"})
  public static int getBitmapSize(BitmapDrawable paramBitmapDrawable)
  {
    paramBitmapDrawable = paramBitmapDrawable.getBitmap();
    if (Utils.hasHoneycombMR1()) {
      return paramBitmapDrawable.getByteCount();
    }
    return paramBitmapDrawable.getRowBytes() * paramBitmapDrawable.getHeight();
  }
  
  private static DownloadTask getBitmapWorkerTask(ImageView paramImageView)
  {
    if (paramImageView != null)
    {
      paramImageView = paramImageView.getDrawable();
      if ((paramImageView instanceof AsyncDrawable)) {
        return ((AsyncDrawable)paramImageView).getBitmapWorkerTask();
      }
    }
    return null;
  }
  
  public void addBitmapToMemoryCache(String paramString, BitmapDrawable paramBitmapDrawable)
  {
    if (getBitmapFromMemCache(paramString) == null) {
      this.mMemoryCache.put(paramString, paramBitmapDrawable);
    }
  }
  
  public boolean areAllItemsEnabled()
  {
    return false;
  }
  
  public BitmapDrawable getBitmapFromMemCache(String paramString)
  {
    return (BitmapDrawable)this.mMemoryCache.get(paramString);
  }
  
  public int getCount()
  {
    return this.mItems.size();
  }
  
  public Object getItem(int paramInt)
  {
    return this.mItems.get(paramInt);
  }
  
  public long getItemId(int paramInt)
  {
    return paramInt;
  }
  
  public int getItemViewType(int paramInt)
  {
    return ((DynamicListItem)this.mItems.get(paramInt)).getType();
  }
  
  public List<DynamicListItem> getItems()
  {
    return this.mItems;
  }
  
  public int getPositionForSection(int paramInt)
  {
    if (this.mSectionPositions != null) {
      return this.mSectionPositions.get(paramInt);
    }
    return 0;
  }
  
  public int getSectionForPosition(int paramInt)
  {
    return ((DynamicListItem)this.mItems.get(paramInt)).getSectionIndex();
  }
  
  public SparseIntArray getSectionPositions()
  {
    return this.mSectionPositions;
  }
  
  public Object[] getSections()
  {
    return this.mSections;
  }
  
  public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
  {
    DynamicListItem localDynamicListItem = (DynamicListItem)getItem(paramInt);
    label71:
    Object localObject;
    if (paramView == null) {
      if (localDynamicListItem.getType() == 0) {
        if (Build.VERSION.SDK_INT >= 11)
        {
          paramViewGroup = this.mInflater.inflate(2130903100, paramViewGroup, false);
          paramView = new ViewHolder(null);
          paramView.text = ((TextView)paramViewGroup.findViewById(2131099837));
          paramViewGroup.setTag(paramView);
          if ((paramView.text != null) && (localDynamicListItem.getText() != null)) {
            paramView.text.setText(localDynamicListItem.getText());
          }
          if (paramView.image != null)
          {
            if ((StringUtil.isEqual(localDynamicListItem.getStyle(), "image")) && (localDynamicListItem.getType() == 6))
            {
              localObject = new RelativeLayout.LayoutParams(-2, -2);
              ((RelativeLayout.LayoutParams)localObject).leftMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), 0.0F);
              ((RelativeLayout.LayoutParams)localObject).topMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), 3.0F);
              ((RelativeLayout.LayoutParams)localObject).bottomMargin = DeviceUtil.dpToPx(this.mInflater.getContext(), 3.0F);
              ((RelativeLayout.LayoutParams)localObject).addRule(9);
              paramView.image.setLayoutParams((ViewGroup.LayoutParams)localObject);
              paramView.image.setPadding(0, 0, 0, 0);
              paramView.image.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
            }
            paramView.image.setImageDrawable(null);
            if (localDynamicListItem.getImageSrcPath() == null) {
              break label1013;
            }
            localObject = getBitmapFromMemCache(localDynamicListItem.getImageSrcPath());
            if (localObject == null) {
              break label922;
            }
            paramView.image.setImageDrawable((Drawable)localObject);
            paramView.image.setVisibility(0);
          }
        }
      }
    }
    for (;;)
    {
      if ((paramView.detailText != null) && (localDynamicListItem.getDetailText() != null)) {
        paramView.detailText.setText(localDynamicListItem.getDetailText());
      }
      applyStyles(localDynamicListItem, paramView, paramViewGroup);
      return paramViewGroup;
      paramViewGroup = this.mInflater.inflate(2130903092, paramViewGroup, false);
      break;
      if (localDynamicListItem.getType() == 3)
      {
        if (Build.VERSION.SDK_INT >= 11) {}
        for (paramViewGroup = this.mInflater.inflate(2130903096, paramViewGroup, false);; paramViewGroup = this.mInflater.inflate(17367044, paramViewGroup, false))
        {
          paramView = new ViewHolder(null);
          paramView.text = ((TextView)paramViewGroup.findViewById(16908308));
          paramView.detailText = ((TextView)paramViewGroup.findViewById(16908309));
          paramViewGroup.setTag(paramView);
          break;
        }
      }
      if (localDynamicListItem.getType() == 4)
      {
        paramViewGroup = this.mInflater.inflate(2130903098, paramViewGroup, false);
        paramView = new ViewHolder(null);
        paramView.text = ((TextView)paramViewGroup.findViewById(2131099839));
        paramView.detailText = ((TextView)paramViewGroup.findViewById(2131099840));
        paramViewGroup.setTag(paramView);
        break label71;
      }
      if (localDynamicListItem.getType() == 1)
      {
        paramViewGroup = this.mInflater.inflate(2130903093, paramViewGroup, false);
        paramView = new ViewHolder(null);
        paramView.text = ((TextView)paramViewGroup.findViewById(2131099837));
        paramView.image = ((ImageView)paramViewGroup.findViewById(2131099733));
        paramViewGroup.setTag(paramView);
        break label71;
      }
      if (localDynamicListItem.getType() == 6)
      {
        paramView = new ViewHolder(null);
        localDynamicListItem.setType(6);
        paramViewGroup = this.mInflater.inflate(2130903094, paramViewGroup, false);
        paramView.image = ((ImageView)paramViewGroup.findViewById(2131099733));
        paramViewGroup.setTag(paramView);
        break label71;
      }
      if (localDynamicListItem.getType() == 7)
      {
        paramView = new ViewHolder(null);
        localDynamicListItem.setType(7);
        paramViewGroup = this.mInflater.inflate(2130903097, paramViewGroup, false);
        paramView.text = ((TextView)paramViewGroup.findViewById(2131099839));
        paramView.detailText = ((TextView)paramViewGroup.findViewById(2131099840));
        paramViewGroup.setTag(paramView);
        break label71;
      }
      if (localDynamicListItem.getType() == 8)
      {
        paramView = new ViewHolder(null);
        localDynamicListItem.setType(8);
        paramViewGroup = this.mInflater.inflate(2130903099, paramViewGroup, false);
        paramView.text = ((TextView)paramViewGroup.findViewById(2131099839));
        paramView.detailText = ((TextView)paramViewGroup.findViewById(2131099840));
        paramViewGroup.setTag(paramView);
        break label71;
      }
      if (localDynamicListItem.getType() == 5)
      {
        paramView = new ViewHolder(null);
        paramViewGroup = this.mInflater.inflate(2130903095, paramViewGroup, false);
        paramView.text = ((TextView)paramViewGroup.findViewById(2131099838));
        paramView.image = ((ImageView)paramViewGroup.findViewById(2131099733));
        if ((StringUtil.isEmpty(localDynamicListItem.getImageSrcPath())) && (paramView.image != null)) {
          paramView.image.setVisibility(8);
        }
        paramViewGroup.setTag(paramView);
        break label71;
      }
      paramViewGroup = this.mInflater.inflate(17367043, paramViewGroup, false);
      paramView = new ViewHolder(null);
      paramView.text = ((TextView)paramViewGroup.findViewById(16908308));
      paramViewGroup.setTag(paramView);
      break label71;
      paramViewGroup = paramView;
      paramView = (ViewHolder)paramViewGroup.getTag();
      break label71;
      label922:
      if (cancelPotentialWork(localDynamicListItem.getImageSrcPath(), paramView.image))
      {
        localObject = new DownloadTask(paramView.image, localDynamicListItem);
        paramView.image.setVisibility(0);
        AsyncDrawable localAsyncDrawable = new AsyncDrawable(this.mInflater.getContext().getResources(), null, (DownloadTask)localObject);
        paramView.image.setImageDrawable(localAsyncDrawable);
        ((DownloadTask)localObject).execute(new String[] { localDynamicListItem.getImageSrcPath() });
        continue;
        label1013:
        paramView.image.setVisibility(8);
      }
    }
  }
  
  public int getViewTypeCount()
  {
    return 9;
  }
  
  public boolean isEnabled(int paramInt)
  {
    return getItemViewType(paramInt) != 0;
  }
  
  public void setItems(List<DynamicListItem> paramList)
  {
    this.mItems = paramList;
  }
  
  public void setSectionPositions(SparseIntArray paramSparseIntArray)
  {
    this.mSectionPositions = paramSparseIntArray;
  }
  
  public void setSections(String[] paramArrayOfString)
  {
    this.mSections = paramArrayOfString;
  }
  
  static class AsyncDrawable
    extends BitmapDrawable
  {
    private final WeakReference<DynamicListAdapter.DownloadTask> bitmapWorkerTaskReference;
    
    public AsyncDrawable(Resources paramResources, Bitmap paramBitmap, DynamicListAdapter.DownloadTask paramDownloadTask)
    {
      super(paramBitmap);
      this.bitmapWorkerTaskReference = new WeakReference(paramDownloadTask);
    }
    
    public DynamicListAdapter.DownloadTask getBitmapWorkerTask()
    {
      return (DynamicListAdapter.DownloadTask)this.bitmapWorkerTaskReference.get();
    }
  }
  
  private class DownloadTask
    extends AsyncTask<String, String, Drawable>
  {
    private static final long SECONDS_PER_DAY = 86400L;
    private String data = null;
    private final WeakReference<ImageView> imageViewReference;
    private DynamicListItem item;
    String tag = "";
    
    public DownloadTask(ImageView paramImageView, DynamicListItem paramDynamicListItem)
    {
      this.imageViewReference = new WeakReference(paramImageView);
      this.item = paramDynamicListItem;
    }
    
    protected Drawable doInBackground(String... paramVarArgs)
    {
      if ((paramVarArgs == null) || (paramVarArgs.length <= 0)) {
        return null;
      }
      this.data = paramVarArgs[0];
      try
      {
        paramVarArgs = loadImage(this.data);
        return paramVarArgs;
      }
      catch (IOException paramVarArgs)
      {
        Log.e(this.tag, paramVarArgs.toString());
      }
      return null;
    }
    
    public String getData()
    {
      return this.data;
    }
    
    /* Error */
    public Drawable loadImage(String paramString)
      throws IOException
    {
      // Byte code:
      //   0: aconst_null
      //   1: astore 5
      //   3: aconst_null
      //   4: astore_2
      //   5: aconst_null
      //   6: astore 6
      //   8: aconst_null
      //   9: astore 7
      //   11: aload_2
      //   12: astore 4
      //   14: aload 5
      //   16: astore_3
      //   17: new 75	java/lang/StringBuilder
      //   20: dup
      //   21: invokespecial 76	java/lang/StringBuilder:<init>	()V
      //   24: aload_0
      //   25: getfield 26	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:this$0	Lcom/qbiki/modules/dynamiclist/DynamicListAdapter;
      //   28: invokestatic 80	com/qbiki/modules/dynamiclist/DynamicListAdapter:access$100	(Lcom/qbiki/modules/dynamiclist/DynamicListAdapter;)Landroid/view/LayoutInflater;
      //   31: invokevirtual 86	android/view/LayoutInflater:getContext	()Landroid/content/Context;
      //   34: invokevirtual 92	android/content/Context:getCacheDir	()Ljava/io/File;
      //   37: invokevirtual 97	java/io/File:getAbsolutePath	()Ljava/lang/String;
      //   40: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   43: ldc 103
      //   45: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   48: invokevirtual 104	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   51: astore 8
      //   53: aload_2
      //   54: astore 4
      //   56: aload 5
      //   58: astore_3
      //   59: new 94	java/io/File
      //   62: dup
      //   63: aload 8
      //   65: invokespecial 107	java/io/File:<init>	(Ljava/lang/String;)V
      //   68: astore 9
      //   70: aload_2
      //   71: astore 4
      //   73: aload 5
      //   75: astore_3
      //   76: aload 9
      //   78: invokevirtual 111	java/io/File:exists	()Z
      //   81: ifne +15 -> 96
      //   84: aload_2
      //   85: astore 4
      //   87: aload 5
      //   89: astore_3
      //   90: aload 9
      //   92: invokevirtual 114	java/io/File:mkdirs	()Z
      //   95: pop
      //   96: aload_2
      //   97: astore 4
      //   99: aload 5
      //   101: astore_3
      //   102: new 94	java/io/File
      //   105: dup
      //   106: new 75	java/lang/StringBuilder
      //   109: dup
      //   110: invokespecial 76	java/lang/StringBuilder:<init>	()V
      //   113: aload 8
      //   115: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   118: aload_1
      //   119: invokestatic 120	com/qbiki/util/StringUtil:getLastPathComponentFromUrl	(Ljava/lang/String;)Ljava/lang/String;
      //   122: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   125: invokevirtual 104	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   128: invokespecial 107	java/io/File:<init>	(Ljava/lang/String;)V
      //   131: astore 9
      //   133: aload_2
      //   134: astore 4
      //   136: aload 5
      //   138: astore_3
      //   139: aload 9
      //   141: invokevirtual 111	java/io/File:exists	()Z
      //   144: ifeq +123 -> 267
      //   147: aload_2
      //   148: astore 4
      //   150: aload 5
      //   152: astore_3
      //   153: new 122	java/util/Date
      //   156: dup
      //   157: aload 9
      //   159: invokevirtual 126	java/io/File:lastModified	()J
      //   162: invokespecial 129	java/util/Date:<init>	(J)V
      //   165: astore 10
      //   167: aload_2
      //   168: astore 4
      //   170: aload 5
      //   172: astore_3
      //   173: new 122	java/util/Date
      //   176: dup
      //   177: invokespecial 130	java/util/Date:<init>	()V
      //   180: invokevirtual 133	java/util/Date:getTime	()J
      //   183: ldc2_w 134
      //   186: ldiv
      //   187: aload 10
      //   189: invokevirtual 133	java/util/Date:getTime	()J
      //   192: ldc2_w 134
      //   195: ldiv
      //   196: lsub
      //   197: ldc2_w 136
      //   200: lcmp
      //   201: ifge +66 -> 267
      //   204: aload_2
      //   205: astore 4
      //   207: aload 5
      //   209: astore_3
      //   210: new 139	android/graphics/drawable/BitmapDrawable
      //   213: dup
      //   214: aconst_null
      //   215: new 75	java/lang/StringBuilder
      //   218: dup
      //   219: invokespecial 76	java/lang/StringBuilder:<init>	()V
      //   222: aload 8
      //   224: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   227: aload_1
      //   228: invokestatic 120	com/qbiki/util/StringUtil:getLastPathComponentFromUrl	(Ljava/lang/String;)Ljava/lang/String;
      //   231: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   234: invokevirtual 104	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   237: invokespecial 142	android/graphics/drawable/BitmapDrawable:<init>	(Landroid/content/res/Resources;Ljava/lang/String;)V
      //   240: astore_1
      //   241: iconst_0
      //   242: ifeq +11 -> 253
      //   245: new 144	java/lang/NullPointerException
      //   248: dup
      //   249: invokespecial 145	java/lang/NullPointerException:<init>	()V
      //   252: athrow
      //   253: iconst_0
      //   254: ifeq +11 -> 265
      //   257: new 144	java/lang/NullPointerException
      //   260: dup
      //   261: invokespecial 145	java/lang/NullPointerException:<init>	()V
      //   264: athrow
      //   265: aload_1
      //   266: areturn
      //   267: aload_2
      //   268: astore 4
      //   270: aload 5
      //   272: astore_3
      //   273: aload_0
      //   274: getfield 44	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:item	Lcom/qbiki/modules/dynamiclist/DynamicListItem;
      //   277: invokevirtual 150	com/qbiki/modules/dynamiclist/DynamicListItem:getImageSrcPath	()Ljava/lang/String;
      //   280: ifnull +65 -> 345
      //   283: aload_2
      //   284: astore 4
      //   286: aload 5
      //   288: astore_3
      //   289: aload_0
      //   290: getfield 44	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:item	Lcom/qbiki/modules/dynamiclist/DynamicListItem;
      //   293: invokevirtual 150	com/qbiki/modules/dynamiclist/DynamicListItem:getImageSrcPath	()Ljava/lang/String;
      //   296: ldc -104
      //   298: invokevirtual 158	java/lang/String:indexOf	(Ljava/lang/String;)I
      //   301: ifeq +44 -> 345
      //   304: aload_2
      //   305: astore 4
      //   307: aload 5
      //   309: astore_3
      //   310: aload_0
      //   311: getfield 44	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:item	Lcom/qbiki/modules/dynamiclist/DynamicListItem;
      //   314: invokevirtual 150	com/qbiki/modules/dynamiclist/DynamicListItem:getImageSrcPath	()Ljava/lang/String;
      //   317: invokestatic 163	com/qbiki/seattleclouds/App:getDrawableResource	(Ljava/lang/String;)Landroid/graphics/drawable/Drawable;
      //   320: astore_1
      //   321: iconst_0
      //   322: ifeq +11 -> 333
      //   325: new 144	java/lang/NullPointerException
      //   328: dup
      //   329: invokespecial 145	java/lang/NullPointerException:<init>	()V
      //   332: athrow
      //   333: iconst_0
      //   334: ifeq -69 -> 265
      //   337: new 144	java/lang/NullPointerException
      //   340: dup
      //   341: invokespecial 145	java/lang/NullPointerException:<init>	()V
      //   344: athrow
      //   345: aload_2
      //   346: astore 4
      //   348: aload 5
      //   350: astore_3
      //   351: new 165	java/net/URL
      //   354: dup
      //   355: aload_1
      //   356: invokespecial 166	java/net/URL:<init>	(Ljava/lang/String;)V
      //   359: invokevirtual 170	java/net/URL:openConnection	()Ljava/net/URLConnection;
      //   362: checkcast 172	java/net/HttpURLConnection
      //   365: astore_2
      //   366: aload_2
      //   367: astore 4
      //   369: aload_2
      //   370: astore_3
      //   371: aload_1
      //   372: invokestatic 178	com/qbiki/util/HTTPUtil:getRequestPropertyForDomain	(Ljava/lang/String;)Ljava/util/HashMap;
      //   375: astore 10
      //   377: aload 10
      //   379: ifnull +46 -> 425
      //   382: aload_2
      //   383: astore 4
      //   385: aload_2
      //   386: astore_3
      //   387: aload 10
      //   389: invokevirtual 184	java/util/HashMap:keySet	()Ljava/util/Set;
      //   392: invokeinterface 190 1 0
      //   397: iconst_0
      //   398: aaload
      //   399: invokevirtual 193	java/lang/Object:toString	()Ljava/lang/String;
      //   402: astore 5
      //   404: aload_2
      //   405: astore 4
      //   407: aload_2
      //   408: astore_3
      //   409: aload_2
      //   410: aload 5
      //   412: aload 10
      //   414: aload 5
      //   416: invokevirtual 197	java/util/HashMap:get	(Ljava/lang/Object;)Ljava/lang/Object;
      //   419: checkcast 154	java/lang/String
      //   422: invokevirtual 201	java/net/HttpURLConnection:setRequestProperty	(Ljava/lang/String;Ljava/lang/String;)V
      //   425: aload_2
      //   426: astore 4
      //   428: aload_2
      //   429: astore_3
      //   430: aload_2
      //   431: invokevirtual 205	java/net/HttpURLConnection:getContentLength	()I
      //   434: newarray byte
      //   436: astore 10
      //   438: aload_2
      //   439: astore 4
      //   441: aload_2
      //   442: astore_3
      //   443: new 207	java/io/DataInputStream
      //   446: dup
      //   447: aload_2
      //   448: invokevirtual 211	java/net/HttpURLConnection:getInputStream	()Ljava/io/InputStream;
      //   451: invokespecial 214	java/io/DataInputStream:<init>	(Ljava/io/InputStream;)V
      //   454: astore 5
      //   456: aload 5
      //   458: aload 10
      //   460: invokevirtual 218	java/io/DataInputStream:readFully	([B)V
      //   463: new 220	java/io/FileOutputStream
      //   466: dup
      //   467: aload 9
      //   469: iconst_1
      //   470: invokespecial 223	java/io/FileOutputStream:<init>	(Ljava/io/File;Z)V
      //   473: astore_3
      //   474: aload_3
      //   475: aload 10
      //   477: invokevirtual 226	java/io/FileOutputStream:write	([B)V
      //   480: aload_3
      //   481: invokevirtual 229	java/io/FileOutputStream:flush	()V
      //   484: aload_3
      //   485: invokevirtual 232	java/io/FileOutputStream:close	()V
      //   488: new 75	java/lang/StringBuilder
      //   491: dup
      //   492: invokespecial 76	java/lang/StringBuilder:<init>	()V
      //   495: aload 8
      //   497: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   500: aload_1
      //   501: invokestatic 120	com/qbiki/util/StringUtil:getLastPathComponentFromUrl	(Ljava/lang/String;)Ljava/lang/String;
      //   504: invokevirtual 101	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
      //   507: invokevirtual 104	java/lang/StringBuilder:toString	()Ljava/lang/String;
      //   510: astore_1
      //   511: aload_0
      //   512: getfield 44	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:item	Lcom/qbiki/modules/dynamiclist/DynamicListItem;
      //   515: aload_1
      //   516: invokevirtual 236	com/qbiki/modules/dynamiclist/DynamicListItem:setImageSrcPath	(Ljava/lang/String;)Lcom/qbiki/modules/dynamiclist/DynamicListItem;
      //   519: pop
      //   520: new 139	android/graphics/drawable/BitmapDrawable
      //   523: dup
      //   524: aconst_null
      //   525: aload_1
      //   526: invokespecial 142	android/graphics/drawable/BitmapDrawable:<init>	(Landroid/content/res/Resources;Ljava/lang/String;)V
      //   529: astore_1
      //   530: aload_2
      //   531: ifnull +7 -> 538
      //   534: aload_2
      //   535: invokevirtual 239	java/net/HttpURLConnection:disconnect	()V
      //   538: aload 5
      //   540: ifnull +8 -> 548
      //   543: aload 5
      //   545: invokevirtual 240	java/io/DataInputStream:close	()V
      //   548: aload_1
      //   549: areturn
      //   550: astore_1
      //   551: aload_0
      //   552: getfield 35	com/qbiki/modules/dynamiclist/DynamicListAdapter$DownloadTask:tag	Ljava/lang/String;
      //   555: aload_1
      //   556: invokevirtual 243	java/io/FileNotFoundException:getMessage	()Ljava/lang/String;
      //   559: invokestatic 63	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;)I
      //   562: pop
      //   563: aload_2
      //   564: ifnull +7 -> 571
      //   567: aload_2
      //   568: invokevirtual 239	java/net/HttpURLConnection:disconnect	()V
      //   571: aload 5
      //   573: ifnull +8 -> 581
      //   576: aload 5
      //   578: invokevirtual 240	java/io/DataInputStream:close	()V
      //   581: aconst_null
      //   582: areturn
      //   583: astore_1
      //   584: aload 4
      //   586: astore_2
      //   587: aload 7
      //   589: astore_3
      //   590: aconst_null
      //   591: astore_1
      //   592: aload_2
      //   593: ifnull +7 -> 600
      //   596: aload_2
      //   597: invokevirtual 239	java/net/HttpURLConnection:disconnect	()V
      //   600: aload_3
      //   601: ifnull -336 -> 265
      //   604: aload_3
      //   605: invokevirtual 240	java/io/DataInputStream:close	()V
      //   608: aconst_null
      //   609: areturn
      //   610: astore 4
      //   612: aload_3
      //   613: astore_2
      //   614: aload 6
      //   616: astore_1
      //   617: aload_2
      //   618: ifnull +7 -> 625
      //   621: aload_2
      //   622: invokevirtual 239	java/net/HttpURLConnection:disconnect	()V
      //   625: aload_1
      //   626: ifnull +7 -> 633
      //   629: aload_1
      //   630: invokevirtual 240	java/io/DataInputStream:close	()V
      //   633: aload 4
      //   635: athrow
      //   636: astore 4
      //   638: aload 5
      //   640: astore_1
      //   641: goto -24 -> 617
      //   644: astore_1
      //   645: aload 5
      //   647: astore_3
      //   648: goto -58 -> 590
      // Local variable table:
      //   start	length	slot	name	signature
      //   0	651	0	this	DownloadTask
      //   0	651	1	paramString	String
      //   4	618	2	localObject1	Object
      //   16	632	3	localObject2	Object
      //   12	573	4	localObject3	Object
      //   610	24	4	localObject4	Object
      //   636	1	4	localObject5	Object
      //   1	645	5	localObject6	Object
      //   6	609	6	localObject7	Object
      //   9	579	7	localObject8	Object
      //   51	445	8	str	String
      //   68	400	9	localFile	java.io.File
      //   165	311	10	localObject9	Object
      // Exception table:
      //   from	to	target	type
      //   463	474	550	java/io/FileNotFoundException
      //   17	53	583	java/lang/Exception
      //   59	70	583	java/lang/Exception
      //   76	84	583	java/lang/Exception
      //   90	96	583	java/lang/Exception
      //   102	133	583	java/lang/Exception
      //   139	147	583	java/lang/Exception
      //   153	167	583	java/lang/Exception
      //   173	204	583	java/lang/Exception
      //   210	241	583	java/lang/Exception
      //   273	283	583	java/lang/Exception
      //   289	304	583	java/lang/Exception
      //   310	321	583	java/lang/Exception
      //   351	366	583	java/lang/Exception
      //   371	377	583	java/lang/Exception
      //   387	404	583	java/lang/Exception
      //   409	425	583	java/lang/Exception
      //   430	438	583	java/lang/Exception
      //   443	456	583	java/lang/Exception
      //   17	53	610	finally
      //   59	70	610	finally
      //   76	84	610	finally
      //   90	96	610	finally
      //   102	133	610	finally
      //   139	147	610	finally
      //   153	167	610	finally
      //   173	204	610	finally
      //   210	241	610	finally
      //   273	283	610	finally
      //   289	304	610	finally
      //   310	321	610	finally
      //   351	366	610	finally
      //   371	377	610	finally
      //   387	404	610	finally
      //   409	425	610	finally
      //   430	438	610	finally
      //   443	456	610	finally
      //   456	463	636	finally
      //   463	474	636	finally
      //   474	530	636	finally
      //   551	563	636	finally
      //   456	463	644	java/lang/Exception
      //   463	474	644	java/lang/Exception
      //   474	530	644	java/lang/Exception
      //   551	563	644	java/lang/Exception
    }
    
    protected void onPostExecute(Drawable paramDrawable)
    {
      if (paramDrawable == null) {
        return;
      }
      if ((this.imageViewReference != null) && (paramDrawable != null))
      {
        ImageView localImageView = (ImageView)this.imageViewReference.get();
        if (localImageView != null) {
          localImageView.setImageDrawable(paramDrawable);
        }
      }
      DynamicListAdapter.this.addBitmapToMemoryCache(String.valueOf(this.data), (BitmapDrawable)paramDrawable);
    }
  }
  
  private static class ViewHolder
  {
    public TextView detailText = null;
    public ImageView image = null;
    public TextView text = null;
    
    private ViewHolder() {}
  }
}
