package com.qbiki.modules.starbucks;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.qbiki.seattleclouds.App;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map.Entry;
import java.util.Set;

public class CardsListAdapter
  extends BaseAdapter
{
  private List<String> mCardBalances = new ArrayList();
  private List<String> mCardNumbers = new ArrayList();
  private List<String> mCardPins = new ArrayList();
  private LayoutInflater mInflater;
  
  public CardsListAdapter(Context paramContext, HashMap<String, ArrayList<String>> paramHashMap)
  {
    this.mInflater = LayoutInflater.from(paramContext);
    paramContext = paramHashMap.entrySet().iterator();
    while (paramContext.hasNext())
    {
      Object localObject = (Map.Entry)paramContext.next();
      paramHashMap = (String)((Map.Entry)localObject).getKey();
      localObject = (ArrayList)((Map.Entry)localObject).getValue();
      this.mCardNumbers.add(paramHashMap);
      this.mCardPins.add(((ArrayList)localObject).get(0));
      this.mCardBalances.add(((ArrayList)localObject).get(1));
    }
  }
  
  public int getCount()
  {
    return this.mCardNumbers.size();
  }
  
  public Object getItem(int paramInt)
  {
    return this.mCardNumbers.get(paramInt);
  }
  
  public long getItemId(int paramInt)
  {
    return paramInt;
  }
  
  public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
  {
    if (paramView == null)
    {
      paramViewGroup = this.mInflater.inflate(2130903226, paramViewGroup, false);
      paramView = new ViewHolder(null);
      paramView.cardNumber = ((TextView)paramViewGroup.findViewById(2131100220));
      paramView.cardBalance = ((TextView)paramViewGroup.findViewById(2131100226));
      paramView.cardImage = ((ImageView)paramViewGroup.findViewById(2131100235));
      paramViewGroup.setTag(paramView);
    }
    for (;;)
    {
      String str = (String)this.mCardNumbers.get(paramInt);
      paramView.cardNumber.setText(str.replaceAll("(.{4})", "$1 "));
      paramView.cardBalance.setText((CharSequence)this.mCardBalances.get(paramInt));
      str = "card" + str.substring(str.length() - 1, str.length()) + ".png";
      paramView.cardImage.setImageDrawable(App.getScaledDrawableResource(str));
      return paramViewGroup;
      paramViewGroup = paramView;
      paramView = (ViewHolder)paramViewGroup.getTag();
    }
  }
  
  private static class ViewHolder
  {
    public TextView cardBalance;
    public ImageView cardImage;
    public TextView cardNumber;
    
    private ViewHolder() {}
  }
}
