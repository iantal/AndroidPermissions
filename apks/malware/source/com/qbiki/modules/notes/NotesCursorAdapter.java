package com.qbiki.modules.notes;

import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.CursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import com.qbiki.util.DateUtil;
import com.qbiki.util.StringUtil;
import java.util.Date;

public class NotesCursorAdapter
  extends CursorAdapter
{
  private LayoutInflater mInflater;
  
  public NotesCursorAdapter(Context paramContext)
  {
    super(paramContext, null, 0);
    this.mInflater = LayoutInflater.from(paramContext);
  }
  
  public void bindView(View paramView, Context paramContext, Cursor paramCursor)
  {
    paramView.setId(paramCursor.getInt(paramCursor.getColumnIndex("_id")));
    paramView = (ViewHolder)paramView.getTag();
    String str = paramCursor.getString(paramCursor.getColumnIndex("text"));
    paramView.title.setText(StringUtil.getFirstNonEmptyLine(str, 200));
    paramCursor = new Date(paramCursor.getLong(paramCursor.getColumnIndex("date")));
    paramView.date.setText(DateUtil.getRelativeDayString(paramContext, paramCursor));
  }
  
  public View newView(Context paramContext, Cursor paramCursor, ViewGroup paramViewGroup)
  {
    paramContext = this.mInflater.inflate(2130903177, paramViewGroup, false);
    paramCursor = new ViewHolder(null);
    paramCursor.title = ((TextView)paramContext.findViewById(2131099801));
    paramCursor.date = ((TextView)paramContext.findViewById(2131100068));
    paramContext.setTag(paramCursor);
    return paramContext;
  }
  
  private static class ViewHolder
  {
    public TextView date;
    public TextView title;
    
    private ViewHolder() {}
  }
}
