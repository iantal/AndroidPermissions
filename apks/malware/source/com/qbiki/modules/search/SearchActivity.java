package com.qbiki.modules.search;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import com.qbiki.seattleclouds.SCFragmentActivity;

public class SearchActivity
  extends SCFragmentActivity
{
  private static final String TAG = "SearchActivity";
  private boolean LOGV = false;
  private boolean mHandledFirstIntent = false;
  private SearchFragment mSearchFragment;
  
  public SearchActivity() {}
  
  private void handleIntent(Intent paramIntent)
  {
    if (this.LOGV) {
      Log.v("SearchActivity", "handleIntent");
    }
    if ("android.intent.action.SEARCH".equals(paramIntent.getAction()))
    {
      paramIntent = paramIntent.getStringExtra("query");
      this.mSearchFragment.handleSearchAction(paramIntent);
    }
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    if (this.LOGV) {
      Log.v("SearchActivity", "onCreate");
    }
    super.onCreate(paramBundle);
    setContentView(2130903062);
    Bundle localBundle = getIntent().getExtras();
    paramBundle = localBundle;
    if (localBundle == null) {
      paramBundle = new Bundle();
    }
    paramBundle.putBoolean("ARG_USE_ACTIVITY_SEARCH", true);
    this.mSearchFragment = new SearchFragment();
    this.mSearchFragment.setArguments(paramBundle);
    getSupportFragmentManager().beginTransaction().add(2131099720, this.mSearchFragment).commit();
  }
  
  protected void onNewIntent(Intent paramIntent)
  {
    if (this.LOGV) {
      Log.v("SearchActivity", "onNewIntent");
    }
    setIntent(paramIntent);
    handleIntent(paramIntent);
  }
  
  protected void onResume()
  {
    if (!this.mHandledFirstIntent)
    {
      this.mHandledFirstIntent = true;
      handleIntent(getIntent());
    }
    super.onResume();
  }
}
