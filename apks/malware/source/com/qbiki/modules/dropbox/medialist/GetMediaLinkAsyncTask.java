package com.qbiki.modules.dropbox.medialist;

import android.os.AsyncTask;
import android.util.Log;
import com.qbiki.util.AsyncTaskListener;
import java.net.URLEncoder;
import org.json.JSONException;
import org.json.JSONObject;

class GetMediaLinkAsyncTask
  extends AsyncTask<Object, Integer, Object>
{
  private static final String TAG = GetMediaLinkAsyncTask.class.getSimpleName();
  AsyncTaskListener listener;
  
  GetMediaLinkAsyncTask() {}
  
  /* Error */
  public static JSONObject getFileMediaLink(String paramString1, String paramString2)
  {
    // Byte code:
    //   0: new 35	org/apache/http/client/methods/HttpPost
    //   3: dup
    //   4: getstatic 40	com/qbiki/modules/dropbox/medialist/DropboxHandlerConstants:HANLDER_URL	Ljava/lang/String;
    //   7: invokespecial 43	org/apache/http/client/methods/HttpPost:<init>	(Ljava/lang/String;)V
    //   10: astore_3
    //   11: new 45	org/apache/http/impl/client/DefaultHttpClient
    //   14: dup
    //   15: invokespecial 46	org/apache/http/impl/client/DefaultHttpClient:<init>	()V
    //   18: astore 4
    //   20: new 48	java/util/ArrayList
    //   23: dup
    //   24: iconst_3
    //   25: invokespecial 51	java/util/ArrayList:<init>	(I)V
    //   28: astore 5
    //   30: aload 5
    //   32: new 53	org/apache/http/message/BasicNameValuePair
    //   35: dup
    //   36: ldc 55
    //   38: aload_1
    //   39: invokespecial 58	org/apache/http/message/BasicNameValuePair:<init>	(Ljava/lang/String;Ljava/lang/String;)V
    //   42: invokeinterface 64 2 0
    //   47: pop
    //   48: aload 5
    //   50: new 53	org/apache/http/message/BasicNameValuePair
    //   53: dup
    //   54: ldc 66
    //   56: ldc 68
    //   58: invokespecial 58	org/apache/http/message/BasicNameValuePair:<init>	(Ljava/lang/String;Ljava/lang/String;)V
    //   61: invokeinterface 64 2 0
    //   66: pop
    //   67: aload 5
    //   69: new 53	org/apache/http/message/BasicNameValuePair
    //   72: dup
    //   73: ldc 70
    //   75: aload_0
    //   76: invokespecial 58	org/apache/http/message/BasicNameValuePair:<init>	(Ljava/lang/String;Ljava/lang/String;)V
    //   79: invokeinterface 64 2 0
    //   84: pop
    //   85: aload_3
    //   86: new 72	org/apache/http/client/entity/UrlEncodedFormEntity
    //   89: dup
    //   90: aload 5
    //   92: invokespecial 75	org/apache/http/client/entity/UrlEncodedFormEntity:<init>	(Ljava/util/List;)V
    //   95: invokevirtual 79	org/apache/http/client/methods/HttpPost:setEntity	(Lorg/apache/http/HttpEntity;)V
    //   98: aload 4
    //   100: aload_3
    //   101: invokeinterface 85 2 0
    //   106: astore_1
    //   107: aload_1
    //   108: invokeinterface 91 1 0
    //   113: astore_3
    //   114: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   117: new 93	java/lang/StringBuilder
    //   120: dup
    //   121: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   124: ldc 96
    //   126: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   129: aload_3
    //   130: invokevirtual 105	java/lang/Object:toString	()Ljava/lang/String;
    //   133: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   136: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   139: invokestatic 112	android/util/Log:i	(Ljava/lang/String;Ljava/lang/String;)I
    //   142: pop
    //   143: new 93	java/lang/StringBuilder
    //   146: dup
    //   147: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   150: astore_0
    //   151: aload_3
    //   152: invokeinterface 118 1 0
    //   157: istore_2
    //   158: iload_2
    //   159: sipush 200
    //   162: if_icmpne +124 -> 286
    //   165: new 120	java/io/BufferedReader
    //   168: dup
    //   169: new 122	java/io/InputStreamReader
    //   172: dup
    //   173: aload_1
    //   174: invokeinterface 126 1 0
    //   179: invokeinterface 132 1 0
    //   184: invokespecial 135	java/io/InputStreamReader:<init>	(Ljava/io/InputStream;)V
    //   187: invokespecial 138	java/io/BufferedReader:<init>	(Ljava/io/Reader;)V
    //   190: astore_1
    //   191: aload_1
    //   192: invokevirtual 141	java/io/BufferedReader:readLine	()Ljava/lang/String;
    //   195: astore_3
    //   196: aload_3
    //   197: ifnull +56 -> 253
    //   200: aload_0
    //   201: aload_3
    //   202: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   205: pop
    //   206: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   209: aload_0
    //   210: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   213: invokestatic 144	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   216: pop
    //   217: goto -26 -> 191
    //   220: astore_0
    //   221: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   224: new 93	java/lang/StringBuilder
    //   227: dup
    //   228: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   231: ldc -110
    //   233: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   236: aload_0
    //   237: invokevirtual 149	java/io/UnsupportedEncodingException:getLocalizedMessage	()Ljava/lang/String;
    //   240: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   243: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   246: aload_0
    //   247: invokestatic 153	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   250: pop
    //   251: aconst_null
    //   252: areturn
    //   253: new 155	org/json/JSONObject
    //   256: dup
    //   257: aload_0
    //   258: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   261: invokespecial 156	org/json/JSONObject:<init>	(Ljava/lang/String;)V
    //   264: astore_0
    //   265: aload_0
    //   266: ldc -98
    //   268: invokevirtual 162	org/json/JSONObject:getString	(Ljava/lang/String;)Ljava/lang/String;
    //   271: ldc -92
    //   273: invokevirtual 169	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   276: ifeq -25 -> 251
    //   279: aload_0
    //   280: ldc -85
    //   282: invokevirtual 175	org/json/JSONObject:getJSONObject	(Ljava/lang/String;)Lorg/json/JSONObject;
    //   285: areturn
    //   286: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   289: new 93	java/lang/StringBuilder
    //   292: dup
    //   293: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   296: ldc -79
    //   298: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   301: iload_2
    //   302: invokevirtual 180	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   305: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   308: invokestatic 182	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;)I
    //   311: pop
    //   312: goto -61 -> 251
    //   315: astore_0
    //   316: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   319: new 93	java/lang/StringBuilder
    //   322: dup
    //   323: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   326: ldc -110
    //   328: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   331: aload_0
    //   332: invokevirtual 183	org/apache/http/client/ClientProtocolException:getLocalizedMessage	()Ljava/lang/String;
    //   335: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   338: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   341: aload_0
    //   342: invokestatic 153	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   345: pop
    //   346: goto -95 -> 251
    //   349: astore_0
    //   350: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   353: new 93	java/lang/StringBuilder
    //   356: dup
    //   357: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   360: ldc -110
    //   362: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   365: aload_0
    //   366: invokevirtual 184	java/io/IOException:getLocalizedMessage	()Ljava/lang/String;
    //   369: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   372: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   375: aload_0
    //   376: invokestatic 153	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   379: pop
    //   380: goto -129 -> 251
    //   383: astore_0
    //   384: getstatic 19	com/qbiki/modules/dropbox/medialist/GetMediaLinkAsyncTask:TAG	Ljava/lang/String;
    //   387: new 93	java/lang/StringBuilder
    //   390: dup
    //   391: invokespecial 94	java/lang/StringBuilder:<init>	()V
    //   394: ldc -110
    //   396: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   399: aload_0
    //   400: invokevirtual 185	org/json/JSONException:getLocalizedMessage	()Ljava/lang/String;
    //   403: invokevirtual 100	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   406: invokevirtual 106	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   409: aload_0
    //   410: invokestatic 153	android/util/Log:e	(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   413: pop
    //   414: goto -163 -> 251
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	417	0	paramString1	String
    //   0	417	1	paramString2	String
    //   157	145	2	i	int
    //   10	192	3	localObject	Object
    //   18	81	4	localDefaultHttpClient	org.apache.http.impl.client.DefaultHttpClient
    //   28	63	5	localArrayList	java.util.ArrayList
    // Exception table:
    //   from	to	target	type
    //   0	158	220	java/io/UnsupportedEncodingException
    //   165	191	220	java/io/UnsupportedEncodingException
    //   191	196	220	java/io/UnsupportedEncodingException
    //   200	217	220	java/io/UnsupportedEncodingException
    //   253	286	220	java/io/UnsupportedEncodingException
    //   286	312	220	java/io/UnsupportedEncodingException
    //   0	158	315	org/apache/http/client/ClientProtocolException
    //   165	191	315	org/apache/http/client/ClientProtocolException
    //   191	196	315	org/apache/http/client/ClientProtocolException
    //   200	217	315	org/apache/http/client/ClientProtocolException
    //   253	286	315	org/apache/http/client/ClientProtocolException
    //   286	312	315	org/apache/http/client/ClientProtocolException
    //   0	158	349	java/io/IOException
    //   165	191	349	java/io/IOException
    //   191	196	349	java/io/IOException
    //   200	217	349	java/io/IOException
    //   253	286	349	java/io/IOException
    //   286	312	349	java/io/IOException
    //   0	158	383	org/json/JSONException
    //   165	191	383	org/json/JSONException
    //   191	196	383	org/json/JSONException
    //   200	217	383	org/json/JSONException
    //   253	286	383	org/json/JSONException
    //   286	312	383	org/json/JSONException
  }
  
  protected Object doInBackground(Object... paramVarArgs)
  {
    MediaFile localMediaFile = (MediaFile)MediaFile.class.cast(paramVarArgs[0]);
    try
    {
      JSONObject localJSONObject = getFileMediaLink(URLEncoder.encode(localMediaFile.getMetadata().getString("Path"), "UTF-8"), (String)String.class.cast(paramVarArgs[1]));
      this.listener = ((AsyncTaskListener)AsyncTaskListener.class.cast(paramVarArgs[2]));
      localMediaFile.setDownloadUrlMetadata(localJSONObject);
      return localMediaFile;
    }
    catch (JSONException paramVarArgs)
    {
      Log.e(TAG, "ERROR: " + paramVarArgs.getLocalizedMessage(), paramVarArgs);
      return null;
    }
    catch (Exception paramVarArgs)
    {
      for (;;)
      {
        Log.e(TAG, "ERROR: " + paramVarArgs.getLocalizedMessage(), paramVarArgs);
      }
    }
  }
  
  protected void onPostExecute(Object paramObject)
  {
    try
    {
      if (this.listener != null) {
        this.listener.asyncTaskFinished(paramObject);
      }
      return;
    }
    catch (Exception paramObject)
    {
      Log.e(TAG, "ERROR: " + paramObject.getLocalizedMessage(), paramObject);
    }
  }
}
