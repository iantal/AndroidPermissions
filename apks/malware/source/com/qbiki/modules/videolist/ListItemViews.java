package com.qbiki.modules.videolist;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;
import com.qbiki.util.ResourceImageResizer;

public class ListItemViews
{
  Context context;
  private ResourceImageResizer mImageFetcher;
  
  public ListItemViews(Context paramContext, ResourceImageResizer paramResourceImageResizer)
  {
    this.context = paramContext;
    this.mImageFetcher = paramResourceImageResizer;
  }
  
  private void updateBadge(ImageView paramImageView, VideoFile paramVideoFile)
  {
    if (paramVideoFile.getVideoFileStatus() == VideoFile.Status.ONLINE)
    {
      paramImageView.setImageResource(2130837679);
      return;
    }
    paramImageView.setImageResource(2130837681);
  }
  
  private void updateImage(ImageView paramImageView, VideoFile paramVideoFile)
  {
    if (this.mImageFetcher != null) {
      this.mImageFetcher.loadImage(paramVideoFile.getVideoFileImageTHMB(), paramImageView);
    }
  }
  
  public View getDownloadInProgressView(View paramView, VideoFile paramVideoFile)
  {
    Object localObject;
    if ((paramView == null) || (!DownloadInProgressViewHolder.class.isInstance(paramView)))
    {
      localObject = (ViewGroup)((LayoutInflater)this.context.getSystemService("layout_inflater")).inflate(2130903230, null);
      paramView = new DownloadInProgressViewHolder((TextView)((ViewGroup)localObject).findViewById(2131100244), (ImageView)((ViewGroup)localObject).findViewById(2131100243), (ProgressBar)((ViewGroup)localObject).findViewById(2131100246));
      ((ViewGroup)localObject).setTag(paramView);
    }
    for (;;)
    {
      paramView.txtFileName.setText(paramVideoFile.getVideoFileTitle());
      paramView.progressBar.setProgress(paramVideoFile.getVideoFileProgress());
      updateImage(paramView.imageFileImage, paramVideoFile);
      return localObject;
      localObject = paramView;
      paramView = (DownloadInProgressViewHolder)paramView.getTag();
    }
  }
  
  public View getFileView(View paramView, VideoFile paramVideoFile)
  {
    Object localObject;
    if ((paramView == null) || (!FileViewHolder.class.isInstance(paramView)))
    {
      localObject = (ViewGroup)((LayoutInflater)this.context.getSystemService("layout_inflater")).inflate(2130903231, null);
      paramView = new FileViewHolder((TextView)((ViewGroup)localObject).findViewById(2131100244), (TextView)((ViewGroup)localObject).findViewById(2131100247), (ImageView)((ViewGroup)localObject).findViewById(2131100243), (ImageView)((ViewGroup)localObject).findViewById(2131100248));
      ((ViewGroup)localObject).setTag(paramView);
    }
    for (;;)
    {
      paramView.txtFileName.setText(paramVideoFile.getVideoFileTitle());
      paramView.txtFileInfo.setText(paramVideoFile.getDetailsString());
      updateImage(paramView.imageFileImage, paramVideoFile);
      updateBadge(paramView.imgBadge, paramVideoFile);
      return localObject;
      localObject = paramView;
      paramView = (FileViewHolder)paramView.getTag();
    }
  }
  
  private static class DownloadInProgressViewHolder
  {
    final ImageView imageFileImage;
    final ProgressBar progressBar;
    final TextView txtFileName;
    
    DownloadInProgressViewHolder(TextView paramTextView, ImageView paramImageView, ProgressBar paramProgressBar)
    {
      this.txtFileName = paramTextView;
      this.imageFileImage = paramImageView;
      this.progressBar = paramProgressBar;
    }
  }
  
  private static class FileViewHolder
  {
    final ImageView imageFileImage;
    final ImageView imgBadge;
    final TextView txtFileInfo;
    final TextView txtFileName;
    
    FileViewHolder(TextView paramTextView1, TextView paramTextView2, ImageView paramImageView1, ImageView paramImageView2)
    {
      this.txtFileName = paramTextView1;
      this.txtFileInfo = paramTextView2;
      this.imageFileImage = paramImageView1;
      this.imgBadge = paramImageView2;
    }
  }
}
