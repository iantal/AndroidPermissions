package com.qbiki.modules.quiz;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import com.qbiki.seattleclouds.App;
import com.qbiki.seattleclouds.SCFragment;
import com.qbiki.util.StyleUtil;
import java.util.ArrayList;

public class QuizHighscoresFragement
  extends SCFragment
{
  HighScoresListAdapter adapter;
  private ArrayList<QuizScore> highScores;
  ListView listOfHighScores;
  private View mView = null;
  private Bundle style;
  
  public QuizHighscoresFragement() {}
  
  private void setListAdapter(View paramView)
  {
    this.listOfHighScores = ((ListView)paramView.findViewById(2131100139));
    this.adapter = new HighScoresListAdapter();
    this.listOfHighScores.setAdapter(this.adapter);
  }
  
  public View onCreateView(LayoutInflater paramLayoutInflater, ViewGroup paramViewGroup, Bundle paramBundle)
  {
    this.highScores = new ArrayList(0);
    this.mView = paramLayoutInflater.inflate(2130903193, paramViewGroup, false);
    this.highScores = QuizSharedDataManager.getInstance(getActivity()).getHighScoresArrayForQuizNamed(QuizPlayController.getInstance(getActivity()).getCurrentQuizPageId());
    setListAdapter(this.mView);
    this.mView.setBackgroundDrawable(App.getDrawableResource(QuizPlayController.getInstance(getActivity()).getCurrentQuizBgImage()));
    paramLayoutInflater = getArguments();
    if (paramLayoutInflater != null)
    {
      this.style = paramLayoutInflater.getBundle("PAGE_STYLE");
      StyleUtil.setBackground(this.mView, this.style);
    }
    return this.mView;
  }
  
  protected class HighScoresListAdapter
    extends BaseAdapter
  {
    private QuizScore score;
    
    protected HighScoresListAdapter() {}
    
    public int getCount()
    {
      if (QuizHighscoresFragement.this.highScores == null) {
        return 0;
      }
      return QuizHighscoresFragement.this.highScores.size();
    }
    
    public Object getItem(int paramInt)
    {
      return QuizHighscoresFragement.this.highScores.get(paramInt);
    }
    
    public long getItemId(int paramInt)
    {
      return paramInt;
    }
    
    public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
    {
      this.score = ((QuizScore)QuizHighscoresFragement.this.highScores.get(paramInt));
      if (paramView == null)
      {
        paramViewGroup = (ViewGroup)((LayoutInflater)QuizHighscoresFragement.this.getActivity().getSystemService("layout_inflater")).inflate(2130903194, null);
        paramView = new QuizHighscoresFragement.OnlineScoreViewHolder((TextView)paramViewGroup.findViewById(2131100140), (TextView)paramViewGroup.findViewById(2131100141));
        paramViewGroup.setTag(paramView);
      }
      for (;;)
      {
        paramView.playerName.setText(this.score.getPlayer().toString());
        paramView.playerScore.setText(Integer.toString(this.score.getPoints().intValue()));
        StyleUtil.setTextColor(paramView.playerName, QuizHighscoresFragement.this.style);
        StyleUtil.setTextColor(paramView.playerScore, QuizHighscoresFragement.this.style);
        return paramViewGroup;
        paramViewGroup = paramView;
        paramView = (QuizHighscoresFragement.OnlineScoreViewHolder)paramView.getTag();
      }
    }
  }
  
  private static class OnlineScoreViewHolder
  {
    final TextView playerName;
    final TextView playerScore;
    
    OnlineScoreViewHolder(TextView paramTextView1, TextView paramTextView2)
    {
      this.playerName = paramTextView1;
      this.playerScore = paramTextView2;
    }
  }
}
