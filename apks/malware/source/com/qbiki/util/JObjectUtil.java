package com.qbiki.util;

import android.util.Log;
import com.qbiki.seattleclouds.App;
import com.qbiki.seattleclouds.AppConfig;
import java.util.ArrayList;
import org.json.JSONException;
import org.json.JSONObject;

public class JObjectUtil
{
  private static final String TAG = "JObjectUtil";
  private static JSONObject jObject = new JSONObject();
  
  public JObjectUtil() {}
  
  public static void clean()
  {
    jObject = new JSONObject();
  }
  
  public static String getJavaScriptInitContent()
  {
    StringBuilder localStringBuilder = new StringBuilder("<script type=\"text/javascript\"> var jobject = new Object();");
    localStringBuilder.append("jobject.score = ").append(jObject.optInt("score", 0)).append(";");
    localStringBuilder.append("jobject.qscore = ").append(jObject.optDouble("qscore", 100.0D / App.appConfig.getQuizPages().size())).append(";");
    localStringBuilder.append("jobject.passedQuestions = ").append(jObject.optInt("passedQuestions", 0)).append(";");
    localStringBuilder.append("jobject.numberOfQuestions = ").append(jObject.optInt("numberOfQuestions", 0)).append(";");
    localStringBuilder.append("jobject.correctAnswers = ").append(jObject.optInt("correctAnswers", 0)).append(";").append("</script>");
    return localStringBuilder.toString();
  }
  
  public static void parseRSS() {}
  
  public static String processQuizHtmlBlock(String paramString)
  {
    StringBuilder localStringBuilder = new StringBuilder();
    int i = paramString.indexOf("</head>");
    if (i == -1) {
      return null;
    }
    localStringBuilder.append(paramString.substring(0, i));
    localStringBuilder.append(getJavaScriptInitContent());
    localStringBuilder.append(paramString.substring(i, paramString.length()));
    return localStringBuilder.toString();
  }
  
  public static void saveJValue(String paramString1, String paramString2)
  {
    try
    {
      jObject.put(paramString1, paramString2);
      if ((App.appConfig.getQuizPages().size() > 0) && (!paramString1.equalsIgnoreCase("correctAnswers")) && (!paramString1.equalsIgnoreCase("numberOfQuestions")) && (!paramString1.equalsIgnoreCase("passedQuestions")) && (!paramString1.equalsIgnoreCase("score")) && (!paramString1.equalsIgnoreCase("qscore")))
      {
        int i = jObject.optInt("passedQuestions", 0);
        jObject.put("passedQuestions", i + 1);
        if (paramString2.equalsIgnoreCase("correct"))
        {
          i = jObject.optInt("correctAnswers", 0) + 1;
          jObject.put("correctAnswers", i);
          jObject.optInt("score", 0);
          double d = jObject.optDouble("qscore", 100.0D / App.appConfig.getQuizPages().size());
          i = (int)(i * d);
          jObject.put("score", i);
        }
      }
      return;
    }
    catch (JSONException paramString1)
    {
      Log.e("JObjectUtil", "saveJValue: " + paramString1);
    }
  }
}
