package com.tencent.android.tpush;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.net.Uri;
import android.os.Handler;
import android.os.Message;

class a
  extends Handler
{
  a(XGDownloadService paramXGDownloadService) {}
  
  public void handleMessage(Message paramMessage)
  {
    int i = paramMessage.arg1;
    paramMessage.getData();
    switch (paramMessage.what)
    {
    default: 
      this.a.stopSelf();
      return;
    case 0: 
      paramMessage = Uri.fromFile(XGDownloadService.a(this.a));
      Intent localIntent = new Intent("android.intent.action.VIEW");
      localIntent.setDataAndType(paramMessage, "application/vnd.android.package-archive");
      XGDownloadService.a(this.a, PendingIntent.getActivity(this.a, i, localIntent, 0));
      XGDownloadService.b(this.a).flags = 16;
      XGDownloadService.b(this.a).defaults = 1;
      XGDownloadService.b(this.a).setLatestEventInfo(this.a, "下载应用", "下载完成,点击安装!", XGDownloadService.c(this.a));
      XGDownloadService.d(this.a).notify(i, XGDownloadService.b(this.a));
      this.a.stopSelf();
      return;
    }
    XGDownloadService.b(this.a).flags = 16;
    XGDownloadService.b(this.a).setLatestEventInfo(this.a, "下载应用", "下载失败!", XGDownloadService.c(this.a));
    XGDownloadService.d(this.a).notify(i, XGDownloadService.b(this.a));
  }
}
