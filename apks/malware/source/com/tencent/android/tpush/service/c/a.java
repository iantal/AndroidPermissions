package com.tencent.android.tpush.service.c;

import android.content.Context;
import android.content.Intent;
import com.tencent.android.tpush.logging.TLog;
import com.tencent.android.tpush.service.channel.protocol.TpnsClickClientReport;
import com.tencent.android.tpush.service.channel.protocol.TpnsPushClientReport;
import com.tencent.android.tpush.service.channel.protocol.TpnsPushMsg;
import com.tencent.android.tpush.stat.StatReportStrategy;
import com.tencent.android.tpush.stat.d;
import com.tencent.android.tpush.stat.j;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Properties;

public class a
{
  private static Context a = null;
  
  public static void a()
  {
    j.a(a, -1);
  }
  
  private static void a(int paramInt)
  {
    if (paramInt > 1)
    {
      d.c(false);
      d.a(StatReportStrategy.APP_LAUNCH);
      d.b(paramInt + 1);
    }
  }
  
  public static void a(Context paramContext)
  {
    try
    {
      d.e(true);
      d.a(10);
      d.a(StatReportStrategy.BATCH);
      d.d(true);
      j.b(paramContext);
      j.e(paramContext);
      a = paramContext.getApplicationContext();
      return;
    }
    catch (Throwable paramContext)
    {
      for (;;)
      {
        TLog.w("XgStat", "init", paramContext);
      }
    }
    finally {}
  }
  
  public static void a(Intent paramIntent)
  {
    if (paramIntent == null) {
      return;
    }
    try
    {
      long l1 = paramIntent.getLongExtra("type", 0L);
      long l2 = paramIntent.getLongExtra("busiMsgId", 0L);
      long l3 = paramIntent.getLongExtra("timestamps", 0L);
      long l4 = paramIntent.getLongExtra("msgId", 0L);
      long l5 = paramIntent.getLongExtra("accId", 0L);
      paramIntent = new Properties();
      paramIntent.setProperty("type", "" + l1);
      paramIntent.setProperty("busiMsgId", "" + l2);
      paramIntent.setProperty("msgId", "" + l4);
      j.a(a, "SdkAck", paramIntent, l5, l3);
      return;
    }
    catch (Throwable paramIntent)
    {
      TLog.w("XgStat", "reportSDKAck", paramIntent);
    }
  }
  
  public static void a(ArrayList paramArrayList)
  {
    if ((paramArrayList == null) || (paramArrayList.size() == 0)) {
      return;
    }
    try
    {
      int i = paramArrayList.size();
      a(i);
      Properties localProperties = new Properties();
      paramArrayList = paramArrayList.iterator();
      while (paramArrayList.hasNext())
      {
        TpnsPushMsg localTpnsPushMsg = (TpnsPushMsg)paramArrayList.next();
        localProperties.clear();
        localProperties.setProperty("type", "" + localTpnsPushMsg.type);
        localProperties.setProperty("busiMsgId", "" + localTpnsPushMsg.busiMsgId);
        localProperties.setProperty("msgId", "" + localTpnsPushMsg.msgId);
        j.a(a, "SrvAck", localProperties, localTpnsPushMsg.accessId, localTpnsPushMsg.timestamp);
      }
      b(i);
    }
    catch (Throwable paramArrayList)
    {
      TLog.w("XgStat", "reportSrvAck", paramArrayList);
      return;
    }
  }
  
  public static void a(boolean paramBoolean)
  {
    d.a(paramBoolean);
  }
  
  private static void b(int paramInt)
  {
    if (paramInt > 1)
    {
      d.c(true);
      d.b(0);
      a();
    }
  }
  
  public static void b(ArrayList paramArrayList)
  {
    if ((paramArrayList == null) || (paramArrayList.size() == 0)) {
      return;
    }
    try
    {
      int i = paramArrayList.size();
      a(i);
      Properties localProperties = new Properties();
      paramArrayList = paramArrayList.iterator();
      while (paramArrayList.hasNext())
      {
        TpnsPushClientReport localTpnsPushClientReport = (TpnsPushClientReport)paramArrayList.next();
        long l1 = localTpnsPushClientReport.type;
        long l2 = localTpnsPushClientReport.timestamp;
        long l3 = localTpnsPushClientReport.broadcastId;
        long l4 = localTpnsPushClientReport.msgId;
        long l5 = localTpnsPushClientReport.accessId;
        localProperties.clear();
        localProperties.setProperty("type", "" + l1);
        localProperties.setProperty("busiMsgId", "" + l3);
        localProperties.setProperty("msgId", "" + l4);
        j.a(a, "Ack", localProperties, l5, l2);
      }
      b(i);
    }
    catch (Throwable paramArrayList)
    {
      TLog.w("XgStat", "reportAck", paramArrayList);
      return;
    }
  }
  
  public static void c(ArrayList paramArrayList)
  {
    if ((paramArrayList == null) || (paramArrayList.size() == 0)) {
      return;
    }
    try
    {
      int i = paramArrayList.size();
      a(i);
      Properties localProperties = new Properties();
      paramArrayList = paramArrayList.iterator();
      while (paramArrayList.hasNext())
      {
        TpnsClickClientReport localTpnsClickClientReport = (TpnsClickClientReport)paramArrayList.next();
        long l1 = localTpnsClickClientReport.type;
        long l2 = localTpnsClickClientReport.timestamp;
        long l3 = localTpnsClickClientReport.broadcastId;
        long l4 = localTpnsClickClientReport.msgId;
        long l5 = localTpnsClickClientReport.accessId;
        long l6 = localTpnsClickClientReport.action;
        localProperties.clear();
        localProperties.setProperty("type", "" + l1);
        localProperties.setProperty("busiMsgId", "" + l3);
        localProperties.setProperty("msgId", "" + l4);
        localProperties.setProperty("action", "" + l6);
        j.a(a, "Action", localProperties, l5, l2);
      }
      b(i);
    }
    catch (Throwable paramArrayList)
    {
      TLog.w("XgStat", "reportNotifactionClickedOrClear", paramArrayList);
      return;
    }
  }
}
