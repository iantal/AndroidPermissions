package com.tencent.android.tpush.common;

import android.content.Context;
import com.tencent.android.tpush.XGPushConfig;
import com.tencent.android.tpush.logging.TLog;
import org.json.JSONObject;

public class n
{
  private static n a = null;
  private Context b = null;
  private String c = null;
  private String d = null;
  
  private n(Context paramContext)
  {
    this.b = paramContext.getApplicationContext();
    this.c = p.d(paramContext);
    try
    {
      this.d = String.valueOf(2.37F);
      return;
    }
    catch (Throwable paramContext)
    {
      TLog.e("XGService", "", paramContext);
    }
  }
  
  public static n a(Context paramContext)
  {
    try
    {
      if (a == null) {
        a = new n(paramContext);
      }
      paramContext = a;
      return paramContext;
    }
    finally {}
  }
  
  public String a()
  {
    JSONObject localJSONObject = new JSONObject();
    for (;;)
    {
      try
      {
        e.a(localJSONObject, "appVer", this.c);
        e.a(localJSONObject, "appSdkVer", this.d);
        e.a(localJSONObject, "ch", XGPushConfig.getInstallChannel(this.b));
        e.a(localJSONObject, "gs", XGPushConfig.getGameServer(this.b));
        j = m.a(this.b, ".firstregister", 1);
        i = m.a(this.b, ".usertype", 0);
        l1 = m.a(this.b, ".installtime", 0L);
        long l2 = System.currentTimeMillis();
        if (l1 != 0L) {
          continue;
        }
        m.b(this.b, ".installtime", l2);
        l1 = l2;
      }
      catch (Exception localException)
      {
        int j;
        int i;
        long l1;
        localException.printStackTrace();
        continue;
        continue;
      }
      localJSONObject.put("ut", i);
      if (j == 1) {
        localJSONObject.put("freg", 1);
      }
      localJSONObject.put("it", (int)(l1 / 1000L));
      if (p.a()) {
        localJSONObject.put("aidl", 1);
      }
      return localJSONObject.toString();
      if ((i != 0) || (j == 1) || (p.a(l1).equals(p.a(System.currentTimeMillis())))) {
        continue;
      }
      m.b(this.b, ".usertype", 1);
      i = 1;
    }
  }
}
