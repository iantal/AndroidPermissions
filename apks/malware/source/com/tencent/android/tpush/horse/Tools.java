package com.tencent.android.tpush.horse;

import android.content.Context;
import com.tencent.android.tpush.XGPushManager;
import com.tencent.android.tpush.horse.data.OptStrategyList;
import com.tencent.android.tpush.logging.TLog;
import com.tencent.android.tpush.service.a.a;
import com.tencent.android.tpush.service.b.k;
import com.tencent.android.tpush.service.cache.CacheManager;
import com.tencent.android.tpush.service.d.d;
import java.util.HashSet;
import java.util.Iterator;

public class Tools
{
  public static final String KEY = ".com.tencent.tpush.toolschannel";
  public static final String SHARE_NAME = ".com.tencent.tpush.toolschannel_name";
  public static final String STRATEGY = ".com.tencent.tpush.toolsstrategy";
  public static final String TOOLS_NAME_UNI_SUFFIX = ".com.tencent.tpush.tools";
  public static final int TYPE_DEFAULT = 0;
  public static final int TYPE_HTTP = 2;
  public static final int TYPE_HTTP_WAP = 3;
  public static final int TYPE_TCP = 1;
  
  public Tools() {}
  
  public static void clearAll(Context paramContext)
  {
    TLog.i("TPush", ">> clearCache");
    clearOptKeyList(paramContext);
    clearCacheServerItems(paramContext);
    clearOptStrategyItem(paramContext);
    clearMultPkgs(paramContext);
    XGPushManager.clearLocalNotifications(paramContext);
    d.a(paramContext, "isClearCache.com.tencent.tpush.cache.redirect", "memeda3");
  }
  
  public static void clearCacheServerItems(Context paramContext)
  {
    if (paramContext != null) {
      TLog.v("XGService", "@@ clearCacheServerItems(" + paramContext.getPackageName() + ")");
    }
    try
    {
      CacheManager.clearDomainServerItem(paramContext);
      CacheManager.saveDomain(paramContext, "");
      CacheManager.saveDomainKeyList(paramContext, null);
      a.a(paramContext, 0L);
      return;
    }
    catch (Throwable paramContext)
    {
      TLog.e("XGService", paramContext.getMessage());
    }
  }
  
  public static void clearMultPkgs(Context paramContext)
  {
    if (paramContext != null) {
      TLog.v("XGService", "@@ clearMultPkgs(" + paramContext.getPackageName() + ")");
    }
    try
    {
      k.a().a(paramContext);
      return;
    }
    catch (Exception paramContext)
    {
      TLog.e("XGService", paramContext.getMessage());
    }
  }
  
  public static void clearOptKeyList(Context paramContext)
  {
    if (paramContext != null) {
      CacheManager.clearOptKeyList(paramContext);
    }
  }
  
  public static void clearOptStrategyItem(Context paramContext)
  {
    if (paramContext != null)
    {
      TLog.v("XGService", "@@ clearOptStrategyItem(" + paramContext.getPackageName() + ")");
      try
      {
        d.a(paramContext, d.g(paramContext) + ".com.tencent.tpush.cache.redirect", "");
        Iterator localIterator = CacheManager.getOptKeyList(paramContext).iterator();
        while (localIterator.hasNext()) {
          CacheManager.addOptStrategyList(paramContext, (String)localIterator.next(), new OptStrategyList());
        }
        return;
      }
      catch (Exception localException)
      {
        CacheManager.clearOptKeyList(paramContext);
        TLog.e("XGService", localException.getMessage());
        CacheManager.addOptStrategyList(paramContext, d.g(paramContext), new OptStrategyList());
      }
    }
  }
  
  public static void clearRegisterInfo(Context paramContext, long paramLong)
  {
    if (paramContext != null) {
      TLog.v("XGService", "@@ clearRegisterInfo(" + paramContext.getPackageName() + "," + paramLong + ")");
    }
    try
    {
      CacheManager.removeRegisterInfoByPkgName(paramContext.getPackageName());
      return;
    }
    catch (Exception paramContext)
    {
      TLog.e("XGService", paramContext.getMessage());
    }
  }
  
  public static int getChannelType(Context paramContext)
  {
    int i = 0;
    if (paramContext != null)
    {
      TLog.v("XGService", "@@ getChannelType(" + paramContext.getPackageName() + ")");
      i = d.b(paramContext, ".com.tencent.tpush.toolschannel", 0);
    }
    return i;
  }
  
  public static void setChannelType(Context paramContext, int paramInt)
  {
    if (paramContext != null)
    {
      TLog.v("XGService", "@@ setChannelType(" + paramContext.getPackageName() + "," + paramInt + ")");
      d.a(paramContext, ".com.tencent.tpush.toolschannel", paramInt);
    }
  }
}
