package com.tencent.tpshell;

import android.util.Base64;

public class PerformanceHandler
{
  private long mEndTime;
  private long mStartTime = System.currentTimeMillis();
  
  public PerformanceHandler() {}
  
  private void sendGet(final String paramString)
  {
    new Thread(new Runnable()
    {
      /* Error */
      public void run()
      {
        // Byte code:
        //   0: aconst_null
        //   1: astore_3
        //   2: aconst_null
        //   3: astore_2
        //   4: new 32	java/net/URL
        //   7: dup
        //   8: aload_0
        //   9: getfield 21	com/tencent/tpshell/PerformanceHandler$1:val$localStrUrl	Ljava/lang/String;
        //   12: invokespecial 34	java/net/URL:<init>	(Ljava/lang/String;)V
        //   15: invokevirtual 38	java/net/URL:openConnection	()Ljava/net/URLConnection;
        //   18: checkcast 40	java/net/HttpURLConnection
        //   21: astore_1
        //   22: aload_1
        //   23: ldc 41
        //   25: invokevirtual 45	java/net/HttpURLConnection:setConnectTimeout	(I)V
        //   28: aload_1
        //   29: ldc 47
        //   31: invokevirtual 50	java/net/HttpURLConnection:setRequestMethod	(Ljava/lang/String;)V
        //   34: aload_1
        //   35: invokevirtual 54	java/net/HttpURLConnection:getResponseCode	()I
        //   38: pop
        //   39: aload_1
        //   40: ifnull +7 -> 47
        //   43: aload_1
        //   44: invokevirtual 57	java/net/HttpURLConnection:disconnect	()V
        //   47: return
        //   48: astore_1
        //   49: aconst_null
        //   50: astore_1
        //   51: aload_1
        //   52: ifnull -5 -> 47
        //   55: aload_1
        //   56: invokevirtual 57	java/net/HttpURLConnection:disconnect	()V
        //   59: return
        //   60: astore_1
        //   61: aload_2
        //   62: astore_1
        //   63: aload_1
        //   64: ifnull -17 -> 47
        //   67: aload_1
        //   68: invokevirtual 57	java/net/HttpURLConnection:disconnect	()V
        //   71: return
        //   72: astore_2
        //   73: aload_3
        //   74: astore_1
        //   75: aload_1
        //   76: ifnull +7 -> 83
        //   79: aload_1
        //   80: invokevirtual 57	java/net/HttpURLConnection:disconnect	()V
        //   83: aload_2
        //   84: athrow
        //   85: astore_2
        //   86: goto -11 -> 75
        //   89: astore_2
        //   90: goto -27 -> 63
        //   93: astore_2
        //   94: goto -43 -> 51
        // Local variable table:
        //   start	length	slot	name	signature
        //   0	97	0	this	1
        //   21	23	1	localHttpURLConnection	java.net.HttpURLConnection
        //   48	1	1	localMalformedURLException1	java.net.MalformedURLException
        //   50	6	1	localObject1	Object
        //   60	1	1	localIOException1	java.io.IOException
        //   62	18	1	localObject2	Object
        //   3	59	2	localObject3	Object
        //   72	12	2	localObject4	Object
        //   85	1	2	localObject5	Object
        //   89	1	2	localIOException2	java.io.IOException
        //   93	1	2	localMalformedURLException2	java.net.MalformedURLException
        //   1	73	3	localObject6	Object
        // Exception table:
        //   from	to	target	type
        //   4	22	48	java/net/MalformedURLException
        //   4	22	60	java/io/IOException
        //   4	22	72	finally
        //   22	39	85	finally
        //   22	39	89	java/io/IOException
        //   22	39	93	java/net/MalformedURLException
      }
    }).start();
  }
  
  public void report(String paramString, PerformanceData paramPerformanceData)
  {
    if ((paramString == null) || (paramPerformanceData == null)) {
      throw new NullPointerException();
    }
    this.mEndTime = System.currentTimeMillis();
    paramPerformanceData.cost = (this.mEndTime - this.mStartTime);
    paramPerformanceData = paramPerformanceData.toURLParameters();
    sendGet(paramString + "?" + Base64.encodeToString(paramPerformanceData.getBytes(), 2));
  }
  
  public static class PerformanceData
  {
    long cost;
    String cpu_arch;
    String device_model;
    int dex_opt;
    int enable_assert;
    int enable_block_enc;
    int enc_block_size;
    int enc_type;
    String imei;
    String package_name;
    String shell_ver;
    String sys_ver;
    String vm_name;
    
    public PerformanceData() {}
    
    public String toURLParameters()
    {
      String str1 = "imei=" + this.imei;
      String str2 = "device_model=" + this.device_model;
      String str3 = "sys_ver=" + this.sys_ver;
      String str4 = "vm_name=" + this.vm_name;
      String str5 = "cpu_arch=" + this.cpu_arch;
      String str6 = "package_name=" + this.package_name;
      String str7 = "shell_ver=" + this.shell_ver;
      String str8 = "dex_opt=" + this.dex_opt;
      String str9 = "cost=" + this.cost;
      String str10 = "enc_type=" + this.enc_type;
      String str11 = "enable_block_enc=" + this.enable_block_enc;
      String str12 = "enc_block_size=" + this.enc_block_size;
      String str13 = "enable_assert=" + this.enable_assert;
      return String.format("%s&%s&%s&%s&%s&%s", new Object[] { String.format("%s&%s&%s&%s&%s&%s&%s&%s", new Object[] { str1, str2, str3, str4, str5, str6, str7, str8 }), str9, str10, str11, str12, str13 });
    }
  }
}
