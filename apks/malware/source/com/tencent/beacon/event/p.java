package com.tencent.beacon.event;

import android.content.Context;
import android.net.TrafficStats;
import android.os.Process;
import com.tencent.beacon.a.b.e.a;
import com.tencent.beacon.a.k;
import com.tencent.beacon.b.a.b;
import com.tencent.beacon.upload.InitHandleListener;
import com.tencent.beacon.upload.UploadHandleListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;

public final class p
  implements com.tencent.beacon.a.b.b, com.tencent.beacon.a.b.f, com.tencent.beacon.a.b.g
{
  public static boolean b;
  private static p f = null;
  private static int k = 100;
  public g a = null;
  public final Context c;
  public a d = null;
  public com.tencent.beacon.d.a e = null;
  private j g = null;
  private j h = null;
  private boolean i = true;
  private boolean j = false;
  private com.tencent.beacon.upload.g l;
  private boolean m;
  private int n = 0;
  private InitHandleListener o = null;
  private List<f> p = null;
  
  private p(Context paramContext, boolean paramBoolean, com.tencent.beacon.upload.g paramG, UploadHandleListener paramUploadHandleListener, InitHandleListener paramInitHandleListener)
  {
    if (paramContext == null)
    {
      com.tencent.beacon.e.a.c(" the context is null! init UserActionRecord failed!", new Object[0]);
      this.c = null;
      return;
    }
    Context localContext = paramContext.getApplicationContext();
    if (localContext != null) {}
    for (this.c = localContext;; this.c = paramContext)
    {
      if (com.tencent.beacon.a.e.m() == null) {
        com.tencent.beacon.a.e.a(this.c);
      }
      if (this.p == null) {
        this.p = Collections.synchronizedList(new ArrayList(5));
      }
      this.l = paramG;
      if (paramG != null)
      {
        paramG.a(0, new q(paramContext));
        paramG.a(paramUploadHandleListener);
      }
      paramUploadHandleListener = com.tencent.beacon.a.b.c.a(this.c);
      paramUploadHandleListener.a(this);
      paramUploadHandleListener.a(this);
      paramUploadHandleListener.a(1, this);
      paramUploadHandleListener.a(0, paramG);
      paramUploadHandleListener.a(1, paramG);
      this.a = new g();
      this.g = new b(paramContext);
      this.h = new l(paramContext);
      this.i = paramBoolean;
      this.o = paramInitHandleListener;
      this.e = new com.tencent.beacon.d.a();
      new com.tencent.beacon.a.f().a(this.c);
      return;
    }
  }
  
  public static p a(Context paramContext, boolean paramBoolean, com.tencent.beacon.upload.g paramG, UploadHandleListener paramUploadHandleListener, InitHandleListener paramInitHandleListener)
  {
    try
    {
      if (f == null)
      {
        paramBoolean = a(paramContext);
        b = paramBoolean;
        if (!paramBoolean)
        {
          com.tencent.beacon.e.a.e(" ua create instance ", new Object[0]);
          paramContext = new p(paramContext, true, paramG, paramUploadHandleListener, paramInitHandleListener);
          f = paramContext;
          paramContext.a(true);
        }
      }
      paramContext = f;
      return paramContext;
    }
    finally {}
  }
  
  public static com.tencent.beacon.upload.g a(Context paramContext, boolean paramBoolean)
  {
    try
    {
      paramContext = com.tencent.beacon.upload.h.a(paramContext, paramBoolean);
      return paramContext;
    }
    finally
    {
      paramContext = finally;
      throw paramContext;
    }
  }
  
  private void a(int paramInt)
  {
    try
    {
      this.n = paramInt;
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private static boolean a(Context paramContext)
  {
    try
    {
      int i1 = Integer.parseInt(com.tencent.beacon.a.a.b(paramContext, "key_initsdktimes", "0"));
      String str = com.tencent.beacon.a.a.b(paramContext, "key_initsdkdate", "");
      if (!com.tencent.beacon.b.a.k().equals(str))
      {
        com.tencent.beacon.a.a.c(paramContext, com.tencent.beacon.b.a.k());
        i1 = 0;
      }
      if (i1 <= k)
      {
        com.tencent.beacon.a.a.b(paramContext, i1 + 1);
        return false;
      }
      bool = true;
      com.tencent.beacon.e.a.c(" set init times failed! ", new Object[0]);
    }
    catch (Exception paramContext)
    {
      try
      {
        com.tencent.beacon.e.a.e(" sdk init max times", new Object[0]);
        return true;
      }
      catch (Exception paramContext)
      {
        boolean bool;
        for (;;) {}
      }
      paramContext = paramContext;
      bool = false;
    }
    return bool;
  }
  
  public static boolean a(String paramString, boolean paramBoolean1, long paramLong1, long paramLong2, Map<String, String> paramMap, boolean paramBoolean2)
  {
    return a(paramString, paramBoolean1, paramLong1, paramLong2, paramMap, paramBoolean2, false);
  }
  
  public static boolean a(String paramString, boolean paramBoolean1, long paramLong1, long paramLong2, Map<String, String> paramMap, boolean paramBoolean2, boolean paramBoolean3)
  {
    com.tencent.beacon.e.a.e(" onUA: %s,%b,%d,%d,%b,%b", new Object[] { paramString, Boolean.valueOf(paramBoolean1), Long.valueOf(paramLong1), Long.valueOf(paramLong2), Boolean.valueOf(paramBoolean2), Boolean.valueOf(paramBoolean3) });
    p localP = d();
    if ((localP != null) && (!localP.o()))
    {
      localP.p.add(new f(paramString, paramBoolean1, paramLong1, paramLong2, paramMap, paramBoolean2));
      return true;
    }
    if (!k()) {
      return false;
    }
    if (localP.a.a(paramString))
    {
      com.tencent.beacon.e.a.c("onUserAction return false, because eventName:[%s] is not allowed in server strategy!", new Object[] { paramString });
      return false;
    }
    j localJ;
    if ((!paramBoolean1) || ((paramBoolean1) && (localP.a.b(paramString)))) {
      if (paramBoolean2) {
        localJ = localP.m();
      }
    }
    while (localJ != null)
    {
      return localJ.a(b.a(localP.c, paramString, paramBoolean1, paramLong1, paramLong2, paramMap, paramBoolean3));
      localJ = localP.l();
      continue;
      com.tencent.beacon.e.a.c("onUserAction return false, because eventName:[%s] is sampled by svr rate!", new Object[] { paramString });
      return false;
    }
    return false;
  }
  
  protected static boolean a(String paramString, boolean paramBoolean1, long paramLong1, long paramLong2, boolean paramBoolean2, d... paramVarArgs)
  {
    com.tencent.beacon.e.a.a(" onMergeUserActionCommon start", new Object[0]);
    if (paramVarArgs == null) {}
    for (int i1 = 0;; i1 = paramVarArgs.length)
    {
      com.tencent.beacon.e.a.e(" onMergeUserActionCommon:%s %b   elapase:%d  size:%d  isRealTime:%b  , items:%d", new Object[] { paramString, Boolean.valueOf(paramBoolean1), Long.valueOf(paramLong1), Long.valueOf(paramLong2), Boolean.valueOf(paramBoolean2), Integer.valueOf(i1) });
      if (k()) {
        break;
      }
      return false;
    }
    Object localObject = d();
    if (((p)localObject).a.a(paramString))
    {
      com.tencent.beacon.e.a.c("onMergeUserAction return false, because eventName:[%s] is not allowed in server strategy!", new Object[] { paramString });
      return false;
    }
    if (paramBoolean2) {}
    for (localObject = ((p)localObject).m(); localObject != null; localObject = ((p)localObject).l()) {
      return ((j)localObject).a(paramString, paramBoolean1, paramLong1, paramLong2, paramVarArgs);
    }
    return false;
  }
  
  public static boolean c(boolean paramBoolean)
  {
    p localP = d();
    if (localP == null) {
      com.tencent.beacon.e.a.c(" ua module not ready!", new Object[0]);
    }
    while (!k()) {
      return false;
    }
    return localP.d(paramBoolean);
  }
  
  public static p d()
  {
    try
    {
      p localP = f;
      return localP;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public static void e()
  {
    p localP = d();
    if ((localP != null) && (localP.c != null))
    {
      com.tencent.beacon.upload.h.a(localP.c, false);
      a("rqd_appexited", true, 0L, 0L, null, false, false);
    }
    for (;;)
    {
      if (localP != null) {
        localP.f(false);
      }
      return;
      com.tencent.beacon.e.a.d("onAppExited:ua is null", new Object[0]);
    }
  }
  
  private void e(boolean paramBoolean)
  {
    try
    {
      this.j = true;
      if ((com.tencent.beacon.a.b.c.a(this.c).a()) && (this.o != null)) {
        this.o.onStrategyQuerySuccess();
      }
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private void f(boolean paramBoolean)
  {
    try
    {
      if (paramBoolean != g())
      {
        j localJ = l();
        if (localJ != null) {
          localJ.a(paramBoolean);
        }
        localJ = m();
        if (localJ != null) {
          localJ.a(paramBoolean);
        }
        this.m = paramBoolean;
      }
      return;
    }
    finally {}
  }
  
  private static boolean k()
  {
    Object localObject = d();
    if (localObject == null)
    {
      com.tencent.beacon.e.a.d("isModuleAble:not init ua", new Object[0]);
      return false;
    }
    boolean bool2 = ((p)localObject).g();
    boolean bool1 = bool2;
    if (bool2)
    {
      bool1 = bool2;
      if (((p)localObject).n()) {
        bool1 = ((p)localObject).o();
      }
    }
    if (bool1)
    {
      g localG = ((p)localObject).a;
      if (localG != null)
      {
        localObject = com.tencent.beacon.a.h.f(((p)localObject).c);
        if (((com.tencent.beacon.a.a.e)localObject).k + ((com.tencent.beacon.a.a.e)localObject).j >= localG.g())
        {
          com.tencent.beacon.e.a.c(" reach daily consume limited! %d ", new Object[] { Integer.valueOf(localG.g()) });
          return false;
        }
      }
    }
    return bool1;
  }
  
  private j l()
  {
    try
    {
      j localJ = this.g;
      return localJ;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private j m()
  {
    try
    {
      j localJ = this.h;
      return localJ;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private boolean n()
  {
    try
    {
      boolean bool = this.i;
      return bool;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private boolean o()
  {
    try
    {
      boolean bool = this.j;
      return bool;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  private void p()
  {
    try
    {
      if ((this.p == null) || (this.p.size() <= 0)) {
        break label101;
      }
      Iterator localIterator = this.p.iterator();
      while (localIterator.hasNext())
      {
        f localF = (f)localIterator.next();
        a(localF.a, localF.b, localF.c, localF.d, localF.e, localF.f, false);
      }
      this.p.clear();
    }
    finally {}
    this.p = null;
    label101:
  }
  
  private void q()
  {
    try
    {
      if ((!g()) && (!this.a.m())) {
        return;
      }
      Object localObject = com.tencent.beacon.a.b.c.a(this.c);
      if (localObject != null)
      {
        localObject = ((com.tencent.beacon.a.b.c)localObject).d().b(1);
        if (localObject != null)
        {
          localObject = ((e.a)localObject).b();
          if ((localObject != null) && (!"".equals(((String)localObject).trim())))
          {
            new i(this.c).a(false);
            return;
          }
        }
      }
    }
    catch (Exception localException)
    {
      com.tencent.beacon.e.a.c(" startHeart failed! " + localException.getMessage(), new Object[0]);
    }
  }
  
  private void r()
  {
    if (com.tencent.beacon.a.g.a(this.c) == null)
    {
      com.tencent.beacon.e.a.c(" DeviceInfo == null?,return", new Object[0]);
      return;
    }
    HashMap localHashMap = new HashMap();
    localHashMap.put("A33", com.tencent.beacon.a.g.k(this.c));
    localHashMap.put("A63", "Y");
    if (com.tencent.beacon.a.a.c(this.c))
    {
      localHashMap.put("A21", "Y");
      label82:
      if (!com.tencent.beacon.a.b.c.a(this.c).f()) {
        break label280;
      }
      localHashMap.put("A45", "Y");
      label108:
      if (!com.tencent.beacon.a.a.g(this.c)) {
        break label296;
      }
      localHashMap.put("A66", "F");
    }
    for (;;)
    {
      localHashMap.put("A68", com.tencent.beacon.a.a.h(this.c));
      a("rqd_applaunched", true, 0L, 0L, localHashMap, true, false);
      try
      {
        if (!this.a.l()) {
          break;
        }
        int i1 = this.a.k();
        com.tencent.beacon.a.d.a().a(106, new h(this.c, i1), i1 * 1000, i1 * 1000);
        return;
      }
      catch (Exception localException)
      {
        com.tencent.beacon.e.a.c(" startAutoLaunchEvent failed! ", new Object[0]);
        com.tencent.beacon.e.a.b(" startAutoLaunchEvent failed! " + localException.getMessage(), new Object[0]);
        return;
      }
      localException.put("A21", "N");
      break label82;
      label280:
      localException.put("A45", "N");
      break label108;
      label296:
      localException.put("A66", "B");
    }
  }
  
  public final void a()
  {
    a(j() + 1);
  }
  
  public final void a(com.tencent.beacon.a.b.e paramE)
  {
    if (paramE != null)
    {
      paramE = paramE.b(1);
      if (paramE != null)
      {
        boolean bool = paramE.a();
        if (g() != bool)
        {
          com.tencent.beacon.e.a.f("UAR onCommonStrategyChange setUsable:%b ", new Object[] { Boolean.valueOf(bool) });
          f(bool);
        }
      }
    }
  }
  
  public final void a(Map<String, String> paramMap)
  {
    if ((paramMap != null) && (paramMap.size() > 0) && (this.a != null)) {
      this.a.a(paramMap);
    }
  }
  
  public final void a(boolean paramBoolean)
  {
    Object localObject = com.tencent.beacon.a.b.c.a(this.c);
    if (localObject != null)
    {
      localObject = ((com.tencent.beacon.a.b.c)localObject).d().b(1);
      if ((localObject != null) && (((e.a)localObject).a() != paramBoolean))
      {
        ((e.a)localObject).a(paramBoolean);
        if (paramBoolean != g()) {
          f(paramBoolean);
        }
      }
    }
  }
  
  public final boolean a(List<String> paramList)
  {
    com.tencent.beacon.e.a.a(" testSpeedIp start", new Object[0]);
    if (!k()) {
      return false;
    }
    if ((paramList == null) || (paramList.size() <= 0))
    {
      com.tencent.beacon.e.a.c(" ipList == null || ipList.size() <= 0", new Object[0]);
      return true;
    }
    paramList = new Runnable()
    {
      public final void run()
      {
        if (this.a != null)
        {
          com.tencent.beacon.e.a.b(" start to ip test:", new Object[0]);
          String[] arrayOfString = this.a;
          int j = arrayOfString.length;
          int i = 0;
          if (i < j)
          {
            String str = arrayOfString[i];
            com.tencent.beacon.e.a.b(" ip:" + str, new Object[0]);
            for (long l1 = -1L;; l1 = l2)
            {
              try
              {
                localObject = str.split(":");
                if ((localObject != null) && (localObject.length == 2)) {
                  break label186;
                }
                com.tencent.beacon.e.a.c(" ip wrong format ,not ip:port " + str, new Object[0]);
              }
              catch (Throwable localThrowable)
              {
                for (;;)
                {
                  Object localObject;
                  label186:
                  long l2;
                  localThrowable.printStackTrace();
                  continue;
                  boolean bool = false;
                }
              }
              com.tencent.beacon.e.a.b(" elapse:" + l1, new Object[0]);
              localObject = new HashMap(1);
              ((Map)localObject).put("A29", str);
              if (l1 <= 0L) {
                break label218;
              }
              bool = true;
              p.a("rqd_ipSpeed", bool, l1, 0L, (Map)localObject, true);
              i += 1;
              break;
              l2 = com.tencent.beacon.b.a.a(localObject[0], Integer.parseInt(localObject[1]));
            }
          }
        }
        label218:
      }
    };
    com.tencent.beacon.a.d.a().a(paramList);
    return true;
  }
  
  public final void b()
  {
    e(true);
    for (;;)
    {
      try
      {
        localObject = com.tencent.beacon.a.b.c.a(this.c).d();
        if (localObject != null) {
          continue;
        }
      }
      catch (Throwable localThrowable)
      {
        Object localObject;
        int i2;
        long l1;
        long l2;
        long l3;
        localThrowable.printStackTrace();
        com.tencent.beacon.e.a.d(" common query end error %s", new Object[] { localThrowable.toString() });
        continue;
        i1 = -1;
        break label871;
        i1 = 0;
        continue;
        com.tencent.beacon.e.a.b("event module is disable", new Object[0]);
        continue;
      }
      p();
      if (j() < 2)
      {
        if (this.o != null) {
          this.o.onInitEnd();
        }
        if ((com.tencent.beacon.upload.h.a(this.c).a()) && (com.tencent.beacon.a.i.a(this.c).a("sig_1")))
        {
          com.tencent.beacon.e.a.e(" get lock %s do singleton!", new Object[] { "sig_1" });
          if ((this.a.j()) || (this.a.v()))
          {
            i1 = this.a.i();
            i2 = this.a.h();
            if ((i1 > 0) && (i2 > 0))
            {
              localObject = new com.tencent.beacon.a.c(this.c, i1, i2, new o(this.c), this.a.j(), this.a.v(), this.a.u());
              com.tencent.beacon.a.d.a().a(104, (Runnable)localObject, i1 * 1000, i1 * 1000);
            }
          }
          if (com.tencent.beacon.upload.h.a(this.c).b())
          {
            q();
            r();
            localObject = com.tencent.beacon.a.h.b(this.c);
            if (localObject != null)
            {
              l1 = ((com.tencent.beacon.a.a.e)localObject).d;
              l2 = ((com.tencent.beacon.a.a.e)localObject).e;
              l3 = ((com.tencent.beacon.a.a.e)localObject).e;
              localObject = new HashMap();
              ((HashMap)localObject).put("A64", l1 + l2);
              ((HashMap)localObject).put("A65", l3);
              if (a("rqd_sdk_net_consumed", true, 0L, 0L, (Map)localObject, false, false)) {
                UserAction.clearSDKTotalConsume(this.c);
              }
            }
          }
        }
      }
      try
      {
        localObject = com.tencent.beacon.a.a.b(this.c, "rqd_model", "");
        boolean bool = com.tencent.beacon.applog.a.b().equals(localObject);
        if (!bool) {
          break label808;
        }
      }
      catch (Exception localException1)
      {
        Set localSet;
        com.tencent.beacon.e.a.c(" save modelEvent upload flag failed! ", new Object[0]);
        continue;
        Runnable local4 = new Runnable()
        {
          public final void run()
          {
            if (com.tencent.beacon.a.e.m() == null)
            {
              com.tencent.beacon.e.a.c(" model even common info == null?,return", new Object[0]);
              return;
            }
            Object localObject1 = n.a(p.this.c);
            if (localObject1 == null)
            {
              com.tencent.beacon.e.a.c(" UADeviceInfo == null?,return", new Object[0]);
              return;
            }
            Object localObject2 = com.tencent.beacon.a.g.a(p.this.c);
            HashMap localHashMap = new HashMap();
            localHashMap.put("A9", ((n)localObject1).k());
            localHashMap.put("A10", ((n)localObject1).b());
            localHashMap.put("A11", ((n)localObject1).h());
            localHashMap.put("A12", ((n)localObject1).i());
            localHashMap.put("A13", ((n)localObject1).j());
            localHashMap.put("A14", ((n)localObject1).f());
            localHashMap.put("A15", ((n)localObject1).g());
            localHashMap.put("A16", ((n)localObject1).d());
            localHashMap.put("A17", ((n)localObject1).c());
            localHashMap.put("A18", ((n)localObject1).e());
            localHashMap.put("A20", com.tencent.beacon.a.g.f(p.this.c));
            localHashMap.put("A22", n.b(p.this.c));
            localHashMap.put("A30", ((com.tencent.beacon.a.g)localObject2).i() + "m");
            localHashMap.put("A33", com.tencent.beacon.a.g.k(p.this.c));
            localHashMap.put("A52", ((n)localObject1).l());
            localHashMap.put("A53", ((n)localObject1).m());
            localHashMap.put("A54", ((n)localObject1).n());
            localHashMap.put("A55", ((n)localObject1).o());
            localHashMap.put("A56", ((n)localObject1).p());
            localHashMap.put("A57", ((n)localObject1).q());
            localHashMap.put("A58", ((n)localObject1).r());
            localObject2 = new StringBuilder();
            Context localContext = p.this.c;
            localObject1 = "0";
            long l = com.tencent.beacon.a.g.i(localContext);
            if (l > 0L) {
              localObject1 = l / 1024L / 1024L;
            }
            localHashMap.put("A59", (String)localObject1 + "m");
            localHashMap.put("A69", com.tencent.beacon.a.g.g(p.this.c));
            localObject1 = com.tencent.beacon.b.a.a(new String[] { "/system/bin/sh", "-c", "getprop ro.build.fingerprint" });
            if ((localObject1 != null) && (((List)localObject1).size() > 0)) {}
            for (localObject1 = (String)((List)localObject1).get(0);; localObject1 = "")
            {
              localHashMap.put("A82", localObject1);
              p.a("rqd_model", true, 0L, 0L, localHashMap, true);
              return;
            }
          }
        };
        com.tencent.beacon.a.d.a().a(local4, 50000L);
        try
        {
          com.tencent.beacon.a.a.a(this.c, "rqd_model", com.tencent.beacon.applog.a.b());
        }
        catch (Exception localException2)
        {
          com.tencent.beacon.e.a.c(" save modelEvent upload flag failed! ", new Object[0]);
          localException2.printStackTrace();
        }
        continue;
        i1 = 0;
        continue;
        if (i1 <= 0) {
          continue;
        }
        i1 = 1;
        continue;
      }
      if ((this.a.z()) || (this.a.A()))
      {
        this.d = new a(this.c, this.a.z(), this.a.A(), this.a.B(), this.a.C());
        if (this.a.A()) {
          new k(this.c).a();
        }
      }
      if (this.a.s())
      {
        i1 = Process.myUid();
        l1 = TrafficStats.getUidRxBytes(i1);
        l2 = TrafficStats.getUidTxBytes(i1);
        if ((l1 == -1L) || (l2 == -1L)) {
          break label866;
        }
        i1 = 1;
        if (i1 != 0)
        {
          localObject = new Runnable()
          {
            public final void run()
            {
              p.a(p.this);
            }
          };
          com.tencent.beacon.a.d.a().a((Runnable)localObject, 50000L);
          i1 = this.a.t();
          if (i1 > 0)
          {
            localObject = new com.tencent.beacon.a.b(this.c);
            com.tencent.beacon.a.d.a().a(107, (Runnable)localObject, 0L, i1 * 1000);
          }
        }
      }
      if (!this.a.D()) {
        this.e.a = false;
      }
      return;
      localObject = ((com.tencent.beacon.a.b.e)localObject).b(1);
      if ((localObject != null) && (this.a != null))
      {
        localSet = ((e.a)localObject).d();
        if ((localSet != null) && (localSet.size() > 0)) {
          this.a.a(localSet);
        }
        localSet = ((e.a)localObject).g();
        if ((localSet != null) && (localSet.size() > 0)) {
          this.a.b(localSet);
        }
      }
      if ((!g()) || (localObject == null)) {
        continue;
      }
      if (!g()) {
        continue;
      }
      i1 = com.tencent.beacon.applog.a.g(this.c);
      break label871;
      if (i1 != 0)
      {
        com.tencent.beacon.e.a.e(" asyn up module %d", new Object[] { Integer.valueOf(1) });
        com.tencent.beacon.a.d.a().a(new Runnable()
        {
          public final void run()
          {
            p.this.d(true);
          }
        });
      }
    }
  }
  
  public final void b(boolean paramBoolean)
  {
    if ((com.tencent.beacon.upload.h.a(this.c) != null) && (paramBoolean != com.tencent.beacon.upload.h.a(this.c).b()))
    {
      if (paramBoolean)
      {
        com.tencent.beacon.upload.h.a(this.c).a(true);
        q();
        r();
      }
    }
    else {
      return;
    }
    com.tencent.beacon.upload.h.a(this.c).a(false);
    Context localContext = this.c;
    com.tencent.beacon.a.d.a().a(108, true);
    com.tencent.beacon.a.a.a(localContext, "HEART_DENGTA", com.tencent.beacon.b.a.k());
    com.tencent.beacon.e.a.a("heartbeat uploaded sucess!", new Object[0]);
  }
  
  public final boolean b(List<String> paramList)
  {
    if (!k()) {
      return false;
    }
    if ((paramList == null) || (paramList.size() <= 0))
    {
      com.tencent.beacon.e.a.c(" dnsList == null || dnsList.size() <= 0", new Object[0]);
      return true;
    }
    paramList = new Runnable()
    {
      public final void run()
      {
        int i;
        String str;
        a.b localB;
        if (this.a != null)
        {
          com.tencent.beacon.e.a.b(" start domain test:", new Object[0]);
          String[] arrayOfString = this.a;
          int j = arrayOfString.length;
          i = 0;
          if (i < j)
          {
            str = arrayOfString[i];
            com.tencent.beacon.e.a.b(" dns:" + str, new Object[0]);
            localB = com.tencent.beacon.b.a.a(str, false);
            if (localB != null) {
              break label77;
            }
          }
        }
        return;
        label77:
        long l = localB.a + localB.b + localB.c + localB.d + localB.e;
        com.tencent.beacon.e.a.b(" elapse:" + l, new Object[0]);
        HashMap localHashMap = new HashMap(1);
        localHashMap.put("A34", str);
        localHashMap.put("A35", String.valueOf(localB.a));
        localHashMap.put("A36", String.valueOf(localB.c));
        localHashMap.put("A37", String.valueOf(localB.d));
        localHashMap.put("A38", String.valueOf(localB.e));
        localHashMap.put("A40", String.valueOf(localB.b));
        if (l > 0L) {}
        for (boolean bool = true;; bool = false)
        {
          p.a("rqd_domainSpeed", bool, l, 0L, localHashMap, true);
          i += 1;
          break;
        }
      }
    };
    com.tencent.beacon.e.a.a(" post the test task", new Object[0]);
    com.tencent.beacon.a.d.a().a(paramList);
    return true;
  }
  
  public final void c()
  {
    Context localContext = this.c;
    com.tencent.beacon.e.a.a(" RecordDAO.deleteRecords() start", new Object[0]);
    com.tencent.beacon.e.a.e(" ua first clean :%d", new Object[] { Integer.valueOf(com.tencent.beacon.a.a.a.a(localContext, new int[] { 1, 2, 3, 4 }, -1L, Long.MAX_VALUE)) });
    com.tencent.beacon.e.a.e(" ua remove strategy :%d", new Object[] { Integer.valueOf(com.tencent.beacon.applog.a.b(this.c, 101)) });
  }
  
  public final boolean d(boolean paramBoolean)
  {
    if (g()) {}
    for (int i1 = com.tencent.beacon.applog.a.g(this.c);; i1 = -1)
    {
      if (i1 <= 0) {
        break label82;
      }
      try
      {
        if (this.l != null)
        {
          c localC = new c(this.c);
          localC.b(paramBoolean);
          this.l.a(localC);
        }
        return true;
      }
      catch (Throwable localThrowable)
      {
        com.tencent.beacon.e.a.c(" up common error: %s", new Object[] { localThrowable.toString() });
        localThrowable.printStackTrace();
      }
    }
    label82:
    return false;
  }
  
  public final void f()
  {
    com.tencent.beacon.e.a.a(" closeUseInfoEvent start", new Object[0]);
    try
    {
      this.a.a(false);
      com.tencent.beacon.a.d.a().a(104, true);
      return;
    }
    catch (Exception localException)
    {
      com.tencent.beacon.e.a.d(" closeUseInfoEvent function error:" + localException.getMessage(), new Object[0]);
    }
  }
  
  public final boolean g()
  {
    try
    {
      boolean bool = this.m;
      return bool;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public final com.tencent.beacon.upload.g h()
  {
    return this.l;
  }
  
  public final g i()
  {
    return this.a;
  }
  
  public final int j()
  {
    try
    {
      int i1 = this.n;
      return i1;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
}
