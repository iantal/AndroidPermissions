package com.tencent.tmassistantbase.util;

import android.content.Context;
import android.os.Environment;
import android.os.Handler;
import android.os.Looper;
import android.text.TextUtils;
import android.util.Log;
import java.io.BufferedWriter;
import java.io.File;
import java.io.IOException;
import java.lang.reflect.Field;
import java.text.SimpleDateFormat;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.locks.ReentrantLock;

public class TMLog
{
  protected static final long INTERNAL = 60000L;
  protected static final int[] INTERVAL_RETRY_INIT;
  protected static final String LOG_CONFIG_FILE_PATH = "/tencent/TMAssistantSDK/Logs/logConfig.properties";
  protected static final String LOG_DIR_PATH = "/tencent/TMAssistantSDK/Logs/";
  protected static final long LOG_FILE_LENTH = 512000L;
  protected static final String LOG_FILE_NAME_SUFFIX = "_tmlog.txt";
  public static final String PROP_DIR_PATH = "logDirPath";
  public static final String PROP_IS_APPEND_LOG_TIME = "isAppendLogTime";
  public static final String PROP_IS_APPEND_METHOD_NAME = "isAppendMethodName";
  public static final String PROP_IS_USE_WRITER_CACHE = "isUseWriterCache";
  public static final String PROP_IS_WRITE_FILE = "isWriteLogToFile";
  public static final String PROP_LOGCAT_LEVEL = "logcatOutputLevel";
  public static final String PROP_LOG_FILE_LEVEL = "logfileOutputLevel";
  protected static final String TAG = "TMLog";
  static LinkedBlockingQueue a;
  protected static Runnable acutualInitRunnable = new TMLog.2();
  static long b = 0L;
  static final ReentrantLock c;
  protected static Context context;
  static Thread d = new TMLog.3();
  protected static boolean isAppendLogTime = false;
  protected static boolean isAppendMethodName = false;
  protected static final boolean isDebug = true;
  protected static AtomicBoolean isInitLogFileDone;
  protected static boolean isInited;
  protected static AtomicBoolean isPreExceptionEnospc;
  protected static boolean isUseWriterCache;
  protected static boolean isWriteLogToFile = true;
  protected static long lastLogTime;
  protected static String logDirPath = "";
  protected static String logTime;
  protected static int logcatOutputLevel = 2;
  protected static int logfileOutputLevel = 4;
  protected static int myProcessId;
  private static Boolean needGetField;
  protected static String packageName;
  protected static Handler retryInitHandler;
  protected static AtomicInteger retryInitTimes;
  private static ThreadLocal stringBuilderCharBuffer;
  private static Field stringBuilderValueField;
  protected static SimpleDateFormat timeFormatter;
  protected static BufferedWriter writer;
  
  static
  {
    isUseWriterCache = true;
    isAppendMethodName = false;
    isAppendLogTime = false;
    isInited = false;
    b = 0L;
    c = new ReentrantLock();
    packageName = "";
    logTime = "";
    lastLogTime = 0L;
    timeFormatter = new SimpleDateFormat("yy-MM-dd HH:mm");
    isPreExceptionEnospc = new AtomicBoolean(false);
    isInitLogFileDone = new AtomicBoolean(false);
    INTERVAL_RETRY_INIT = new int[] { 1, 2, 4, 8, 16, 29 };
    retryInitTimes = new AtomicInteger(0);
    retryInitHandler = new Handler(Looper.getMainLooper());
    needGetField = Boolean.valueOf(true);
    stringBuilderCharBuffer = new TMLog.1();
  }
  
  public TMLog() {}
  
  private static void addLogItem(int paramInt, String paramString1, String paramString2, Throwable paramThrowable)
  {
    if (!isWriteLogToFile()) {}
    do
    {
      return;
      long l = Thread.currentThread().getId();
      StringBuilder localStringBuilder = obtainStringBuilder();
      if (isAppendLogTime()) {
        localStringBuilder.append(getLogTime()).append("|");
      }
      localStringBuilder.append(getReportLevelString(paramInt)).append("|pid=").append(myProcessId).append("|tid=").append(String.valueOf(l)).append("|").append(paramString1).append("|").append(paramString2).append("\n");
      paramString1 = localStringBuilder;
      if (paramThrowable != null) {
        paramString1 = localStringBuilder.append("\n").append(Log.getStackTraceString(paramThrowable)).append("\n");
      }
    } while (addLogToCache(paramString1.toString()));
    Log.d("TMLog", "addLogToCache failed!");
  }
  
  private static boolean addLogToCache(String paramString)
  {
    try
    {
      a.add(paramString);
      return true;
    }
    catch (Exception paramString) {}
    return false;
  }
  
  public static void closeALLLog()
  {
    setLogcatOutputLevel(7);
    setLogfileOutputLevel(7);
  }
  
  public static void d(String paramString1, String paramString2)
  {
    log(3, paramString1, paramString2, null);
  }
  
  public static void d(String paramString1, String paramString2, Throwable paramThrowable)
  {
    log(3, paramString1, paramString2, paramThrowable);
  }
  
  public static void e(String paramString1, String paramString2)
  {
    log(6, paramString1, paramString2, null);
  }
  
  public static void e(String paramString1, String paramString2, Throwable paramThrowable)
  {
    log(6, paramString1, paramString2, paramThrowable);
  }
  
  public static String getLogDirPath()
  {
    if (TextUtils.isEmpty(logDirPath)) {
      logDirPath = Environment.getExternalStorageDirectory().getPath() + "/tencent/TMAssistantSDK/Logs/";
    }
    return logDirPath;
  }
  
  public static String getLogTime()
  {
    long l = System.currentTimeMillis();
    if (l - lastLogTime > 60000L)
    {
      lastLogTime = l;
      logTime = timeFormatter.format(Long.valueOf(lastLogTime));
    }
    return logTime;
  }
  
  public static int getLogcatOutputLevel()
  {
    return logcatOutputLevel;
  }
  
  public static int getLogfileOutputLevel()
  {
    return logfileOutputLevel;
  }
  
  private static String getReportLevelString(int paramInt)
  {
    switch (paramInt)
    {
    default: 
      return "D";
    case 2: 
      return "V";
    case 3: 
      return "D";
    case 4: 
      return "I";
    case 5: 
      return "W";
    }
    return "E";
  }
  
  public static void i(String paramString1, String paramString2)
  {
    log(4, paramString1, paramString2, null);
  }
  
  public static void i(String paramString1, String paramString2, Throwable paramThrowable)
  {
    log(4, paramString1, paramString2, paramThrowable);
  }
  
  /* Error */
  private static void initLogFile()
  {
    // Byte code:
    //   0: ldc 2
    //   2: monitorenter
    //   3: ldc 47
    //   5: ldc_w 340
    //   8: invokestatic 264	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   11: pop
    //   12: new 306	java/io/File
    //   15: dup
    //   16: invokestatic 342	com/tencent/tmassistantbase/util/TMLog:getLogDirPath	()Ljava/lang/String;
    //   19: invokespecial 343	java/io/File:<init>	(Ljava/lang/String;)V
    //   22: astore_1
    //   23: aload_1
    //   24: invokevirtual 346	java/io/File:exists	()Z
    //   27: ifne +8 -> 35
    //   30: aload_1
    //   31: invokevirtual 349	java/io/File:mkdirs	()Z
    //   34: pop
    //   35: new 306	java/io/File
    //   38: dup
    //   39: new 220	java/lang/StringBuilder
    //   42: dup
    //   43: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   46: invokestatic 342	com/tencent/tmassistantbase/util/TMLog:getLogDirPath	()Ljava/lang/String;
    //   49: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   52: getstatic 118	com/tencent/tmassistantbase/util/TMLog:packageName	Ljava/lang/String;
    //   55: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   58: ldc 23
    //   60: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   63: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   66: invokespecial 343	java/io/File:<init>	(Ljava/lang/String;)V
    //   69: astore_1
    //   70: aload_1
    //   71: invokevirtual 346	java/io/File:exists	()Z
    //   74: ifne +142 -> 216
    //   77: aload_1
    //   78: invokevirtual 352	java/io/File:createNewFile	()Z
    //   81: istore_0
    //   82: invokestatic 355	com/tencent/tmassistantbase/util/TMLog:writeVersionToFile	()V
    //   85: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   88: ifnull +99 -> 187
    //   91: invokestatic 198	com/tencent/tmassistantbase/util/TMLog:isWriteLogToFile	()Z
    //   94: ifeq +93 -> 187
    //   97: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   100: new 220	java/lang/StringBuilder
    //   103: dup
    //   104: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   107: invokestatic 218	com/tencent/tmassistantbase/util/TMLog:getLogTime	()Ljava/lang/String;
    //   110: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   113: ldc -30
    //   115: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   118: getstatic 118	com/tencent/tmassistantbase/util/TMLog:packageName	Ljava/lang/String;
    //   121: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   124: ldc -30
    //   126: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   129: getstatic 362	android/os/Build:MODEL	Ljava/lang/String;
    //   132: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   135: ldc_w 364
    //   138: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   141: getstatic 369	android/os/Build$VERSION:RELEASE	Ljava/lang/String;
    //   144: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   147: ldc_w 371
    //   150: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   153: aload_1
    //   154: invokevirtual 374	java/io/File:getName	()Ljava/lang/String;
    //   157: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   160: ldc_w 364
    //   163: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   166: iload_0
    //   167: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   170: ldc -10
    //   172: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   175: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   178: invokevirtual 382	java/io/BufferedWriter:write	(Ljava/lang/String;)V
    //   181: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   184: invokevirtual 385	java/io/BufferedWriter:flush	()V
    //   187: new 379	java/io/BufferedWriter
    //   190: dup
    //   191: new 387	java/io/FileWriter
    //   194: dup
    //   195: aload_1
    //   196: iconst_1
    //   197: invokespecial 390	java/io/FileWriter:<init>	(Ljava/io/File;Z)V
    //   200: sipush 8192
    //   203: invokespecial 393	java/io/BufferedWriter:<init>	(Ljava/io/Writer;I)V
    //   206: putstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   209: invokestatic 355	com/tencent/tmassistantbase/util/TMLog:writeVersionToFile	()V
    //   212: ldc 2
    //   214: monitorexit
    //   215: return
    //   216: aload_1
    //   217: invokevirtual 396	java/io/File:length	()J
    //   220: ldc2_w 19
    //   223: lcmp
    //   224: iflt +48 -> 272
    //   227: aload_1
    //   228: invokevirtual 399	java/io/File:delete	()Z
    //   231: pop
    //   232: aload_1
    //   233: invokevirtual 352	java/io/File:createNewFile	()Z
    //   236: pop
    //   237: ldc 47
    //   239: new 220	java/lang/StringBuilder
    //   242: dup
    //   243: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   246: ldc_w 401
    //   249: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   252: aload_1
    //   253: invokevirtual 374	java/io/File:getName	()Ljava/lang/String;
    //   256: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   259: ldc_w 403
    //   262: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   265: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   268: invokestatic 264	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   271: pop
    //   272: invokestatic 355	com/tencent/tmassistantbase/util/TMLog:writeVersionToFile	()V
    //   275: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   278: ifnull -91 -> 187
    //   281: invokestatic 198	com/tencent/tmassistantbase/util/TMLog:isWriteLogToFile	()Z
    //   284: ifeq -97 -> 187
    //   287: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   290: new 220	java/lang/StringBuilder
    //   293: dup
    //   294: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   297: invokestatic 218	com/tencent/tmassistantbase/util/TMLog:getLogTime	()Ljava/lang/String;
    //   300: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   303: ldc -30
    //   305: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   308: getstatic 118	com/tencent/tmassistantbase/util/TMLog:packageName	Ljava/lang/String;
    //   311: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   314: ldc -30
    //   316: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   319: getstatic 362	android/os/Build:MODEL	Ljava/lang/String;
    //   322: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   325: ldc_w 364
    //   328: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   331: getstatic 369	android/os/Build$VERSION:RELEASE	Ljava/lang/String;
    //   334: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   337: ldc_w 405
    //   340: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   343: aload_1
    //   344: invokevirtual 374	java/io/File:getName	()Ljava/lang/String;
    //   347: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   350: ldc_w 407
    //   353: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   356: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   359: invokevirtual 382	java/io/BufferedWriter:write	(Ljava/lang/String;)V
    //   362: getstatic 357	com/tencent/tmassistantbase/util/TMLog:writer	Ljava/io/BufferedWriter;
    //   365: invokevirtual 385	java/io/BufferedWriter:flush	()V
    //   368: goto -181 -> 187
    //   371: astore_2
    //   372: aload_2
    //   373: invokevirtual 410	java/lang/Throwable:printStackTrace	()V
    //   376: goto -189 -> 187
    //   379: astore_1
    //   380: ldc 2
    //   382: monitorexit
    //   383: aload_1
    //   384: athrow
    // Local variable table:
    //   start	length	slot	name	signature
    //   81	86	0	bool	boolean
    //   22	322	1	localFile	File
    //   379	5	1	localObject	Object
    //   371	2	2	localThrowable	Throwable
    // Exception table:
    //   from	to	target	type
    //   70	187	371	java/lang/Throwable
    //   216	272	371	java/lang/Throwable
    //   272	368	371	java/lang/Throwable
    //   3	35	379	finally
    //   35	70	379	finally
    //   70	187	379	finally
    //   187	212	379	finally
    //   216	272	379	finally
    //   272	368	379	finally
    //   372	376	379	finally
  }
  
  public static void initTMLog(Context paramContext)
  {
    try
    {
      if (!isInited)
      {
        context = paramContext;
        acutualInitRunnable.run();
        isInited = true;
      }
      return;
    }
    finally
    {
      paramContext = finally;
      throw paramContext;
    }
  }
  
  public static boolean isAppendLogTime()
  {
    return isAppendLogTime;
  }
  
  public static boolean isAppendMethodName()
  {
    return isAppendMethodName;
  }
  
  public static boolean isForDebug()
  {
    return true;
  }
  
  public static boolean isUseWriterCache()
  {
    return isUseWriterCache;
  }
  
  public static boolean isWriteLogToFile()
  {
    return isWriteLogToFile;
  }
  
  private static void log(int paramInt, String paramString1, String paramString2, Throwable paramThrowable)
  {
    if ((paramInt < getLogfileOutputLevel()) && (paramInt < getLogcatOutputLevel())) {}
    label121:
    label137:
    label153:
    label186:
    label197:
    label208:
    label219:
    label230:
    label239:
    for (;;)
    {
      return;
      String str = paramString2;
      if (isAppendMethodName())
      {
        str = Thread.currentThread().getStackTrace()[4].getMethodName();
        StringBuilder localStringBuilder = new StringBuilder();
        localStringBuilder.append(str).append("|").append(paramString2);
        str = localStringBuilder.toString();
      }
      if (paramInt >= getLogcatOutputLevel())
      {
        if ((paramInt == 2) && (isForDebug()))
        {
          if (paramThrowable != null) {
            break label186;
          }
          Log.v(paramString1, str);
        }
        if ((paramInt == 3) && (isForDebug()))
        {
          if (paramThrowable != null) {
            break label197;
          }
          Log.d(paramString1, str);
        }
        if (paramInt == 4)
        {
          if (paramThrowable != null) {
            break label208;
          }
          Log.i(paramString1, str);
        }
        if (paramInt == 5)
        {
          if (paramThrowable != null) {
            break label219;
          }
          Log.w(paramString1, str);
        }
        if (paramInt == 6)
        {
          if (paramThrowable != null) {
            break label230;
          }
          Log.e(paramString1, str);
        }
      }
      for (;;)
      {
        if (paramInt < getLogfileOutputLevel()) {
          break label239;
        }
        addLogItem(paramInt, paramString1, str, paramThrowable);
        return;
        Log.v(paramString1, str, paramThrowable);
        break;
        Log.d(paramString1, str, paramThrowable);
        break label121;
        Log.i(paramString1, str, paramThrowable);
        break label137;
        Log.w(paramString1, str, paramThrowable);
        break label153;
        Log.e(paramString1, str, paramThrowable);
      }
    }
  }
  
  private static StringBuilder obtainStringBuilder()
  {
    StringBuilder localStringBuilder = new StringBuilder();
    try
    {
      if (needGetField.booleanValue())
      {
        stringBuilderValueField = StringBuilder.class.getSuperclass().getDeclaredField("value");
        stringBuilderValueField.setAccessible(true);
        needGetField = Boolean.valueOf(false);
      }
      if (stringBuilderValueField != null) {
        stringBuilderValueField.set(localStringBuilder, stringBuilderCharBuffer.get());
      }
      return localStringBuilder;
    }
    catch (Exception localException) {}
    return localStringBuilder;
  }
  
  /* Error */
  private static void readLocalConfig()
  {
    // Byte code:
    //   0: ldc_w 498
    //   3: invokestatic 501	android/os/Environment:getExternalStorageState	()Ljava/lang/String;
    //   6: invokevirtual 504	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   9: ifeq +456 -> 465
    //   12: new 506	java/util/Properties
    //   15: dup
    //   16: invokespecial 507	java/util/Properties:<init>	()V
    //   19: astore_1
    //   20: new 306	java/io/File
    //   23: dup
    //   24: new 220	java/lang/StringBuilder
    //   27: dup
    //   28: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   31: invokestatic 304	android/os/Environment:getExternalStorageDirectory	()Ljava/io/File;
    //   34: invokevirtual 309	java/io/File:getPath	()Ljava/lang/String;
    //   37: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   40: ldc 14
    //   42: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   45: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   48: invokespecial 343	java/io/File:<init>	(Ljava/lang/String;)V
    //   51: astore_2
    //   52: aload_2
    //   53: invokevirtual 346	java/io/File:exists	()Z
    //   56: ifne +4 -> 60
    //   59: return
    //   60: aload_1
    //   61: new 509	java/io/FileInputStream
    //   64: dup
    //   65: aload_2
    //   66: invokespecial 512	java/io/FileInputStream:<init>	(Ljava/io/File;)V
    //   69: invokevirtual 516	java/util/Properties:load	(Ljava/io/InputStream;)V
    //   72: aload_1
    //   73: ldc 38
    //   75: ldc 93
    //   77: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   80: astore_2
    //   81: aload_2
    //   82: invokevirtual 523	java/lang/String:trim	()Ljava/lang/String;
    //   85: ldc_w 525
    //   88: invokevirtual 504	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   91: ifeq +333 -> 424
    //   94: iconst_1
    //   95: invokestatic 528	com/tencent/tmassistantbase/util/TMLog:setWriteLogToFile	(Z)V
    //   98: aload_1
    //   99: ldc 44
    //   101: ldc 93
    //   103: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   106: astore_3
    //   107: aload_3
    //   108: invokestatic 297	android/text/TextUtils:isEmpty	(Ljava/lang/CharSequence;)Z
    //   111: istore_0
    //   112: iload_0
    //   113: ifne +13 -> 126
    //   116: aload_3
    //   117: invokestatic 533	java/lang/Integer:valueOf	(Ljava/lang/String;)Ljava/lang/Integer;
    //   120: invokevirtual 536	java/lang/Integer:intValue	()I
    //   123: invokestatic 284	com/tencent/tmassistantbase/util/TMLog:setLogfileOutputLevel	(I)V
    //   126: aload_1
    //   127: ldc 41
    //   129: ldc 93
    //   131: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   134: astore 4
    //   136: aload 4
    //   138: invokestatic 297	android/text/TextUtils:isEmpty	(Ljava/lang/CharSequence;)Z
    //   141: istore_0
    //   142: iload_0
    //   143: ifne +14 -> 157
    //   146: aload 4
    //   148: invokestatic 533	java/lang/Integer:valueOf	(Ljava/lang/String;)Ljava/lang/Integer;
    //   151: invokevirtual 536	java/lang/Integer:intValue	()I
    //   154: invokestatic 281	com/tencent/tmassistantbase/util/TMLog:setLogcatOutputLevel	(I)V
    //   157: aload_1
    //   158: ldc 26
    //   160: ldc 93
    //   162: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   165: astore 5
    //   167: aload 5
    //   169: invokestatic 539	com/tencent/tmassistantbase/util/TMLog:setLogDirPath	(Ljava/lang/String;)V
    //   172: aload_1
    //   173: ldc 35
    //   175: ldc 93
    //   177: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   180: astore 6
    //   182: aload 6
    //   184: invokevirtual 523	java/lang/String:trim	()Ljava/lang/String;
    //   187: ldc_w 541
    //   190: invokevirtual 504	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   193: ifeq +258 -> 451
    //   196: iconst_0
    //   197: invokestatic 544	com/tencent/tmassistantbase/util/TMLog:setUseWriterCache	(Z)V
    //   200: aload_1
    //   201: ldc 29
    //   203: ldc 93
    //   205: invokevirtual 520	java/util/Properties:getProperty	(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
    //   208: invokevirtual 523	java/lang/String:trim	()Ljava/lang/String;
    //   211: ldc_w 525
    //   214: invokevirtual 504	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   217: ifeq +241 -> 458
    //   220: iconst_1
    //   221: invokestatic 547	com/tencent/tmassistantbase/util/TMLog:setAppendLogTime	(Z)V
    //   224: ldc 47
    //   226: new 220	java/lang/StringBuilder
    //   229: dup
    //   230: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   233: ldc_w 549
    //   236: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   239: aload_2
    //   240: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   243: ldc_w 551
    //   246: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   249: aload_3
    //   250: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   253: ldc_w 553
    //   256: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   259: aload 4
    //   261: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   264: ldc_w 555
    //   267: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   270: aload 5
    //   272: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   275: ldc_w 557
    //   278: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   281: aload 6
    //   283: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   286: ldc_w 559
    //   289: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   292: invokestatic 426	com/tencent/tmassistantbase/util/TMLog:isAppendMethodName	()Z
    //   295: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   298: ldc_w 561
    //   301: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   304: invokestatic 214	com/tencent/tmassistantbase/util/TMLog:isAppendLogTime	()Z
    //   307: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   310: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   313: invokestatic 264	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   316: pop
    //   317: ldc 47
    //   319: new 220	java/lang/StringBuilder
    //   322: dup
    //   323: invokespecial 298	java/lang/StringBuilder:<init>	()V
    //   326: ldc_w 563
    //   329: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   332: invokestatic 198	com/tencent/tmassistantbase/util/TMLog:isWriteLogToFile	()Z
    //   335: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   338: ldc_w 551
    //   341: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   344: invokestatic 422	com/tencent/tmassistantbase/util/TMLog:getLogfileOutputLevel	()I
    //   347: invokevirtual 237	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   350: ldc_w 553
    //   353: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   356: invokestatic 424	com/tencent/tmassistantbase/util/TMLog:getLogcatOutputLevel	()I
    //   359: invokevirtual 237	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   362: ldc_w 555
    //   365: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   368: invokestatic 342	com/tencent/tmassistantbase/util/TMLog:getLogDirPath	()Ljava/lang/String;
    //   371: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   374: ldc_w 557
    //   377: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   380: invokestatic 565	com/tencent/tmassistantbase/util/TMLog:isUseWriterCache	()Z
    //   383: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   386: ldc_w 559
    //   389: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   392: invokestatic 426	com/tencent/tmassistantbase/util/TMLog:isAppendMethodName	()Z
    //   395: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   398: ldc_w 561
    //   401: invokevirtual 224	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   404: invokestatic 214	com/tencent/tmassistantbase/util/TMLog:isAppendLogTime	()Z
    //   407: invokevirtual 377	java/lang/StringBuilder:append	(Z)Ljava/lang/StringBuilder;
    //   410: invokevirtual 255	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   413: invokestatic 264	android/util/Log:d	(Ljava/lang/String;Ljava/lang/String;)I
    //   416: pop
    //   417: return
    //   418: astore_1
    //   419: aload_1
    //   420: invokevirtual 566	java/io/IOException:printStackTrace	()V
    //   423: return
    //   424: iconst_0
    //   425: invokestatic 528	com/tencent/tmassistantbase/util/TMLog:setWriteLogToFile	(Z)V
    //   428: goto -330 -> 98
    //   431: astore 4
    //   433: aload 4
    //   435: invokevirtual 567	java/lang/NumberFormatException:printStackTrace	()V
    //   438: goto -312 -> 126
    //   441: astore 5
    //   443: aload 5
    //   445: invokevirtual 567	java/lang/NumberFormatException:printStackTrace	()V
    //   448: goto -291 -> 157
    //   451: iconst_1
    //   452: invokestatic 544	com/tencent/tmassistantbase/util/TMLog:setUseWriterCache	(Z)V
    //   455: goto -255 -> 200
    //   458: iconst_0
    //   459: invokestatic 547	com/tencent/tmassistantbase/util/TMLog:setAppendLogTime	(Z)V
    //   462: goto -238 -> 224
    //   465: iconst_0
    //   466: invokestatic 528	com/tencent/tmassistantbase/util/TMLog:setWriteLogToFile	(Z)V
    //   469: return
    // Local variable table:
    //   start	length	slot	name	signature
    //   111	32	0	bool	boolean
    //   19	182	1	localProperties	java.util.Properties
    //   418	2	1	localIOException	IOException
    //   51	189	2	localObject	Object
    //   106	144	3	str1	String
    //   134	126	4	str2	String
    //   431	3	4	localNumberFormatException1	NumberFormatException
    //   165	106	5	str3	String
    //   441	3	5	localNumberFormatException2	NumberFormatException
    //   180	102	6	str4	String
    // Exception table:
    //   from	to	target	type
    //   20	59	418	java/io/IOException
    //   60	98	418	java/io/IOException
    //   98	112	418	java/io/IOException
    //   116	126	418	java/io/IOException
    //   126	142	418	java/io/IOException
    //   146	157	418	java/io/IOException
    //   157	200	418	java/io/IOException
    //   200	224	418	java/io/IOException
    //   224	417	418	java/io/IOException
    //   424	428	418	java/io/IOException
    //   433	438	418	java/io/IOException
    //   443	448	418	java/io/IOException
    //   451	455	418	java/io/IOException
    //   458	462	418	java/io/IOException
    //   116	126	431	java/lang/NumberFormatException
    //   146	157	441	java/lang/NumberFormatException
  }
  
  public static void setAppendLogTime(boolean paramBoolean)
  {
    isAppendLogTime = paramBoolean;
  }
  
  public static void setAppendMethodName(boolean paramBoolean)
  {
    isAppendMethodName = paramBoolean;
  }
  
  public static void setLogDirPath(String paramString)
  {
    if ((!TextUtils.isEmpty(paramString)) && (paramString.startsWith("/")) && (paramString.endsWith("/"))) {
      logDirPath = paramString;
    }
  }
  
  public static void setLogcatOutputLevel(int paramInt)
  {
    logcatOutputLevel = paramInt;
  }
  
  public static void setLogfileOutputLevel(int paramInt)
  {
    logfileOutputLevel = paramInt;
  }
  
  public static void setUseWriterCache(boolean paramBoolean)
  {
    isUseWriterCache = paramBoolean;
  }
  
  public static void setWriteLogToFile(boolean paramBoolean)
  {
    isWriteLogToFile = paramBoolean;
  }
  
  public static void v(String paramString1, String paramString2)
  {
    log(2, paramString1, paramString2, null);
  }
  
  public static void v(String paramString1, String paramString2, Throwable paramThrowable)
  {
    log(2, paramString1, paramString2, paramThrowable);
  }
  
  public static void w(String paramString1, String paramString2)
  {
    log(5, paramString1, paramString2, null);
  }
  
  public static void w(String paramString1, String paramString2, Throwable paramThrowable)
  {
    log(5, paramString1, paramString2, paramThrowable);
  }
  
  private static void writeLogToFile(String paramString)
  {
    if (!isWriteLogToFile()) {
      return;
    }
    long l;
    if (writer == null)
    {
      Log.d("TMLog", "can not write log.");
      l = System.currentTimeMillis();
      if (b == 0L) {
        b = l;
      }
    }
    for (;;)
    {
      isPreExceptionEnospc.compareAndSet(true, false);
      return;
      if (l - b > 60000L)
      {
        try
        {
          initLogFile();
          b = l;
        }
        catch (IOException paramString)
        {
          for (;;)
          {
            paramString.printStackTrace();
          }
        }
        if (c.tryLock()) {}
        try
        {
          writer.write(paramString);
          if (!isUseWriterCache()) {
            writer.flush();
          }
          c.unlock();
        }
        finally
        {
          c.unlock();
        }
        Log.d("TMLog", "addLogToCache failed!");
      }
    }
  }
  
  private static void writeVersionToFile()
  {
    if ((writer != null) && (isWriteLogToFile()))
    {
      writer.write("SDK_VERSION = 1.0|BUILD_NO = {BuildNo}|RELEASE_DATE: {ReleaseDate}\r\n");
      writer.flush();
    }
  }
}
