package com.tencent.msdk.weixin;

import com.tencent.msdk.WeGame;
import com.tencent.msdk.api.LoginRet;
import com.tencent.msdk.login.LoginUtils;
import com.tencent.msdk.tools.Logger;
import com.tencent.msdk.tools.T;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONStringer;

public class MsgWechatWrapper
  extends JSONObject
{
  private String mAccessToken = "";
  private String mAppId = "";
  private BtnBase mBtn;
  private String mContent;
  private MsgBase mMsg;
  private String mTitle;
  private String mToUser;
  
  public MsgWechatWrapper(String paramString1, String paramString2, String paramString3, BtnBase paramBtnBase, MsgBase paramMsgBase)
  {
    this.mToUser = paramString1;
    this.mTitle = paramString2;
    this.mContent = paramString3;
    this.mBtn = paramBtnBase;
    this.mMsg = paramMsgBase;
    paramString1 = new LoginRet();
    LoginUtils.getLocalLoginRet(paramString1);
    if ((paramString1.platform == WeGame.QQPLATID) || (paramString1.platform == WeGame.QQHALL))
    {
      this.mAccessToken = paramString1.getTokenByType(1);
      this.mAppId = WeGame.getInstance().qq_appid;
    }
    while (paramString1.platform != WeGame.WXPLATID) {
      return;
    }
    this.mAccessToken = paramString1.getTokenByType(3);
    this.mAppId = WeGame.getInstance().wx_appid;
  }
  
  public String toString()
  {
    Object localObject = this.mMsg.checkParam();
    String str = this.mMsg.checkParam();
    if ((!T.ckIsEmpty((String)localObject)) || (!T.ckIsEmpty(str)))
    {
      Logger.w((String)localObject);
      Logger.w(str);
      return "";
    }
    try
    {
      localObject = new JSONStringer().object();
      ((JSONStringer)localObject).key("touser").value(this.mToUser);
      ((JSONStringer)localObject).key("msgtype").value(this.mMsg.mMsgType);
      ((JSONStringer)localObject).key("title").value(this.mTitle);
      ((JSONStringer)localObject).key("content").value(this.mContent);
      ((JSONStringer)localObject).key("access_token").value(this.mAccessToken);
      ((JSONStringer)localObject).key("appid").value(this.mAppId);
      ((JSONStringer)localObject).key("button").value(this.mBtn.toString());
      ((JSONStringer)localObject).key("type_info").value(this.mMsg.toString());
      ((JSONStringer)localObject).endObject();
      localObject = ((JSONStringer)localObject).toString();
      return localObject;
    }
    catch (JSONException localJSONException)
    {
      localJSONException.printStackTrace();
    }
    return "";
  }
}
