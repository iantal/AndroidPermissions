package com.tencent.msdk.login;

import com.tencent.msdk.api.LoginRet;
import com.tencent.msdk.db.QQLoginModel;
import com.tencent.msdk.db.WxLoginModel;

public class LoginInfoManager
{
  private static volatile LoginInfoManager instance;
  
  private LoginInfoManager() {}
  
  public static LoginInfoManager getInstance()
  {
    if (instance == null) {}
    try
    {
      if (instance == null) {
        instance = new LoginInfoManager();
      }
      return instance;
    }
    finally {}
  }
  
  public void deleteAllLoginRecord()
  {
    new QQLoginModel().deleteAll();
    new WxLoginModel().deleteAll();
  }
  
  public void deleteLoginRecord(String paramString)
  {
    new QQLoginModel(paramString).delete();
    new WxLoginModel(paramString).delete();
  }
  
  public LoginRet getLastLoginUserInfo()
  {
    QQLoginModel localQQLoginModel = LoginManager.getInstance().getLastQQLoginModel();
    WxLoginModel localWxLoginModel = LoginManager.getInstance().getLastWxLoginModel();
    if (localQQLoginModel == null)
    {
      if (localWxLoginModel == null) {
        return new LoginRet();
      }
      return localWxLoginModel.convertToLoginRet();
    }
    if (localWxLoginModel == null) {
      return localQQLoginModel.convertToLoginRet();
    }
    if (localQQLoginModel.create_at > localWxLoginModel.create_at) {
      return localQQLoginModel.convertToLoginRet();
    }
    return localWxLoginModel.convertToLoginRet();
  }
}
