package com.tencent.msdk.doctor.checklist;

import android.app.Activity;
import android.content.ComponentName;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Build.VERSION;
import com.tencent.msdk.doctor.CheckBase;
import com.tencent.msdk.tools.ResID;
import java.util.ArrayList;

public class Notice
  extends CheckBase
{
  public Notice(Activity paramActivity)
  {
    super(paramActivity);
  }
  
  public ArrayList<String> check()
  {
    ArrayList localArrayList = new ArrayList();
    if (Boolean.valueOf(getValueFromAssetsFile("needNotice", "msdkconfig.ini")).booleanValue() != true) {
      return localArrayList;
    }
    String str1 = this.mContext.getPackageName();
    String str2 = Build.VERSION.SDK;
    for (;;)
    {
      try
      {
        ActivityInfo localActivityInfo = this.mContext.getPackageManager().getActivityInfo(new ComponentName(str1, "com.tencent.msdk.notice.AlertMsgActivity"), 128);
        int j = Integer.parseInt(str2);
        if (j < 13)
        {
          i = 160;
          if ((localActivityInfo.configChanges & i) != i)
          {
            if (j >= 13) {
              break label321;
            }
            localArrayList.add("Msdk: the configChanges of " + "com.tencent.msdk.notice.AlertMsgActivity" + " must be " + "orientation|keyboardHidden");
          }
          i = ResID.loadIdentifierResource(this.mContext.getResources(), "NoticeAlertTheme", "style", str1);
          if (localActivityInfo.theme != i) {
            localArrayList.add("Msdk: the theme of " + "com.tencent.msdk.notice.AlertMsgActivity" + " must be NoticeAlertTheme");
          }
          try
          {
            if (this.mContext.getPackageManager().getServiceInfo(new ComponentName(str1, "com.tencent.msdk.notice.RollFloatService"), 128) != null) {
              break;
            }
            localArrayList.add("Lack of service: " + "com.tencent.msdk.notice.RollFloatService");
            return localArrayList;
          }
          catch (PackageManager.NameNotFoundException localNameNotFoundException1)
          {
            localNameNotFoundException1.printStackTrace();
            localArrayList.add("Lack of service: " + "com.tencent.msdk.notice.RollFloatService");
            return localArrayList;
          }
        }
        int i = 1184;
      }
      catch (PackageManager.NameNotFoundException localNameNotFoundException2)
      {
        localNameNotFoundException2.printStackTrace();
        localArrayList.add("Msdk: Lack of activity: " + "com.tencent.msdk.notice.AlertMsgActivity");
        return localArrayList;
      }
      continue;
      label321:
      localArrayList.add("Msdk: the configChanges of " + "com.tencent.msdk.notice.AlertMsgActivity" + " must be " + "orientation|screenSize|keyboardHidden");
    }
  }
}
