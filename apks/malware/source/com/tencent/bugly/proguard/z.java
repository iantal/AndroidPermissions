package com.tencent.bugly.proguard;

import android.content.Context;
import com.tencent.bugly.crashreport.CrashReport.CrashHandleCallback;
import com.tencent.bugly.crashreport.common.strategy.c;
import com.tencent.bugly.crashreport.crash.jni.NativeCrashHandler;
import com.tencent.bugly.crashreport.crash.jni.a;

public final class z
{
  private static z a;
  private final y b;
  private final A c;
  private final NativeCrashHandler d;
  private final c e;
  private final B f;
  private final t g;
  
  private z(Context paramContext, l paramL, c paramC, r paramR, n paramN, t paramT, boolean paramBoolean, CrashReport.CrashHandleCallback paramCrashHandleCallback)
  {
    paramContext = paramContext.getApplicationContext();
    this.e = paramC;
    this.g = paramT;
    this.b = new y(paramContext, paramR, paramL, paramC);
    this.c = new A(paramContext, this.b, paramC, paramN, paramCrashHandleCallback);
    this.f = new B(paramContext, this.b, paramC, paramN, paramCrashHandleCallback);
    paramL = new a(paramContext, paramN, this.b, paramC, paramCrashHandleCallback);
    this.d = NativeCrashHandler.a(paramContext, paramN, paramL, paramT, paramBoolean);
    paramL.a(this.d.a());
  }
  
  public static z a()
  {
    return a;
  }
  
  public static z a(Context paramContext, l paramL, c paramC, r paramR, n paramN, t paramT, boolean paramBoolean, CrashReport.CrashHandleCallback paramCrashHandleCallback)
  {
    try
    {
      if (a == null) {
        a = new z(paramContext, paramL, paramC, paramR, paramN, paramT, paramBoolean, paramCrashHandleCallback);
      }
      paramContext = a;
      return paramContext;
    }
    finally {}
  }
  
  public final void a(final Thread paramThread, final String paramString1, final String paramString2, final String paramString3)
  {
    this.g.a(new Runnable()
    {
      public final void run()
      {
        try
        {
          z.a(z.this).a(paramThread, paramString1, paramString2, paramString3);
          return;
        }
        catch (Throwable localThrowable)
        {
          if (u.b(localThrowable) != true) {
            localThrowable.printStackTrace();
          }
          u.c("u3d crash error %s %s %s", new Object[] { paramString1, paramString2, paramString3 });
        }
      }
    });
  }
  
  public final void a(final Thread paramThread, final Throwable paramThrowable, boolean paramBoolean)
  {
    this.g.a(new Runnable()
    {
      public final void run()
      {
        try
        {
          boolean bool = this.a;
          u.a();
          z.b(z.this).a(paramThread, paramThrowable, false);
          return;
        }
        catch (Throwable localThrowable)
        {
          if (u.b(localThrowable) != true) {
            localThrowable.printStackTrace();
          }
          u.c("java catch error: %s", new Object[] { paramThrowable.toString() });
        }
      }
    });
  }
  
  public final boolean b()
  {
    return this.e.g();
  }
  
  public final void c()
  {
    try
    {
      Thread.UncaughtExceptionHandler localUncaughtExceptionHandler = Thread.getDefaultUncaughtExceptionHandler();
      this.c.a(localUncaughtExceptionHandler);
      Thread.setDefaultUncaughtExceptionHandler(this.c);
      u.a();
      this.d.b();
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public final void d()
  {
    try
    {
      this.d.c();
      return;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
}
