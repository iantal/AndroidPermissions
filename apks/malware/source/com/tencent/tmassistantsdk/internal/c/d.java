package com.tencent.tmassistantsdk.internal.c;

import com.tencent.tmassistant.common.a;
import com.tencent.tmassistant.common.jce.ReportLogRequest;
import com.tencent.tmassistant.common.jce.ReportLogResponse;
import com.tencent.tmassistant.common.jce.Request;
import com.tencent.tmassistant.common.jce.Response;
import com.tencent.tmassistantbase.network.PostHttpRequest;
import com.tencent.tmassistantbase.util.GlobalUtil;
import com.tencent.tmassistantbase.util.TMLog;
import com.tencent.tmassistantsdk.internal.e.b.b;

public class d
  extends PostHttpRequest
{
  protected c b = null;
  
  public d() {}
  
  public void a(c paramC)
  {
    this.b = paramC;
  }
  
  public boolean a(byte paramByte, b paramB)
  {
    TMLog.i("LogReportHttpRequest", "sendLogDataToServer logType:" + paramByte + " logDataWrapper:" + paramB);
    if (paramB == null) {
      return false;
    }
    String str = GlobalUtil.getAppPackageName(GlobalUtil.getInstance().getContext());
    int i = GlobalUtil.getAppVersionCode(GlobalUtil.getInstance().getContext());
    return super.sendRequest(a.a(a.b((ReportLogRequest)a.a(paramByte, paramB.b, str, i, ""))));
  }
  
  protected void onFinished(byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt)
  {
    if (paramArrayOfByte2 == null) {
      if (this.b != null) {
        this.b.a(this, false);
      }
    }
    do
    {
      return;
      if (this.b == null) {
        break label177;
      }
      if ((paramArrayOfByte2 == null) || (paramArrayOfByte2.length <= 4) || (paramInt != 0)) {
        break;
      }
      paramArrayOfByte2 = a.a(paramArrayOfByte2);
      paramArrayOfByte1 = a.a(((Request)a.a(paramArrayOfByte1, Request.class)).body, ReportLogRequest.class);
    } while ((paramArrayOfByte2 == null) || (paramArrayOfByte2.body == null));
    paramArrayOfByte1 = a.a(paramArrayOfByte1, paramArrayOfByte2.body);
    if ((paramArrayOfByte1 instanceof ReportLogResponse))
    {
      paramArrayOfByte1 = (ReportLogResponse)paramArrayOfByte1;
      if (paramArrayOfByte1.ret == 0)
      {
        this.b.a(this, true);
        return;
      }
      this.b.a(this, false);
      TMLog.i("LogReportHttpRequest", "response ret:" + paramArrayOfByte1.ret);
      return;
    }
    TMLog.i("LogReportHttpRequest", "response isn't instanceof ReportLogResponse !");
    return;
    this.b.a(this, false);
    return;
    label177:
    TMLog.i("LogReportHttpRequest", "mListener is null !");
  }
}
