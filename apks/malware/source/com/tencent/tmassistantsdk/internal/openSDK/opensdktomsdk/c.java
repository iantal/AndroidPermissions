package com.tencent.tmassistantsdk.internal.openSDK.opensdktomsdk;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import com.qq.taf.jce.JceStruct;
import com.tencent.tmassistant.aidl.TMAssistantDownloadTaskInfo;
import com.tencent.tmassistant.b;
import com.tencent.tmassistantsdk.internal.c.g;
import com.tencent.tmassistantsdk.internal.protocol.jce.TipsInfoLog;

class c
  implements Runnable
{
  c(TMAssistantAuthorizedManager paramTMAssistantAuthorizedManager) {}
  
  public void run()
  {
    try
    {
      Object localObject = this.a.getClient().a(this.a.mDownloadUrl);
      Message localMessage;
      if (localObject != null)
      {
        if (((TMAssistantDownloadTaskInfo)localObject).mState != 3) {
          break label137;
        }
        localMessage = new Message();
        localMessage.what = 6;
        Bundle localBundle = new Bundle();
        localBundle.putLong("receiveDataLen", ((TMAssistantDownloadTaskInfo)localObject).mReceiveDataLen);
        localBundle.putLong("totalDataLen", ((TMAssistantDownloadTaskInfo)localObject).mTotalDataLen);
        localMessage.setData(localBundle);
        this.a.mMainMessageHandler.sendMessage(localMessage);
      }
      while ((localObject != null) && (((TMAssistantDownloadTaskInfo)localObject).mState == 4))
      {
        localObject = g.h().a(this.a.mAuthorizedInfo);
        if (localObject == null) {
          return;
        }
        ((TipsInfoLog)localObject).installTipsCount += 1;
        g.h().a((JceStruct)localObject);
        return;
        label137:
        if (((TMAssistantDownloadTaskInfo)localObject).mState == 4)
        {
          localMessage = new Message();
          localMessage.what = 0;
          localMessage.arg1 = 1;
          localMessage.obj = ((TMAssistantDownloadTaskInfo)localObject).mSavePath;
          this.a.mMainMessageHandler.sendMessage(localMessage);
        }
      }
      localTipsInfoLog = g.h().a(this.a.mAuthorizedInfo);
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
      return;
    }
    TipsInfoLog localTipsInfoLog;
    if (localTipsInfoLog != null)
    {
      localTipsInfoLog.downloadTipsCount += 1;
      g.h().a(localTipsInfoLog);
    }
  }
}
