package com.unity3d.player.a;

import android.text.TextUtils;
import android.text.TextUtils.SimpleStringSplitter;
import android.text.TextUtils.StringSplitter;
import com.unity3d.player.b.a;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.security.Signature;
import java.security.SignatureException;
import java.util.Iterator;
import java.util.regex.Pattern;

final class g
{
  private final i a;
  private final f b;
  private final int c;
  private final String d;
  private final String e;
  private final b f;
  
  g(i paramI, b paramB, f paramF, int paramInt, String paramString1, String paramString2)
  {
    this.a = paramI;
    this.f = paramB;
    this.b = paramF;
    this.c = paramInt;
    this.d = paramString1;
    this.e = paramString2;
  }
  
  private void a(int paramInt, k paramK)
  {
    this.a.a(paramInt, paramK);
    if (this.a.a())
    {
      this.b.a();
      return;
    }
    this.b.b();
  }
  
  public final f a()
  {
    return this.b;
  }
  
  public final void a(PublicKey paramPublicKey, int paramInt, String paramString1, String paramString2)
  {
    Object localObject = null;
    if ((paramInt == 0) || (paramInt == 1) || (paramInt == 2))
    {
      try
      {
        localObject = Signature.getInstance("SHA1withRSA");
        ((Signature)localObject).initVerify(paramPublicKey);
        ((Signature)localObject).update(paramString1.getBytes());
        if (!((Signature)localObject).verify(a.a(paramString2)))
        {
          this.b.b();
          return;
        }
      }
      catch (NoSuchAlgorithmException paramPublicKey)
      {
        throw new RuntimeException(paramPublicKey);
      }
      catch (InvalidKeyException paramPublicKey)
      {
        paramPublicKey = f.a.d;
        paramPublicKey = this.b;
        return;
      }
      catch (SignatureException paramPublicKey)
      {
        throw new RuntimeException(paramPublicKey);
      }
      catch (com.unity3d.player.b.b paramPublicKey)
      {
        this.b.b();
        return;
      }
      try
      {
        paramPublicKey = new TextUtils.SimpleStringSplitter(':');
        paramPublicKey.setString(paramString1);
        paramString2 = paramPublicKey.iterator();
        if (!paramString2.hasNext()) {
          throw new IllegalArgumentException("");
        }
      }
      catch (IllegalArgumentException paramPublicKey)
      {
        this.b.b();
        return;
      }
      paramString1 = (String)paramString2.next();
      paramPublicKey = "";
      if (paramString2.hasNext()) {
        paramPublicKey = (String)paramString2.next();
      }
      paramString2 = TextUtils.split(paramString1, Pattern.quote("|"));
      if (paramString2.length < 6) {
        throw new IllegalArgumentException("");
      }
      paramString1 = new k();
      paramString1.g = paramPublicKey;
      paramString1.a = Integer.parseInt(paramString2[0]);
      paramString1.b = Integer.parseInt(paramString2[1]);
      paramString1.c = paramString2[2];
      paramString1.d = paramString2[3];
      paramString1.e = paramString2[4];
      paramString1.f = Long.parseLong(paramString2[5]);
      if (paramString1.a != paramInt)
      {
        this.b.b();
        return;
      }
      if (paramString1.b != this.c)
      {
        this.b.b();
        return;
      }
      if (!paramString1.c.equals(this.d))
      {
        this.b.b();
        return;
      }
      if (!paramString1.d.equals(this.e))
      {
        this.b.b();
        return;
      }
      localObject = paramString1;
      if (TextUtils.isEmpty(paramString1.e))
      {
        this.b.b();
        return;
      }
    }
    switch (paramInt)
    {
    default: 
      this.b.b();
      return;
    case 0: 
    case 2: 
      paramPublicKey = this.f;
      a(1, (k)localObject);
      return;
    case 1: 
      a(0, (k)localObject);
      return;
    case 257: 
      a(-1, (k)localObject);
      return;
    case 4: 
      a(-1, (k)localObject);
      return;
    case 5: 
      a(-1, (k)localObject);
      return;
    case 258: 
      paramPublicKey = f.a.a;
      paramPublicKey = this.b;
      return;
    case 259: 
      paramPublicKey = f.a.b;
      paramPublicKey = this.b;
      return;
    }
    paramPublicKey = f.a.c;
    paramPublicKey = this.b;
  }
  
  public final int b()
  {
    return this.c;
  }
  
  public final String c()
  {
    return this.d;
  }
}
