package com.unity3d.player;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Build.VERSION;
import android.os.Bundle;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class UnityPlayerProxyActivity
  extends Activity
{
  public UnityPlayerProxyActivity() {}
  
  protected static void copyPlayerPrefs(Context paramContext, String[] paramArrayOfString)
  {
    Object localObject1 = paramContext.getSharedPreferences(paramContext.getPackageName(), 0);
    if (!((SharedPreferences)localObject1).getAll().isEmpty()) {}
    for (;;)
    {
      return;
      localObject1 = ((SharedPreferences)localObject1).edit();
      int j = paramArrayOfString.length;
      int i = 0;
      while (i < j)
      {
        Object localObject2 = paramContext.getSharedPreferences(paramArrayOfString[i], 0).getAll();
        if (!((Map)localObject2).isEmpty())
        {
          localObject2 = ((Map)localObject2).entrySet().iterator();
          while (((Iterator)localObject2).hasNext())
          {
            Map.Entry localEntry = (Map.Entry)((Iterator)localObject2).next();
            Object localObject3 = localEntry.getValue();
            if (localObject3.getClass() == Integer.class) {
              ((SharedPreferences.Editor)localObject1).putInt((String)localEntry.getKey(), ((Integer)localObject3).intValue());
            } else if (localObject3.getClass() == Float.class) {
              ((SharedPreferences.Editor)localObject1).putFloat((String)localEntry.getKey(), ((Float)localObject3).floatValue());
            } else if (localObject3.getClass() == String.class) {
              ((SharedPreferences.Editor)localObject1).putString((String)localEntry.getKey(), (String)localObject3);
            }
          }
          ((SharedPreferences.Editor)localObject1).commit();
        }
        i += 1;
      }
    }
  }
  
  protected void onCreate(Bundle paramBundle)
  {
    int j = 1;
    super.onCreate(paramBundle);
    paramBundle = new String[2];
    paramBundle[0] = "com.unity3d.player.UnityPlayerActivity";
    paramBundle[1] = "com.unity3d.player.UnityPlayerNativeActivity";
    copyPlayerPrefs(this, paramBundle);
    for (;;)
    {
      try
      {
        if (Build.VERSION.SDK_INT >= 9)
        {
          i = 1;
          break label120;
          paramBundle = new Intent(this, Class.forName(paramBundle[i]));
          paramBundle.addFlags(65536);
          Bundle localBundle = getIntent().getExtras();
          if (localBundle != null) {
            paramBundle.putExtras(localBundle);
          }
          startActivity(paramBundle);
        }
        else
        {
          i = 0;
        }
      }
      catch (ClassNotFoundException paramBundle)
      {
        paramBundle.printStackTrace();
        return;
      }
      finally
      {
        finish();
      }
      int i = 0;
      continue;
      label120:
      if (i != 0) {
        i = j;
      }
    }
  }
}
