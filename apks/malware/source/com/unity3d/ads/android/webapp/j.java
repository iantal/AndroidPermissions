package com.unity3d.ads.android.webapp;

import android.os.AsyncTask;
import com.unity3d.ads.android.UnityAdsDeviceLog;
import com.unity3d.ads.android.UnityAdsUtils;
import java.io.BufferedInputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

final class j
  extends AsyncTask
{
  private URL b = null;
  private HttpURLConnection c = null;
  private int d = 0;
  private InputStream e = null;
  private BufferedInputStream f = null;
  private String g = "";
  private i h = null;
  private String i = null;
  private int j = 0;
  private String k = "GET";
  private String l = null;
  private String m = null;
  private Boolean n = Boolean.valueOf(false);
  private String o = null;
  
  public j(UnityAdsWebData paramUnityAdsWebData, String paramString1, String paramString2, String paramString3, i paramI, int paramInt)
  {
    try
    {
      this.i = paramString1;
      this.m = paramString1;
      if ((paramString3.equals("GET")) && (paramString2 != null) && (paramString2.length() > 2)) {
        this.i = (this.i + "?" + paramString2);
      }
      this.b = new URL(this.i);
    }
    catch (Exception paramString1)
    {
      for (;;)
      {
        UnityAdsDeviceLog.error("Problems with url! Error-message: " + paramString1.getMessage());
      }
    }
    this.l = paramString2;
    this.k = paramString3;
    UnityAdsWebData.c(paramUnityAdsWebData);
    UnityAdsDeviceLog.debug("Total urlLoaders created: " + UnityAdsWebData.d(paramUnityAdsWebData));
    this.h = paramI;
    this.j = paramInt;
  }
  
  private void a()
  {
    UnityAdsUtils.runOnUiThread(new h(this.a, this));
  }
  
  /* Error */
  private String b()
  {
    // Byte code:
    //   0: aload_0
    //   1: getfield 39	com/unity3d/ads/android/webapp/j:b	Ljava/net/URL;
    //   4: invokevirtual 142	java/net/URL:toString	()Ljava/lang/String;
    //   7: ldc -112
    //   9: invokevirtual 148	java/lang/String:startsWith	(Ljava/lang/String;)Z
    //   12: ifeq +388 -> 400
    //   15: aload_0
    //   16: aload_0
    //   17: getfield 39	com/unity3d/ads/android/webapp/j:b	Ljava/net/URL;
    //   20: invokevirtual 152	java/net/URL:openConnection	()Ljava/net/URLConnection;
    //   23: checkcast 154	javax/net/ssl/HttpsURLConnection
    //   26: putfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   29: aload_0
    //   30: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   33: sipush 20000
    //   36: invokevirtual 160	java/net/HttpURLConnection:setConnectTimeout	(I)V
    //   39: aload_0
    //   40: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   43: sipush 30000
    //   46: invokevirtual 163	java/net/HttpURLConnection:setReadTimeout	(I)V
    //   49: aload_0
    //   50: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   53: aload_0
    //   54: getfield 61	com/unity3d/ads/android/webapp/j:k	Ljava/lang/String;
    //   57: invokevirtual 166	java/net/HttpURLConnection:setRequestMethod	(Ljava/lang/String;)V
    //   60: aload_0
    //   61: getfield 75	com/unity3d/ads/android/webapp/j:o	Ljava/lang/String;
    //   64: ifnonnull +385 -> 449
    //   67: aload_0
    //   68: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   71: ldc -88
    //   73: ldc -86
    //   75: invokevirtual 174	java/net/HttpURLConnection:setRequestProperty	(Ljava/lang/String;Ljava/lang/String;)V
    //   78: aload_0
    //   79: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   82: iconst_1
    //   83: invokevirtual 178	java/net/HttpURLConnection:setDoInput	(Z)V
    //   86: aload_0
    //   87: getfield 61	com/unity3d/ads/android/webapp/j:k	Ljava/lang/String;
    //   90: ldc -76
    //   92: invokevirtual 81	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   95: ifeq +11 -> 106
    //   98: aload_0
    //   99: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   102: iconst_1
    //   103: invokevirtual 183	java/net/HttpURLConnection:setDoOutput	(Z)V
    //   106: aload_0
    //   107: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   110: ifnull +288 -> 398
    //   113: aload_0
    //   114: getfield 61	com/unity3d/ads/android/webapp/j:k	Ljava/lang/String;
    //   117: ldc -76
    //   119: invokevirtual 81	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   122: ifeq +50 -> 172
    //   125: new 185	java/io/PrintWriter
    //   128: dup
    //   129: new 187	java/io/OutputStreamWriter
    //   132: dup
    //   133: aload_0
    //   134: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   137: invokevirtual 191	java/net/HttpURLConnection:getOutputStream	()Ljava/io/OutputStream;
    //   140: ldc -63
    //   142: invokespecial 196	java/io/OutputStreamWriter:<init>	(Ljava/io/OutputStream;Ljava/lang/String;)V
    //   145: iconst_1
    //   146: invokespecial 199	java/io/PrintWriter:<init>	(Ljava/io/Writer;Z)V
    //   149: astore 5
    //   151: aload_0
    //   152: getfield 75	com/unity3d/ads/android/webapp/j:o	Ljava/lang/String;
    //   155: ifnonnull +309 -> 464
    //   158: aload 5
    //   160: aload_0
    //   161: getfield 63	com/unity3d/ads/android/webapp/j:l	Ljava/lang/String;
    //   164: invokevirtual 202	java/io/PrintWriter:print	(Ljava/lang/String;)V
    //   167: aload 5
    //   169: invokevirtual 205	java/io/PrintWriter:flush	()V
    //   172: new 87	java/lang/StringBuilder
    //   175: dup
    //   176: ldc -49
    //   178: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   181: aload_0
    //   182: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   185: invokevirtual 210	java/net/HttpURLConnection:getResponseCode	()I
    //   188: invokevirtual 116	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   191: ldc -44
    //   193: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   196: aload_0
    //   197: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   200: invokevirtual 215	java/net/HttpURLConnection:getResponseMessage	()Ljava/lang/String;
    //   203: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   206: ldc -44
    //   208: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   211: aload_0
    //   212: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   215: invokevirtual 219	java/net/HttpURLConnection:getURL	()Ljava/net/URL;
    //   218: invokevirtual 142	java/net/URL:toString	()Ljava/lang/String;
    //   221: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   224: ldc -35
    //   226: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   229: aload_0
    //   230: getfield 63	com/unity3d/ads/android/webapp/j:l	Ljava/lang/String;
    //   233: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   236: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   239: invokestatic 121	com/unity3d/ads/android/UnityAdsDeviceLog:debug	(Ljava/lang/String;)V
    //   242: aload_0
    //   243: aload_0
    //   244: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   247: invokevirtual 225	java/net/HttpURLConnection:getInputStream	()Ljava/io/InputStream;
    //   250: putfield 45	com/unity3d/ads/android/webapp/j:e	Ljava/io/InputStream;
    //   253: aload_0
    //   254: new 227	java/io/BufferedInputStream
    //   257: dup
    //   258: aload_0
    //   259: getfield 45	com/unity3d/ads/android/webapp/j:e	Ljava/io/InputStream;
    //   262: invokespecial 230	java/io/BufferedInputStream:<init>	(Ljava/io/InputStream;)V
    //   265: putfield 47	com/unity3d/ads/android/webapp/j:f	Ljava/io/BufferedInputStream;
    //   268: lconst_0
    //   269: lstore_2
    //   270: aload_0
    //   271: aload_0
    //   272: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   275: invokevirtual 233	java/net/HttpURLConnection:getContentLength	()I
    //   278: putfield 43	com/unity3d/ads/android/webapp/j:d	I
    //   281: aload_0
    //   282: getfield 34	com/unity3d/ads/android/webapp/j:a	Lcom/unity3d/ads/android/webapp/UnityAdsWebData;
    //   285: invokestatic 235	com/unity3d/ads/android/webapp/UnityAdsWebData:e	(Lcom/unity3d/ads/android/webapp/UnityAdsWebData;)I
    //   288: pop
    //   289: new 87	java/lang/StringBuilder
    //   292: dup
    //   293: ldc -19
    //   295: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   298: aload_0
    //   299: getfield 34	com/unity3d/ads/android/webapp/j:a	Lcom/unity3d/ads/android/webapp/UnityAdsWebData;
    //   302: invokestatic 239	com/unity3d/ads/android/webapp/UnityAdsWebData:f	(Lcom/unity3d/ads/android/webapp/UnityAdsWebData;)I
    //   305: invokevirtual 116	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   308: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   311: invokestatic 121	com/unity3d/ads/android/UnityAdsDeviceLog:debug	(Ljava/lang/String;)V
    //   314: new 87	java/lang/StringBuilder
    //   317: dup
    //   318: ldc -15
    //   320: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   323: aload_0
    //   324: getfield 39	com/unity3d/ads/android/webapp/j:b	Ljava/net/URL;
    //   327: invokevirtual 142	java/net/URL:toString	()Ljava/lang/String;
    //   330: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   333: ldc -13
    //   335: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   338: aload_0
    //   339: getfield 43	com/unity3d/ads/android/webapp/j:d	I
    //   342: invokevirtual 116	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   345: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   348: invokestatic 121	com/unity3d/ads/android/UnityAdsDeviceLog:debug	(Ljava/lang/String;)V
    //   351: new 245	org/apache/http/util/ByteArrayBuffer
    //   354: dup
    //   355: sipush 20480
    //   358: invokespecial 247	org/apache/http/util/ByteArrayBuffer:<init>	(I)V
    //   361: astore 5
    //   363: aload_0
    //   364: getfield 47	com/unity3d/ads/android/webapp/j:f	Ljava/io/BufferedInputStream;
    //   367: invokevirtual 250	java/io/BufferedInputStream:read	()I
    //   370: istore_1
    //   371: iload_1
    //   372: iconst_m1
    //   373: if_icmpeq +180 -> 553
    //   376: lload_2
    //   377: lconst_1
    //   378: ladd
    //   379: lstore_2
    //   380: aload 5
    //   382: iload_1
    //   383: i2b
    //   384: invokevirtual 252	org/apache/http/util/ByteArrayBuffer:append	(I)V
    //   387: aload_0
    //   388: invokevirtual 256	com/unity3d/ads/android/webapp/j:isCancelled	()Z
    //   391: istore 4
    //   393: iload 4
    //   395: ifeq -32 -> 363
    //   398: aconst_null
    //   399: areturn
    //   400: aload_0
    //   401: aload_0
    //   402: getfield 39	com/unity3d/ads/android/webapp/j:b	Ljava/net/URL;
    //   405: invokevirtual 152	java/net/URL:openConnection	()Ljava/net/URLConnection;
    //   408: checkcast 156	java/net/HttpURLConnection
    //   411: putfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   414: goto -385 -> 29
    //   417: astore 5
    //   419: new 87	java/lang/StringBuilder
    //   422: dup
    //   423: ldc_w 258
    //   426: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   429: aload 5
    //   431: invokevirtual 126	java/lang/Exception:getMessage	()Ljava/lang/String;
    //   434: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   437: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   440: invokestatic 129	com/unity3d/ads/android/UnityAdsDeviceLog:error	(Ljava/lang/String;)V
    //   443: aload_0
    //   444: invokespecial 260	com/unity3d/ads/android/webapp/j:a	()V
    //   447: aconst_null
    //   448: areturn
    //   449: aload_0
    //   450: getfield 41	com/unity3d/ads/android/webapp/j:c	Ljava/net/HttpURLConnection;
    //   453: ldc -88
    //   455: ldc_w 262
    //   458: invokevirtual 174	java/net/HttpURLConnection:setRequestProperty	(Ljava/lang/String;Ljava/lang/String;)V
    //   461: goto -383 -> 78
    //   464: aload 5
    //   466: aload_0
    //   467: getfield 75	com/unity3d/ads/android/webapp/j:o	Ljava/lang/String;
    //   470: invokevirtual 202	java/io/PrintWriter:print	(Ljava/lang/String;)V
    //   473: goto -306 -> 167
    //   476: astore 5
    //   478: new 87	java/lang/StringBuilder
    //   481: dup
    //   482: ldc_w 264
    //   485: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   488: aload 5
    //   490: invokevirtual 126	java/lang/Exception:getMessage	()Ljava/lang/String;
    //   493: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   496: ldc -44
    //   498: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   501: aload 5
    //   503: invokevirtual 268	java/lang/Exception:getStackTrace	()[Ljava/lang/StackTraceElement;
    //   506: invokevirtual 271	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   509: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   512: invokestatic 129	com/unity3d/ads/android/UnityAdsDeviceLog:error	(Ljava/lang/String;)V
    //   515: aload_0
    //   516: invokespecial 260	com/unity3d/ads/android/webapp/j:a	()V
    //   519: aconst_null
    //   520: areturn
    //   521: astore 5
    //   523: new 87	java/lang/StringBuilder
    //   526: dup
    //   527: ldc_w 273
    //   530: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   533: aload 5
    //   535: invokevirtual 126	java/lang/Exception:getMessage	()Ljava/lang/String;
    //   538: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   541: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   544: invokestatic 129	com/unity3d/ads/android/UnityAdsDeviceLog:error	(Ljava/lang/String;)V
    //   547: aload_0
    //   548: invokespecial 260	com/unity3d/ads/android/webapp/j:a	()V
    //   551: aconst_null
    //   552: areturn
    //   553: aload_0
    //   554: new 77	java/lang/String
    //   557: dup
    //   558: aload 5
    //   560: invokevirtual 277	org/apache/http/util/ByteArrayBuffer:toByteArray	()[B
    //   563: invokespecial 280	java/lang/String:<init>	([B)V
    //   566: putfield 51	com/unity3d/ads/android/webapp/j:g	Ljava/lang/String;
    //   569: new 87	java/lang/StringBuilder
    //   572: dup
    //   573: ldc_w 282
    //   576: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   579: lload_2
    //   580: invokevirtual 285	java/lang/StringBuilder:append	(J)Ljava/lang/StringBuilder;
    //   583: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   586: invokestatic 121	com/unity3d/ads/android/UnityAdsDeviceLog:debug	(Ljava/lang/String;)V
    //   589: aconst_null
    //   590: areturn
    //   591: astore 5
    //   593: new 87	java/lang/StringBuilder
    //   596: dup
    //   597: ldc_w 287
    //   600: invokespecial 111	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   603: aload 5
    //   605: invokevirtual 126	java/lang/Exception:getMessage	()Ljava/lang/String;
    //   608: invokevirtual 92	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   611: invokevirtual 98	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   614: invokestatic 129	com/unity3d/ads/android/UnityAdsDeviceLog:error	(Ljava/lang/String;)V
    //   617: aload_0
    //   618: invokespecial 260	com/unity3d/ads/android/webapp/j:a	()V
    //   621: aconst_null
    //   622: areturn
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	623	0	this	j
    //   370	13	1	i1	int
    //   269	311	2	l1	long
    //   391	3	4	bool	boolean
    //   149	232	5	localObject	Object
    //   417	48	5	localException1	Exception
    //   476	26	5	localException2	Exception
    //   521	38	5	localException3	Exception
    //   591	13	5	localException4	Exception
    // Exception table:
    //   from	to	target	type
    //   0	29	417	java/lang/Exception
    //   29	78	417	java/lang/Exception
    //   78	106	417	java/lang/Exception
    //   400	414	417	java/lang/Exception
    //   449	461	417	java/lang/Exception
    //   125	167	476	java/lang/Exception
    //   167	172	476	java/lang/Exception
    //   464	473	476	java/lang/Exception
    //   172	268	521	java/lang/Exception
    //   281	363	591	java/lang/Exception
    //   363	371	591	java/lang/Exception
    //   380	393	591	java/lang/Exception
    //   553	589	591	java/lang/Exception
  }
  
  private void c()
  {
    try
    {
      if (this.e != null)
      {
        this.e.close();
        this.e = null;
      }
      if (this.f != null)
      {
        this.f.close();
        this.f = null;
      }
      return;
    }
    catch (Exception localException)
    {
      UnityAdsDeviceLog.error("Problems closing streams: " + localException.getMessage());
    }
  }
  
  public final void clear()
  {
    this.b = null;
    this.d = 0;
    this.g = "";
    this.h = null;
    this.i = null;
    this.j = 0;
    this.k = null;
    this.l = null;
    this.m = null;
    this.o = null;
  }
  
  public final String getBaseUrl()
  {
    return this.m;
  }
  
  public final String getData()
  {
    return this.g;
  }
  
  public final String getHTTPMethod()
  {
    return this.k;
  }
  
  public final String getQueryParams()
  {
    return this.l;
  }
  
  public final i getRequestType()
  {
    return this.h;
  }
  
  public final int getRetries()
  {
    return this.j;
  }
  
  public final String getUrl()
  {
    return this.b.toString();
  }
  
  protected final void onCancelled()
  {
    this.n = Boolean.valueOf(true);
    c();
    UnityAdsWebData.b(this.a, this);
  }
  
  public final void setPostBody(String paramString)
  {
    if ((this.l != null) && (this.l.length() > 2)) {
      this.i = (this.m + "?" + this.l);
    }
    try
    {
      this.b = new URL(this.i);
      this.o = paramString;
      return;
    }
    catch (MalformedURLException localMalformedURLException)
    {
      for (;;)
      {
        UnityAdsDeviceLog.error("Error when creating adding query parameters to URL " + localMalformedURLException);
      }
    }
  }
}
