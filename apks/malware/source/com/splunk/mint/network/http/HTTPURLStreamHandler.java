package com.splunk.mint.network.http;

import com.splunk.mint.network.MonitorRegistry;
import java.io.IOException;
import java.net.Proxy;
import java.net.URL;
import java.net.URLConnection;

public final class HTTPURLStreamHandler
  extends URLStreamHandlerBase
{
  private static final int PORT = 80;
  private static final String PROTOCOL = "http";
  private static final String[] SYSTEM_CLASSES = { "libcore.net.http.HttpURLConnectionImpl", "org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl", "org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection" };
  private final MonitorRegistry registry;
  
  public HTTPURLStreamHandler(MonitorRegistry paramMonitorRegistry)
    throws ClassNotFoundException
  {
    super(SYSTEM_CLASSES);
    this.registry = paramMonitorRegistry;
  }
  
  public int getDefaultPort()
  {
    return 80;
  }
  
  public String getProtocol()
  {
    return "http";
  }
  
  protected URLConnection openConnection(URL paramURL)
    throws IOException
  {
    paramURL = super.openConnection(paramURL);
    return new MonitorableHttpURLConnection(this.registry, paramURL);
  }
  
  protected URLConnection openConnection(URL paramURL, Proxy paramProxy)
    throws IOException
  {
    paramURL = super.openConnection(paramURL, paramProxy);
    return new MonitorableHttpURLConnection(this.registry, paramURL);
  }
}
