package com.splunk.mint.network.socket;

import com.splunk.mint.Logger;
import com.splunk.mint.network.MonitorRegistry;
import java.net.SocketImpl;
import java.net.SocketImplFactory;

public class MonitoringSocketFactory
  implements SocketImplFactory
{
  private final MonitorRegistry registry;
  
  public MonitoringSocketFactory(MonitorRegistry paramMonitorRegistry)
  {
    this.registry = paramMonitorRegistry;
  }
  
  public SocketImpl createSocketImpl()
  {
    try
    {
      MonitoringSocketImpl localMonitoringSocketImpl = new MonitoringSocketImpl(this.registry);
      return localMonitoringSocketImpl;
    }
    catch (Exception localException)
    {
      Logger.logError("Could not create the Network Monitoring implementation, Network monitoring will be disabled.");
      throw new RuntimeException("Could not create the Network Monitoring implementation, Network monitoring will be disabled.");
    }
  }
}
