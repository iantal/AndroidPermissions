package com.payeco.android.plugin;

import android.app.Activity;
import android.content.Intent;
import android.hardware.Camera;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import com.payeco.android.plugin.b.h;
import com.payeco.android.plugin.c.d;

public class PayecoVedioActivity
  extends Activity
{
  private Button a;
  private Button b;
  private Button c;
  private Button d;
  private TextView e;
  private MediaRecorder f;
  private Handler g;
  private Camera h;
  private SurfaceView i;
  private SurfaceHolder j;
  private int k = 3;
  private int l;
  private int m = 320;
  private int n = 240;
  private boolean o;
  private boolean p;
  private Runnable q = new z(this);
  
  public PayecoVedioActivity() {}
  
  private View a(String paramString)
  {
    return findViewById(d.a(this, paramString, "id"));
  }
  
  private void a()
  {
    if (this.h != null)
    {
      this.h.stopPreview();
      this.h.release();
      this.h = null;
    }
  }
  
  public void onCreate(Bundle paramBundle)
  {
    Log.i("payeco", "PayecoVedioActivity -onCreate ...");
    super.onCreate(paramBundle);
    setRequestedOrientation(0);
    requestWindowFeature(1);
    setContentView(d.a(this, "payeco_plugin_vedio", "layout"));
    this.k = getIntent().getExtras().getInt("vedioTime");
    try
    {
      this.m = Integer.parseInt(h.a("VedioWidth"));
      try
      {
        this.n = Integer.parseInt(h.a("VedioHeight"));
        Log.i("payeco", "PayecoVedioActivity -init toTime=" + this.k);
        Log.i("payeco", "PayecoVedioActivity -init width=" + this.m);
        Log.i("payeco", "PayecoVedioActivity -init height=" + this.n);
        this.e = ((TextView)a("time"));
        this.a = ((Button)a("luXiang_bt"));
        this.a.setOnClickListener(new aa(this));
        this.b = ((Button)a("bofang_bt"));
        this.b.setOnClickListener(new ab(this));
        this.b.setEnabled(false);
        this.c = ((Button)a("queren"));
        this.c.setOnClickListener(new ac(this));
        this.c.setEnabled(false);
        this.d = ((Button)a("cancel"));
        this.d.setOnClickListener(new ad(this));
        this.g = new Handler();
        this.i = ((SurfaceView)a("surfaceview"));
        this.i.getHolder().setType(3);
        this.i.getHolder().setFixedSize(800, 480);
        this.j = this.i.getHolder();
        this.j.setKeepScreenOn(true);
        this.j.addCallback(new ae(this));
        Log.i("payeco", "PayecoVedioActivity -onCreate ok.");
        return;
      }
      catch (Exception paramBundle)
      {
        for (;;) {}
      }
    }
    catch (Exception paramBundle)
    {
      for (;;) {}
    }
  }
  
  protected void onDestroy()
  {
    Log.i("payeco", "PayecoVedioActivity -onDestroy ...");
    this.g.removeCallbacks(this.q);
    a();
    if (this.f != null)
    {
      this.f.stop();
      this.f.release();
    }
    super.onDestroy();
    Log.i("payeco", "PayecoVedioActivity -onDestroy ok.");
  }
}
