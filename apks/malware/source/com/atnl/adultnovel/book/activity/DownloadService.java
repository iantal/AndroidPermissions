package com.atnl.adultnovel.book.activity;

import android.app.Service;
import android.content.Intent;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class DownloadService
  extends Service
{
  private static DownloadService f;
  String a;
  c b;
  d c;
  private int d = 0;
  private int e;
  private a g = new b(this);
  
  public DownloadService() {}
  
  private void a()
  {
    if ((this.e == 0) || (this.e == 2))
    {
      if ((this.b != null) && (!this.b.isAlive())) {
        this.b = new c(this);
      }
      this.b.start();
    }
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onCreate()
  {
    Log.i("jlf", "service.........onCreate");
    super.onCreate();
  }
  
  public void onDestroy()
  {
    Log.e("jlf", "service...........onDestroy");
    try
    {
      this.e = 0;
      this.b.join();
      this.b = null;
      super.onDestroy();
      return;
    }
    catch (InterruptedException localInterruptedException)
    {
      for (;;)
      {
        localInterruptedException.printStackTrace();
      }
    }
  }
  
  public void onStart(Intent paramIntent, int paramInt) {}
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    f = this;
    this.e = 0;
    String str = paramIntent.getExtras().getString("flag");
    this.a = paramIntent.getExtras().getString("url");
    if (this.b == null) {
      this.b = new c(this);
    }
    if (this.c == null) {
      this.c = new d(this, this.a, StateAcitvity.c);
    }
    this.c.a(this.g);
    if (str.equals("start")) {
      a();
    }
    for (;;)
    {
      return super.onStartCommand(paramIntent, paramInt1, paramInt2);
      if (str.equals("pause"))
      {
        this.c.b();
      }
      else if (str.equals("resume"))
      {
        this.c.c();
      }
      else if (str.equals("stop"))
      {
        this.c.d();
        stopSelf();
      }
    }
  }
}
