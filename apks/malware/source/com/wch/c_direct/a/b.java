package com.wch.c_direct.a;

import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.res.AssetManager;
import android.preference.PreferenceManager;
import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Properties;

public final class b
{
  private static b a = null;
  private boolean b = false;
  private Context c = null;
  private boolean d = false;
  private String e = "";
  private String f = "";
  private Map g = null;
  private List h = null;
  
  private b(Context paramContext)
  {
    this.c = paramContext;
    byte[] arrayOfByte1 = new byte[7];
    byte[] tmp52_51 = arrayOfByte1;
    tmp52_51[0] = 99;
    byte[] tmp57_52 = tmp52_51;
    tmp57_52[1] = 104;
    byte[] tmp62_57 = tmp57_52;
    tmp62_57[2] = 97;
    byte[] tmp67_62 = tmp62_57;
    tmp67_62[3] = 46;
    byte[] tmp72_67 = tmp67_62;
    tmp72_67[4] = 112;
    byte[] tmp77_72 = tmp72_67;
    tmp77_72[5] = 114;
    byte[] tmp82_77 = tmp77_72;
    tmp82_77[6] = 111;
    tmp82_77;
    byte[] arrayOfByte2 = new byte[7];
    byte[] tmp97_95 = arrayOfByte2;
    tmp97_95[0] = 99;
    byte[] tmp102_97 = tmp97_95;
    tmp102_97[1] = 104;
    byte[] tmp107_102 = tmp102_97;
    tmp107_102[2] = 97;
    byte[] tmp112_107 = tmp107_102;
    tmp112_107[3] = 46;
    byte[] tmp117_112 = tmp112_107;
    tmp117_112[4] = 99;
    byte[] tmp122_117 = tmp117_112;
    tmp122_117[5] = 104;
    byte[] tmp127_122 = tmp122_117;
    tmp127_122[6] = 103;
    tmp127_122;
    byte[] arrayOfByte3 = new byte[7];
    byte[] tmp142_140 = arrayOfByte3;
    tmp142_140[0] = 99;
    byte[] tmp147_142 = tmp142_140;
    tmp147_142[1] = 104;
    byte[] tmp152_147 = tmp147_142;
    tmp152_147[2] = 97;
    byte[] tmp157_152 = tmp152_147;
    tmp157_152[3] = 46;
    byte[] tmp162_157 = tmp157_152;
    tmp162_157[4] = 116;
    byte[] tmp167_162 = tmp162_157;
    tmp167_162[5] = 120;
    byte[] tmp172_167 = tmp167_162;
    tmp172_167[6] = 116;
    tmp172_167;
    new StringBuilder(String.valueOf(new String(new byte[] { 99, 104, 97, 46, 112, 110, 103 }).hashCode())).toString();
    Object localObject = d(this.c);
    if (!((String)localObject).equals(""))
    {
      j.c("存在cha.png : " + (String)localObject);
      this.b = true;
    }
    while (((String)localObject).equals(""))
    {
      this.d = false;
      return;
      if (a.a(this.c, new String(arrayOfByte2))) {
        localObject = new String(arrayOfByte2);
      } else if (a.a(this.c, new String(arrayOfByte1))) {
        localObject = new String(arrayOfByte1);
      } else if (a.a(this.c, new String(arrayOfByte3))) {
        localObject = new String(arrayOfByte3);
      } else {
        localObject = "";
      }
    }
    this.d = true;
    if (this.b) {}
    for (;;)
    {
      try
      {
        paramContext = i.a(com.wch.c_direct.encrypt.logic.a.a(paramContext.getAssets().open((String)localObject)));
        this.h = i.a(paramContext);
        this.e = paramContext.getProperty(new String(new byte[] { 103, 97, 109, 101, 73, 100 }), "");
        this.f = paramContext.getProperty(new String(new byte[] { 99, 104, 97, 110, 110, 101, 108, 73, 100 }), "");
        localObject = new HashMap(paramContext);
        ((Map)localObject).remove(this.e);
        ((Map)localObject).remove(this.f);
        this.g = ((Map)localObject);
        j.c("ChaConfig create() " + paramContext.toString());
        return;
      }
      catch (IOException paramContext)
      {
        throw new RuntimeException();
      }
      paramContext = i.a((String)localObject, paramContext);
    }
  }
  
  public static b a(Context paramContext)
  {
    if (a == null) {
      a = new b(paramContext);
    }
    if (a.c == null) {
      a.c = paramContext;
    }
    return a;
  }
  
  private static int b(Context paramContext)
  {
    try
    {
      int i = paramContext.getPackageManager().getPackageInfo(paramContext.getPackageName(), 0).versionCode;
      return i;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      paramContext.printStackTrace();
    }
    return 0;
  }
  
  private static String c(Context paramContext)
  {
    try
    {
      paramContext = paramContext.getPackageManager().getPackageInfo(paramContext.getPackageName(), 0).versionName;
      return paramContext;
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      paramContext.printStackTrace();
    }
    return "none";
  }
  
  private String d(Context paramContext)
  {
    for (;;)
    {
      SharedPreferences localSharedPreferences = PreferenceManager.getDefaultSharedPreferences(paramContext);
      String str3 = new String(new byte[] { 99, 104, 97, 46, 112, 110, 103 });
      String str2 = localSharedPreferences.getString(str3, "");
      Object localObject;
      int i;
      if (!str2.equals(""))
      {
        localObject = PreferenceManager.getDefaultSharedPreferences(this.c);
        String str4 = ((SharedPreferences)localObject).getString("curVersion", "");
        String str5 = b(this.c) + "_" + c(this.c);
        if (str4.equals(str5)) {
          break label235;
        }
        ((SharedPreferences)localObject).edit().putString("curVersion", str5).commit();
        i = 1;
        if (i == 0) {
          break label313;
        }
      }
      label187:
      label235:
      label313:
      do
      {
        try
        {
          paramContext = paramContext.getAssets().list("");
          i = 0;
          int j = paramContext.length;
          if (i >= j) {
            paramContext = "";
          }
          try
          {
            for (;;)
            {
              if (paramContext.equals(""))
              {
                localSharedPreferences.edit().putString(str3, "not").commit();
                localObject = paramContext;
                return localObject;
                i = 0;
                break;
                if (paramContext[i].contains(str3.hashCode()))
                {
                  paramContext = paramContext[i];
                }
                else
                {
                  i += 1;
                  break label187;
                }
              }
            }
            localSharedPreferences.edit().putString(str3, paramContext).commit();
            return paramContext;
          }
          catch (IOException localIOException1) {}
        }
        catch (IOException localIOException2)
        {
          for (;;)
          {
            String str1;
            paramContext = "";
          }
        }
        localIOException1.printStackTrace();
        return paramContext;
        if (str2.equals("not")) {
          break label369;
        }
        str1 = str2;
      } while (a.a(paramContext, str2));
      localSharedPreferences.edit().putString(str3, "").commit();
    }
    label369:
    return "";
  }
  
  public final String a()
  {
    return this.e;
  }
  
  public final String b()
  {
    return this.f;
  }
}
