package com.zhangzhifu.sdk.util.sms;

import java.io.StringReader;
import java.net.URLDecoder;
import java.net.URLEncoder;
import java.util.Stack;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

public class d
{
  Stack a = new Stack();
  private byte[] b;
  private String c;
  private String d;
  private String e;
  
  public d(byte[] paramArrayOfByte)
  {
    this.b = paramArrayOfByte;
    this.c = "";
    this.d = "";
    this.e = "";
    this.a.clear();
    c();
  }
  
  private void c()
  {
    if (this.b.length == 0) {
      throw new Exception("data zero length");
    }
    this.c = "<?xml version=\"1.0\" encoding=\"\"?>";
    int n = 1;
    int k = 0;
    int j = 0;
    int m = 0;
    int i = 0;
    Object localObject;
    if (n >= this.b.length)
    {
      localObject = new InputSource(new StringReader(this.c));
      localObject = (Element)DocumentBuilderFactory.newInstance().newDocumentBuilder().parse((InputSource)localObject).getDocumentElement().getElementsByTagName("indication").item(0);
      this.e = URLDecoder.decode(((Element)localObject).getAttribute("href"), "UTF-8");
      this.d = ((Element)localObject).getFirstChild().getNodeValue();
      return;
    }
    int i1;
    if (m != 0) {
      switch (this.b[n])
      {
      default: 
        i1 = k;
        k = m;
        m = i;
        i = i1;
      }
    }
    for (;;)
    {
      i1 = n + 1;
      n = m;
      m = k;
      k = i;
      i = n;
      n = i1;
      break;
      localObject = new byte[n - i];
      System.arraycopy(this.b, i, localObject, 0, n - i);
      if (j != 0)
      {
        this.c += URLEncoder.encode(new String((byte[])localObject, "UTF-8"), "UTF-8");
        j = 0;
      }
      for (;;)
      {
        if (k != 0)
        {
          this.c += "\"";
          k = 0;
          m = i;
          i = 0;
          break;
          this.c += new String((byte[])localObject, "UTF-8");
          continue;
          switch (this.b[n])
          {
          default: 
            String str = Integer.toHexString(this.b[n] & 0xFF);
            localObject = str;
            if (str.length() == 1) {
              localObject = "0" + str;
            }
            throw new Exception("Unkonwn byte: 0x" + ((String)localObject).toUpperCase() + " pos: " + n);
          case 5: 
            this.c += "<!DOCTYPE si PUBLIC \"-//WAPFORUM//DTD SI 1.0//EN\" \"http://www.wapforum.org/DTD/si.dtd\">";
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case 106: 
            this.c = this.c.replaceAll("encoding=\"\"", "encoding=\"UTF-8\"");
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case 0: 
          case 7: 
          case 8: 
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case 3: 
            m = n + 1;
            i = k;
            k = 1;
            break;
          case 69: 
            this.c += "<si>";
            this.a.add("si");
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case -58: 
            this.c += "<indication ";
            this.a.add("indication");
            this.a.add(">");
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case 12: 
            this.c += "href=\"http://";
            i1 = 1;
            j = 1;
            k = m;
            m = i;
            i = i1;
            break;
          case -61: 
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          case 1: 
            localObject = (String)this.a.pop();
            if (((String)localObject).equals(">"))
            {
              this.c += ">";
              i1 = i;
              i = k;
              k = m;
              m = i1;
              break;
            }
            this.c = (this.c + "</" + (String)localObject + ">");
            i1 = i;
            i = k;
            k = m;
            m = i1;
            break;
          }
        }
      }
      i1 = 0;
      m = i;
      i = k;
      k = i1;
    }
  }
  
  public String a()
  {
    return this.d;
  }
  
  public String b()
  {
    return this.e;
  }
}
