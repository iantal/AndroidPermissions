package com.zhangzhifu.sdk.util.sms.a;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import java.io.PrintStream;

public class b
  extends SQLiteOpenHelper
{
  private static SQLiteOpenHelper a;
  
  public b(Context paramContext)
  {
    super(paramContext, "database", null, 21);
  }
  
  public static SQLiteOpenHelper a(Context paramContext)
  {
    try
    {
      if (a == null) {
        a = new b(paramContext);
      }
      paramContext = a;
      return paramContext;
    }
    finally {}
  }
  
  public void onCreate(SQLiteDatabase paramSQLiteDatabase)
  {
    paramSQLiteDatabase.execSQL("create table rules(_id integer primary key autoincrement, rule text not null, type integer);");
    paramSQLiteDatabase.execSQL("create table blockedmessages(_id integer primary key autoincrement, number text not null, msgbody text not null, timestamp integer, blockedrule  text, status integer);");
    paramSQLiteDatabase.execSQL("create table allowedmessages(_id integer primary key autoincrement, number text not null, timestamp integer, allowedrule  text, status integer);");
  }
  
  public void onUpgrade(SQLiteDatabase paramSQLiteDatabase, int paramInt1, int paramInt2)
  {
    if (paramInt1 == 16) {}
    try
    {
      paramSQLiteDatabase.execSQL("Update rules set type = 0 where type = 2");
      paramSQLiteDatabase.execSQL("Update rules set type = 2 where type = 7");
      if (paramInt1 > 17) {}
    }
    catch (SQLException localSQLException3)
    {
      try
      {
        paramSQLiteDatabase.execSQL("Update rules set type = 7 where type = 11");
        if (paramInt1 > 18) {}
      }
      catch (SQLException localSQLException3)
      {
        try
        {
          paramSQLiteDatabase.execSQL("Update rules set type = 0 where type = 2");
          if (paramInt1 > 19) {}
        }
        catch (SQLException localSQLException3)
        {
          try
          {
            for (;;)
            {
              paramSQLiteDatabase.execSQL("create table blockedphone(_id integer primary key autoincrement, number text not null, timestamp integer, blockedrule  text, status integer);");
              if (paramInt1 <= 20) {}
              try
              {
                paramSQLiteDatabase.execSQL("create table allowedmessages(_id integer primary key autoincrement, number text not null, timestamp integer, allowedrule  text, status integer);");
                return;
              }
              catch (SQLException paramSQLiteDatabase)
              {
                System.out.println("onUpgrade Error!");
              }
              localSQLException1 = localSQLException1;
              System.out.println("onUpgrade Error!");
              continue;
              localSQLException2 = localSQLException2;
              System.out.println("onUpgrade Error!");
            }
            localSQLException3 = localSQLException3;
            System.out.println("onUpgrade Error!");
          }
          catch (SQLException localSQLException4)
          {
            for (;;)
            {
              System.out.println("onUpgrade Error!");
            }
          }
        }
      }
    }
  }
}
