package com.jshymedia.jshypay.dialog;

import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import com.jshymedia.jshypay.activity.OrderActivity;
import com.jshymedia.jshypay.order.PayOrder;
import com.jshymedia.jshypay.ztool.ZPhoneInfo;

public class MyDialog
  extends DialogFragment
{
  public static final int TYPE_CHOSE_SMS = 3;
  public static final int TYPE_ERROR = 2;
  public static final int TYPE_IMSI_ERROR = 4;
  public static final int TYPE_NO_NET = 1;
  public static final int TYPE_NO_RSSI = 5;
  public int payCode;
  
  public MyDialog() {}
  
  private Dialog a(String paramString)
  {
    AlertDialog.Builder localBuilder = new AlertDialog.Builder(getActivity());
    String str = ((OrderActivity)getActivity()).getOrder().getErrorInfo();
    if (str != null) {
      paramString = str;
    }
    localBuilder.setMessage(paramString);
    localBuilder.setNeutralButton("确定", new c(this));
    return localBuilder.create();
  }
  
  final boolean a(PayOrder paramPayOrder)
  {
    String str = ZPhoneInfo.getIMSI(getActivity());
    if (!paramPayOrder.imsi.equals(str))
    {
      paramPayOrder.setErrorInfo("Sim卡发生改变，支付取消。");
      return false;
    }
    return true;
  }
  
  public Dialog onCreateDialog(Bundle paramBundle)
  {
    Object localObject2 = getArguments();
    Object localObject1 = null;
    int i = ((Bundle)localObject2).getInt("type");
    this.payCode = i;
    switch (i)
    {
    default: 
    case 1: 
    case 2: 
      for (;;)
      {
        localObject2 = localObject1;
        if (localObject1 == null) {
          localObject2 = super.onCreateDialog(paramBundle);
        }
        return localObject2;
        localObject1 = a("请检查网络连接");
        continue;
        localObject1 = a("抱歉，支付异常");
      }
    }
    localObject2 = (OrderActivity)getActivity();
    AlertDialog.Builder localBuilder = new AlertDialog.Builder(getActivity());
    PayOrder localPayOrder = PayOrder.getOrderWithId(getArguments().getInt("orderId"));
    if (localPayOrder.getOperator() != null) {}
    for (localObject1 = "您订购的\"" + localPayOrder.getInfo() + "\",金额" + localPayOrder.getMoney() / 100 + "元,将由合作伙伴代收费，点击确认支付";; localObject1 = "您订购的\"" + localPayOrder.getInfo() + "\",金额" + localPayOrder.getMoney() / 100 + "元,将由合作伙伴代收费，点击确认支付")
    {
      localBuilder.setMessage((CharSequence)localObject1);
      localBuilder.setNeutralButton("确认", new a(this, localPayOrder, (OrderActivity)localObject2));
      localBuilder.setNegativeButton("取消", new b(this, localPayOrder));
      localObject1 = localBuilder.create();
      break;
    }
  }
}
