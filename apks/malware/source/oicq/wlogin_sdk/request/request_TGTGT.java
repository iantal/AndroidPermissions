package oicq.wlogin_sdk.request;

import oicq.wlogin_sdk.tlv_type.tlv_t1;
import oicq.wlogin_sdk.tlv_type.tlv_t100;
import oicq.wlogin_sdk.tlv_type.tlv_t104;
import oicq.wlogin_sdk.tlv_type.tlv_t106;
import oicq.wlogin_sdk.tlv_type.tlv_t107;
import oicq.wlogin_sdk.tlv_type.tlv_t108;
import oicq.wlogin_sdk.tlv_type.tlv_t109;
import oicq.wlogin_sdk.tlv_type.tlv_t112;
import oicq.wlogin_sdk.tlv_type.tlv_t116;
import oicq.wlogin_sdk.tlv_type.tlv_t124;
import oicq.wlogin_sdk.tlv_type.tlv_t128;
import oicq.wlogin_sdk.tlv_type.tlv_t142;
import oicq.wlogin_sdk.tlv_type.tlv_t144;
import oicq.wlogin_sdk.tlv_type.tlv_t145;
import oicq.wlogin_sdk.tlv_type.tlv_t147;
import oicq.wlogin_sdk.tlv_type.tlv_t166;
import oicq.wlogin_sdk.tlv_type.tlv_t18;
import oicq.wlogin_sdk.tools.util;

public class request_TGTGT
  extends oicq_request
{
  int _response_ret_pos = 0;
  
  public request_TGTGT(request_global paramRequest_global)
  {
    this._cmd = 2064;
    this._sub_cmd = 9;
    this._service_cmd = "wtlogin.login";
    this._g = paramRequest_global;
  }
  
  public byte[] get_request_body(long paramLong1, int paramInt1, long paramLong2, int paramInt2, byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt3, int paramInt4, long[] paramArrayOfLong, int paramInt5, long paramLong3, int paramInt6, int paramInt7, int paramInt8, int paramInt9, int paramInt10, byte[] paramArrayOfByte3, byte[] paramArrayOfByte4, byte[] paramArrayOfByte5, byte[] paramArrayOfByte6)
  {
    Object localObject3 = new tlv_t18();
    Object localObject4 = new tlv_t1();
    Object localObject5 = new tlv_t106();
    Object localObject2 = new tlv_t116();
    Object localObject6 = new tlv_t100();
    Object localObject7 = new tlv_t107();
    tlv_t108 localTlv_t108 = new tlv_t108();
    Object localObject9 = new tlv_t109();
    tlv_t104 localTlv_t104 = new tlv_t104();
    tlv_t124 localTlv_t124 = new tlv_t124();
    Object localObject8 = new tlv_t128();
    tlv_t142 localTlv_t142 = new tlv_t142();
    tlv_t112 localTlv_t112 = new tlv_t112();
    tlv_t144 localTlv_t144 = new tlv_t144();
    Object localObject1 = new tlv_t145();
    tlv_t147 localTlv_t147 = new tlv_t147();
    Object localObject10 = new tlv_t166();
    localObject3 = ((tlv_t18)localObject3).get_tlv_18(paramLong1, paramInt1, paramLong2, paramInt2);
    localObject4 = ((tlv_t1)localObject4).get_tlv_1(paramLong2, paramArrayOfByte1);
    this._g._encrypt_a1 = encrypt_a1(paramArrayOfByte2);
    ((tlv_t106)localObject5).set_data(paramArrayOfByte2, paramArrayOfByte2.length);
    localObject5 = ((tlv_t106)localObject5).get_buf();
    util.LOGD("req2 a1:", util.buf_to_string((byte[])localObject5));
    localObject6 = ((tlv_t100)localObject6).get_tlv_100(paramLong1, paramLong3, paramInt1, paramInt5);
    localObject7 = ((tlv_t107)localObject7).get_tlv_107(paramInt7, paramInt8, paramInt9, paramInt10);
    byte[] arrayOfByte1 = ((tlv_t116)localObject2).get_tlv_116(paramInt3, paramInt4, paramArrayOfLong);
    byte[] arrayOfByte2 = ((tlv_t145)localObject1).get_tlv145(this._g._IMEI);
    paramInt2 = 0 + 7;
    paramArrayOfByte1 = new byte[0];
    paramArrayOfLong = new byte[0];
    localObject1 = new byte[0];
    localObject2 = new byte[0];
    paramArrayOfByte2 = new byte[0];
    paramInt1 = paramInt2;
    if (paramArrayOfByte3.length > 0)
    {
      paramArrayOfByte1 = localTlv_t108.get_tlv_108(paramArrayOfByte3);
      paramInt1 = paramInt2 + 1;
    }
    paramInt2 = paramInt1;
    if ((paramInt3 & 0x80) != 0)
    {
      paramArrayOfByte2 = ((tlv_t166)localObject10).get_tlv166(this._g._img_type);
      paramInt2 = paramInt1 + 1;
    }
    if (paramArrayOfByte4.length > 0) {
      paramArrayOfLong = ((tlv_t109)localObject9).get_tlv_109(paramArrayOfByte4);
    }
    paramArrayOfByte3 = util.get_os_type();
    paramArrayOfByte4 = util.get_os_version();
    paramInt1 = this._g._network_type;
    localObject9 = this._g._sim_operator_name;
    localObject10 = this._g._apn;
    paramArrayOfByte4 = localTlv_t124.get_tlv124(paramArrayOfByte3, paramArrayOfByte4, paramInt1, (byte[])localObject9, new byte[0], (byte[])localObject10);
    localObject8 = ((tlv_t128)localObject8).get_tlv128(this._g._new_install, this._g._read_guid, this._g._guid_chg, 0, this._g._device, this._g._IMEI);
    try
    {
      paramArrayOfByte3 = localTlv_t147.get_tlv147(paramLong1, this._g._apk_v, this._g._apk_sig);
      paramArrayOfByte4 = localTlv_t144.get_tlv144(paramArrayOfLong, paramArrayOfByte4, (byte[])localObject8, paramArrayOfByte3, this._g._key_tgtgt);
      paramArrayOfByte6 = localTlv_t142.get_tlv142(paramArrayOfByte6);
      paramInt2 = paramInt2 + 1 + 1;
      paramArrayOfLong = (long[])localObject2;
      paramInt1 = paramInt2;
      if (this._g._name != null)
      {
        paramArrayOfLong = (long[])localObject2;
        paramInt1 = paramInt2;
        if (!util.check_uin_account(this._g._name).booleanValue())
        {
          paramArrayOfLong = localTlv_t112.get_tlv_112(this._g._name.getBytes());
          paramInt1 = paramInt2 + 1;
        }
      }
      paramArrayOfByte3 = (byte[])localObject1;
      paramInt2 = paramInt1;
      if (paramArrayOfByte5.length > 0)
      {
        paramArrayOfByte3 = localTlv_t104.get_tlv_104(paramArrayOfByte5);
        paramInt2 = paramInt1 + 1;
      }
      paramArrayOfByte5 = new byte[localObject3.length + localObject4.length + localObject5.length + arrayOfByte1.length + localObject6.length + localObject7.length + paramArrayOfByte1.length + paramArrayOfByte4.length + paramArrayOfByte3.length + paramArrayOfByte6.length + paramArrayOfLong.length + arrayOfByte2.length + paramArrayOfByte2.length];
      System.arraycopy(localObject3, 0, paramArrayOfByte5, 0, localObject3.length);
      paramInt1 = 0 + localObject3.length;
      System.arraycopy(localObject4, 0, paramArrayOfByte5, paramInt1, localObject4.length);
      paramInt1 += localObject4.length;
      System.arraycopy(localObject5, 0, paramArrayOfByte5, paramInt1, localObject5.length);
      paramInt1 += localObject5.length;
      System.arraycopy(arrayOfByte1, 0, paramArrayOfByte5, paramInt1, arrayOfByte1.length);
      paramInt1 += arrayOfByte1.length;
      System.arraycopy(localObject6, 0, paramArrayOfByte5, paramInt1, localObject6.length);
      paramInt1 += localObject6.length;
      System.arraycopy(localObject7, 0, paramArrayOfByte5, paramInt1, localObject7.length);
      paramInt1 += localObject7.length;
      System.arraycopy(paramArrayOfByte1, 0, paramArrayOfByte5, paramInt1, paramArrayOfByte1.length);
      paramInt1 += paramArrayOfByte1.length;
      System.arraycopy(paramArrayOfByte4, 0, paramArrayOfByte5, paramInt1, paramArrayOfByte4.length);
      paramInt1 += paramArrayOfByte4.length;
      System.arraycopy(paramArrayOfByte6, 0, paramArrayOfByte5, paramInt1, paramArrayOfByte6.length);
      paramInt1 += paramArrayOfByte6.length;
      System.arraycopy(paramArrayOfLong, 0, paramArrayOfByte5, paramInt1, paramArrayOfLong.length);
      paramInt1 += paramArrayOfLong.length;
      System.arraycopy(paramArrayOfByte3, 0, paramArrayOfByte5, paramInt1, paramArrayOfByte3.length);
      paramInt1 += paramArrayOfByte3.length;
      System.arraycopy(arrayOfByte2, 0, paramArrayOfByte5, paramInt1, arrayOfByte2.length);
      paramInt1 += arrayOfByte2.length;
      System.arraycopy(paramArrayOfByte2, 0, paramArrayOfByte5, paramInt1, paramArrayOfByte2.length);
      paramInt1 = paramArrayOfByte2.length;
      return encrypt_body(paramArrayOfByte5, this._sub_cmd, paramInt2);
    }
    catch (Exception paramArrayOfByte3)
    {
      for (;;)
      {
        paramArrayOfByte3 = new byte[0];
      }
    }
  }
  
  public byte[] get_request_body(long paramLong1, int paramInt1, long paramLong2, int paramInt2, byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt3, byte[] paramArrayOfByte3, byte[] paramArrayOfByte4, int paramInt4, int paramInt5, long[] paramArrayOfLong, int paramInt6, long paramLong3, int paramInt7, int paramInt8, int paramInt9, int paramInt10, int paramInt11, byte[] paramArrayOfByte5, byte[] paramArrayOfByte6, byte[] paramArrayOfByte7, byte[] paramArrayOfByte8)
  {
    Object localObject2 = new tlv_t18();
    Object localObject3 = new tlv_t1();
    Object localObject4 = new tlv_t106();
    Object localObject6 = new tlv_t116();
    Object localObject7 = new tlv_t100();
    Object localObject5 = new tlv_t107();
    tlv_t108 localTlv_t108 = new tlv_t108();
    Object localObject8 = new tlv_t109();
    tlv_t104 localTlv_t104 = new tlv_t104();
    tlv_t124 localTlv_t124 = new tlv_t124();
    tlv_t128 localTlv_t128 = new tlv_t128();
    tlv_t142 localTlv_t142 = new tlv_t142();
    tlv_t112 localTlv_t112 = new tlv_t112();
    tlv_t144 localTlv_t144 = new tlv_t144();
    Object localObject1 = new tlv_t145();
    tlv_t147 localTlv_t147 = new tlv_t147();
    tlv_t166 localTlv_t166 = new tlv_t166();
    localObject2 = ((tlv_t18)localObject2).get_tlv_18(paramLong1, paramInt1, paramLong2, paramInt2);
    localObject3 = ((tlv_t1)localObject3).get_tlv_1(paramLong2, paramArrayOfByte1);
    byte[] arrayOfByte = ((tlv_t106)localObject4).get_tlv_106(paramLong1, paramInt1, paramLong2, paramArrayOfByte2, paramArrayOfByte1, 1, paramArrayOfByte3, paramArrayOfByte4, this._g._read_guid, this._g._IMEI);
    util.LOGD("req1 a1:", util.buf_to_string(arrayOfByte));
    this._g._encrypt_a1 = encrypt_a1(((tlv_t106)localObject4).get_data());
    localObject4 = ((tlv_t100)localObject7).get_tlv_100(paramLong1, paramLong3, paramInt1, paramInt6);
    localObject5 = ((tlv_t107)localObject5).get_tlv_107(paramInt8, paramInt9, paramInt10, paramInt11);
    localObject6 = ((tlv_t116)localObject6).get_tlv_116(paramInt4, paramInt5, paramArrayOfLong);
    localObject7 = ((tlv_t145)localObject1).get_tlv145(this._g._IMEI);
    paramInt2 = 0 + 7;
    paramArrayOfByte1 = new byte[0];
    paramArrayOfByte3 = new byte[0];
    paramArrayOfLong = new byte[0];
    localObject1 = new byte[0];
    paramArrayOfByte2 = new byte[0];
    paramInt1 = paramInt2;
    if (paramArrayOfByte5.length > 0)
    {
      paramArrayOfByte1 = localTlv_t108.get_tlv_108(paramArrayOfByte5);
      paramInt1 = paramInt2 + 1;
    }
    paramInt2 = paramInt1;
    if ((paramInt4 & 0x80) != 0)
    {
      paramArrayOfByte2 = localTlv_t166.get_tlv166(this._g._img_type);
      paramInt2 = paramInt1 + 1;
    }
    if (paramArrayOfByte6.length > 0) {
      paramArrayOfByte3 = ((tlv_t109)localObject8).get_tlv_109(paramArrayOfByte6);
    }
    paramArrayOfByte4 = util.get_os_type();
    paramArrayOfByte5 = util.get_os_version();
    paramInt1 = this._g._network_type;
    paramArrayOfByte6 = this._g._sim_operator_name;
    localObject8 = this._g._apn;
    paramArrayOfByte5 = localTlv_t124.get_tlv124(paramArrayOfByte4, paramArrayOfByte5, paramInt1, paramArrayOfByte6, new byte[0], (byte[])localObject8);
    paramArrayOfByte6 = localTlv_t128.get_tlv128(this._g._new_install, this._g._read_guid, this._g._guid_chg, 0, this._g._device, this._g._IMEI);
    try
    {
      paramArrayOfByte4 = localTlv_t147.get_tlv147(paramLong1, this._g._apk_v, this._g._apk_sig);
      paramArrayOfByte5 = localTlv_t144.get_tlv144(paramArrayOfByte3, paramArrayOfByte5, paramArrayOfByte6, paramArrayOfByte4, this._g._key_tgtgt);
      paramArrayOfByte6 = localTlv_t142.get_tlv142(paramArrayOfByte8);
      paramInt2 = paramInt2 + 1 + 1;
      paramArrayOfByte3 = (byte[])localObject1;
      paramInt1 = paramInt2;
      if (this._g._name != null)
      {
        paramArrayOfByte3 = (byte[])localObject1;
        paramInt1 = paramInt2;
        if (!util.check_uin_account(this._g._name).booleanValue())
        {
          paramArrayOfByte3 = localTlv_t112.get_tlv_112(this._g._name.getBytes());
          paramInt1 = paramInt2 + 1;
        }
      }
      paramArrayOfByte4 = paramArrayOfLong;
      paramInt2 = paramInt1;
      if (paramArrayOfByte7.length > 0)
      {
        paramArrayOfByte4 = localTlv_t104.get_tlv_104(paramArrayOfByte7);
        paramInt2 = paramInt1 + 1;
      }
      paramArrayOfLong = new byte[localObject2.length + localObject3.length + arrayOfByte.length + localObject6.length + localObject4.length + localObject5.length + paramArrayOfByte1.length + paramArrayOfByte5.length + paramArrayOfByte4.length + paramArrayOfByte6.length + paramArrayOfByte3.length + localObject7.length + paramArrayOfByte2.length];
      System.arraycopy(localObject2, 0, paramArrayOfLong, 0, localObject2.length);
      paramInt1 = 0 + localObject2.length;
      System.arraycopy(localObject3, 0, paramArrayOfLong, paramInt1, localObject3.length);
      paramInt1 += localObject3.length;
      System.arraycopy(arrayOfByte, 0, paramArrayOfLong, paramInt1, arrayOfByte.length);
      paramInt1 += arrayOfByte.length;
      System.arraycopy(localObject6, 0, paramArrayOfLong, paramInt1, localObject6.length);
      paramInt1 += localObject6.length;
      System.arraycopy(localObject4, 0, paramArrayOfLong, paramInt1, localObject4.length);
      paramInt1 += localObject4.length;
      System.arraycopy(localObject5, 0, paramArrayOfLong, paramInt1, localObject5.length);
      paramInt1 += localObject5.length;
      System.arraycopy(paramArrayOfByte1, 0, paramArrayOfLong, paramInt1, paramArrayOfByte1.length);
      paramInt1 += paramArrayOfByte1.length;
      System.arraycopy(paramArrayOfByte5, 0, paramArrayOfLong, paramInt1, paramArrayOfByte5.length);
      paramInt1 += paramArrayOfByte5.length;
      System.arraycopy(paramArrayOfByte6, 0, paramArrayOfLong, paramInt1, paramArrayOfByte6.length);
      paramInt1 += paramArrayOfByte6.length;
      System.arraycopy(paramArrayOfByte3, 0, paramArrayOfLong, paramInt1, paramArrayOfByte3.length);
      paramInt1 += paramArrayOfByte3.length;
      System.arraycopy(paramArrayOfByte4, 0, paramArrayOfLong, paramInt1, paramArrayOfByte4.length);
      paramInt1 += paramArrayOfByte4.length;
      System.arraycopy(localObject7, 0, paramArrayOfLong, paramInt1, localObject7.length);
      paramInt1 += localObject7.length;
      System.arraycopy(paramArrayOfByte2, 0, paramArrayOfLong, paramInt1, paramArrayOfByte2.length);
      paramInt1 = paramArrayOfByte2.length;
      util.LOGD(getClass().getName(), util.buf_to_string(paramArrayOfLong));
      util.LOGD("uin=", new Long(paramLong2).toString());
      return encrypt_body(paramArrayOfLong, this._sub_cmd, paramInt2);
    }
    catch (Exception paramArrayOfByte4)
    {
      for (;;)
      {
        paramArrayOfByte4 = new byte[0];
      }
    }
  }
  
  public int make_request(long paramLong1, int paramInt1, long paramLong2, int paramInt2, byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt3, int paramInt4, long[] paramArrayOfLong, int paramInt5, long paramLong3, int paramInt6, int paramInt7, int paramInt8, int paramInt9, int paramInt10, byte[] paramArrayOfByte3)
  {
    paramInt1 = this._g._app_client_version;
    this._g._uin = paramLong2;
    paramArrayOfByte2 = decrypt_a1(paramArrayOfByte2);
    if (paramArrayOfByte2 == null) {
      return 64522;
    }
    get_request(this._default_client_version, this._cmd, this._default_client_seq, paramLong2, this._default_ext_retry, this._default_ext_type, paramInt1, this._default_ext_instance, get_request_body(paramLong1, paramInt1, paramLong2, paramInt2, paramArrayOfByte1, paramArrayOfByte2, paramInt3, paramInt4, paramArrayOfLong, paramInt5, paramLong3, paramInt1, paramInt7, paramInt8, paramInt9, paramInt10, paramArrayOfByte3, this._g._IMEI, this._g._t104.get_data(), this._g._apk_id));
    paramInt1 = snd_rcv_req(String.valueOf(this._g._uin));
    if (paramInt1 != 0) {
      return paramInt1;
    }
    return get_response(this._rsp_buf, this._rsp_buf.length);
  }
  
  public int make_request(long paramLong1, int paramInt1, long paramLong2, int paramInt2, byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt3, byte[] paramArrayOfByte3, int paramInt4, int paramInt5, long[] paramArrayOfLong, int paramInt6, long paramLong3, int paramInt7, int paramInt8, int paramInt9, int paramInt10, int paramInt11, byte[] paramArrayOfByte4)
  {
    paramInt1 = this._g._app_client_version;
    this._g._uin = paramLong2;
    util.LOGD("IMEI", util.buf_to_string(this._g._IMEI));
    paramArrayOfByte1 = get_request_body(paramLong1, paramInt1, paramLong2, paramInt2, paramArrayOfByte1, paramArrayOfByte2, paramInt3, paramArrayOfByte3, this._g._key_tgtgt, paramInt4, paramInt5, paramArrayOfLong, paramInt6, paramLong3, paramInt1, paramInt8, paramInt9, paramInt10, paramInt11, paramArrayOfByte4, this._g._IMEI, this._g._t104.get_data(), this._g._apk_id);
    get_request(this._default_client_version, this._cmd, this._default_client_seq, paramLong2, this._default_ext_retry, this._default_ext_type, paramInt1, this._default_ext_instance, paramArrayOfByte1);
    paramInt1 = snd_rcv_req(String.valueOf(this._g._uin));
    if (paramInt1 != 0) {
      return paramInt1;
    }
    return get_response(this._rsp_buf, this._rsp_buf.length);
  }
}
