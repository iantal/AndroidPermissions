package com.eden.sdk.service;

import android.util.Log;
import com.eden.sdk.b.g;
import com.eden.sdk.manager.NovaManager;
import com.eden.sdk.manager.a;
import com.eden.sdk.manager.b;
import com.eden.sdk.util.AppUtils;
import java.util.List;
import org.apache.http.Header;

final class h
  extends g
{
  h(B paramB, String paramString) {}
  
  public final void onFailure(int paramInt, Header[] paramArrayOfHeader, String paramString, Throwable paramThrowable)
  {
    NovaManager.log("DownloadVideoService onFailure: " + paramThrowable);
  }
  
  public final void onSuccess(int paramInt, Header[] paramArrayOfHeader, String paramString)
  {
    try
    {
      NovaManager.log("DownloadVideoService onSuccess: " + paramString);
      paramArrayOfHeader = AppUtils.getHlsFileUrlList(this.b, paramString);
      if ((paramArrayOfHeader != null) && (!paramArrayOfHeader.isEmpty()))
      {
        NovaManager.log("DownloadVideoService 切片数量: " + paramArrayOfHeader.size());
        int i = Math.min(paramArrayOfHeader.size(), 20);
        paramInt = 0;
        for (;;)
        {
          if (paramInt >= i)
          {
            paramInt = a.a(this.a).c();
            NovaManager.log("Download video count: " + paramInt);
            a.a(this.a).a(paramInt + 1);
            return;
          }
          b.a((String)paramArrayOfHeader.get(paramInt), new i(this));
          paramInt += 1;
        }
      }
      return;
    }
    catch (Exception paramArrayOfHeader)
    {
      Log.e("EdenSdk", "downloadHlsVideo:" + paramArrayOfHeader.toString());
    }
  }
}
