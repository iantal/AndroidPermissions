package com.lp.sdk.yninterface.service;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.NetworkInfo.State;
import com.lepeng.data.UtilApplication;
import com.lepeng.utils.StrUtil;
import com.lp.sdk.yninterface.YNInterface;
import java.io.PrintStream;

public class NetChangeBroadCast
  extends BroadcastReceiver
{
  public static final String ACTION = "android.net.conn.CONNECTIVITY_CHANGE";
  NetworkInfo.State a = null;
  NetworkInfo.State b = null;
  
  public NetChangeBroadCast() {}
  
  public void onReceive(Context paramContext, Intent paramIntent)
  {
    if ("android.net.conn.CONNECTIVITY_CHANGE".equals(paramIntent.getAction()))
    {
      System.err.println("网络发生变化");
      if (UtilApplication.getInstance() == null)
      {
        YNInterface.getInstance(paramContext);
        System.err.println("程序重启");
      }
      paramContext = (ConnectivityManager)paramContext.getSystemService("connectivity");
      this.a = paramContext.getNetworkInfo(1).getState();
      this.b = paramContext.getNetworkInfo(0).getState();
      paramContext = UtilApplication.getInstance().getLastState();
      if ((this.a != null) && (this.b != null) && (StrUtil.notEmptyOrNull(paramContext)))
      {
        paramIntent = paramContext.split(":");
        if (paramIntent.length == 2)
        {
          paramContext = NetworkInfo.State.valueOf(paramIntent[0]);
          paramIntent = NetworkInfo.State.valueOf(paramIntent[1]);
          if ((this.a.compareTo(paramContext) == 0) && (this.b.compareTo(paramIntent) == 0)) {
            System.out.println("网络没有变化");
          }
        }
      }
    }
    else
    {
      return;
    }
    UtilApplication.getInstance().setLastState(this.a + ":" + this.b);
  }
}
