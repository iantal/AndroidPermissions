package com.lp.sdk.yninterface.mmqiang;

import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.StatusLine;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import org.apache.http.util.EntityUtils;

public class HttpUtil
{
  public static int OVERTIME = 15000;
  
  public HttpUtil() {}
  
  public static String sendGet(String paramString)
  {
    paramString = (HttpURLConnection)new URL(paramString).openConnection();
    paramString.setConnectTimeout(OVERTIME);
    paramString.setReadTimeout(OVERTIME);
    paramString.setRequestMethod("GET");
    paramString = new BufferedInputStream(paramString.getInputStream());
    ByteArrayOutputStream localByteArrayOutputStream = new ByteArrayOutputStream();
    for (;;)
    {
      int i = paramString.read();
      if (i == -1) {
        return localByteArrayOutputStream.toString("UTF-8").trim();
      }
      localByteArrayOutputStream.write((byte)i);
    }
  }
  
  public static String sendPost(String paramString, List<NameValuePair> paramList)
  {
    Object localObject = null;
    paramString = new HttpPost(paramString);
    paramString.setEntity(new UrlEncodedFormEntity(paramList, "UTF-8"));
    paramList = new DefaultHttpClient();
    paramList.getParams().setParameter("http.connection.timeout", Integer.valueOf(OVERTIME));
    paramList.getParams().setParameter("http.socket.timeout", Integer.valueOf(OVERTIME));
    paramList = paramList.execute(paramString);
    paramString = localObject;
    if (paramList.getStatusLine() != null)
    {
      paramString = localObject;
      if (paramList.getStatusLine().getStatusCode() == 200) {
        paramString = EntityUtils.toString(paramList.getEntity()).trim();
      }
    }
    return paramString;
  }
}
