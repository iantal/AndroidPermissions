package com.lepeng.fastjson.serializer;

import com.lepeng.fastjson.annotation.JSONField;
import com.lepeng.fastjson.util.FieldInfo;
import java.util.Collection;

public class ObjectFieldSerializer
  extends FieldSerializer
{
  private ObjectSerializer jdField_b_of_type_ComLepengFastjsonSerializerObjectSerializer;
  private boolean jdField_b_of_type_Boolean = false;
  private Class<?> jdField_c_of_type_JavaLangClass;
  boolean jdField_c_of_type_Boolean = false;
  boolean d = false;
  boolean e = false;
  boolean f = false;
  private String l;
  
  public ObjectFieldSerializer(FieldInfo paramFieldInfo)
  {
    super(paramFieldInfo);
    paramFieldInfo = (JSONField)paramFieldInfo.getAnnotation(JSONField.class);
    int i;
    if (paramFieldInfo != null)
    {
      this.l = paramFieldInfo.format();
      if (this.l.trim().length() == 0) {
        this.l = null;
      }
      paramFieldInfo = paramFieldInfo.serialzeFeatures();
      int j = paramFieldInfo.length;
      i = 0;
      if (i < j) {}
    }
    else
    {
      return;
    }
    Object localObject = paramFieldInfo[i];
    if (localObject == SerializerFeature.WriteNullNumberAsZero) {
      this.jdField_b_of_type_Boolean = true;
    }
    for (;;)
    {
      i += 1;
      break;
      if (localObject == SerializerFeature.WriteNullStringAsEmpty) {
        this.jdField_c_of_type_Boolean = true;
      } else if (localObject == SerializerFeature.WriteNullBooleanAsFalse) {
        this.d = true;
      } else if (localObject == SerializerFeature.WriteNullListAsEmpty) {
        this.e = true;
      } else if (localObject == SerializerFeature.WriteEnumUsingToString) {
        this.f = true;
      }
    }
  }
  
  public void writeProperty(JSONSerializer paramJSONSerializer, Object paramObject)
  {
    writePrefix(paramJSONSerializer);
    if (this.l != null)
    {
      paramJSONSerializer.writeWithFormat(paramObject, this.l);
      return;
    }
    if (this.jdField_b_of_type_ComLepengFastjsonSerializerObjectSerializer == null) {
      if (paramObject != null) {
        break label89;
      }
    }
    label89:
    for (this.jdField_c_of_type_JavaLangClass = this.fieldInfo.getFieldClass();; this.jdField_c_of_type_JavaLangClass = paramObject.getClass())
    {
      this.jdField_b_of_type_ComLepengFastjsonSerializerObjectSerializer = paramJSONSerializer.getObjectWriter(this.jdField_c_of_type_JavaLangClass);
      if (paramObject != null) {
        break label201;
      }
      if ((!this.jdField_b_of_type_Boolean) || (!Number.class.isAssignableFrom(this.jdField_c_of_type_JavaLangClass))) {
        break;
      }
      paramJSONSerializer.getWriter().write('0');
      return;
    }
    if ((this.jdField_c_of_type_Boolean) && (String.class == this.jdField_c_of_type_JavaLangClass))
    {
      paramJSONSerializer.getWriter().write("\"\"");
      return;
    }
    if ((this.d) && (Boolean.class == this.jdField_c_of_type_JavaLangClass))
    {
      paramJSONSerializer.getWriter().write("false");
      return;
    }
    if ((this.e) && (Collection.class.isAssignableFrom(this.jdField_c_of_type_JavaLangClass)))
    {
      paramJSONSerializer.getWriter().write("[]");
      return;
    }
    this.jdField_b_of_type_ComLepengFastjsonSerializerObjectSerializer.write(paramJSONSerializer, null, this.fieldInfo.getName(), null);
    return;
    label201:
    if ((this.f) && (this.jdField_c_of_type_JavaLangClass.isEnum()))
    {
      paramJSONSerializer.getWriter().writeString(((Enum)paramObject).name());
      return;
    }
    Class localClass = paramObject.getClass();
    if (localClass == this.jdField_c_of_type_JavaLangClass)
    {
      this.jdField_b_of_type_ComLepengFastjsonSerializerObjectSerializer.write(paramJSONSerializer, paramObject, this.fieldInfo.getName(), this.fieldInfo.getFieldType());
      return;
    }
    paramJSONSerializer.getObjectWriter(localClass).write(paramJSONSerializer, paramObject, this.fieldInfo.getName(), this.fieldInfo.getFieldType());
  }
}
