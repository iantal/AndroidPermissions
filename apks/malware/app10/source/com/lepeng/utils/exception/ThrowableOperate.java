package com.lepeng.utils.exception;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import com.lepeng.data.ThrowableData;
import com.lepeng.data.UtilApplication;
import com.lepeng.utils.DeviceUtil;
import java.io.PrintWriter;
import java.io.StringWriter;

public class ThrowableOperate
{
  public static final String VERSION_UNKOWN_STRING = "version_unkown";
  private static final Context ctx = UtilApplication.getInstance().ctx;
  
  public ThrowableOperate() {}
  
  private static String a(Throwable paramThrowable)
  {
    return new ThrowableData(b(paramThrowable), DeviceUtil.getDeviceInfoByReflection(), getVersionInfo()).toString();
  }
  
  private static String b(Throwable paramThrowable)
  {
    StringWriter localStringWriter = new StringWriter();
    PrintWriter localPrintWriter = new PrintWriter(localStringWriter);
    paramThrowable.printStackTrace(localPrintWriter);
    localPrintWriter.close();
    return localStringWriter.toString();
  }
  
  private static String getVersionInfo()
  {
    try
    {
      String str = ctx.getPackageManager().getPackageInfo(ctx.getPackageName(), 0).versionName;
      return str;
    }
    catch (Exception localException)
    {
      CheckedExceptionHandler.handleException(localException);
    }
    return "version_unkown";
  }
  
  public static void operateException(Throwable paramThrowable, String paramString, Boolean paramBoolean)
  {
    new Thread(new ThrowableOperate.1(paramThrowable, paramBoolean)).start();
  }
}
