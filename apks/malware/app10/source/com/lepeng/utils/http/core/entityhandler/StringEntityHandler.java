package com.lepeng.utils.http.core.entityhandler;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import org.apache.http.HttpEntity;

public class StringEntityHandler
{
  public StringEntityHandler() {}
  
  public Object handleEntity(HttpEntity paramHttpEntity, EntityCallBack paramEntityCallBack)
  {
    if (paramHttpEntity == null) {
      return null;
    }
    ByteArrayOutputStream localByteArrayOutputStream = new ByteArrayOutputStream();
    byte[] arrayOfByte = new byte['Ð€'];
    long l3 = paramHttpEntity.getContentLength();
    long l1 = 0L;
    paramHttpEntity = paramHttpEntity.getContent();
    for (;;)
    {
      int i = paramHttpEntity.read(arrayOfByte);
      if (i == -1)
      {
        if (paramEntityCallBack != null) {
          paramEntityCallBack.callBack(l3, l1, true);
        }
        paramEntityCallBack = localByteArrayOutputStream.toByteArray();
        localByteArrayOutputStream.close();
        paramHttpEntity.close();
        return new String(paramEntityCallBack, "utf-8");
      }
      localByteArrayOutputStream.write(arrayOfByte, 0, i);
      long l2 = l1 + i;
      l1 = l2;
      if (paramEntityCallBack != null)
      {
        paramEntityCallBack.callBack(l3, l2, false);
        l1 = l2;
      }
    }
  }
}
