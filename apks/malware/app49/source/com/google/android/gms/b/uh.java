package com.google.android.gms.b;

import android.app.Activity;
import android.app.Application;
import android.content.Context;
import android.os.Build.VERSION;
import android.text.TextUtils;
import android.util.Log;
import com.google.android.gms.common.internal.aq;
import java.util.ArrayList;
import java.util.List;

public class uh
{
  private static final ui[] a = new ui[0];
  private static uh b;
  private final Application c;
  private uq d;
  private final List<ui> e;
  private ut f;
  
  private uh(Application paramApplication)
  {
    aq.a(paramApplication);
    this.c = paramApplication;
    this.e = new ArrayList();
  }
  
  public static uh a(Context paramContext)
  {
    aq.a(paramContext);
    paramContext = (Application)paramContext.getApplicationContext();
    aq.a(paramContext);
    try
    {
      if (b == null) {
        b = new uh(paramContext);
      }
      paramContext = b;
      return paramContext;
    }
    finally {}
  }
  
  private ui[] c()
  {
    synchronized (this.e)
    {
      if (this.e.isEmpty())
      {
        arrayOfUi = a;
        return arrayOfUi;
      }
      ui[] arrayOfUi = (ui[])this.e.toArray(new ui[this.e.size()]);
      return arrayOfUi;
    }
  }
  
  public final uq a()
  {
    return this.d;
  }
  
  public final void a(ui paramUi)
  {
    aq.a(paramUi);
    synchronized (this.e)
    {
      this.e.remove(paramUi);
      this.e.add(paramUi);
      return;
    }
  }
  
  public final void a(uq paramUq, Activity paramActivity)
  {
    int j = 0;
    aq.a(paramUq);
    Object localObject;
    int i;
    if (paramUq.f())
    {
      if (this.d != null)
      {
        paramUq.a(this.d.b());
        paramUq.b(this.d.a());
      }
      localObject = c();
      i = 0;
      while (i < localObject.length)
      {
        localObject[i].a(paramUq, paramActivity);
        i += 1;
      }
      paramUq.g();
      if (TextUtils.isEmpty(paramUq.a())) {
        return;
      }
    }
    for (paramActivity = (Activity)localObject;; paramActivity = null)
    {
      if ((this.d != null) && (this.d.b() == paramUq.b()))
      {
        this.d = paramUq;
        return;
      }
      this.d = null;
      this.d = paramUq;
      localObject = paramActivity;
      i = j;
      if (paramActivity == null)
      {
        localObject = c();
        i = j;
      }
      while (i < localObject.length)
      {
        localObject[i].a(paramUq);
        i += 1;
      }
      break;
    }
  }
  
  public final void b()
  {
    if (Build.VERSION.SDK_INT < 14) {
      Log.i("com.google.android.gms.measurement.ScreenViewService", "AutoScreeViewTracking is not supported on API 14 or earlier devices");
    }
    for (;;)
    {
      return;
      if (this.f != null) {}
      for (int i = 1; i != 1; i = 0)
      {
        this.f = new ut(this);
        this.c.registerActivityLifecycleCallbacks(this.f);
        return;
      }
    }
  }
}
