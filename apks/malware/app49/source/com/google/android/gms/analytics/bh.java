package com.google.android.gms.analytics;

import android.text.TextUtils;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

final class bh
  implements Runnable
{
  bh(bg paramBg, Map paramMap) {}
  
  public final void run()
  {
    bg.a(this.b, this.a);
    if (TextUtils.isEmpty((CharSequence)this.a.get("&cid"))) {
      this.a.put("&cid", ak.a().a("&cid"));
    }
    if (!c.a(bg.a(this.b)).e())
    {
      localObject1 = this.b;
      if (!bg.b(this.a)) {}
    }
    else
    {
      return;
    }
    if (!TextUtils.isEmpty(bg.b(this.b)))
    {
      bk.a().a(true);
      this.a.putAll(new i().a(bg.b(this.b)).a());
      bk.a().a(false);
      bg.c(this.b);
    }
    Object localObject1 = this.b;
    bg.c(this.a);
    Object localObject2 = this.a;
    localObject1 = new HashMap();
    localObject2 = ((Map)localObject2).entrySet().iterator();
    while (((Iterator)localObject2).hasNext())
    {
      localObject3 = (Map.Entry)((Iterator)localObject2).next();
      if ((((String)((Map.Entry)localObject3).getKey()).startsWith("&")) && (((Map.Entry)localObject3).getValue() != null))
      {
        String str = ((String)((Map.Entry)localObject3).getKey()).substring(1);
        if (!TextUtils.isEmpty(str)) {
          ((Map)localObject1).put(str, ((Map.Entry)localObject3).getValue());
        }
      }
    }
    localObject2 = bg.e(this.b);
    long l = Long.valueOf((String)this.a.get("&ht")).longValue();
    Object localObject3 = this.b;
    ((v)localObject2).a((Map)localObject1, l, bg.d(this.a), bg.d(this.b));
  }
}
