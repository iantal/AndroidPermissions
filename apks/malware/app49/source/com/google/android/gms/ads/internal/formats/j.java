package com.google.android.gms.ads.internal.formats;

import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.view.ViewTreeObserver.OnScrollChangedListener;
import android.widget.FrameLayout;
import com.google.android.gms.a.c;
import com.google.android.gms.a.f;
import com.google.android.gms.b.ec;
import com.google.android.gms.b.ov;
import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public final class j
  extends ec
  implements View.OnClickListener, View.OnTouchListener, ViewTreeObserver.OnGlobalLayoutListener, ViewTreeObserver.OnScrollChangedListener
{
  private final Object a = new Object();
  private final FrameLayout b;
  private final FrameLayout c;
  private final Map<String, WeakReference<View>> d = new HashMap();
  private b e;
  private g f;
  
  public j(FrameLayout paramFrameLayout1, FrameLayout paramFrameLayout2)
  {
    this.b = paramFrameLayout1;
    this.c = paramFrameLayout2;
    ov.a(this.b, this);
    ov.a(this.b, this);
    this.b.setOnTouchListener(this);
  }
  
  private String a(View paramView)
  {
    synchronized (this.a)
    {
      if ((this.e != null) && (this.e.a().equals(paramView))) {
        return "1007";
      }
      Iterator localIterator = this.d.entrySet().iterator();
      while (localIterator.hasNext())
      {
        Map.Entry localEntry = (Map.Entry)localIterator.next();
        if (paramView.equals((View)((WeakReference)localEntry.getValue()).get()))
        {
          paramView = (String)localEntry.getKey();
          return paramView;
        }
      }
    }
    return null;
  }
  
  public final c a(String paramString)
  {
    synchronized (this.a)
    {
      paramString = (WeakReference)this.d.get(paramString);
      if (paramString == null)
      {
        paramString = null;
        paramString = f.a(paramString);
        return paramString;
      }
      paramString = (View)paramString.get();
    }
  }
  
  public final void a(c paramC)
  {
    synchronized (this.a)
    {
      this.f = ((g)f.a(paramC));
      this.c.removeAllViews();
      this.e = this.f.a(this);
      if (this.e != null) {
        this.c.addView(this.e);
      }
      return;
    }
  }
  
  public final void a(String paramString, c paramC)
  {
    View localView = (View)f.a(paramC);
    paramC = this.a;
    if (localView == null) {}
    for (;;)
    {
      try
      {
        this.d.remove(paramString);
        return;
      }
      finally {}
      this.d.put(paramString, new WeakReference(localView));
      localView.setOnClickListener(this);
    }
  }
  
  public final void onClick(View paramView)
  {
    synchronized (this.a)
    {
      if (this.f == null) {
        return;
      }
      paramView = a(paramView);
      if (paramView != null) {
        this.f.a(paramView);
      }
      return;
    }
  }
  
  public final void onGlobalLayout()
  {
    synchronized (this.a)
    {
      if (this.f != null) {
        this.f.a(this.b);
      }
      return;
    }
  }
  
  public final void onScrollChanged()
  {
    synchronized (this.a)
    {
      if (this.f != null) {
        this.f.a(this.b);
      }
      return;
    }
  }
  
  public final boolean onTouch(View arg1, MotionEvent paramMotionEvent)
  {
    synchronized (this.a)
    {
      if (this.f == null) {
        return false;
      }
      this.f.a(paramMotionEvent);
      return true;
    }
  }
}
