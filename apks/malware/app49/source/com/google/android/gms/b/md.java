package com.google.android.gms.b;

import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.ResolveInfo;
import android.content.res.Resources;
import android.media.AudioManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.NetworkInfo.DetailedState;
import android.net.Uri;
import android.os.Build.VERSION;
import android.telephony.TelephonyManager;
import android.util.DisplayMetrics;
import com.google.android.gms.ads.internal.client.l;
import com.google.android.gms.ads.internal.util.client.a;
import com.google.android.gms.ads.internal.w;
import java.util.Locale;

public final class md
{
  private int a;
  private boolean b;
  private boolean c;
  private int d;
  private int e;
  private int f;
  private String g;
  private int h;
  private int i;
  private int j;
  private boolean k;
  private int l;
  private double m;
  private boolean n;
  private boolean o;
  private boolean p;
  private String q;
  private boolean r;
  private String s;
  private String t;
  private float u;
  private int v;
  private int w;
  
  public md(Context paramContext)
  {
    PackageManager localPackageManager = paramContext.getPackageManager();
    a(paramContext);
    a(paramContext, localPackageManager);
    b(paramContext);
    paramContext = paramContext.getResources().getDisplayMetrics();
    Locale localLocale = Locale.getDefault();
    if (a(localPackageManager, "geo:0,0?q=donuts") != null)
    {
      bool1 = true;
      this.o = bool1;
      if (a(localPackageManager, "http://www.google.com") == null) {
        break label144;
      }
    }
    label144:
    for (boolean bool1 = bool2;; bool1 = false)
    {
      this.p = bool1;
      this.q = localLocale.getCountry();
      l.a();
      this.r = a.a();
      this.s = localLocale.getLanguage();
      this.t = a(localPackageManager);
      this.u = paramContext.density;
      this.v = paramContext.widthPixels;
      this.w = paramContext.heightPixels;
      return;
      bool1 = false;
      break;
    }
  }
  
  public md(Context paramContext, mc paramMc)
  {
    PackageManager localPackageManager = paramContext.getPackageManager();
    a(paramContext);
    a(paramContext, localPackageManager);
    b(paramContext);
    this.o = paramMc.b;
    this.p = paramMc.c;
    this.q = paramMc.e;
    this.r = paramMc.f;
    this.s = paramMc.i;
    this.t = paramMc.j;
    this.u = paramMc.q;
    this.v = paramMc.r;
    this.w = paramMc.s;
  }
  
  private static ResolveInfo a(PackageManager paramPackageManager, String paramString)
  {
    return paramPackageManager.resolveActivity(new Intent("android.intent.action.VIEW", Uri.parse(paramString)), 65536);
  }
  
  private static String a(PackageManager paramPackageManager)
  {
    Object localObject = a(paramPackageManager, "market://details?id=com.google.android.gms.ads");
    if (localObject == null) {}
    for (;;)
    {
      return null;
      localObject = ((ResolveInfo)localObject).activityInfo;
      if (localObject != null) {
        try
        {
          paramPackageManager = paramPackageManager.getPackageInfo(((ActivityInfo)localObject).packageName, 0);
          if (paramPackageManager != null)
          {
            paramPackageManager = paramPackageManager.versionCode + "." + ((ActivityInfo)localObject).packageName;
            return paramPackageManager;
          }
        }
        catch (PackageManager.NameNotFoundException paramPackageManager) {}
      }
    }
    return null;
  }
  
  private void a(Context paramContext)
  {
    paramContext = (AudioManager)paramContext.getSystemService("audio");
    this.a = paramContext.getMode();
    this.b = paramContext.isMusicActive();
    this.c = paramContext.isSpeakerphoneOn();
    this.d = paramContext.getStreamVolume(3);
    this.e = paramContext.getRingerMode();
    this.f = paramContext.getStreamVolume(2);
  }
  
  private void a(Context paramContext, PackageManager paramPackageManager)
  {
    TelephonyManager localTelephonyManager = (TelephonyManager)paramContext.getSystemService("phone");
    ConnectivityManager localConnectivityManager = (ConnectivityManager)paramContext.getSystemService("connectivity");
    this.g = localTelephonyManager.getNetworkOperator();
    int i1 = -2;
    w.e();
    if (nj.a(paramPackageManager, paramContext.getPackageName(), "android.permission.ACCESS_NETWORK_STATE"))
    {
      paramContext = localConnectivityManager.getActiveNetworkInfo();
      if (paramContext == null) {
        break label131;
      }
    }
    label131:
    for (i1 = paramContext.getType();; i1 = -1)
    {
      this.h = i1;
      this.i = localTelephonyManager.getNetworkType();
      this.j = localTelephonyManager.getPhoneType();
      if (Build.VERSION.SDK_INT < 16) {
        break label142;
      }
      this.k = localConnectivityManager.isActiveNetworkMetered();
      if (localConnectivityManager.getActiveNetworkInfo() == null) {
        break;
      }
      this.l = localConnectivityManager.getActiveNetworkInfo().getDetailedState().ordinal();
      return;
    }
    this.l = -1;
    return;
    label142:
    this.k = false;
    this.l = -1;
  }
  
  private void b(Context paramContext)
  {
    boolean bool = false;
    paramContext = paramContext.registerReceiver(null, new IntentFilter("android.intent.action.BATTERY_CHANGED"));
    if (paramContext != null)
    {
      int i1 = paramContext.getIntExtra("status", -1);
      int i2 = paramContext.getIntExtra("level", -1);
      int i3 = paramContext.getIntExtra("scale", -1);
      this.m = (i2 / i3);
      if ((i1 == 2) || (i1 == 5)) {
        bool = true;
      }
      this.n = bool;
      return;
    }
    this.m = -1.0D;
    this.n = false;
  }
  
  public final mc a()
  {
    return new mc(this.a, this.o, this.p, this.g, this.q, this.r, this.b, this.c, this.s, this.t, this.d, this.h, this.i, this.j, this.e, this.f, this.u, this.v, this.w, this.m, this.n, this.k, this.l);
  }
}
