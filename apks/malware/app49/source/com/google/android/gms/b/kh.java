package com.google.android.gms.b;

import android.content.Context;
import android.os.SystemClock;
import com.google.android.gms.ads.internal.util.client.b;
import com.google.android.gms.ads.internal.w;

public abstract class kh
  extends km
  implements pd
{
  protected boolean a = false;
  private final pb i;
  private boolean j = false;
  
  protected kh(Context paramContext, mm paramMm, pa paramPa, kr paramKr)
  {
    super(paramContext, paramMm, paramPa, paramKr);
    this.i = paramPa.i();
  }
  
  private boolean c(long paramLong)
  {
    paramLong = 60000L - (SystemClock.elapsedRealtime() - paramLong);
    if (paramLong <= 1L) {
      return false;
    }
    try
    {
      this.e.wait(paramLong);
      return true;
    }
    catch (InterruptedException localInterruptedException)
    {
      throw new kp("Ad request cancelled.", -1);
    }
  }
  
  protected final void a(long paramLong)
  {
    do
    {
      if (!c(paramLong)) {
        throw new kp("Timed out waiting for WebView to finish loading.", 2);
      }
      if (this.j) {
        throw new kp("Received cancellation request from creative.", 0);
      }
    } while (!this.a);
  }
  
  public final void a(pa arg1, boolean paramBoolean)
  {
    boolean bool = true;
    synchronized (this.e)
    {
      b.a("WebView finished loading.");
      this.a = true;
      if (!paramBoolean)
      {
        paramBoolean = bool;
        this.j = paramBoolean;
        this.e.notify();
        return;
      }
      paramBoolean = false;
    }
  }
  
  public void b()
  {
    synchronized (this.f)
    {
      this.d.stopLoading();
      w.g().a(this.d.a());
      return;
    }
  }
}
