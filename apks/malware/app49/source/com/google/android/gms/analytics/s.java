package com.google.android.gms.analytics;

import android.text.TextUtils;
import com.google.android.gms.analytics.internal.ad;
import com.google.android.gms.analytics.internal.ah;
import com.google.android.gms.analytics.internal.ap;
import com.google.android.gms.analytics.internal.b;
import com.google.android.gms.analytics.internal.bh;
import com.google.android.gms.analytics.internal.d;
import com.google.android.gms.analytics.internal.j;
import com.google.android.gms.analytics.internal.v;
import com.google.android.gms.b.uj;
import com.google.android.gms.b.ul;
import java.util.HashMap;
import java.util.Map;

final class s
  implements Runnable
{
  s(r paramR, Map paramMap, boolean paramBoolean1, String paramString1, long paramLong, boolean paramBoolean2, boolean paramBoolean3, String paramString2) {}
  
  public final void run()
  {
    boolean bool = true;
    if (r.a(this.h).b()) {
      this.a.put("sc", "start");
    }
    com.google.android.gms.analytics.internal.t.b(this.a, "cid", this.h.r().h());
    Object localObject = (String)this.a.get("sf");
    if (localObject != null)
    {
      double d1 = com.google.android.gms.analytics.internal.t.a((String)localObject);
      if (com.google.android.gms.analytics.internal.t.a(d1, (String)this.a.get("cid")))
      {
        this.h.b("Sampling enabled. Hit sampled out. sample rate", Double.valueOf(d1));
        return;
      }
    }
    localObject = r.b(this.h);
    if (this.b)
    {
      com.google.android.gms.analytics.internal.t.a(this.a, "ate", ((b)localObject).b());
      com.google.android.gms.analytics.internal.t.a(this.a, "adid", ((b)localObject).c());
      localObject = r.c(this.h).b();
      com.google.android.gms.analytics.internal.t.a(this.a, "an", ((uj)localObject).a());
      com.google.android.gms.analytics.internal.t.a(this.a, "av", ((uj)localObject).b());
      com.google.android.gms.analytics.internal.t.a(this.a, "aid", ((uj)localObject).c());
      com.google.android.gms.analytics.internal.t.a(this.a, "aiid", ((uj)localObject).d());
      this.a.put("v", "1");
      this.a.put("_v", ad.b);
      com.google.android.gms.analytics.internal.t.a(this.a, "ul", r.d(this.h).b().f());
      com.google.android.gms.analytics.internal.t.a(this.a, "sr", r.e(this.h).c());
      if ((!this.c.equals("transaction")) && (!this.c.equals("item"))) {
        break label380;
      }
    }
    label380:
    for (int i = 1;; i = 0)
    {
      if ((i != 0) || (r.f(this.h).a())) {
        break label385;
      }
      r.g(this.h).a(this.a, "Too many hits sent too quickly, rate limiting invoked");
      return;
      this.a.remove("ate");
      this.a.remove("adid");
      break;
    }
    label385:
    long l2 = com.google.android.gms.analytics.internal.t.b((String)this.a.get("ht"));
    long l1 = l2;
    if (l2 == 0L) {
      l1 = this.d;
    }
    if (this.e)
    {
      localObject = new d(this.h, this.a, l1, this.f);
      r.h(this.h).c("Dry run enabled. Would have sent hit", localObject);
      return;
    }
    localObject = (String)this.a.get("cid");
    HashMap localHashMap = new HashMap();
    com.google.android.gms.analytics.internal.t.a(localHashMap, "uid", this.a);
    com.google.android.gms.analytics.internal.t.a(localHashMap, "an", this.a);
    com.google.android.gms.analytics.internal.t.a(localHashMap, "aid", this.a);
    com.google.android.gms.analytics.internal.t.a(localHashMap, "av", this.a);
    com.google.android.gms.analytics.internal.t.a(localHashMap, "aiid", this.a);
    String str = this.g;
    if (!TextUtils.isEmpty((CharSequence)this.a.get("adid"))) {}
    for (;;)
    {
      localObject = new ah((String)localObject, str, bool, 0L, localHashMap);
      l2 = r.i(this.h).a((ah)localObject);
      this.a.put("_s", String.valueOf(l2));
      localObject = new d(this.h, this.a, l1, this.f);
      r.j(this.h).a((d)localObject);
      return;
      bool = false;
    }
  }
}
