package com.google.android.gms.analytics;

import android.app.Activity;
import android.content.Intent;
import android.text.TextUtils;
import com.google.android.gms.analytics.internal.ac;
import com.google.android.gms.analytics.internal.ae;
import com.google.android.gms.analytics.internal.s;
import com.google.android.gms.b.rd;
import com.google.android.gms.common.internal.aq;
import java.util.HashMap;
import java.util.Map;

final class t
  extends ac
  implements i
{
  private boolean b;
  private int c;
  private long d = -1L;
  private boolean e;
  private long f;
  
  protected t(r paramR, ae paramAe)
  {
    super(paramAe);
  }
  
  private void c()
  {
    if ((this.d >= 0L) || (this.b))
    {
      r().a(r.a(this.a));
      return;
    }
    r().b(r.a(this.a));
  }
  
  protected final void a() {}
  
  public final void a(long paramLong)
  {
    this.d = paramLong;
    c();
  }
  
  public final void a(Activity paramActivity)
  {
    int i;
    if (this.c == 0)
    {
      if (m().b() < this.f + Math.max(1000L, this.d)) {
        break label231;
      }
      i = 1;
      if (i != 0) {
        this.e = true;
      }
    }
    this.c += 1;
    Object localObject1;
    HashMap localHashMap;
    if (this.b)
    {
      localObject1 = paramActivity.getIntent();
      if (localObject1 != null) {
        this.a.a(((Intent)localObject1).getData());
      }
      localHashMap = new HashMap();
      localHashMap.put("&t", "screenview");
      r localR = this.a;
      if (r.k(this.a) == null) {
        break label239;
      }
      Object localObject2 = r.k(this.a);
      localObject1 = paramActivity.getClass().getCanonicalName();
      localObject2 = (String)((s)localObject2).g.get(localObject1);
      if (localObject2 == null) {
        break label236;
      }
      localObject1 = localObject2;
      label161:
      localR.a("&cd", (String)localObject1);
      if (TextUtils.isEmpty((CharSequence)localHashMap.get("&dr")))
      {
        aq.a(paramActivity);
        paramActivity = paramActivity.getIntent();
        if (paramActivity != null) {
          break label250;
        }
        paramActivity = null;
      }
    }
    for (;;)
    {
      if (!TextUtils.isEmpty(paramActivity)) {
        localHashMap.put("&dr", paramActivity);
      }
      this.a.a(localHashMap);
      return;
      label231:
      i = 0;
      break;
      label236:
      break label161;
      label239:
      localObject1 = paramActivity.getClass().getCanonicalName();
      break label161;
      label250:
      localObject1 = paramActivity.getStringExtra("android.intent.extra.REFERRER_NAME");
      paramActivity = (Activity)localObject1;
      if (TextUtils.isEmpty((CharSequence)localObject1)) {
        paramActivity = null;
      }
    }
  }
  
  public final void a(boolean paramBoolean)
  {
    this.b = paramBoolean;
    c();
  }
  
  public final boolean b()
  {
    try
    {
      boolean bool = this.e;
      this.e = false;
      return bool;
    }
    finally
    {
      localObject = finally;
      throw localObject;
    }
  }
  
  public final void c_()
  {
    this.c -= 1;
    this.c = Math.max(0, this.c);
    if (this.c == 0) {
      this.f = m().b();
    }
  }
}
