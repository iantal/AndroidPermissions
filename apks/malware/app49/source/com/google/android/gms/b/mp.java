package com.google.android.gms.b;

import android.app.Activity;
import android.app.Application;
import android.content.Context;
import android.content.res.Resources;
import android.os.Bundle;
import com.google.android.gms.ads.internal.util.client.VersionInfoParcel;
import com.google.android.gms.ads.internal.util.client.b;
import com.google.android.gms.ads.internal.w;
import com.google.android.gms.common.d;
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Set;
import java.util.concurrent.Future;

public final class mp
  implements nd
{
  private final Object a = new Object();
  private final String b = nj.b();
  private final mq c = new mq(this.b);
  private ba d;
  private BigInteger e = BigInteger.ONE;
  private final HashSet<mn> f = new HashSet();
  private final HashMap<String, ms> g = new HashMap();
  private boolean h = false;
  private boolean i = true;
  private int j = 0;
  private boolean k = false;
  private Context l;
  private VersionInfoParcel m;
  private dl n = null;
  private boolean o = true;
  private cf p = null;
  private cg q = null;
  private ce r = null;
  private final LinkedList<Thread> s = new LinkedList();
  private final lk t = null;
  private Boolean u = null;
  private String v;
  
  public mp() {}
  
  private boolean k()
  {
    synchronized (this.a)
    {
      boolean bool = this.o;
      return bool;
    }
  }
  
  public final Bundle a(Context paramContext, mr paramMr, String paramString)
  {
    Bundle localBundle;
    synchronized (this.a)
    {
      localBundle = new Bundle();
      localBundle.putBundle("app", this.c.a(paramContext, paramString));
      paramContext = new Bundle();
      paramString = this.g.keySet().iterator();
      if (paramString.hasNext())
      {
        String str = (String)paramString.next();
        paramContext.putBundle(str, ((ms)this.g.get(str)).a());
      }
    }
    localBundle.putBundle("slots", paramContext);
    paramContext = new ArrayList();
    paramString = this.f.iterator();
    while (paramString.hasNext()) {
      paramContext.add(((mn)paramString.next()).d());
    }
    localBundle.putParcelableArrayList("ads", paramContext);
    paramMr.a(this.f);
    this.f.clear();
    return localBundle;
  }
  
  public final cg a(Context paramContext)
  {
    ??? = dh.A;
    if ((!((Boolean)w.n().a((cz)???)).booleanValue()) || (!rj.a()) || (k())) {
      return null;
    }
    synchronized (this.a)
    {
      if (this.p == null)
      {
        if (!(paramContext instanceof Activity)) {
          return null;
        }
        this.p = new cf((Application)paramContext.getApplicationContext(), (Activity)paramContext);
      }
      if (this.r == null) {
        this.r = new ce();
      }
      if (this.q == null) {
        this.q = new cg(this.p, this.r, new lk(this.l, this.m, null, null));
      }
      this.q.a();
      paramContext = this.q;
      return paramContext;
    }
  }
  
  public final String a()
  {
    return this.b;
  }
  
  public final String a(int paramInt, String paramString)
  {
    if (this.m.f) {}
    for (Resources localResources = this.l.getResources(); localResources == null; localResources = d.d(this.l)) {
      return paramString;
    }
    return localResources.getString(paramInt);
  }
  
  public final Future a(Context paramContext, boolean paramBoolean)
  {
    synchronized (this.a)
    {
      if (paramBoolean != this.i)
      {
        this.i = paramBoolean;
        paramContext = new my(paramContext, paramBoolean).h();
        return paramContext;
      }
      return null;
    }
  }
  
  public final void a(Context paramContext, VersionInfoParcel paramVersionInfoParcel)
  {
    synchronized (this.a)
    {
      if (!this.k)
      {
        this.l = paramContext.getApplicationContext();
        this.m = paramVersionInfoParcel;
        new mz(paramContext, this).h();
        new nb(paramContext, this).h();
        Object localObject2 = Thread.currentThread();
        lk.a(this.l, (Thread)localObject2, this.m);
        this.v = w.e().a(paramContext, paramVersionInfoParcel.c);
        paramVersionInfoParcel = paramContext.getApplicationContext();
        localObject2 = this.m;
        paramContext = paramContext.getApplicationContext();
        VersionInfoParcel localVersionInfoParcel = this.m;
        cz localCz = dh.b;
        this.d = new ba(paramVersionInfoParcel, (VersionInfoParcel)localObject2, new gc(paramContext, localVersionInfoParcel, (String)w.n().a(localCz)));
        paramContext = new dk();
        paramContext.a(this.l, this.m.c);
      }
      try
      {
        this.n = w.j().a(paramContext);
        this.k = true;
        return;
      }
      catch (IllegalArgumentException paramContext)
      {
        for (;;)
        {
          b.c("Cannot initialize CSI reporter.", paramContext);
        }
      }
    }
  }
  
  public final void a(Bundle paramBundle)
  {
    synchronized (this.a)
    {
      if (paramBundle.containsKey("use_https")) {}
      for (boolean bool = paramBundle.getBoolean("use_https");; bool = this.i)
      {
        this.i = bool;
        if (!paramBundle.containsKey("webview_cache_version")) {
          break;
        }
        i1 = paramBundle.getInt("webview_cache_version");
        this.j = i1;
        return;
      }
      int i1 = this.j;
    }
  }
  
  public final void a(mn paramMn)
  {
    synchronized (this.a)
    {
      this.f.add(paramMn);
      return;
    }
  }
  
  public final void a(Boolean paramBoolean)
  {
    synchronized (this.a)
    {
      this.u = paramBoolean;
      return;
    }
  }
  
  public final void a(String paramString, ms paramMs)
  {
    synchronized (this.a)
    {
      this.g.put(paramString, paramMs);
      return;
    }
  }
  
  public final void a(Throwable paramThrowable, boolean paramBoolean)
  {
    new lk(this.l, this.m, null, null).a(paramThrowable, paramBoolean);
  }
  
  public final void a(HashSet<mn> paramHashSet)
  {
    synchronized (this.a)
    {
      this.f.addAll(paramHashSet);
      return;
    }
  }
  
  public final void a(boolean paramBoolean)
  {
    synchronized (this.a)
    {
      this.o = paramBoolean;
      return;
    }
  }
  
  public final String b()
  {
    synchronized (this.a)
    {
      String str = this.e.toString();
      this.e = this.e.add(BigInteger.ONE);
      return str;
    }
  }
  
  public final mq c()
  {
    synchronized (this.a)
    {
      mq localMq = this.c;
      return localMq;
    }
  }
  
  public final dl d()
  {
    synchronized (this.a)
    {
      dl localDl = this.n;
      return localDl;
    }
  }
  
  public final boolean e()
  {
    synchronized (this.a)
    {
      boolean bool = this.h;
      this.h = true;
      return bool;
    }
  }
  
  public final boolean f()
  {
    synchronized (this.a)
    {
      boolean bool = this.i;
      return bool;
    }
  }
  
  public final String g()
  {
    synchronized (this.a)
    {
      String str = this.v;
      return str;
    }
  }
  
  public final Boolean h()
  {
    synchronized (this.a)
    {
      Boolean localBoolean = this.u;
      return localBoolean;
    }
  }
  
  public final ba i()
  {
    return this.d;
  }
  
  public final boolean j()
  {
    synchronized (this.a)
    {
      int i1 = this.j;
      cz localCz = dh.N;
      if (i1 < ((Integer)w.n().a(localCz)).intValue())
      {
        localCz = dh.N;
        this.j = ((Integer)w.n().a(localCz)).intValue();
        new na(this.l, this.j).h();
        return true;
      }
      return false;
    }
  }
}
