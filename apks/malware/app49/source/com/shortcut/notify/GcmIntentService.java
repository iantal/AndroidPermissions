package com.shortcut.notify;

import android.app.IntentService;
import android.app.NotificationManager;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import com.google.android.gms.gcm.a;
import org.json.JSONException;
import org.json.JSONObject;

public class GcmIntentService
  extends IntentService
{
  public static int a = 1;
  private NotificationManager b;
  
  public GcmIntentService()
  {
    super("GcmIntentService");
  }
  
  protected void onHandleIntent(Intent paramIntent)
  {
    Object localObject2 = paramIntent.getExtras();
    a.a(this);
    Object localObject1 = a.a(paramIntent);
    if ((!((Bundle)localObject2).isEmpty()) && (!"send_error".equals(localObject1)) && (!"deleted_messages".equals(localObject1)) && ("gcm".equals(localObject1))) {
      Log.i("TRUYEN8_GCM", "Received: " + ((Bundle)localObject2).toString());
    }
    do
    {
      try
      {
        ((Bundle)localObject2).getString("message");
        localObject1 = new JSONObject(((Bundle)localObject2).getString("content"));
        localObject2 = ((Bundle)localObject2).getString("type");
        if (!((String)localObject2).equals("story")) {
          continue;
        }
        ((JSONObject)localObject1).getInt("id");
        ((JSONObject)localObject1).getString("title");
        ((JSONObject)localObject1).getString("author");
        ((JSONObject)localObject1).getString("category");
        ((JSONObject)localObject1).getString("picture");
        throw new NullPointerException();
      }
      catch (JSONException localJSONException)
      {
        for (;;)
        {
          Log.i("TRUYEN8_GCM", "Error parse notification " + localJSONException.getMessage());
          localJSONException.printStackTrace();
        }
      }
      System.currentTimeMillis();
      this.b = ((NotificationManager)getSystemService("notification"));
      GcmBroadcastReceiver.a(paramIntent);
      return;
    } while (!((String)localObject2).equals("event"));
    ((JSONObject)localObject1).getInt("id");
    ((JSONObject)localObject1).getString("title");
    ((JSONObject)localObject1).getInt("view");
    ((JSONObject)localObject1).getInt("total_story");
    ((JSONObject)localObject1).getString("picture");
    throw new NullPointerException();
  }
}
