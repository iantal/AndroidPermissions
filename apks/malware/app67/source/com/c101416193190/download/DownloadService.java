package com.c101416193190.download;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.RemoteCallbackList;
import android.os.RemoteException;
import android.util.SparseArray;
import android.widget.RemoteViews;
import android.widget.Toast;
import com.c101416193190.download.db.a;
import com.c101416193190.service.b;
import com.c101416193190.util.k;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map.Entry;
import java.util.Set;

public class DownloadService
  implements b
{
  public static HashMap a;
  public static ArrayList b;
  public static HashMap c;
  public static final RemoteCallbackList d = new RemoteCallbackList();
  private static final byte[] f = new byte[0];
  private static ArrayList h = new ArrayList();
  private static SparseArray i = new SparseArray();
  private static int k;
  private static NotificationManager l;
  private static int p = 0;
  private Context g = null;
  private List j = null;
  private o m;
  private IBinder n = new d(this);
  private Handler o = new f(this);
  
  static
  {
    a = new HashMap();
    b = new ArrayList();
    c = new HashMap();
    k = 0;
  }
  
  public DownloadService(Context paramContext)
  {
    this.g = paramContext;
    this.m = new g(this);
  }
  
  public static void a(int paramInt)
  {
    i.delete(paramInt);
    l.cancel(paramInt);
  }
  
  public static void a(int paramInt1, int paramInt2)
  {
    Notification localNotification = (Notification)i.get(paramInt1);
    localNotification.contentView.setProgressBar(2131427371, 100, paramInt2, false);
    localNotification.contentView.setTextViewText(2131427370, paramInt2 + "%");
    l.notify(paramInt1, localNotification);
  }
  
  public static void a(int paramInt, Context paramContext)
  {
    k.a(paramContext, paramContext.getString(2131296331));
    Notification localNotification = (Notification)i.get(paramInt);
    localNotification.flags = 16;
    localNotification.contentView.setViewVisibility(2131427369, 8);
    localNotification.contentView.setViewVisibility(2131427372, 0);
    localNotification.contentView.setTextViewText(2131427372, paramContext.getString(2131296331));
    localNotification.contentIntent = PendingIntent.getActivity(paramContext, 0, new Intent(), 134217728);
    l.notify(paramInt, localNotification);
  }
  
  private static void a(DownloadTask paramDownloadTask)
  {
    if (paramDownloadTask == null) {
      return;
    }
    for (;;)
    {
      int i1;
      try
      {
        int i2 = d.beginBroadcast();
        i1 = 0;
        if (i1 >= i2)
        {
          d.finishBroadcast();
          return;
        }
      }
      catch (Exception paramDownloadTask)
      {
        return;
      }
      try
      {
        ((s)d.getBroadcastItem(i1)).a(paramDownloadTask);
        i1 += 1;
      }
      catch (Exception localException)
      {
        for (;;) {}
      }
      catch (RemoteException localRemoteException)
      {
        for (;;) {}
      }
    }
  }
  
  public static void a(l paramL, Context paramContext)
  {
    Toast.makeText(paramContext, paramContext.getString(2131296325), 1).show();
    Notification localNotification = new Notification(2130837514, "", System.currentTimeMillis());
    localNotification.flags = 34;
    RemoteViews localRemoteViews = new RemoteViews(paramContext.getPackageName(), 2130903047);
    localRemoteViews.setTextViewText(2131427368, paramContext.getString(2131296329));
    localNotification.contentView = localRemoteViews;
    localNotification.contentIntent = PendingIntent.getActivity(paramContext, 0, new Intent(), 134217728);
    com.c101416193190.util.h.o().notify(paramL.c, localNotification);
    i.put(paramL.c, localNotification);
  }
  
  /* Error */
  private static void a(List paramList)
  {
    // Byte code:
    //   0: getstatic 65	com/c101416193190/download/DownloadService:d	Landroid/os/RemoteCallbackList;
    //   3: invokevirtual 292	android/os/RemoteCallbackList:beginBroadcast	()I
    //   6: istore_2
    //   7: iconst_0
    //   8: istore_1
    //   9: iload_1
    //   10: iload_2
    //   11: if_icmplt +10 -> 21
    //   14: getstatic 65	com/c101416193190/download/DownloadService:d	Landroid/os/RemoteCallbackList;
    //   17: invokevirtual 295	android/os/RemoteCallbackList:finishBroadcast	()V
    //   20: return
    //   21: getstatic 65	com/c101416193190/download/DownloadService:d	Landroid/os/RemoteCallbackList;
    //   24: iload_1
    //   25: invokevirtual 299	android/os/RemoteCallbackList:getBroadcastItem	(I)Landroid/os/IInterface;
    //   28: checkcast 301	com/c101416193190/download/s
    //   31: aload_0
    //   32: invokeinterface 350 2 0
    //   37: iload_1
    //   38: iconst_1
    //   39: iadd
    //   40: istore_1
    //   41: goto -32 -> 9
    //   44: astore_0
    //   45: return
    //   46: astore_3
    //   47: goto -10 -> 37
    //   50: astore_3
    //   51: goto -14 -> 37
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	54	0	paramList	List
    //   8	33	1	i1	int
    //   6	6	2	i2	int
    //   46	1	3	localException	Exception
    //   50	1	3	localRemoteException	RemoteException
    // Exception table:
    //   from	to	target	type
    //   0	7	44	java/lang/Exception
    //   14	20	44	java/lang/Exception
    //   21	37	46	java/lang/Exception
    //   21	37	50	android/os/RemoteException
  }
  
  private static DownloadTask b(String paramString)
  {
    synchronized (f)
    {
      paramString = (DownloadTask)a.get(paramString);
      return paramString;
    }
  }
  
  private static DownloadTask b(String paramString, DownloadTask paramDownloadTask)
  {
    synchronized (f)
    {
      paramString = (DownloadTask)a.put(paramString, paramDownloadTask);
      return paramString;
    }
  }
  
  public static void b(int paramInt, String paramString)
  {
    Notification localNotification = (Notification)i.get(paramInt);
    localNotification.contentView.setTextViewText(2131427368, paramString);
    l.notify(paramInt, localNotification);
  }
  
  private static DownloadTask c(String paramString)
  {
    synchronized (f)
    {
      paramString = (DownloadTask)a.remove(paramString);
      return paramString;
    }
  }
  
  public static void d()
  {
    try
    {
      int i2 = d.beginBroadcast();
      int i1 = 0;
      for (;;)
      {
        if (i1 >= i2)
        {
          d.finishBroadcast();
          return;
        }
        try
        {
          ((s)d.getBroadcastItem(i1)).b();
          i1 += 1;
        }
        catch (RemoteException localRemoteException)
        {
          for (;;)
          {
            localRemoteException.printStackTrace();
          }
        }
        catch (Exception localException1)
        {
          for (;;)
          {
            localException1.printStackTrace();
          }
        }
      }
      return;
    }
    catch (Exception localException2) {}
  }
  
  public static void g() {}
  
  public static void h()
  {
    try
    {
      int i2 = d.beginBroadcast();
      int i1 = 0;
      for (;;)
      {
        if (i1 >= i2)
        {
          d.finishBroadcast();
          return;
        }
        try
        {
          ((s)d.getBroadcastItem(i1)).a();
          i1 += 1;
        }
        catch (RemoteException localRemoteException)
        {
          for (;;)
          {
            localRemoteException.printStackTrace();
          }
        }
        catch (Exception localException1)
        {
          for (;;)
          {
            localException1.printStackTrace();
          }
        }
      }
      return;
    }
    catch (Exception localException2) {}
  }
  
  public final void a()
  {
    l = com.c101416193190.util.h.o();
  }
  
  public final void a(int paramInt, String paramString)
  {
    paramString = b(paramString);
    if ((paramString != null) && (paramString.j < 100))
    {
      paramString.j = paramInt;
      a.b(this.g, paramString);
      a(paramString);
      e();
    }
  }
  
  public final void a(long paramLong)
  {
    a.d(this.g, "cid=" + paramLong);
    c(String.valueOf(paramLong));
    e();
  }
  
  public final void b() {}
  
  public final IBinder c()
  {
    return this.n;
  }
  
  public final void e()
  {
    for (;;)
    {
      synchronized (f)
      {
        this.j = new ArrayList();
        this.j.clear();
        Object localObject1 = new ArrayList();
        localObject3 = a.entrySet().iterator();
        if (!((Iterator)localObject3).hasNext())
        {
          Collections.sort((List)localObject1, new h(this));
          localObject1 = ((ArrayList)localObject1).iterator();
          if (!((Iterator)localObject1).hasNext()) {
            a(this.j);
          }
        }
        else
        {
          ((ArrayList)localObject1).add((String)((Map.Entry)((Iterator)localObject3).next()).getKey());
        }
      }
      Object localObject3 = (String)localObject2.next();
      localObject3 = (DownloadTask)a.get(localObject3);
      this.j.add(localObject3);
    }
  }
  
  public final void f() {}
}
