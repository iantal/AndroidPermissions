package com.a.a.a.a.a;

import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import com.a.a.a.a.b;
import com.a.a.c.c;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;

public abstract class a
  implements b
{
  public static final Bitmap.CompressFormat a = Bitmap.CompressFormat.PNG;
  protected final File b;
  protected final File c;
  protected final com.a.a.a.a.b.a d;
  protected int e = 32768;
  protected Bitmap.CompressFormat f = a;
  protected int g = 100;
  
  public a(File paramFile)
  {
    this(paramFile, null);
  }
  
  public a(File paramFile1, File paramFile2)
  {
    this(paramFile1, paramFile2, com.a.a.b.a.b());
  }
  
  public a(File paramFile1, File paramFile2, com.a.a.a.a.b.a paramA)
  {
    if (paramFile1 == null) {
      throw new IllegalArgumentException("cacheDir argument must be not null");
    }
    if (paramA == null) {
      throw new IllegalArgumentException("fileNameGenerator argument must be not null");
    }
    this.b = paramFile1;
    this.c = paramFile2;
    this.d = paramA;
  }
  
  public File a(String paramString)
  {
    return b(paramString);
  }
  
  public boolean a(String paramString, Bitmap paramBitmap)
  {
    File localFile = b(paramString);
    paramString = new File(localFile.getAbsolutePath() + ".tmp");
    BufferedOutputStream localBufferedOutputStream = new BufferedOutputStream(new FileOutputStream(paramString), this.e);
    try
    {
      boolean bool1 = paramBitmap.compress(this.f, this.g, localBufferedOutputStream);
      c.a(localBufferedOutputStream);
      boolean bool2 = bool1;
      if (bool1)
      {
        bool2 = bool1;
        if (!paramString.renameTo(localFile)) {
          bool2 = false;
        }
      }
      if (!bool2) {
        paramString.delete();
      }
      paramBitmap.recycle();
      return bool2;
    }
    finally
    {
      c.a(localBufferedOutputStream);
      paramString.delete();
    }
  }
  
  /* Error */
  public boolean a(String paramString, java.io.InputStream paramInputStream, com.a.a.c.d paramD)
  {
    // Byte code:
    //   0: aload_0
    //   1: aload_1
    //   2: invokevirtual 67	com/a/a/a/a/a/a:b	(Ljava/lang/String;)Ljava/io/File;
    //   5: astore 6
    //   7: new 70	java/io/File
    //   10: dup
    //   11: new 72	java/lang/StringBuilder
    //   14: dup
    //   15: invokespecial 73	java/lang/StringBuilder:<init>	()V
    //   18: aload 6
    //   20: invokevirtual 77	java/io/File:getAbsolutePath	()Ljava/lang/String;
    //   23: invokevirtual 81	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   26: ldc 83
    //   28: invokevirtual 81	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   31: invokevirtual 86	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   34: invokespecial 87	java/io/File:<init>	(Ljava/lang/String;)V
    //   37: astore 7
    //   39: new 89	java/io/BufferedOutputStream
    //   42: dup
    //   43: new 91	java/io/FileOutputStream
    //   46: dup
    //   47: aload 7
    //   49: invokespecial 93	java/io/FileOutputStream:<init>	(Ljava/io/File;)V
    //   52: aload_0
    //   53: getfield 45	com/a/a/a/a/a/a:e	I
    //   56: invokespecial 96	java/io/BufferedOutputStream:<init>	(Ljava/io/OutputStream;I)V
    //   59: astore_1
    //   60: aload_2
    //   61: aload_1
    //   62: aload_3
    //   63: aload_0
    //   64: getfield 45	com/a/a/a/a/a/a:e	I
    //   67: invokestatic 122	com/a/a/c/c:a	(Ljava/io/InputStream;Ljava/io/OutputStream;Lcom/a/a/c/d;I)Z
    //   70: istore 4
    //   72: aload_1
    //   73: invokestatic 107	com/a/a/c/c:a	(Ljava/io/Closeable;)V
    //   76: aload_2
    //   77: invokestatic 107	com/a/a/c/c:a	(Ljava/io/Closeable;)V
    //   80: iload 4
    //   82: istore 5
    //   84: iload 4
    //   86: ifeq +20 -> 106
    //   89: iload 4
    //   91: istore 5
    //   93: aload 7
    //   95: aload 6
    //   97: invokevirtual 111	java/io/File:renameTo	(Ljava/io/File;)Z
    //   100: ifne +6 -> 106
    //   103: iconst_0
    //   104: istore 5
    //   106: iload 5
    //   108: ifne +9 -> 117
    //   111: aload 7
    //   113: invokevirtual 115	java/io/File:delete	()Z
    //   116: pop
    //   117: iload 5
    //   119: ireturn
    //   120: astore_3
    //   121: aload_1
    //   122: invokestatic 107	com/a/a/c/c:a	(Ljava/io/Closeable;)V
    //   125: aload_3
    //   126: athrow
    //   127: astore_1
    //   128: iconst_0
    //   129: istore 4
    //   131: aload_2
    //   132: invokestatic 107	com/a/a/c/c:a	(Ljava/io/Closeable;)V
    //   135: iload 4
    //   137: istore 5
    //   139: iload 4
    //   141: ifeq +20 -> 161
    //   144: iload 4
    //   146: istore 5
    //   148: aload 7
    //   150: aload 6
    //   152: invokevirtual 111	java/io/File:renameTo	(Ljava/io/File;)Z
    //   155: ifne +6 -> 161
    //   158: iconst_0
    //   159: istore 5
    //   161: iload 5
    //   163: ifne +9 -> 172
    //   166: aload 7
    //   168: invokevirtual 115	java/io/File:delete	()Z
    //   171: pop
    //   172: aload_1
    //   173: athrow
    //   174: astore_1
    //   175: goto -44 -> 131
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	178	0	this	a
    //   0	178	1	paramString	String
    //   0	178	2	paramInputStream	java.io.InputStream
    //   0	178	3	paramD	com.a.a.c.d
    //   70	75	4	bool1	boolean
    //   82	80	5	bool2	boolean
    //   5	146	6	localFile1	File
    //   37	130	7	localFile2	File
    // Exception table:
    //   from	to	target	type
    //   60	72	120	finally
    //   39	60	127	finally
    //   121	127	127	finally
    //   72	76	174	finally
  }
  
  protected File b(String paramString)
  {
    String str = this.d.a(paramString);
    File localFile = this.b;
    paramString = localFile;
    if (!this.b.exists())
    {
      paramString = localFile;
      if (!this.b.mkdirs())
      {
        paramString = localFile;
        if (this.c != null) {
          if (!this.c.exists())
          {
            paramString = localFile;
            if (!this.c.mkdirs()) {}
          }
          else
          {
            paramString = this.c;
          }
        }
      }
    }
    return new File(paramString, str);
  }
}
