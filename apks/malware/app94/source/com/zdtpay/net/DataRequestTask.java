package com.zdtpay.net;

import android.content.Context;
import com.duowan.mobile.netroid.RequestQueue;
import com.duowan.mobile.netroid.b.a;
import com.zdtpay.ZDTPayParamInfo;
import com.zdtpay.ZDTPaySDK;
import com.zdtpay.tools.MyLogPrinter;
import com.zdtpay.tools.b;
import com.zdtpay.tools.g;
import java.net.URLEncoder;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;
import java.util.concurrent.TimeUnit;

public class DataRequestTask
{
  public static int a = 0;
  public static int b = 1;
  
  public static void a(Context paramContext, int paramInt, String paramString, HashMap paramHashMap, DataRequestTask.RequestCallBack paramRequestCallBack)
  {
    StringBuffer localStringBuffer = new StringBuffer();
    RequestQueue localRequestQueue = com.zdtpay.f.a();
    HashMap localHashMap = paramHashMap;
    if (paramHashMap == null) {}
    for (;;)
    {
      try
      {
        localHashMap = new HashMap();
        if (b.d != null)
        {
          localHashMap.put(com.zdtpay.tools.c.i, b.d.getAppkey());
          localHashMap.put("appsecret", b.d.getAppsecret());
          localHashMap.put(com.zdtpay.tools.c.j, b.d.getMobile());
          localHashMap.put(com.zdtpay.tools.c.k, b.d.getMobile_type());
          localHashMap.put(com.zdtpay.tools.c.m, b.d.getProvince());
        }
        localHashMap.put(com.zdtpay.tools.c.e, g.f(paramContext));
        localHashMap.put(com.zdtpay.tools.c.f, g.d(paramContext));
        localHashMap.put(com.zdtpay.tools.c.g, g.e(paramContext));
        localHashMap.put("version", ZDTPaySDK.getVersion());
        localHashMap.put("type", g.i(paramContext));
        paramContext = localHashMap.keySet().iterator();
        if (!paramContext.hasNext())
        {
          if (localStringBuffer.length() != 0) {
            localStringBuffer.deleteCharAt(localStringBuffer.length() - 1);
          }
          paramContext = paramString;
          if (paramInt == a) {
            paramContext = paramString + "?" + localStringBuffer.toString().trim();
          }
          MyLogPrinter.b("get url type = " + paramInt + " url = " + paramContext);
          paramContext = new d(paramInt, paramContext, new c(paramRequestCallBack), localHashMap);
          paramContext.a(TimeUnit.SECONDS, 5);
          localRequestQueue.a(paramContext);
          return;
        }
        paramHashMap = ((String)paramContext.next()).trim();
        if (localHashMap.get(paramHashMap) == null) {
          MyLogPrinter.b(paramHashMap + "=null");
        } else {
          localStringBuffer.append(paramHashMap + "=" + URLEncoder.encode((String)localHashMap.get(paramHashMap), "UTF-8") + "&");
        }
      }
      catch (Exception paramContext)
      {
        paramContext.printStackTrace();
        return;
      }
    }
  }
  
  public static void a(Context paramContext, int paramInt1, String paramString, HashMap paramHashMap, DataRequestTask.RequestCallBack paramRequestCallBack, int paramInt2)
  {
    new Thread(new f(paramHashMap, paramContext, paramInt1, paramString, new e(paramContext.getMainLooper(), paramRequestCallBack))).start();
  }
}
