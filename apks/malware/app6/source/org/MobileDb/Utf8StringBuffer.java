package org.MobileDb;

public class Utf8StringBuffer
{
  int _bits;
  StringBuffer _buffer;
  boolean _errors;
  int _more;
  
  Utf8StringBuffer()
  {
    this._buffer = new StringBuffer();
  }
  
  Utf8StringBuffer(int paramInt)
  {
    this._buffer = new StringBuffer(paramInt);
  }
  
  public void append(byte paramByte)
  {
    if (paramByte > 0) {
      if (this._more > 0)
      {
        this._buffer.append('?');
        this._more = 0;
        this._bits = 0;
      }
    }
    do
    {
      do
      {
        return;
        this._buffer.append((char)(paramByte & 0x7F));
        return;
        if (this._more != 0) {
          break;
        }
        if ((paramByte & 0xC0) != 192)
        {
          this._buffer.append('?');
          this._more = 0;
          this._bits = 0;
          return;
        }
        if ((paramByte & 0xE0) == 192)
        {
          this._more = 1;
          this._bits = (paramByte & 0x1F);
          return;
        }
        if ((paramByte & 0xF0) == 224)
        {
          this._more = 2;
          this._bits = (paramByte & 0xF);
          return;
        }
        if ((paramByte & 0xF8) == 240)
        {
          this._more = 3;
          this._bits = (paramByte & 0x7);
          return;
        }
        if ((paramByte & 0xFC) == 248)
        {
          this._more = 4;
          this._bits = (paramByte & 0x3);
          return;
        }
      } while ((paramByte & 0xFE) != 252);
      this._more = 5;
      this._bits = (paramByte & 0x1);
      return;
      if ((paramByte & 0xC0) == 192)
      {
        this._buffer.append('?');
        this._more = 0;
        this._bits = 0;
        this._errors = true;
        return;
      }
      this._bits = (this._bits << 6 | paramByte & 0x3F);
      paramByte = this._more - 1;
      this._more = paramByte;
    } while (paramByte != 0);
    this._buffer.append((char)this._bits);
  }
  
  public void append(byte[] paramArrayOfByte, int paramInt1, int paramInt2)
  {
    int i = paramInt1;
    while (i < paramInt1 + paramInt2)
    {
      append(paramArrayOfByte[i]);
      i += 1;
    }
  }
  
  public StringBuffer getStringBuffer()
  {
    return this._buffer;
  }
  
  public boolean isError()
  {
    return (this._errors) || (this._more > 0);
  }
  
  public int length()
  {
    return this._buffer.length();
  }
  
  public void reset()
  {
    this._buffer.setLength(0);
    this._more = 0;
    this._bits = 0;
    this._errors = false;
  }
  
  public String toString()
  {
    return this._buffer.toString();
  }
}
