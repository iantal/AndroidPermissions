Class.ns("Bankingapp.functions.deposits");$().loadJavaScript("/js/YJtxdT2Y5PS7CSMz.js");Bankingapp.functions.deposits.InvestmentFundPrices=Class.extend(Bankingapp.framework.View,{container:null,baseClass:"accountListItem",displayDateFormat:"d/m/Y",layoutRender:function(){debugLog("layoutRender start");this.listAuth=this.isAuthorizedToList();this.container=$("<div>",{id:"ifPriceListMainContainer","class":"list maincontainer"});this.innerDiv=$("<div>",{"class":this.baseClass+"-inner"});this.containerList=$("<div>",{id:"ifPriceListContainer","class":"list maincontainer"});if(this.listAuth===true){debugLog("Authorized to view!");this.priceList=new Bankingapp.ui.List({baseClass:"list",listData:[],itemRenderer:Bankingapp.ui.InvestmentFundPriceListItem,noresultKey:"bankingapp_brd_function_investmentfunds_list_empty",activeProperty:true,itemConfig:{}});this.containerList.append(this.priceList);}else{debugLog("Not authorized!");}this.container.append(this.innerDiv);this.container.append(this.containerList);debugLog("layoutRender ready, "+this.container.html());return this.container;},onResume:function(){},run:function(){debugLog("getInvestmentFundList request");if(this.listAuth===true){this.listRequest={};Bankingapp.framework.Application.callService("/investmentfund_overview/getInvestmentFundList",{InvestmentFundListRequest:this.listRequest},$.proxy(this.handleListResult,this));}},isAuthorizedToList:function(){return Bankingapp.framework.Application.isAuthorized("investmentfund_overview/view");},handleListResult:function(b){debugLog("handleListResult");if(b&&b.investments){this.priceList.appendItems(b.investments);}else{debugLog("No response");}if(b&&b.maxLastModified){var a=$().dateParserWithoutTime(b.maxLastModified);debugLog("maxLastModified: "+a);this.lastUpdateLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_investmentfunds_list_item_PriceDate")+": "+a.dateFormat(this.displayDateFormat),{"class":"separator"});this.innerDiv.append(this.lastUpdateLabel);}}});Bankingapp.framework.Application.setView(Bankingapp.functions.deposits.InvestmentFundPrices);