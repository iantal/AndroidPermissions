Class.ns("Functions.transferfunds");Functions.transferfunds.AbstractTransferDetails=Class.extend(Bankingapp.framework.View,{container:null,containerId:"transferDetailsContainer",containerClass:"transferDetails maincontainer",showProgressIndicator:true,progressIndicatorStepCount:5,progressIndicatorCurrentStep:0,showPageInstructions:true,pageInstructionsClass:"pagetitle separator",pageInstructionsResourceKey:"bankingapp_function_transferfunds_detailsinstructions",form:null,formId:"transferDetailsForm",formClass:"transfer-details-form",groupContainer:null,groupContainerClass:"groupcontainer",valueDateButton:null,valueDateButtonId:"valueDateButton",valueDateButtonClass:"calendar",valueDateButtonNextBusinessDayResourceKey:"bankingapp_function_transferfunds_today",valueDateLabelResourceKey:"bankingapp_function_transferfunds_valuedate",submitButtonLabelResourceKey:"bankingapp_function_transferfunds_continue",submitButtonClass:"submit",dateFormatPatternResourceKey:"bankingapp_common_dateFormatPattern",formData:null,formDataFunctionAttributeId:null,layoutRender:function(){this.formData=getFunctionAttribute(this.formDataFunctionAttributeId);this.container=$("<div>",{id:this.containerId,"class":this.containerClass});if(this.showProgressIndicator){this.container.append(new Bankingapp.ui.ProgressIndicator(this.progressIndicatorStepCount,this.progressIndicatorCurrentStep));}if(this.showPageInstructions){this.container.append(new Bankingapp.ui.Label(resolve(this.pageInstructionsResourceKey),{"class":this.pageInstructionsClass}));}this.form=new Bankingapp.ui.Form({id:this.formId,submitHandler:$.proxy(this.submitHandler,this),businessValidationHandler:$.proxy(this.businessValidator,this),"class":this.formClass});this.groupContainer=$("<div>",{"class":this.groupContainerClass});this.form.append(this.groupContainer);this.container.append(this.form);this.renderForm();this.renderSubmitButton();return this.container;},run:function(){if(this.formData.valueDate&&this.valueDateButton){this.displayValueDate(this.formData.valueDate);}else{this.formData.valueDate=new Date();debugLog("run valueDate: "+this.formData.valueDate);}},submitHandler:function(){},businessValidator:function(){},renderForm:function(){},renderSubmitButton:function(b){var a={labelResourceKey:this.submitButtonLabelResourceKey,"class":this.submitButtonClass};if(b){$().extend(a,b);}this.form.append(new Bankingapp.ui.SubmitButton(resolve(a.labelResourceKey),{"class":a["class"]}));},renderValueDateElements:function(b){var a={calendarButtonLabelResourceKey:this.valueDateButtonNextBusinessDayResourceKey,id:this.valueDateButtonId,"class":this.valueDateButtonClass,labelResourceKey:this.valueDateLabelResourceKey};if(b){$().extend(a,b);}this.valueDateButton=new Bankingapp.ui.ComplexButton([resolve(a.calendarButtonLabelResourceKey)],{id:a.id,"class":a["class"]});this.valueDateButton.bind("buttonClick",$.proxy(this.valueDateButtonClickHandler,this));this.groupContainer.append(new Bankingapp.ui.LabeledComponent({labelText:resolve(a.labelResourceKey),valueComponent:this.valueDateButton}));},valueDateButtonClickHandler:function(b,a){showDatePicker(Bankingapp.framework.Application.proxy(this.datePickerHandler,this,true));},datePickerHandler:function(a){debugLog("datepickhandler valueDate: "+a);this.formData.valueDate=a;this.displayValueDate(a);},displayValueDate:function(a){$("#"+this.valueDateButtonId).find(".row0").text(a.dateFormat(resolve(this.dateFormatPatternResourceKey)));}});