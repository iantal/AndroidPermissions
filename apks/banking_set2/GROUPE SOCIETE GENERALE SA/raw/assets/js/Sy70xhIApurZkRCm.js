Class.ns("Bankingapp.functions.productinformation");Bankingapp.functions.productinformation.ProductDetails=Class.extend(Bankingapp.framework.View,{selectedProductId:null,selectedProductGroup:null,layoutRender:function(){this.container=$("<div>",{id:"productDetailsMainContainer","class":"productDetailsMainContainer"});return this.container;},run:function(){this.selectedProductId=getFunctionAttribute("selectedProductId");this.selectedProductGroup=getFunctionAttribute("selectedProductGroup");Bankingapp.framework.Application.callService("/productinformation/getProductInformation",{ProductInformationRequest:{productId:this.selectedProductId}},$.proxy(this.renderPageElements,this));},renderPageElements:function(b){if((b.image!=undefined)&&(b.image!=null)&&(b.image!="")){this.container.empty();this.container.append(this.createTitleDiv(b.name,this.selectedProductGroup));this.imageId=b.image;this.content=b.content;this.linkText=b.urlText;this.linkUrl=b.urlValue;this.linkType=b.urlType;this.onResume();}else{this.container.empty();this.container.append(this.createTitleDiv(b.name,this.selectedProductGroup));var a=$("<div>",{"class":"content"}).append(b.content);this.container.append(a);if(b.urlType=="E"){this.addExternalLink(b.urlText,b.urlValue);}if(b.urlType=="I"){this.addInternalLink(b.urlText,b.urlValue);}}},onResume:function(){showLoadingPopup();this.getImage(this.imageId);},createTitleDiv:function(a,g){var d=$("<div>",{"class":"productInformationDetailsTitleSection"});var f=$("<img>");f.attr({src:$().getImagesFolder()+"landing_big_icon_pfm.png"});var e=$("<div>",{"class":"productInformationDetailsTitleIconSection"}).append(f);var c=$("<div>",{"class":"productInformationDetailsTitleTextSection"});var b=$("<div>",{"class":"productInformationDetailsTitleProductNameSection"});b.append(a);var h=$("<div>",{"class":"productInformationDetailsTitleProductGroupSection"});h.append(g);d.append(e);c.append(b);c.append(h);d.append(c);return d;},getImage:function(a){var b={GetImageRequest:{ImageId:a,Dpi:getDeviceInformation().dpi}};Bankingapp.framework.Application.callService("/feed/getImage",b,$.proxy(this.getImageResult,this));},getImageResult:function(c){var b=$("<img>",{src:c.image});var a=$("<div>",{align:"center"}).append(b);this.container.append(a);var d=$("<div>").append(this.content);this.container.append(d);if(this.linkType=="E"){this.addExternalLink(this.linkText,this.linkUrl);}if(this.linkType=="I"){this.addInternalLink(this.linkText,this.linkUrl);}hideLoadingPopup();},addExternalLink:function(d,c){var b=$("<a>",{href:"#",onClick:"openBrowser('"+c+"')"});b.append(d);var a=$("<div>",{align:"left"}).append(b);this.container.append(a);},addInternalLink:function(d,c){var a=$("<a>",{href:"#",onClick:"loadView('view://"+c+"')"});a.append(d);var b=$("<div>",{align:"left"}).append(a);this.container.append(b);},});Bankingapp.framework.Application.setView(Bankingapp.functions.productinformation.ProductDetails);