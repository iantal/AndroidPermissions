Class.ns("Bankingapp.functions.fxrates");$().loadJavaScript("/js/a3ZXES1gSBkfFJfg.js");Bankingapp.functions.fxrates.FxRatesContent=Class.extend(Bankingapp.ui.TabContent,{currencyMapFunctionAttribute:"CURRENCY_MAP",container:null,locationCurrencyListContainer:null,locationCurrencyList:null,otherCurrencyListContainer:null,otherCurrencyList:null,renderContent:function(){var h=getFunctionAttribute("LOCAL_CURRENCY");var j=getFunctionAttribute("LOCATION_CURRENCY");var k=getFunctionAttribute("LOCATION_COUNTRY_CODE");if((j==null)||(j=="")||(j=="RON")||(k==null)){j=null;}var l=[];var a=null;var g=[];var f=getFunctionAttribute(this.currencyMapFunctionAttribute);var d=true;for(var b=0;b<this.contentData.rateList.length;b++){var c=this.contentData.rateList[b].targetCurrency;console.log("- current currency : "+c+" locationCurrencyId : "+j);if(j!=null&&c==j){if(a==null){a={currencyId:c,buy:null,sell:null,middle:null};$.extend(a,f[c]);d=false;}this.classifierRateType(this.contentData.rateList[b],a);continue;}var e=g[c];if(e==null){e=l.length;g[c]=e;l[e]={currencyId:c,buy:null,sell:null,middle:null};$.extend(l[e],f[c]);}this.classifierRateType(this.contentData.rateList[b],l[e]);}this.container=$("<div>",{id:"fxRatesContentMainContainer","class":"maincontainer"});if(a!=null){this.locationCurrencyListContainer=$("<div>").attr("id","locationCurrencyListMainContainer");this.locationCurrencyListContainer.append(new Bankingapp.ui.Label(resolve("bankingapp_brd_function_fxrates_locationcurrency"),{"class":"listtitle"}));this.locationCurrencyList=new Bankingapp.ui.List({listData:[a],itemRenderer:Bankingapp.ui.BrdFxRateListItem,itemConfig:{},"class":"titledlist"});this.locationCurrencyListContainer.append(this.locationCurrencyList);this.container.append(this.locationCurrencyListContainer);this.locationCurrencyList.bind("itemClick",$.proxy(this.itemClickHandler,this));}else{if(d===true){this.locationCurrencyLabel=new Bankingapp.ui.Label(resolve("bankingapp_brd_function_fxrates_locationcurrency_not_available"),{"class":"pagetitle separator"});this.container.append(this.locationCurrencyLabel);this.container.append($("<br>"));}}if(l.length>0){this.otherCurrencyListContainer=$("<div>").attr("id","otherCurrencyListMainContainer");this.otherCurrencyListContainer.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_fxrates_othercurrency"),{"class":"listtitle"}));this.otherCurrencyList=new Bankingapp.ui.List({listData:l,itemRenderer:Bankingapp.ui.BrdFxRateListItem,itemConfig:{},"class":"titledlist"});this.otherCurrencyListContainer.append(this.otherCurrencyList);this.container.append(this.otherCurrencyListContainer);this.otherCurrencyList.bind("itemClick",$.proxy(this.itemClickHandler,this));}setFunctionAttribute("FXRATE_VALIDITY_TIMESTAMP",this.contentData.cacheData);this.container.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_fxrates_validlabel",{date:this.contentData.cacheData,currency:h}),{"class":"separator"}));this.append(this.container);},sortCurrency:function(a){var b=a;b.sort(function(d,c){return d.currency>c.currency;});return b;},classifierRateType:function(b,a){if(b.rateSubType.$=="B"){a.buy=b;}else{if(b.rateSubType.$=="S"){a.sell=b;}else{if(b.rateSubType.$=="M"){a.middle=b;}}}},itemClickHandler:function(b,a){setFunctionAttribute("SELECTED_CURRENCY",a);loadView("view://bankingapp/function/fxrates/historicalrates",null);},});