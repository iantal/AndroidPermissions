Class.ns("Bankingapp.functions.support");Bankingapp.functions.support.SupportPublic=Class.extend(Bankingapp.framework.View,{container:null,isSubmitable:null,layoutRender:function(){Bankingapp.framework.Application.bind("onResume",$.proxy(this.onResume,this));this.container=$("<div>",{id:"supportMainContainer","class":"supportmaincontainer"});this.topcontainer=$("<div>",{id:"supportTopContainer","class":"publicsupporttop"});this.headercontainer=$("<div>",{id:"supportHeaderContainer","class":"publicsupportheader"});this.container.append(this.headercontainer);this.goToLoginButton=new Bankingapp.ui.SubmitButton(resolve("bankingapp_function_login_enter"),{id:"goToLogin"});this.goToLoginButton.bind("buttonClick",$.proxy(this.goToLoginHandler,this));this.topcontainer.append(this.goToLoginButton);this.goToTokenLoginButton=new Bankingapp.ui.SubmitButton(resolve("bankingapp_function_tokenlogin_enter"),{id:"goToTokenLogin"});this.goToTokenLoginButton.bind("buttonClick",$.proxy(this.goToTokenLoginHandler,this));this.topcontainer.append(this.goToTokenLoginButton);this.loanMenu=$('<div id="menu_item_loan" class="menu_item menu_item_loancalculator"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("demo_bankingapp_function_support_loancalculator")+"</div></div>");this.loanMenu.bind("click",$.proxy(this.loancalculatorClickHandler,this));this.topcontainer.append(this.loanMenu);this.locationMenu=$('<div id="menu_item_locations" class="menu_item menu_item_locations"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("bankingapp_brd_function_info_landingpage_location")+"</div></div>");this.locationMenu.bind("click",$.proxy(this.locationClickHandler,this));this.topcontainer.append(this.locationMenu);this.exchangeMenu=$('<div id="menu_item_exchangerates" class="menu_item menu_item_exchangerates"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("demo_bankingapp_function_support_exchangerates")+"</div></div>");this.exchangeMenu.bind("click",$.proxy(this.exchangeratesClickHandler,this));this.topcontainer.append(this.exchangeMenu);this.demoMenu=$('<div id="menu_item_demo" class="menu_item menu_item_demo"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("bankingapp_function_login_demo")+"</div></div>");this.demoMenu.bind("click",$.proxy(this.demoClickHandler,this));this.topcontainer.append(this.demoMenu);this.interestMenu=$('<div id="menu_item_interestrates" class="menu_item menu_item_interestrates"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("bankingapp_brd_function_info_landingpage_interestrate")+"</div></div>");this.interestMenu.bind("click",$.proxy(this.interestRatesClickHandler,this));this.topcontainer.append(this.interestMenu);this.contactMenu=$('<div id="menu_item_contacts" class="menu_item menu_item_contacts"><div class="menu_icon">&nbsp;</div><div class="mtext">'+resolve("demo_bankingapp_function_support_contactinformation")+"</div></div>");this.contactMenu.bind("click",$.proxy(this.contactinformationClickHandler,this));this.topcontainer.append(this.contactMenu);this.container.append(this.topcontainer);debugLog("supportpublic html: "+this.container.html());return this.container;},goToLoginHandler:function(c,f){var b=getApplicationOption("COMMUNICATION_ERROR");if(this.isSubmitable||b){this.isSubmitable=false;setApplicationOption("COMMUNICATION_ERROR","false");turnDemoOff();var a=getApplicationOption("IS_TOKEN_ACTIVATED");if((a!=undefined)&&(a!=null)&&a.valueOf()){loadView("view://bankingapp/function/login/tokenlogin");}else{loadView("view://ind/token/function/landing");}}},goToTokenLoginHandler:function(b,c){var a=getApplicationOption("COMMUNICATION_ERROR");if(this.isSubmitable||a){this.isSubmitable=false;setApplicationOption("COMMUNICATION_ERROR","false");turnDemoOff();loadView("view://ind/token/function/landing");}},onResume:function(){this.isSubmitable=true;Bankingapp.framework.Application.callService({serviceName:"/timesync/get",callback:Bankingapp.framework.Application.proxy(this.handleResult,this),backgroundCall:true,ignoreErrors:true});},handleResult:function(c){if(c){var a=new Date;var b=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());console.log("handle servertime ... "+c.time+" "+b);setApplicationOption("SERVERTIME_DIFF",c.time-b);}},exchangeratesClickHandler:function(){turnDemoOff();loadView("view://bankingapp/function/fxrates/fxrates",null);},contactinformationClickHandler:function(){turnDemoOff();loadView("view://brd/bankingapp/function/contacts/contacts",null);},loancalculatorClickHandler:function(){turnDemoOff();loadView("view://brd/bankingapp/function/loancalculator/legaldisclaimer",null);},locationClickHandler:function(){turnDemoOff();loadView("view://bankingapp/function/locations/mapview",null);},interestRatesClickHandler:function(){turnDemoOff();loadView("view://brd/bankingapp/function/interestrate/interestrate",null);},productInformationClickHandler:function(){turnDemoOff();loadView("view://brd/bankingapp/function/productinformation/productinformation",null);},isAuthorized:function(){return Bankingapp.framework.Application.isAuthorized("homescreen/view");},demoClickHandler:function(a,b){debugLog("Demo clicked ...");navigateToDemo();}});Bankingapp.framework.Application.setView(Bankingapp.functions.support.SupportPublic);