$().loadJavaScript("/js/0A4YRnFx1DbUd3zN.js");Class.ns("Bankingapp.functions.accountinfo");Bankingapp.functions.accountinfo.StatementDetails=Class.extend(Bankingapp.framework.View,{transactionDetailsContainer:null,displayDateFormat:resolve("bankingapp_common_dateFormatPattern"),displayTimeFormat:resolve("bankingapp_common_timeFormatPattern"),layoutRender:function(){this.transactionDetailsContainer=$("<div>",{id:"transactionDetailsMainContainer","class":"details"});var b=(getFunctionAttribute("SELECTED_TRANSACTION")?getFunctionAttribute("SELECTED_TRANSACTION"):getSessionAttribute("SELECTED_TRANSACTION"));var a={};if(b.accountName){a.accountName=b.accountName;a.accountType=b.accountType;a.currency=b.accountCurrency;}else{var g=getFunctionAttribute("ACCOUNT_DETAILS");if(g){var c=getFunctionAttribute("SELECTED_ACCOUNT_ID");for(var d=0;d<g.length;d++){if(g[d].accountNumber==c){a=g[d];}}}else{if(getFunctionAttribute("loan")){a=getFunctionAttribute("loan");}}}if(!a.accountType){a.accountType=b.accountType;a.currency=b.accountCurrency;}this.transactionDetailsContainer.append(new Bankingapp.functions.util.component.TransactionSummary({summaryData:{titleInfo:"",upperTitle:a.accountName,upperText:a.accountType+" ("+a.currency+")",amount:b.amount,currency:b.currency,lowerTitle:(b.beneficiaryName),lowerText:b.beneficiaryAccount,creditDebitFlag:b.transactionDirection}}));this.groupcontainerwrap=$("<div>",{"class":"accountdetailscontainer"});this.groupcontainer=$("<div>",{"class":"groupcontainer"});this.groupcontainer.append(new Bankingapp.ui.OutputField(resolve("bankingapp_brd_function_statement_details_transactiontype"),b.paymentType));var f=$().dateParserWithoutTimezone(b.valueDate);var e=$().dateParserWithoutTimezone(b.transactionDate);if(f){this.groupcontainer.append(new Bankingapp.ui.OutputField(resolve("bankingapp_brd_function_statement_details_valuedate"),f.dateFormat(this.displayDateFormat)));}if(e){this.groupcontainer.append(new Bankingapp.ui.OutputField(resolve("bankingapp_brd_function_statement_details_transactiondate"),e.dateFormat(this.displayDateFormat)));}this.groupcontainer.append(new Bankingapp.ui.OutputField(resolve("bankingapp_brd_function_statement_details_narrative"),b.narrative));this.groupcontainerwrap.append(this.groupcontainer);this.transactionDetailsContainer.append(this.groupcontainerwrap);return this.transactionDetailsContainer;},registerDetailsTypes:function(){Bankingapp.ui.DynamicDetailsFactory.register("EXPENSE",Bankingapp.ui.DetailsTransactionEXPENSE);Bankingapp.ui.DynamicDetailsFactory.register("INCOME",Bankingapp.ui.DetailsTransactionINCOME);}});Bankingapp.framework.Application.setView(Bankingapp.functions.accountinfo.StatementDetails);