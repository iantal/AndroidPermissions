Class.ns("Bankingapp.ui");Bankingapp.ui.Component=Class.extend(Array,jQuery.extend({baseDefaultClass:"state_default",baseDisabledClass:"state_disabled",authorizationId:null,disabled:false,applyConfig:function(a){if(!a){return;}var d={};var b={};for(var c in a){if(typeof this[c]!="undefined"){d[c]=(a[c]);}else{b[c]=(a[c]);}}jQuery.extend(this,d);return b;},encodeAttributes:function(a){var b={};for(key in a){if(key=="style"&&a[key]!=undefined&&a[key]!=null){b[key]=this.encodeStyleAttribute(a[key]);}else{if(key=="value"&&a[key]!=undefined&&a[key]!=null){b[key]=$.encoder.encodeForHTML(a[key]);}else{if(a[key]!=undefined&&a[key]!=null){b[key]=$.encoder.encodeForJavascript($.encoder.encodeForHTMLAttribute(key,a[key],true));}}}}return b;},encodeStyleAttribute:function(a){var h=a.split(";");var b="";for(var d=0;d<h.length;d++){var j=jQuery.trim(h[d]);var g="";var e=j.indexOf(":");if(e>0&&e<j.length-1){var f=j.substring(0,e);f=jQuery.trim(f);var c=j.substr(e+1);c=jQuery.trim(c);g=$.encoder.encodeForCSS(f,c);}if(g.length>0){b=b.concat(g,";");}}return b;},initComponent:function(){},onClick:function(a){if(this.disabled==true){a.stopImmediatePropagation();}},enable:function(){this.disabled=false;this.removeClass(this.baseDisabledClass);},disable:function(){this.disabled=true;this.addClass(this.baseDisabledClass);},isDisabled:function(){return this.disabled;},isAuthorized:function(){return this.authorizationId==null||Bankingapp.framework.Application.isAuthorized(this.authorizationId);}},jQuery.fn,{constructor:function(){if(arguments[1]){arguments[1]=this.encodeAttributes(arguments[1]);}this.baseDisabledClass=$.encoder.encodeForHTMLAttribute("class",this.baseDisabledClass,true);this.baseDefaultClass=$.encoder.encodeForHTMLAttribute("class",this.baseDefaultClass,true);jQuery.fn.init.apply(this,arguments);this.data("wrapper",this);this.click($.proxy(this.onClick,this));if(this.disabled==true){this.addClass(this.baseDisabledClass);}this.initComponent();this.constructor=$(this).constructor;if(this.isAuthorized()==false){this.hide();}}}));Class.ns("Bankingapp.ui");Bankingapp.ui.Touchable=Class.extend(Bankingapp.ui.Component,{basicActiveClass:"state_active",constructor:function(a){this.applyConfig(a);this.basicActiveClass=$.encoder.encodeForHTMLAttribute("class",this.basicActiveClass,true);Bankingapp.ui.Touchable.superclass.constructor.apply(this,arguments);this.bindTouchEvents();},bindTouchEvents:function(){this.bind("touchstart",$.proxy(this.onTouchStart,this));this.bind("touchmove",$.proxy(this.onTouchMove,this));this.bind("touchend",$.proxy(this.onTouchEnd,this));},onTouchStart:function(a){if(this.disabled==false){this.addClass(this.basicActiveClass);}},onTouchMove:function(a){this.removeClass(this.basicActiveClass);},onTouchEnd:function(a){a.preventDefault();this.removeClass(this.basicActiveClass);}});Class.ns("Bankingapp.ui");Bankingapp.ui.Label=Class.extend(Bankingapp.ui.Component,{baseClass:"label",value:null,constructor:function(e,b){b=b==undefined?(typeof e=="string"?{value:e}:e):jQuery.extend(b,{value:e});var a=b&&b["for"]?"<label>":"<span>";var d=this.applyConfig(b);var c={id:d&&d.id?d.id:this.id,"for":d&&d["for"]?d["for"]:null,"class":this.baseClass+(d&&d["class"]?(" "+d["class"]):""),style:d&&d.style?d.style:null,dir:d&&d.dir?d.dir:null};Bankingapp.ui.Label.superclass.constructor.call(this,a,c);if(this.value!=null){this.append($.encoder.encodeForHTML(this.value));}}});Class.ns("Bankingapp.ui");Bankingapp.ui.List=Class.extend(Bankingapp.ui.Component,{baseClass:"list",listData:null,itemRenderer:null,itemClass:"listitem",itemConfig:null,firstClass:"first",lastClass:"last",activeProperty:null,idProperty:null,itemsArray:null,itemsMap:null,baseElement:"<div>",tableColumns:null,showNoresult:true,noresultKey:"bankingapp_component_list_nolistitem",noresultLabel:null,noresultClass:"nolistitem separator",constructor:function(d,a){if(!d){d=[];}var c=null;if($.isArray(d)){if(a&&(typeof a=="object")){c=this.applyConfig(a);}this.listData=d;}else{c=this.applyConfig(d);}if(!this.listData){throw"You should set the 'listData' config option when using List component!";return;}if(!this.itemRenderer){throw"You should set the 'itemRenderer' config option when using List component!";return;}var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.itemsArray=new Array();if(this.idProperty){this.itemsMap=new Object();}this.itemClass=$.encoder.encodeForHTMLAttribute("class",this.itemClass,true);this.firstClass=$.encoder.encodeForHTMLAttribute("class",this.firstClass,true);this.lastClass=$.encoder.encodeForHTMLAttribute("class",this.lastClass,true);Bankingapp.ui.List.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.appendItems();},appendItems:function(e){var a=null;if(e&&$.isArray(e)){this.listData=this.listData.concat(e);a=e;if((a.length>0)&&(this.itemsArray.length>0)){this.getItemAt(this.itemsArray.length-1).removeClass(this.lastClass);}}else{a=this.listData;this.empty();}var d=null;for(var b=0;b<a.length;b++){var c=new this.itemRenderer(a[b],this.getItemConfig(a[b]));if(this.itemClass){c.addClass(this.itemClass);}if(this.itemsArray.length==0){c.addClass(this.firstClass);}if(b==(a.length-1)){c.addClass(this.lastClass);}if(this.tableColumns==null){this.append(c);}else{if(d==null||d.children().length>=this.tableColumns){d=$("<tr>");this.append(d);}d.append(c);}this.registerItem(c,a[b]);}this.renderNoResult();},renderNoResult:function(a){if(this.showNoresult==true){if(this.isEmpty()){if(this.noresultLabel==null){this.noresultLabel=new Bankingapp.ui.Label(resolve(this.noresultKey),{"class":this.noresultClass});}else{this.noresultLabel.remove();}if(a){a.append(this.noresultLabel);}else{this.append(this.noresultLabel);}this.addClass(this.noresultClass);}else{if(this.noresultLabel!=null){this.noresultLabel.remove();this.noresultLabel=null;}this.removeClass(this.noresultClass);}}},setItems:function(b,a){if(b&&$.isArray(b)){if(a&&(a===false)){this.appendItems(b);}else{this.listData=b;this.appendItems();}}},getItem:function(a){if(this.itemsMap){return this.itemsMap[a];}return null;},getItemAt:function(a){if(this.itemsArray.length>a){return this.itemsArray[a];}return null;},getSize:function(a){return this.itemsArray.length;},empty:function(){Bankingapp.ui.List.superclass.empty.call(this);this.itemsArray=new Array();if(this.idProperty){this.itemsMap=new Object();}this.renderNoResult();},isEmpty:function(){return this.itemsArray==null||this.itemsArray.length==0;},handleClick:function(b){try{this.trigger("itemClick",b.data);}catch(a){onErrorOccurred(a);}},registerItem:function(a,b){this.itemsArray.push(a);if(this.idProperty&&b[this.idProperty]){this.itemsMap[b[this.idProperty]]=a;}a.click(b,$.proxy(this.handleClick,this));},getItemConfig:function(a){var b={};$.extend(b,this.itemConfig);if(this.activeProperty){$.extend(b,{active:a[this.activeProperty]});}return b;}});Class.ns("Bankingapp.ui");Bankingapp.ui.ListItem=Class.extend(Bankingapp.ui.Touchable,{itemData:null,active:true,baseClass:"listitem",inactiveClass:"inactive",baseElement:"<div>",constructor:function(a,b){if(b){this.applyConfig(b);}this.itemData=a;this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.inactiveClass=$.encoder.encodeForHTMLAttribute("class",this.inactiveClass,true);Bankingapp.ui.ListItem.superclass.constructor.call(this,this.baseElement,{"class":this.baseClass});},initComponent:function(){this.click($.proxy(this.clickHandler,this));this.renderItem();},renderItem:function(){$("<span>"+$.encoder.encodeForHTML(this.itemData)+"</span>").appendTo(this);if(!this.active){this.addClass(this.inactiveClass);}},isActive:function(){return this.getActive();},getActive:function(){return this.active;},setActive:function(a){this.active=a;if(this.active){this.removeClass(this.inactiveClass);}else{this.addClass(this.inactiveClass);}},clickHandler:function(b){try{if(!this.isActive()){b.stopImmediatePropagation();}}catch(a){onErrorOccurred(a);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.Account=Class.extend(Bankingapp.ui.Component,{baseClass:"account",baseElement:"<div>",id:null,title:null,titleClass:"accounttitle",accountNumber:null,accountNumberClass:"accountnumber",accountName:null,accountNameClass:"accountname",accountCurrency:null,accountCurrencyClass:"accountcurrency",accountType:null,accountTypeClass:"accounttype",constructor:function(d,a){if(d){if(!$.isArray(d)){this.applyConfig(d);}}var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.titleClass=$.encoder.encodeForHTMLAttribute("class",this.titleClass,true);this.accountNumberClass=$.encoder.encodeForHTMLAttribute("class",this.accountNumberClass,true);this.accountNameClass=$.encoder.encodeForHTMLAttribute("class",this.accountNameClass,true);this.accountCurrencyClass=$.encoder.encodeForHTMLAttribute("class",this.accountCurrencyClass,true);Bankingapp.ui.Account.superclass.constructor.call(this,this.baseElement,this.encodeAttributes(b));},initComponent:function(){this.render();},render:function(){$('<div class="'+this.titleClass+'">'+$.encoder.encodeForHTML(this.title)+"</div>").appendTo(this);var b=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);var a=$("<div>",{"class":this.baseClass+"-inner"});if(this.accountName!=undefined){$('<span class="'+this.accountNameClass+'">'+$.encoder.encodeForHTML(this.accountName)+"</span>").appendTo(a);}if(this.accountType!=undefined){$('<span class="'+this.accountTypeClass+'">'+$.encoder.encodeForHTML(this.accountType)+"</span>").appendTo(a);}if(this.accountCurrency!=undefined){$('<span class="'+this.accountCurrencyClass+'">'+$.encoder.encodeForHTML(this.accountCurrency)+"</span>").appendTo(a);}if(this.accountNumber!=undefined){$('<div class="'+this.accountNumberClass+'">'+$.encoder.encodeForHTML(this.accountNumber)+"</div>").appendTo(a);}b.append(a);}});Class.ns("Bankingapp.ui");Bankingapp.ui.PartnerAccount=Class.extend(Bankingapp.ui.Account,{baseClass:"partneraccount",transactionType:null,transactionTypeClass:"transactiontype",partnerName:null,partnerNameClass:"partnername",icon:null,iconClass:"accountImageContainer",constructor:function(b,a){if(b){if(!$.isArray(b)){this.applyConfig(b);}}this.applyConfig(a);this.transactionTypeClass=$.encoder.encodeForHTMLAttribute("class",this.transactionTypeClass,true);this.partnerNameClass=$.encoder.encodeForHTMLAttribute("class",this.partnerNameClass,true);this.iconClass=$.encoder.encodeForHTMLAttribute("class",this.iconClass,true);Bankingapp.ui.PartnerAccount.superclass.constructor.call(this,a);},render:function(){var d=$().getImagesFolder();$('<div class="'+this.titleClass+'">'+$.encoder.encodeForHTML(this.title)+"</div>").appendTo(this);var c=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);var b=$("<div>",{"class":this.baseClass+"-inner"});if(this.icon){var a=$('<div class="'+this.iconClass+'">');var e=$("<img>").attr({src:d+$.encoder.encodeForURL(this.icon)});a.append(e);c.append(a);}if(this.transactionType!=undefined){$('<div class="'+this.transactionTypeClass+'">'+$.encoder.encodeForHTML(this.transactionType)+"</div>").appendTo(b);}if(this.partnerName!=undefined){$('<div class="'+this.partnerNameClass+'">'+$.encoder.encodeForHTML(this.partnerName)+"</div>").appendTo(b);}c.append(b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.Location=Class.extend(Bankingapp.ui.Component,{baseClass:"location",baseElement:"<div>",id:null,type:null,name:null,address:null,atmTypeName:"ATM",branchTypeName:"BRANCH",partnerTypeName:"PARTNER",atmTypeClass:"atm",branchTypeClass:"branch",partnerTypeClass:"partner",atmNameClass:"atmName",atmAddressClass:"atmAddress",constructor:function(d,a){if(d){if(!$.isArray(d)){this.applyConfig(d);}}var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.atmTypeClass=$.encoder.encodeForHTMLAttribute("class",this.atmTypeClass,true);this.branchTypeClass=$.encoder.encodeForHTMLAttribute("class",this.branchTypeClass,true);this.partnerTypeClass=$.encoder.encodeForHTMLAttribute("class",this.partnerTypeClass,true);this.atmNameClass=$.encoder.encodeForHTMLAttribute("class",this.atmNameClass,true);this.atmAddressClass=$.encoder.encodeForHTMLAttribute("class",this.atmAddressClass,true);Bankingapp.ui.Location.superclass.constructor.call(this,this.baseElement,this.encodeAttributes(b));},initComponent:function(){this.render();},render:function(){var b=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);if(this.type==this.atmTypeName){b.addClass(this.atmTypeClass);}else{if(this.type==this.branchTypeName){b.addClass(this.branchTypeClass);}else{if(this.type==this.partnerTypeName){b.addClass(this.partnerTypeClass);}}}var a=$("<div>",{"class":this.baseClass+"-inner"});if(this.name!=undefined){$('<div class="'+this.atmNameClass+'">'+$.encoder.encodeForHTML(this.name)+"</div>").appendTo(a);}if(this.address!=undefined){$('<div class="'+this.atmAddressClass+'">'+$.encoder.encodeForHTML(this.address)+"</div>").appendTo(a);}b.append(a);}});Class.ns("Bankingapp.ui");Bankingapp.ui.RadioButton=Class.extend(Bankingapp.ui.Touchable,{itemData:null,active:true,baseClass:"radiobuttonitem",inactiveClass:"inactive",clickEventHandler:null,constructor:function(a,b){var c={};if(a){if(b){$.extend(c,b);}if($.isArray(a)){c.itemData=a;}else{$.extend(c,a);}}this.applyConfig(c);this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.inactiveClass=$.encoder.encodeForHTMLAttribute("class",this.inactiveClass,true);Bankingapp.ui.RadioButton.superclass.constructor.call(this,"<div>",{"class":this.baseClass});},initComponent:function(){this.click($.proxy(this.clickHandler,this));this.renderItem();},renderItem:function(){this.append($("<div>"+$.encoder.encodeForHTML(this.itemData)+"</div>"));if(!this.active){this.addClass(this.inactiveClass);}},isActive:function(){return this.getActive();},getActive:function(){return this.active;},setActive:function(a){this.active=a;if(this.active){this.removeClass(this.inactiveClass);}else{this.addClass(this.inactiveClass);}},clickHandler:function(b){try{if(!this.isActive()){b.stopImmediatePropagation();}}catch(a){onErrorOccurred(a);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.RadioButtonSet=Class.extend(Bankingapp.ui.Component,{baseClass:"radiobuttonset",listData:null,itemRenderer:Bankingapp.ui.RadioButton,itemClass:"radiobutton",itemConfig:null,firstClass:"first",lastClass:"last",itemsArray:null,itemsMap:null,baseElement:"<div>",activeProperty:null,idProperty:null,selectedItem:null,defaultSelected:null,shouldRenderDefault:true,selectedClass:"state_selected",constructor:function(d,a){if(!d){throw"You should set the 'listData' config option when using RadioButtonSet component!";return;}var c=null;if($.isArray(d)){if(a&&(typeof a=="object")){c=this.applyConfig(a);}this.listData=d;}else{c=this.applyConfig(d);}if(!this.listData){throw"You should set the 'listData' config option when using RadioButtonSet component!";return;}if(!this.itemRenderer){throw"You should set the 'itemRenderer' config option when using RadioButtonSet component!";return;}var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.itemsArray=new Array();if(this.idProperty){this.itemsMap=new Object();}this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.itemClass=$.encoder.encodeForHTMLAttribute("class",this.itemClass,true);this.firstClass=$.encoder.encodeForHTMLAttribute("class",this.firstClass,true);this.lastClass=$.encoder.encodeForHTMLAttribute("class",this.lastClass,true);this.selectedClass=$.encoder.encodeForHTMLAttribute("class",this.selectedClass,true);Bankingapp.ui.RadioButtonSet.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){for(var b=0;b<this.listData.length;b++){var c=new this.itemRenderer(this.listData[b],this.getItemConfig(this.listData[b]));if(this.itemClass){c.addClass(this.itemClass);}if(this.itemsArray.length==0){c.addClass(this.firstClass);}if(b==(this.listData.length-1)){c.addClass(this.lastClass);}var a=$("<div>");a.attr("style","width:"+(100/this.listData.length).toFixed(3)+"%");a.addClass("radiobuttonitemcontainer");a.append(c);this.append(a);this.registerItem(c,this.listData[b]);}if(this.shouldRenderDefault){this.renderDefault();}},getItem:function(a){if(this.itemsMap){return this.itemsMap[a];}return null;},getItemAt:function(a){if(this.itemsArray.length>a){return this.itemsArray[a];}return null;},handleClick:function(b){try{if(this.getSelected()!=null){this.getSelected().removeClass(this.selectedClass);}this.selectedItem=b.data.itemIndex;this.trigger("radioButtonItemClick",b.data.itemData);if(b.data.itemData.clickEventHandler!=null&&b.data.itemData.clickEventHandler!="undefined"){b.data.itemData.clickEventHandler();}this.getSelected().addClass(this.selectedClass);}catch(a){onErrorOccurred(a);}},registerItem:function(a,b){this.itemsArray.push(a);if(this.idProperty&&b[this.idProperty]){this.itemsMap[b[this.idProperty]]=a;}a.click({itemData:b,itemIndex:this.itemsArray.length-1},$.proxy(this.handleClick,this));},getItemConfig:function(a){var b={};$.extend(b,this.itemConfig);if(this.activeProperty){$.extend(b,{active:a[this.activeProperty]});}return b;},getSelected:function(){if(this.selectedItem!=null){return this.getItemAt(this.selectedItem);}return null;},getSelectedIndex:function(){if(this.selectedItem!=null){return this.selectedItem;}return null;},setSelected:function(a){this.handleClick({data:{itemData:this.getItemAt(a),itemIndex:a}});},renderDefault:function(){if(this.defaultSelected!=null&&this.defaultSelected!="undefined"){this.setSelected(this.defaultSelected);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.Tab=Class.extend(Bankingapp.ui.Touchable,{itemData:null,active:true,baseClass:"tabitem",inactiveClass:"inactive",clickEventHandler:null,contentRenderer:null,content:null,constructor:function(a,b){var c={};if(a){if(b){$.extend(c,b);}if($.isArray(a)){c.itemData=a;}else{$.extend(c,a);}}this.applyConfig(c);if(!this.contentRenderer){throw"You should set the 'contentRenderer' config option when using Tab component!";return;}this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.inactiveClass=$.encoder.encodeForHTMLAttribute("class",this.inactiveClass,true);Bankingapp.ui.Tab.superclass.constructor.call(this,"<div>",{"class":this.baseClass});},initComponent:function(){this.click($.proxy(this.clickHandler,this));this.renderItem();},renderItem:function(){this.append(new Bankingapp.ui.Label(this.getLabel(this.itemData)));if(!this.active){this.addClass(this.inactiveClass);}},getLabel:function(a){return a;},isActive:function(){return this.getActive();},getActive:function(){return this.active;},setActive:function(a){this.active=a;if(this.active){this.removeClass(this.inactiveClass);}else{this.addClass(this.inactiveClass);}},clickHandler:function(b){try{if(!this.isActive()){b.stopImmediatePropagation();}}catch(a){onErrorOccurred(a);}},isContentRendered:function(){return this.content==null?false:true;},getContent:function(){return this.content;},setContent:function(a){this.content=a;}});Class.ns("Bankingapp.ui");Bankingapp.ui.TabSet=Class.extend(Bankingapp.ui.Component,{baseClass:"tabset",listData:null,itemRenderer:Bankingapp.ui.Tab,itemClass:"tab",itemConfig:null,firstClass:"first",lastClass:"last",itemsArray:null,itemsMap:null,baseElement:"<div>",activeProperty:null,idProperty:null,selectedItem:null,defaultSelected:0,shouldRenderDefault:false,selectedClass:"state_selected",previousContent:null,tabContainer:null,tabContainerClass:"tabcontainer",contentContainer:null,contentContainerClass:"contentcontainer",bodyClass:"tab",constructor:function(d,a){if(!d){throw"You should set the 'listData' config option when using TabSet component!";return;}var c=null;if($.isArray(d)){if(a&&(typeof a=="object")){c=this.applyConfig(a);}this.listData=d;}else{c=this.applyConfig(d);}if(!this.listData){throw"You should set the 'listData' config option when using TabSet component!";return;}if(!this.itemRenderer){throw"You should set the 'itemRenderer' config option when using TabSet component!";return;}var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.itemsArray=new Array();if(this.idProperty){this.itemsMap=new Object();}this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.itemClass=$.encoder.encodeForHTMLAttribute("class",this.itemClass,true);this.firstClass=$.encoder.encodeForHTMLAttribute("class",this.firstClass,true);this.lastClass=$.encoder.encodeForHTMLAttribute("class",this.lastClass,true);this.selectedClass=$.encoder.encodeForHTMLAttribute("class",this.selectedClass,true);this.tabContainerClass=$.encoder.encodeForHTMLAttribute("class",this.tabContainerClass,true);this.contentContainerClass=$.encoder.encodeForHTMLAttribute("class",this.contentContainerClass,true);this.bodyClass=$.encoder.encodeForHTMLAttribute("class",this.bodyClass,true);$("body").addClass(this.bodyClass);Bankingapp.ui.TabSet.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.tabContainer=$("<div>");this.tabContainer.addClass(this.tabContainerClass);this.append(this.tabContainer);this.contentContainer=$("<div>");this.contentContainer.addClass(this.contentContainerClass);this.append(this.contentContainer);for(var b=0;b<this.listData.length;b++){var c=new this.itemRenderer(this.listData[b],this.getItemConfig(this.listData[b]));if(this.itemClass){c.addClass(this.itemClass);}if(this.itemsArray.length==0){c.addClass(this.firstClass);}if(b==(this.listData.length-1)){c.addClass(this.lastClass);}var a=$("<div>");a.attr("style","width:"+(100/this.listData.length).toFixed(3)+"%");a.addClass("tabitemcontainer");a.append(c);this.tabContainer.append(a);this.registerItem(c,this.listData[b]);}if(this.shouldRenderDefault){this.renderDefault();}},getItem:function(a){if(this.itemsMap){return this.itemsMap[a];}return null;},getItemAt:function(a){if(this.itemsArray.length>a){return this.itemsArray[a];}return null;},handleClick:function(b){try{if(this.getSelected()!=null){this.getSelected().removeClass(this.selectedClass);}this.selectedItem=b.data.itemIndex;this.trigger("tabItemClick",b.data.itemData);if(b.data.itemData.clickEventHandler!=null&&b.data.itemData.clickEventHandler!="undefined"){b.data.itemData.clickEventHandler(b.data.itemData.itemData);}this.getSelected().addClass(this.selectedClass);}catch(a){onErrorOccurred(a);}},registerItem:function(a,b){this.itemsArray.push(a);if(this.idProperty&&b[this.idProperty]){this.itemsMap[b[this.idProperty]]=a;}a.click({itemData:b,itemIndex:this.itemsArray.length-1},$.proxy(this.handleClick,this));},getItemConfig:function(a){var b={};$.extend(b,this.itemConfig);if(this.activeProperty){$.extend(b,{active:a[this.activeProperty]});}return b;},getSelected:function(){if(this.selectedItem!=null){return this.getItemAt(this.selectedItem);}return null;},getSelectedIndex:function(){return this.selectedItem;},setSelected:function(a){this.handleClick({data:{itemData:this.getItemAt(a),itemIndex:a}});},renderDefault:function(){if(this.defaultSelected!=null&&this.defaultSelected!="undefined"){this.setSelected(this.defaultSelected);}},isTabContentRendered:function(){return this.getSelected().isContentRendered();},showContent:function(b,a){var d=this.getSelected();if(!d.isContentRendered()){var c=new d.contentRenderer(b,a);d.setContent(c);this.contentContainer.append(c);}if(this.previousContent){this.previousContent.setActive(false);}this.previousContent=d.getContent();this.previousContent.setActive(true);}});Class.ns("Bankingapp.ui");Bankingapp.ui.TabContent=Class.extend(Bankingapp.ui.Component,{active:false,baseClass:"tabcontent",contentData:null,inactiveClass:"hidden",constructor:function(d,a){var c=null;if(a){c=this.applyConfig(a);}this.contentData=d;var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.inactiveClass=$.encoder.encodeForHTMLAttribute("class",this.inactiveClass,true);Bankingapp.ui.TabContent.superclass.constructor.call(this,"<div>",b);},initComponent:function(){this.renderContent();},renderContent:function(){},isActive:function(){return this.active;},setActive:function(a){this.active=a;if(this.active){this.removeClass(this.inactiveClass);}else{this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.AccountListItem=Class.extend(Bankingapp.ui.ListItem,{nameField:"accountName",typeField:"accountType",currencyField:"currency",balanceField:"availableBalance",baseClass:"accountListItem",renderItem:function(){this.addClass(this.baseDefaultClass);var a=this.itemData[this.nameField];var g=this.itemData[this.typeField];var h=this.itemData[this.currencyField];var d=this.itemData[this.balanceField];a=a||g;var j=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);var e=$("<div>",{"class":this.baseClass+"-inner"});var b=$("<div>",{"class":this.baseClass+"-cell"});var i=$("<div>",{"class":this.baseClass+"-cell"});e.append(b);e.append(i);$('<div class="accountName">'+$.encoder.encodeForHTML(a)+"</div>").appendTo(b);if(g||h){var c=new Array();if(g){c.push(g);}if(h){c.push(h);}$('<div class="accountType">'+$.encoder.encodeForHTML(c.join(" - "))+"</div>").appendTo(b);}if(d!="undefined"&&h){var f=$('<div class="amount">'+$.encoder.encodeForHTML($().amountFormatterWithCurrency(d,h,null))+"</div>");if(d<0){f.addClass("negative");}else{f.addClass("positive");}i.append(f);}j.append(e);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.AccountList=Class.extend(Bankingapp.ui.List,{constructor:function(c,a){var b={};if(c){if($.isArray(c)){if(a){$.extend(b,a);}b.listData=c;}else{$.extend(b,c);}b.itemRenderer=Bankingapp.ui.AccountListItem;}Bankingapp.ui.AccountList.superclass.constructor.call(this,b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.HistoricList=Class.extend(Bankingapp.ui.List,{dateField:null,dataDateFormat:"Y-m-d",displayDateFormat:"d/m/Y",dataOrder:"asc",dateLabelClass:"historiclist-label",periodWrapperClass:"historiclist-period-wrapper",periodHeaderClass:"historiclist-header-wrapper listtitle",periodBodyClass:"historiclist-body-wrapper titledlist",todayText:"Today",yesterdayText:"Yesterday",thisWeekText:"This week",lastWeekText:"Last week",twoWeeksAgoText:"Two weeks ago",threeWeeksAgoText:"Three weeks ago",thisMonthText:"This month",lastMonthText:"Last month",olderText:"Older",firstDayOfWeek:1,showDateInPeriods:true,periods:null,constructor:function(c,a){var b={};this.todayText=resolve("bankingapp_component_historiclist_historyinterval_today");this.yesterdayText=resolve("bankingapp_component_historiclist_historyinterval_yesterday");this.thisWeekText=resolve("bankingapp_component_historiclist_historyinterval_thisweek");this.lastWeekText=resolve("bankingapp_component_historiclist_historyinterval_lastweek");this.twoWeeksAgoText=resolve("bankingapp_component_historiclist_historyinterval_twoweeksago");this.threeWeeksAgoText=resolve("bankingapp_component_historiclist_historyinterval_threeweeksago");this.thisMonthText=resolve("bankingapp_component_historiclist_historyinterval_thismonth");this.lastMonthText=resolve("bankingapp_component_historiclist_historyinterval_lastmonth");this.olderText=resolve("bankingapp_component_historiclist_historyinterval_older");if(c){if($.isArray(c)){if(a){$.extend(b,a);}b.listData=c;}else{$.extend(b,c);}}if(!b.dateField){throw"You should set the 'dateField' config option when using HistoricList component!";return;}this.dateLabelClass=$.encoder.encodeForHTMLAttribute("class",this.dateLabelClass,true);this.periodWrapperClass=$.encoder.encodeForHTMLAttribute("class",this.periodWrapperClass,true);this.periodHeaderClass=$.encoder.encodeForHTMLAttribute("class",this.periodHeaderClass,true);this.periodBodyClass=$.encoder.encodeForHTMLAttribute("class",this.periodBodyClass,true);Bankingapp.ui.HistoricList.superclass.constructor.call(this,b);},appendItems:function(f){var a=null;if(f){if(this.dataOrder=="asc"){this.listData=f.concat(this.listData);}else{this.listData=this.listData.concat(f);}if(!this.periods||(this.periods[0].date.valueOf()!=this.getToday().valueOf())){this.empty();a=this.listData;}else{a=f;}}else{a=this.listData;this.empty();}a.sort(this.sortingFunction(this.dataOrder,this.dateField,this.dataDateFormat));for(var c=0;c<a.length;c++){if(!a[c][this.dateField]){throw"The date property of historic list item cannot be found!";return;}var e=Date.parseDate(a[c][this.dateField],this.dataDateFormat);var b=this.findPeriod(e);if(b.last&&this.lastClass){b.last.removeClass(this.lastClass);}var d=new this.itemRenderer(a[c],this.getItemConfig(a[c]));if(this.itemClass){d.addClass(this.itemClass);}if(this.lastClass){d.addClass(this.lastClass);}if(!b.container){if(this.firstClass){d.addClass(this.firstClass);}this.createPeriodContainer(b);}b.container.append(d);b.last=d;this.registerItem(d,a[c]);}this.renderNoResult();},sortingFunction:function(b,c,a){return function(f,e){var j=f[c];var h=e[c];var d=0;if((j==undefined)||(j==null)||(h==undefined)||(h==null)){throw"The date property of historic list item cannot be found!";return d;}var g=Date.parseDate(j,a).getTime();var i=Date.parseDate(h,a).getTime();if(b=="asc"){if(g<i){d=-1;}else{if(g>i){d=1;}}}else{if(g>i){d=-1;}else{if(g<i){d=1;}}}return d;};},empty:function(){Bankingapp.ui.HistoricList.superclass.empty.call(this);this.periods=this.getPeriods();this.lastPeriod=null;},getPeriods:function(){var c=this.getToday();var g=new Date(c);g.setDate(c.getDate()-1);var b=new Date(c);b.setDate(c.getDate()-((7-this.firstDayOfWeek+c.getDay())%7));var e=new Date(b);e.setDate(b.getDate()-7);var h=new Date(e);h.setDate(e.getDate()-7);var f=new Date(h);f.setDate(h.getDate()-7);var a=new Date(c);a.setDate(1);var d=new Date(c);d.setDate(1);d.setMonth(d.getMonth()-1);return[{date:c,text:this.todayText},{date:g,text:this.yesterdayText},{date:b,text:this.thisWeekText},{date:e,text:this.lastWeekText},{date:h,text:this.twoWeeksAgoText},{date:f,text:this.threeWeeksAgoText},{date:a,text:this.thisMonthText},{date:d,text:this.lastMonthText},{date:null,text:this.olderText}];},getToday:function(){var a=new Date();a.setHours(0,0,0,0);return a;},findPeriod:function(b){if(!this.periods||!$.isArray(this.periods)){return null;}for(var a=0;a<this.periods.length;a++){if(!this.periods[a].date||(b>=this.periods[a].date)){return this.periods[a];}}return null;},createPeriodContainer:function(c){var a=$("<div>",{"class":this.periodWrapperClass}).appendTo(this);$("<div>"+$.encoder.encodeForHTML(c.text+(this.showDateInPeriods&&c.date?" "+c.date.dateFormat(this.displayDateFormat):""))+"</div>").attr({"class":this.periodHeaderClass}).appendTo(a);var b=$("<div>",{"class":this.periodBodyClass}).appendTo(a);c.container=b;return b;}});Class.ns("Bankingapp.ui");Bankingapp.ui.TransactionListItem=Class.extend(Bankingapp.ui.ListItem,{idField:"transactionId",typeField:"transactionType",categoryField:"categoryId",partnerNameField:"partnerName",amountField:"originalCurrencyAmount",currencyField:"originalCurrency",baseClass:"transactionListItem",renderItem:function(){this.addClass(this.itemData[this.typeField].toLowerCase());var c=2;var b=$("<table>");var d=b.appendRow();var a=d.appendCell({"class":"listItemImageContainer icon",rowspan:c});a=d.appendCell({"class":"listItemContentContainer name"});a.append(new Bankingapp.ui.Label(this.itemData[this.partnerNameField],{"class":"name"}));a=d.appendCell({"class":"listItemContentContainer type"});a.append(new Bankingapp.ui.Label(this.itemData[this.typeField],{"class":"type"}));a=d.appendCell({"class":"listItemCell decorator",rowspan:c});a.append($("<div>",{"class":"listItemImageContainer decorator"}));d=b.appendRow();a=d.appendCell({"class":"listItemContentContainer category"});a.append(new Bankingapp.ui.Label(this.itemData[this.categoryField],{"class":"category"}));a=d.appendCell({"class":"listItemContentContainer amount"});a.append(new Bankingapp.ui.Amount({decorate:true,currency:this.itemData[this.currencyField],amount:this.itemData[this.amountField]}));this.append(b);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.TransactionHistoryList=Class.extend(Bankingapp.ui.HistoricList,{constructor:function(c,a){var b={baseClass:"transactionList"};if(c){if($.isArray(c)){if(a){$.extend(b,a);}b.listData=c;}else{$.extend(b,c);}b.itemRenderer=Bankingapp.ui.TransactionListItem;}Bankingapp.ui.TransactionHistoryList.superclass.constructor.call(this,b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.ContactListItem=Class.extend(Bankingapp.ui.ListItem,{nameField:"contactName",phoneField:"contactPhone",emailField:"contactEmail",pageField:"contactPage",classField:"contactClass",baseClass:"contactListItem",renderItem:function(){this.addClass(this.baseDefaultClass);var d=this.itemData[this.nameField];var a=this.itemData[this.phoneField];var c=this.itemData[this.emailField];var g=this.itemData[this.pageField];var b=this.itemData[this.classField];if(b!=null&&b!=undefined){this.baseClass=this.baseClass+" "+b;}var f=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);var e=$("<div>",{"class":this.baseClass+"-inner"});if(d!=undefined){$('<div class="contactName">'+$.encoder.encodeForHTML(d)+"</div>").appendTo(e);}if(a!=undefined){$('<div class="contactPhone">'+$.encoder.encodeForHTML(a)+"</div>").appendTo(e);}if(c!=undefined){$('<div class="contactEmail">'+$.encoder.encodeForHTML(c)+"</div>").appendTo(e);}if(g!=undefined){$('<div class="contactPage">'+$.encoder.encodeForHTML(g)+"</div>").appendTo(e);}f.append(e);}});Class.ns("Bankingapp.ui");Bankingapp.ui.ContactList=Class.extend(Bankingapp.ui.List,{constructor:function(c,a){var b={};if(c){if($.isArray(c)){if(a){$.extend(b,a);}b.listData=c;}else{$.extend(b,c);}b.itemRenderer=Bankingapp.ui.ContactListItem;}Bankingapp.ui.ContactList.superclass.constructor.call(this,b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.CustomerListItem=Class.extend(Bankingapp.ui.ListItem,{nameField:"name",baseClass:"customerListItem",renderItem:function(){this.addClass(this.baseDefaultClass);var b=this.itemData[this.nameField];var d=$("<div>",{"class":this.baseClass+" outer"}).appendTo(this);var c=$("<div>",{"class":this.baseClass+" inner"});var a=$('<div class="customerName">'+$.encoder.encodeForHTML(b)+"</div>");c.append(a);d.append(c);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.FxRateListItem=Class.extend(Bankingapp.ui.ListItem,{imageDataField:"image",imageTypeField:"imageType",minorUnitsField:"minorUnits",currencyField:"currency",currencyNameField:"name",fxRateData:"fxRateData",middleField:["middle","value"],buyField:["buy","value"],sellField:["sell","value"],currencyIdField:"currencyId",baseClass:"fxRateListItem",buyrateKey:"demo_bankingapp_function_fxrates_buyrate",sellrateKey:"demo_bankingapp_function_fxrates_sellrate",renderItem:function(){this.addClass(this.baseDefaultClass);var a=this.itemData[this.imageDataField];var f=this.itemData[this.imageTypeField];var k=this.itemData[this.currencyField];var n=this.itemData[this.currencyNameField];var c=this.itemData[this.minorUnitsField];var o=this.getValue(this.middleField,this.itemData);var g=this.getValue(this.buyField,this.itemData);var j=this.getValue(this.sellField,this.itemData);var i=$('<div class="listItemImageContainer">');var e=$("<img>").attr({src:"data:image/"+f+";base64,"+$.encoder.encodeForURL(a)});i.append(e);var m=$("<div>",{"class":this.baseClass+"-outer"}).append(i);m.appendTo(this);var d=$("<div>",{"class":this.baseClass+"-inner"});$('<div class="fxcurrency">'+$.encoder.encodeForHTML(k)+"</div>").appendTo(d);if(o){d.append(new Bankingapp.ui.Amount({"class":"fxmiddle",amount:o,decimals:c}));}if(n){d.append(new Bankingapp.ui.Label(n,{"class":"fxcurrencyname"}));}if(g||j){var b=$("<div>",{"class":"fxbuysellcontainer"}).appendTo(d);var h=$('<div class="fxbuysell">');h.append(new Bankingapp.ui.Label(resolve(this.buyrateKey),{"class":"fxbuytitle"}));h.append(new Bankingapp.ui.Amount({"class":"fxbuy",amount:g,decimals:c}));b.append(h);var l=$('<div class="fxbuysell">');l.append(new Bankingapp.ui.Label(resolve(this.sellrateKey),{"class":"fxselltitle"}));l.append(new Bankingapp.ui.Amount({"class":"fxsell",amount:j,decimals:c}));b.append(l);}m.append(d);},getValue:function(b,c){b=$.isArray(b)?b:[b];for(var a in b){c=c[b[a]];if(!c){return null;}}return c;}});Class.ns("Bankingapp.ui");Bankingapp.ui.CurrencyListItem=Class.extend(Bankingapp.ui.ListItem,{imageDataField:"image",imageTypeDataField:"imageType",currencyField:"currency",currencyNameField:"name",baseClass:"currencyListItem",currencyListFunctionAttribute:null,renderItem:function(){this.addClass(this.baseDefaultClass);var a=this.itemData[this.imageDataField];var g=this.itemData[this.currencyField];var i=this.itemData[this.currencyNameField];var c=this.itemData[this.imageTypeDataField];var f=$('<div class="listItemImageContainer left">');var d=$("<img>").attr({src:"data:image/"+c+";base64,"+$.encoder.encodeForURL(a),alt:""});f.append(d);var h=$("<div>",{"class":this.baseClass+"-outer"}).append(f);h.appendTo(this);var b=$("<div>",{"class":this.baseClass+"-inner"});$('<div class="currency">'+$.encoder.encodeForHTML(g)+"</div>").appendTo(b);if(this.currencyNameField&&i){var e=resolve("demo_bankingapp_function_fxrates_currencyname_separator");$('<div class="separator">'+$.encoder.encodeForHTML(e)+"</div>").appendTo(b);$('<div class="currencyname">'+$.encoder.encodeForHTML(i)+"</div>").appendTo(b);}h.append(b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.LocationListItem=Class.extend(Bankingapp.ui.ListItem,{typeField:"type",nameField:"name",addressField:"address",servicesField:"services",serviceIdField:"serviceId",baseClass:"locationListItem",atmTypeName:"ATM",branchTypeName:"BRANCH",partnerTypeName:"PARTNER",atmTypeClass:"atm",branchTypeClass:"branch",partnerTypeClass:"partner",renderItem:function(){this.addClass(this.baseDefaultClass);var e=this.itemData[this.typeField];var a=this.itemData[this.nameField];var h=this.itemData[this.addressField];var g=this.itemData[this.servicesField];var j=$("<div>",{"class":this.baseClass+"-outer"}).appendTo(this);var b=$("<div>",{"class":this.baseClass+"-inner"});var c=$("<div>",{"class":this.baseClass+"-services"});$('<div class="atmName">'+$.encoder.encodeForHTML(a)+"</div>").appendTo(b);$('<div class="atmAddress">'+$.encoder.encodeForHTML(h)+"</div>").appendTo(b);if(e==this.atmTypeName){this.atmTypeClass=$.encoder.encodeForHTMLAttribute("class",this.atmTypeClass,true);j.addClass(this.atmTypeClass);}else{if(e==this.branchTypeName){this.branchTypeClass=$.encoder.encodeForHTMLAttribute("class",this.branchTypeClass,true);j.addClass(this.branchTypeClass);}else{if(e==this.partnerTypeName){this.partnerTypeClass=$.encoder.encodeForHTMLAttribute("class",this.partnerTypeClass,true);j.addClass(this.partnerTypeClass);}}}for(var d=0;d<g.length;d++){var f=g[d][this.serviceIdField];$('<div class="'+$.encoder.encodeForHTML("atmservices_"+f)+'"></div>').appendTo(c);}b.append(c);j.append(b);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.Form=Class.extend(Bankingapp.ui.Component,{baseClass:null,submitHandler:null,beforeValidationHandler:null,businessValidationHandler:null,constructor:function(d){var a="<form>";var c=this.applyConfig(d);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),style:c&&c.style?c.style:null,autocomplete:c&&c.autocomplete?c.autocomplete:"off",autocorrect:c&&c.autocorrect?c.autocorrect:"off",autocapitalize:c&&c.autocapitalize?c.autocapitalize:"off",method:"post"};Bankingapp.ui.Form.superclass.constructor.call(this,a,b);this.bind("submit",$.proxy(this.submitformHandler,this));},submitformHandler:function(b){try{b.preventDefault();this.placeholderHandler(true);if(this.isValid()){if(this.submitHandler){this.submitHandler();}this.trigger("formSubmit",b.data);}else{this.renderError();this.placeholderHandler(false);this.trigger("formValidationError",b.data);}}catch(a){onErrorOccurred(a);}},isValid:function(){this.trigger("beforeFormValidation");if(this.beforeValidationHandler){this.beforeValidationHandler();}this.validation(true);var b=this.validate();if(b&&this.businessValidationHandler){var a=this.businessValidationHandler();var b=b&&a;if(!a){this.trigger("formBusinessValidationError");}}this.trigger("afterFormValidation",b);return b;},initComponent:function(){},placeholderHandler:function(b){var c=this.get(0).elements;for(var d=0;d<c.length;d++){var a=$(c[d]).data("wrapper");if(a&&a.removeHint&&typeof a.removeHint=="function"){if(b){a.removeHint();}else{a.addHint();}}}},enable:function(){Bankingapp.ui.Form.superclass.enable.call(this);jQuery("*",this).each(function(){if($(this).data("wrapper")){$(this).data("wrapper").enable();}});},disable:function(){Bankingapp.ui.Form.superclass.disable.call(this);jQuery("*",this).each(function(){if($(this).data("wrapper")){$(this).data("wrapper").disable();}});}});Class.ns("Bankingapp.ui");Bankingapp.ui.TextField=Class.extend(Bankingapp.ui.Component,{baseClass:null,hintClass:"hint",validation:null,type:"text",name:null,labelText:null,inputMaskPattern:null,constructor:function(b){var a="<input>";this.validation={whitelist:true};if(b.validation){var e=this.validation;$.extend(e,b.validation);b.validation=e;}var d=this.applyConfig(b);var c={id:d&&d.id?d.id:this.id,type:this.type,name:this.name,disabled:this.disabled==true?new String(this.disabled):null,accept:d&&d.accept?d.accept:null,maxlength:d&&d.maxlength?new String(d.maxlength).toString():null,readonly:d&&d.readonly?d.readonly:null,size:d&&d.size?new String(d.size).toString():null,accesskey:d&&d.accesskey?d.accesskey:null,dir:d&&d.dir?d.dir:null,lang:d&&d.lang?d.lang:null,tabindex:d&&d.tabindex?new String(d.tabindex).toString():null,value:d&&d.value?d.value:(this.value?this.value:""),autocomplete:d&&d.autocomplete?d.autocomplete:"off",autocorrect:d&&d.autocorrect?d.autocorrect:"off",autocapitalize:d&&d.autocapitalize?d.autocapitalize:"off","class":(this.baseClass?this.baseClass:"")+(d&&d["class"]?(" "+d["class"]):"")};Bankingapp.ui.TextField.superclass.constructor.call(this,a,c);this.data("labelText",this.labelText);if(d&&d.value){this.setValue(d.value);}if(b&&b.hint){this.hintClass=$.encoder.encodeForHTMLAttribute("class",this.hintClass,true);this.data("hint",$.trim($.encoder.encodeForHTML(b.hint)));this.addHint();this.blur($.proxy(this.addHint,this));this.focus($.proxy(this.removeHint,this));}if(this.validation){this.addValidation(this.validation);}if(this.inputMaskPattern){this.bind("keypress",$.proxy(this.keyPressHandler,this));}},addHint:function(){var b=this.data("hint");var a=this.val();if(b!=null&&b.length!=0&&(a==null||a.length==0)&&!this.hasClass(this.hintClass)){this.val(this.data("hint"));this.addClass(this.hintClass);}},removeHint:function(){var b=this.data("hint");var a=this.val();if(b!=null&&(a!=null||a.length!=0)&&a==b&&this.hasClass(this.hintClass)){this.val("");this.removeClass(this.hintClass);}},addValidation:function(a){this.data("validation",a);},enable:function(){Bankingapp.ui.TextField.superclass.enable.call(this);this.removeAttr("disabled");},disable:function(){Bankingapp.ui.TextField.superclass.disable.call(this);this.attr("disabled","disabled");},setValue:function(a){this.val($.encoder.canonicalize(new String(a)));if(this.getValue()!=null&&this.getValue().length!=0){this.removeHint();}else{this.addHint();}},getValue:function(){var b=this.data("hint");var a=this.val();if(a==b&&this.hasClass(this.hintClass)){return"";}return a;},keyPressHandler:function(d){try{if(d.ctrlKey){return;}var a=this.getPressedKey(d);if($.browser.mozilla&&(this.isNavKeyPress(a)||a==8||(a==46&&d.button==-1))){return;}var c=String.fromCharCode(d.charCode||d.keyCode);if(!$.browser.mozilla&&this.isSpecialKeyPress(d,a)&&!c){return;}if(!this.inputMaskPattern.test(c)){if(d.stopPropagation){d.stopPropagation();}else{d.cancelBubble=true;}if(d.preventDefault){d.preventDefault();}else{d.returnValue=false;}}}catch(b){onErrorOccurred(b);}},getPressedKey:function(c){var a={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35};var b=c.keyCode||c.charCode;return $.browser.safari?(a[b]||b):b;},isNavKeyPress:function(a){return(a>=33&&a<=40)||a==13||a==9||a==27;},isSpecialKeyPress:function(b,a){return(b.type=="keypress"&&b.ctrlKey)||this.isNavKeyPress(a)||(a==8)||(a>=16&&a<=20)||(a>=44&&a<=46);}});Class.ns("Bankingapp.ui");Bankingapp.ui.InputField=Class.extend(Bankingapp.ui.Component,{baseClass:"inputField",baseLabelClass:"inputLabel",baseLabelContainerClass:"inputLabelContainer",baseInputContainerClass:"inputContainer",labelText:null,input:null,containerConfig:{},labelConfig:null,inputConfig:null,inputRenderer:Bankingapp.ui.TextField,labelText:null,required:false,showRequired:true,requiredKey:"bankingapp_component_inputfield_requiredsign",requiredClass:"required",showOptional:true,optionalKey:"bankingapp_component_inputfield_optionaltext",optionalClass:"optional",optionalText:"",constructor:function(g,f,h,e){this.containerConfig={};jQuery.extend(this.containerConfig,typeof g!="string"?g:{labelText:g,inputConfig:f,labelConfig:h,containerConfig:e});var c=this.applyConfig(this.containerConfig);var b={id:c&&c&&c.id?c.id:this.id,"class":this.baseClass+(this.containerConfig["class"]?(" "+this.containerConfig["class"]):"")};Bankingapp.ui.InputField.superclass.constructor.call(this,"<div>",b);this.labelText=this.labelText==null&&this.labelConfig&&this.labelConfig.value?this.labelConfig.value:this.labelText;this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.baseLabelClass=$.encoder.encodeForHTMLAttribute("class",this.baseLabelClass,true);this.baseLabelContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseLabelContainerClass,true);this.baseInputContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseInputContainerClass,true);this.requiredClass=$.encoder.encodeForHTMLAttribute("class",this.requiredClass,true);this.optionalClass=$.encoder.encodeForHTMLAttribute("class",this.optionalClass,true);this.optionalText=$.encoder.encodeForHTML(resolve(this.optionalKey));if(this.inputConfig&&this.inputConfig.id){if(this.labelConfig==undefined){this.labelConfig={"for":this.inputConfig.id};}else{if(typeof this.labelConfig["for"]=="undefined"){this.labelConfig["for"]=this.inputConfig.id;}}}if(this.labelText){if(this.inputConfig==undefined){this.inputConfig={labelText:this.labelText};}else{if(typeof this.inputConfig.labelText=="undefined"){this.inputConfig.labelText=this.labelText;}}}if(this.showRequired==true&&!(e&&e.required)&&f&&f.validation&&f.validation.required){this.required=f.validation.required;}if((this.showOptional==true)&&!(e&&e.required)&&!(f&&f.validation&&f.validation.required)&&!this.inputConfig.hint){this.inputConfig.hint=this.optionalText;this.addClass(this.optionalClass);}var d=new Bankingapp.ui.Label(this.labelText,this.labelConfig);var a=$("<div>",{"class":this.baseLabelContainerClass});this.append(a.append(d));if(this.required==true){this.append(a.append(new Bankingapp.ui.Label(resolve(this.requiredKey))));this.addClass(this.requiredClass);}d.addClass(this.baseLabelClass);this.labelText=$.encoder.encodeForHTML(this.labelText);this.render();},render:function(){this.input=new this.inputRenderer(this.inputConfig);var a=$("<div>",{"class":this.baseInputContainerClass});this.append(a.append(this.input));},val:function(){return this.input.val();},setValue:function(a){this.input.val(a);},getLabelText:function(){return this.labelText;},getInputComponent:function(){return this.input;},enable:function(){Bankingapp.ui.InputField.superclass.enable.call(this);this.input.enable();},disable:function(){Bankingapp.ui.InputField.superclass.disable.call(this);this.input.disable();}});Class.ns("Bankingapp.ui");Bankingapp.ui.SearchInput=Class.extend(Bankingapp.ui.TextField,{baseClass:"searchinput",listData:[],triggerdelay:500,errorTriggerdelay:2000,minDifferentCharNumber:2,propertyArray:null,initComponent:function(){this.keyup($.proxy(this.keypressHandler,this));},timer:null,errorTimer:null,keypressHandler:function(a){try{clearTimeout(this.timer);clearTimeout(this.errorTimer);this.timer=setTimeout($.proxy(this.search,this),this.triggerdelay);}catch(b){onErrorOccurred(b);}},search:function(){try{var d=this.val();if(d.length==0&&d!=this.lastText){this.trigger("clear",{array:this.listData});this.lastText=d;return;}if(this.lastText==d||this.isValid()==false){return;}var c=[];for(var b in this.listData){if(this.searchInJson(d,this.listData[b])){c.push(this.listData[b]);}}this.trigger("search",{array:c});}catch(a){onErrorOccurred(a);}},searchInJson:function(d,a){if(typeof a=="string"){return a.toLowerCase().indexOf(d.toLowerCase())!=-1;}else{if(typeof a=="number"){return this.searchInJson(d,""+a);}else{if($.isArray(a)){for(var b=0;b<a.length;b++){return this.searchInJson(a[b]);}}else{if(typeof a=="object"){for(var e in a){if(!a.hasOwnProperty(e)){continue;}if(this.propertyArray!=null&&$.inArray(e,this.propertyArray)==-1){continue;}var c=this.searchInJson(d,a[e]);if(c==true){return true;}}}}}}return false;},lastText:"",errorMessage:0,isValid:function(){var e=this.val();this.lastText=e;var a=true;this.errorMessage="";for(var d in this.validation){var b=$.Validation.getRule(d);var c=b.check(this,this.validation[d]);a=a&&c;if(c==false){this.errorMessage+=(this.errorMessage==""?"":"\n")+b.msg(this.validation[d],this);}}if(a==false){this.timer=setTimeout($.proxy(this.showValidationError,this),this.errorTriggerdelay);}return a;},showValidationError:function(a){showError(this.errorMessage);},setListData:function(a){this.listData=a;this.search();},addListData:function(a){if($.isArray(a)){this.listData=$.merge(a,this.listData);this.search();}},setValue:function(a){Bankingapp.ui.SearchInput.superclass.setValue.call(this,a);this.search();}});Class.ns("Bankingapp.ui");Bankingapp.ui.SearchField=Class.extend(Bankingapp.ui.Component,{baseClass:"searchField",baseControlContainerClass:"searchControlContainer",baseInputContainerClass:"searchInputContainer",button:null,input:null,searchConfig:null,controlConfig:{iconClass:"delete"},constructor:function(a){var d=this.applyConfig(a);var c={id:d&&d&&d.id?d.id:this.id,"class":this.baseClass+(d&&d["class"]?(" "+d["class"]):"")};this.baseControlContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseControlContainerClass,true);this.baseInputContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseInputContainerClass,true);Bankingapp.ui.SearchField.superclass.constructor.call(this,"<table>",c);this.input=new Bankingapp.ui.SearchInput(this.searchConfig);this.button=new Bankingapp.ui.IconButton(this.controlConfig);this.button.bind("click",$.proxy(this.clickHandler,this));var f=$("<tr>");var e=$("<td>",{"class":"input"});var b=$("<td>",{"class":"control"});this.append(f);f.append(e);f.append(b);e.append(this.input);b.append(this.button);},clickHandler:function(b){try{this.input.setValue("");}catch(a){onErrorOccurred(a);}},val:function(){return this.input.val();},setValue:function(a){this.input.setValue(a);},enable:function(){Bankingapp.ui.InputField.superclass.enable.call(this);this.input.enable();},disable:function(){Bankingapp.ui.InputField.superclass.disable.call(this);this.input.disable();},setListData:function(a){this.input.setListData(a);},addListData:function(a){this.input.addListData(a);},getInput:function(){return this.input;}});Class.ns("Bankingapp.ui");Bankingapp.ui.OutputField=Class.extend(Bankingapp.ui.Component,{baseClass:"outputField",baseLabelContainerClass:"outputLabelContainer",baseValueContainerClass:"outputValueContainer",containerConfig:{},labelConfig:{},valueConfig:{},labelText:null,valueLabel:null,valueText:null,constructor:function(f,e,d){jQuery.extend(this.containerConfig,typeof f!="string"?f:{labelText:f,valueText:e,containerConfig:d});var b=this.applyConfig(this.containerConfig);var a={id:b&&b&&b.id?b.id:this.id,"class":this.baseClass+(this.containerConfig["class"]?(" "+this.containerConfig["class"]):"")};Bankingapp.ui.InputField.superclass.constructor.call(this,"<div>",a);this.labelText=this.labelText==null&&this.labelConfig&&this.labelConfig.value?this.labelConfig.value:this.labelText;this.valueText=this.valueText==null&&this.labelConfig&&this.valueConfig.value?this.valueConfig.value:this.valueText;this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.baseLabelContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseLabelContainerClass,true);this.baseValueContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseValueContainerClass,true);$.extend(this.labelConfig,{baseClass:this.baseLabelContainerClass});var c=new Bankingapp.ui.Label(this.labelText,this.labelConfig);this.append(c);$.extend(this.valueConfig,{baseClass:this.baseValueContainerClass});this.valueLabel=new Bankingapp.ui.Label(this.valueText,this.valueConfig);this.append(this.valueLabel);},getValue:function(){return this.valueLabel.value;},setValue:function(a){this.valueLabel.empty();this.valueLabel.value=a;this.valueLabel.append(a);}});Class.ns("Bankingapp.ui");Bankingapp.ui.Button=Class.extend(Bankingapp.ui.Touchable,{baseClass:"button",value:null,config:null,input:null,constructor:function(d,a){var c=this.applyConfig(d);this.config=a;var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),style:c&&c.style?c.style:null};Bankingapp.ui.Button.superclass.constructor.call(this,"<div>",b);},initComponent:function(){this.render();this.click($.proxy(this.clickHandler,this));},render:function(){var a={id:this.config&&this.config.id?this.config.id:this.id,disabled:this.disabled==true?new String(this.disabled):null,name:this.config&&this.config.name?this.config.name:null,"class":this.config&&this.config["class"]?this.config["class"]:"",tabindex:this.config&&this.config.tabindex?this.config.tabindex:null,dir:this.config&&this.config.dir?this.config.dir:null,type:"button",value:this.value};this.input=$("<input>",this.encodeAttributes(a));this.append(this.input);},clickHandler:function(b){try{this.trigger("buttonClick",b.data);}catch(a){onErrorOccurred(a);}},enable:function(){Bankingapp.ui.Button.superclass.enable.call(this);jQuery("input",this).each(function(){$(this).removeAttr("disabled");});},disable:function(){Bankingapp.ui.Button.superclass.disable.call(this);jQuery("input",this).each(function(){$(this).attr("disabled","disabled");});},getValue:function(){return this.value;},setValue:function(a){this.value=a;this.input.attr(this.encodeAttributes({value:this.value}));}});Class.ns("Bankingapp.ui");Bankingapp.ui.SubmitButton=Class.extend(Bankingapp.ui.Button,{baseClass:"submit button",borderClass:"border",constructor:function(c,b,a){this.value=c;Bankingapp.ui.SubmitButton.superclass.constructor.call(this,b,a);},render:function(){var b={id:this.config&&this.config.id?this.config.id:this.id,disabled:this.disabled==true?new String(this.disabled):null,name:this.config&&this.config.name?this.config.name:null,"class":this.config&&this.config["class"]?this.config["class"]:"",style:this.config&&this.config.style?this.config.style:null,tabindex:this.config&&this.config.tabindex?this.config.tabindex:null,dir:this.config&&this.config.dir?this.config.dir:null,type:"submit",value:this.value};this.borderClass=$.encoder.encodeForHTMLAttribute("class",this.borderClass,true);var a=$("<div>",{"class":this.borderClass});this.input=$("<input>",this.encodeAttributes(b));a.append(this.input);this.append(a);}});Class.ns("Bankingapp.ui");Bankingapp.ui.ComplexButton=Class.extend(Bankingapp.ui.Button,{baseClass:"complexButton",borderClass:"border",baseOuterClass:"outer",baseInnerClass:"inner",rowClass:"row",innerValue:null,outerValue:null,outerDiv:null,innerDiv:null,constructor:function(b,a,c){this.innerValue=b;this.outerValue=c;Bankingapp.ui.ComplexButton.superclass.constructor.call(this,a);this.rowClass=$.encoder.encodeForHTMLAttribute("class",this.rowClass,true);this.borderClass=$.encoder.encodeForHTMLAttribute("class",this.borderClass,true);this.baseOuterClass=$.encoder.encodeForHTMLAttribute("class",this.baseOuterClass,true);this.baseInnerClass=$.encoder.encodeForHTMLAttribute("class",this.baseInnerClass,true);},render:function(){var a=$("<div>",{"class":this.borderClass});this.outerDiv=$("<div>",{"class":this.baseOuterClass});this.innerDiv=$("<div>",{"class":this.baseInnerClass});a.append(this.outerDiv);this.renderOuterContent();this.renderInnerContent();this.outerDiv.append(this.innerDiv);this.append(a);},renderInnerContent:function(){if(this.innerValue){if($.isArray(this.innerValue)){for(var a=0;a<this.innerValue.length;a++){this.appendInnerContent(this.innerValue[a]);}}else{this.appendInnerContent(this.innerValue);}}},renderOuterContent:function(){if(this.outerValue){if($.isArray(this.outerValue)){for(var a=0;a<this.outerValue.length;a++){this.appendOuterContent(this.outerValue[a]);}}else{this.appendOuterContent(this.outerValue);}}},appendInnerContent:function(a){var b=$("<div>",{"class":this.rowClass+this.innerDiv.children().length});b.append(typeof a=="string"?$.encoder.encodeForHTML(a):a);this.innerDiv.append(b);},appendOuterContent:function(a){var b=$("<div>",{"class":this.rowClass+this.outerDiv.children().length});b.append(typeof a=="string"?$.encoder.encodeForHTML(a):a);this.outerDiv.append(b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.LandingPageButton=Class.extend(Bankingapp.ui.ComplexButton,{baseClass:"landingPageButton"});Class.ns("Bankingapp.ui");Bankingapp.ui.IconButton=Class.extend(Bankingapp.ui.Button,{baseClass:"iconButton",value:null,iconClass:null,constructor:function(a){var c=this.applyConfig(a);this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.iconClass=$.encoder.encodeForHTMLAttribute("class",this.iconClass,true);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),style:c&&c.style?c.style:null};Bankingapp.ui.IconButton.superclass.constructor.call(this,b);},render:function(){var b=$("<div>",{"class":this.baseClass+"-outer "+this.iconClass}).appendTo(this);var a=$("<div>",{"class":this.baseClass+"-inner "+this.iconClass});if(this.value!=null&&this.value!="undefined"){$('<div class="iconButtonTitle">'+(this.value!=null?$.encoder.encodeForHTML(this.value):"")+"</div>").appendTo(a);}b.append(a);this.append(b);}});Class.ns("Bankingapp.ui");Bankingapp.ui.ToggleButton=Class.extend(Bankingapp.ui.Button,{iconClass:"",baseClass:"toggle button",upClass:"up",downClass:"down",state:false,constructor:function(a){var c=this.applyConfig(a);this.baseClass=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);this.iconClass=$.encoder.encodeForHTMLAttribute("class",this.iconClass,true);this.upClass=$.encoder.encodeForHTMLAttribute("class",this.upClass,true);this.downClass=$.encoder.encodeForHTMLAttribute("class",this.downClass,true);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),style:c&&c.style?c.style:null};Bankingapp.ui.ToggleButton.superclass.constructor.call(this,b);},initComponent:function(){Bankingapp.ui.ToggleButton.superclass.initComponent.call(this);this.updateStyle();this.bind("buttonClick",$.proxy(this.toggleHandler,this));},render:function(){var b=$("<div>",{"class":this.baseClass+" outer "+this.iconClass}).appendTo(this);var a=$("<div>",{"class":this.baseClass+" inner "+this.iconClass});if(this.value!=null&&this.value!="undefined"){$('<div class="title">'+(this.value!=null?$.encoder.encodeForHTML(this.value):"")+"</div>").appendTo(a);}b.append(a);this.append(b);},toggleHandler:function(c){try{this.state=!this.state;this.updateStyle();var b=this.state?"buttonDownClick":"buttonUpClick";this.trigger(b,c.data);}catch(a){onErrorOccurred(a);}},updateStyle:function(){if(this.state){this.removeClass(this.upClass);this.addClass(this.downClass);}else{this.addClass(this.upClass);this.removeClass(this.downClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.SelectionList=Class.extend(Bankingapp.ui.List,{getSelectedItems:function(){var a=[];for(var b=0;b<this.itemsArray.length;b++){if(this.itemsArray[b].isSelected()){a.push(this.listData[b]);}}return a;},clear:function(){for(var a=0;a<this.itemsArray.length;a++){this.itemsArray[a].setSelected(false);this.itemsArray[a].updateStyleClass();}}});Class.ns("Bankingapp.ui");Bankingapp.ui.SingleSelectionListItem=Class.extend(Bankingapp.ui.ListItem,{contentField:"content",baseClass:"singleSelectionListItem",contentClass:"content",selectedClass:"state_selected",renderItem:function(){this.addClass(this.baseDefaultClass);var d=$.encoder.encodeForHTML(this.itemData[this.contentField]);var e=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);var c=$("<div>",{"class":e+" outer"}).appendTo(this);var b=$("<div>",{"class":e+" inner"});var a=$("<div>",{"class":$.encoder.encodeForHTMLAttribute("class",this.contentClass,true)});a.append(d);b.append(a);c.append(b);if(!this.active){this.addClass(this.inactiveClass);}},isSelected:function(){return this.hasClass(this.selectedClass);},setSelected:function(a){this.updateStyleClass();if(a==false){this.removeClass(this.selectedClass);}else{this.addClass(this.selectedClass);}},clickHandler:function(b){try{Bankingapp.ui.SingleSelectionListItem.superclass.clickHandler(b);this.updateStyleClass();}catch(a){onErrorOccurred(a);}},updateStyleClass:function(){this.siblings().removeClass(this.selectedClass);this.addClass(this.selectedClass);}});Class.ns("Bankingapp.ui");Bankingapp.ui.MultiSelectionListItem=Class.extend(Bankingapp.ui.SingleSelectionListItem,{baseClass:"multiSelectionListItem",updateStyleClass:function(){if(this.isSelected()){this.removeClass(this.selectedClass);}else{this.addClass(this.selectedClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.Amount=Class.extend(Bankingapp.ui.Component,{baseClass:"amount",baseElement:"<div>",id:null,value:null,amount:null,currency:null,decimals:null,decorate:false,positiveClass:"positive",negativeClass:"negative",zeroClass:"zero",amountFormatKey:"bankingapp_component_amount_format",amountWithCurrencyFormatKey:"bankingapp_component_amount_formatwithcurrency",decimalSeparatorKey:"bankingapp_common_decimal_separator",groupingSeparatorKey:"bankingapp_common_grouping_separator",currencyPositionKey:"bankingapp_component_amount_currencyposition",constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};Bankingapp.ui.Amount.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var j=this.decimals?$().amountFormatter(this.amount,this.currency,this.decimals):$().amountFormatter(this.amount,resolve(this.amountFormatKey));if(j==null||j==""){return;}var h=Bankingapp.framework.currency.CurrencyDataProvider.getCurrencyData(this.currency);if(h!=undefined&&h!=null&&h.symbol!=undefined&&h.symbol!=null){this.currency=h.symbol;}var a=j.toString().split(resolve(this.decimalSeparatorKey));var e=a[0];var g=a[1];var d=resolve(this.currencyPositionKey)=="prefix";if((this.currency==undefined)||(this.currency==null)){this.currency="";}else{if(d){this.currency=this.currency+" ";}else{this.currency=" "+this.currency;}}var i;var b;var c;c=$("<span>").append($.encoder.encodeForHTML(this.currency));c.addClass("currencyField");i=$("<span>").append($.encoder.encodeForHTML(e+resolve(this.decimalSeparatorKey)));i.addClass("amountWholeField");b=$("<span>").append($.encoder.encodeForHTML(g));b.addClass("amountDecimalField");if(this.decorate){var f=null;if(this.amount<0){f=this.negativeClass;}else{if(this.amount>0){f=this.positiveClass;}else{f=this.zeroClass;}}this.addClass(f);}if(d){this.append(c);this.append(i);this.append(b);}else{this.append(i);this.append(b);this.append(c);}},getValue:function(){return this.value;}});Class.ns("Bankingapp.ui");Bankingapp.ui.AmountInput=Class.extend(Bankingapp.ui.InputField,{baseClass:"amountinput",inputContainerClass:"inputContainer",amountInputContainerClass:"amountInputContainer",amountInputCurrencyContainerClass:"currencyContainer",amountInputAmountContainerClass:"amountContainer",currencyConfig:null,currency:null,amountWithCurrencyFormatKey:"bankingapp_component_amount_formatwithcurrency",render:function(){this.amountInputContainerClass=$.encoder.encodeForHTMLAttribute("class",this.amountInputContainerClass,true);this.amountInputCurrencyContainerClass=$.encoder.encodeForHTMLAttribute("class",this.amountInputCurrencyContainerClass,true);this.amountInputAmountContainerClass=$.encoder.encodeForHTMLAttribute("class",this.amountInputAmountContainerClass,true);var d=$("<div>",{"class":this.inputContainerClass});var b=$("<div>",{"class":this.amountInputContainerClass});var c=new Bankingapp.ui.Label(this.currency?this.currency:"",this.currencyConfig);this.input=new Bankingapp.ui.TextField(this.inputConfig);var a=resolve(this.amountWithCurrencyFormatKey,{amount:"0",currency:"C"});if(a.indexOf("0")>a.indexOf("C")){b.append(c);b.append(this.input);}else{b.append(this.input);b.append(c);}d.append(b);this.append(d);}});Class.ns("Bankingapp.ui");Bankingapp.ui.LabeledComponent=Class.extend(Bankingapp.ui.Component,{baseClass:"labeledcomponent",baseLabelClass:"labeledcomponentLabel",baseLabelContainerClass:"labelContainer",baseValueContainerClass:"componentContainer",labelText:null,containerConfig:{},labelConfig:{},labelText:null,required:false,showRequired:true,requiredKey:"bankingapp_component_inputfield_requiredsign",requiredClass:"required",valueComponent:null,valueContainer:null,showNoData:false,constructor:function(b){var d=this.applyConfig(b);var c={id:d&&d&&d.id?d.id:this.id,"class":this.baseClass+(this.containerConfig["class"]?(" "+this.containerConfig["class"]):"")};Bankingapp.ui.LabeledComponent.superclass.constructor.call(this,"<div>",c);this.labelText=this.labelText==null&&this.labelConfig&&this.labelConfig.value?this.labelConfig.value:this.labelText;this.baseLabelClass=$.encoder.encodeForHTMLAttribute("class",this.baseLabelClass,true);this.baseLabelContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseLabelContainerClass,true);this.baseValueContainerClass=$.encoder.encodeForHTMLAttribute("class",this.baseValueContainerClass,true);var e=new Bankingapp.ui.Label(this.labelText,this.labelConfig);e.addClass(this.baseLabelClass);var a=$("<div>",{"class":this.baseLabelContainerClass});this.append(a.append(e));if(this.required==true){this.append(a.append(new Bankingapp.ui.Label(this.requiredKey)));this.addClass(this.requiredClass);}this.valueContainer=$("<div>",{"class":this.baseValueContainerClass});if(this.showNoData){if(this.valueComponent&&this.valueComponent.getValue()!=null&&this.valueComponent.getValue()!=""){this.append(this.valueContainer.append(this.valueComponent));}else{this.append(new Bankingapp.ui.Label(resolve("bankingapp_common_na")));}}else{this.append(this.valueContainer.append(this.valueComponent));}},addComponent:function(a){this.valueComponent=a;this.append(this.valueContainer.append(this.valueComponent));},setComponent:function(a){$("*",this.valueContainer).remove();this.addComponent(a);}});Class.ns("Bankingapp.ui");Bankingapp.ui.Checkbox=Class.extend(Bankingapp.ui.Component,{baseClass:"checkbox",selectedClass:"state_selected",labelText:null,value:false,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":(this.baseClass?this.baseClass:"")+(c&&c["class"]?(" "+c["class"]):"")};Bankingapp.ui.Checkbox.superclass.constructor.call(this,"<span>",b);if(this.labelText!=null){this.append($.encoder.encodeForHTML(this.labelText));}this.click($.proxy(this.clickHandler,this));},clickHandler:function(b){try{this.value=!this.value;this.updateClass();this.trigger("checkboxClick",b.data);}catch(a){onErrorOccurred(a);}},updateClass:function(a){if(this.value==true){this.addClass(this.selectedClass);}else{this.removeClass(this.selectedClass);}},initComponent:function(){this.updateClass();},setValue:function(a){this.value=a;},getValue:function(){return this.value;},val:function(){return this.value;}});Class.ns("Bankingapp.ui");Bankingapp.ui.MessageBlock=Class.extend(Bankingapp.ui.Component,{baseClass:"messageblock",iconClass:"icon",titleClass:"title",detailsClass:"details",messagesClass:"messages",borderClass:"border",messages:null,constructor:function(b,a){this.applyConfig(a);this.messages=b;this.iconClass=$.encoder.encodeForHTMLAttribute("class",this.iconClass,true);this.titleClass=$.encoder.encodeForHTMLAttribute("class",this.titleClass,true);this.detailsClass=$.encoder.encodeForHTMLAttribute("class",this.detailsClass,true);this.messagesClass=$.encoder.encodeForHTMLAttribute("class",this.messagesClass,true);Bankingapp.ui.MessageBlock.superclass.constructor.call(this,"<div>",{"class":this.baseClass});},initComponent:function(){if((this.messages!=null)&&(this.messages.length>0)){for(var c=0;c<this.messages.length;c++){var b=$("<div>",{"class":this.borderClass}).appendTo(this);var a=$("<div>",{"class":this.messagesClass}).appendTo(b);var d=this.messages[c];$("<div>").addClass(this.iconClass).appendTo(a);if(d.title!=null){$("<div>"+$.encoder.encodeForHTML(d.title)+"</div>").addClass(this.titleClass).appendTo(a);}if(d.details!=null){$("<div>"+$.encoder.encodeForHTML(d.details)+"</div>").addClass(this.detailsClass).appendTo(a);}}}}});Class.ns("Bankingapp.ui");Bankingapp.ui.ProgressIndicator=Class.extend(Bankingapp.ui.Component,{baseClass:"progressindicator",previousPreviousConnectionClass:"prev_prev_connection",previousFillClass:"prev_fill",previousActiveConnectionClass:"prev_active_connection",activeFillClass:"active_fill",activeNextConnectionClass:"active_next_connection",nextNextConnectionClass:"next_next_connection",nextFillClass:"next_fill",stepCount:null,currentStep:null,constructor:function(b,c,a){this.applyConfig(a);this.stepCount=b;this.currentStep=c;Bankingapp.ui.ProgressIndicator.superclass.constructor.call(this,"<table>",{"class":$.encoder.encodeForHTMLAttribute("class",this.baseClass,true)});},initComponent:function(){var b=$("<tr>").appendTo(this);for(var a=0;a<this.stepCount;a++){if(a<this.currentStep){if(a>0){$("<td>").addClass(this.previousPreviousConnectionClass).html("&nbsp;").appendTo(b);}$("<td>").addClass(this.previousFillClass).html("&nbsp;").appendTo(b);}else{if(a==this.currentStep){if(a>0){$("<td>").addClass(this.previousActiveConnectionClass).html("&nbsp;").appendTo(b);}$("<td>").addClass(this.activeFillClass).html("&nbsp;").appendTo(b);}else{if(a==this.currentStep+1){$("<td>").addClass(this.activeNextConnectionClass).html("&nbsp;").appendTo(b);}else{if(a>this.currentStep+1){$("<td>").addClass(this.nextNextConnectionClass).html("&nbsp;").appendTo(b);}}$("<td>").addClass(this.nextFillClass).html("&nbsp;").appendTo(b);}}}}});Class.ns("Bankingapp.ui");Bankingapp.ui.BankFeedListItem=Class.extend(Bankingapp.ui.ListItem,{categoryTypeIdField:"categoryTypeId",summaryField:"summary",subjectField:"subject",statusField:"status",baseDefaultClass:"bankFeedListItem",subjectClass:"subject",summaryClass:"summary",readClass:"read",renderItem:function(){this.addClass(this.baseDefaultClass);if(this.itemData[this.statusField].$=="R"){this.addClass(this.readClass);}var h=$('<div class="listItemImageContainer left">');var a=getFunctionAttribute("BANK_FEED_CATEGORY_ICONS");var k=null;var e=$("<img>");var c=this.itemData[this.categoryTypeIdField];if((a!=null)&&(a.iconImage!=null)){for(var f=0;f<a.iconImage.length;f++){var d=a.iconImage[f];if(d.categoryTypeId==c){k=d;break;}}}if(k==null){var g=$().getImagesFolder();e.attr({src:g+"bankfeed.png"});}else{e.attr({src:"data:image/"+k.iconImageType+";base64,"+$.encoder.encodeForURL(k.iconImage)});}h.append(e);var j=$("<div>",{"class":this.baseDefaultClass+"-outer"}).append(h);var b=$("<div>",{"class":this.baseDefaultClass+"-inner"});b.append($("<div>",{"class":this.subjectClass}).append(this.itemData[this.subjectField]));b.append($("<div>",{"class":this.summaryClass}).append(this.itemData[this.summaryField]));j.append(b);j.appendTo(this);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.MarkAsUnreadList=Class.extend(Bankingapp.ui.HistoricList,{constructor:function(c,a){var b={baseClass:"markAsUnreadList"};if(c){if($.isArray(c)){if(a){$.extend(b,a);}b.listData=c;}else{$.extend(b,c);}b.itemRenderer=Bankingapp.ui.MarkAsUnreadListItem;}Bankingapp.ui.MarkAsUnreadList.superclass.constructor.call(this,b);},getSelectedItems:function(){var a=[];for(var b=0;b<this.itemsArray.length;b++){if(this.itemsArray[b].isSelected()){a.push(this.listData[b]);}}return a;},clear:function(){for(var a=0;a<this.itemsArray.length;a++){this.itemsArray[a].setSelected(false);this.itemsArray[a].updateStyleClass();}}});Class.ns("Bankingapp.ui");Bankingapp.ui.MarkAsUnreadListItem=Class.extend(Bankingapp.ui.ListItem,{categoryTypeIdField:"categoryTypeId",summaryField:"summary",statusField:"status",baseDefaultClass:"markAsUnreadListItem",checkBox:null,renderItem:function(){this.addClass(this.baseDefaultClass);var h=$('<div class="listItemImageContainer left">');var a=getFunctionAttribute("BANK_FEED_CATEGORY_ICONS");var l=null;var e=$("<img>");var c=this.itemData[this.categoryTypeIdField];if((a!=null)&&(a.iconImage!=null)){for(var f=0;f<a.iconImage.length;f++){var d=a.iconImage[f];if(d.categoryTypeId==c){l=d;break;}}}if(l==null){var g=$().getImagesFolder();e.attr({src:g+"bankfeed.png"});}else{e.attr({src:"data:image/"+l.iconImageType+";base64,"+$.encoder.encodeForURL(l.iconImage)});}h.append(e);var j=$("<div>",{"class":this.baseDefaultClass+"-outer"}).append(h);var b=$("<div>",{"class":this.baseDefaultClass+"-inner"});b.append(this.itemData[this.summaryField]);j.append(b);var k=$('<div class="checkBoxContainer right">');this.checkBox=new Bankingapp.ui.Checkbox(null);this.checkBox.bind("checkboxClick",$.proxy(this.toggleSelection,this));k.append(this.checkBox);j.append(k);j.appendTo(this);if(!this.active){this.addClass(this.inactiveClass);}},isSelected:function(){return this.checkBox.getValue();},toggleSelection:function(){this.checkBox.setValue(!this.checkBox.getValue());this.checkBox.updateClass();}});Class.ns("Bankingapp.ui");Bankingapp.ui.DynamicDetailsFactory=function(){var a=new Object();return{register:function(b,c){a[b]=c;},getDetailsComponent:function(c,e,d){var b=$.extend({},{detailsData:e},d);if(a.hasOwnProperty(c)){return new a[c](b);}else{throw new Error("There is no mapped Details component for type: "+c);}}};}();Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsComponent=Class.extend(Bankingapp.ui.Component,{baseClass:"detailsItem",displayDateFormatKey:"bankingapp_common_dateFormatPattern",naKey:"bankingapp_common_na",detailsData:null,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),style:c&&c.style?c.style:null};Bankingapp.ui.DetailsComponent.superclass.constructor.call(this,"<div>",b);},naValue:function(a){return a==null?resolve(this.naKey):a;}});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsAccountComponent=Class.extend(Bankingapp.ui.DetailsComponent,{baseClass:"accountdetails",friendlyNameContainer:null,defaultAccountContainer:null,editContainer:null,editButton:null,initComponent:function(){var b=resolve("bankingapp_component_account_accounttype",{accountType:this.detailsData.accountType,currency:this.detailsData.currency});this.append(new Bankingapp.ui.Account(this.detailsData,{accountType:b}));var a=$("<div>",{"class":"accountdetailscontainer"});this.append(a);a.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_accountinfo_accountamounts"),{"class":"detailstitle"}));var c=$("<div>",{"class":"groupContainer"});a.append(c);c.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_availablebalance"),"class":"inactive"},valueComponent:new Bankingapp.ui.Amount({currency:this.detailsData.currency,amount:this.detailsData.availableBalance,decorate:false})}));c.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_currentbalance"),"class":"inactive"},valueComponent:new Bankingapp.ui.Amount({currency:this.detailsData.currency,amount:this.detailsData.currentBalance,decorate:false})}));c.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_creditlimit"),"class":"inactive"},valueComponent:new Bankingapp.ui.Amount({currency:this.detailsData.currency,amount:this.detailsData.creditLimit,decorate:false})}));a.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_accountinfo_accountinformation"),{"class":"detailstitle"}));c=$("<div>",{"class":"groupContainer"});a.append(c);c.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_iban"),"class":"inactive"},valueText:this.naValue(this.detailsData.iban),valueConfig:{"class":""}}));c.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_blocked"),"class":"inactive"},valueText:resolve("bankingapp_common_"+this.detailsData.blocked),valueConfig:{"class":""}}));c.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_closed"),"class":"inactive"},valueText:resolve("bankingapp_common_"+this.detailsData.closed),valueConfig:{"class":""}}));this.editButton=new Bankingapp.ui.ComplexButton(resolve("demo_bankingapp_function_accountinfo_edit"),{id:"editbutton","class":"editbutton"});this.append(this.editButton);}});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsTransactionComponent=Class.extend(Bankingapp.ui.DetailsComponent,{baseClass:"transactiondetails",initComponent:function(){console.log(this.detailsData);this.append(new Bankingapp.ui.TransactionSummary({summaryData:{titleInfo:resolve("demo_bankingapp_function_accountinfo_selectedtransactiondetails"),upperTitle:this.naValue(this.detailsData.accountName),upperText:this.naValue(this.detailsData.accountType),amount:this.detailsData.originalCurrencyAmount,currency:this.detailsData.originalCurrency,lowerTitle:this.naValue(this.detailsData.partnerName),lowerText:this.naValue(this.detailsData.accountNumber)}}));var a=$("<div>",{"class":"groupContainer"});this.append(a);a.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_transactiontype"),"class":"inactive"},valueText:this.naValue(null),valueConfig:{"class":"transactiontype"}}));a.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_valuedate"),"class":"inactive"},valueText:this.naValue(this.formatDate(this.detailsData.valueDate,resolve(this.displayDateFormatKey))),valueConfig:{"class":"date"}}));a.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_transactiondate"),"class":"inactive"},valueText:this.naValue(this.formatDate(this.detailsData.transactionDate,resolve(this.displayDateFormatKey))),valueConfig:{"class":"date"}}));a.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_narrative"),"class":"inactive"},valueText:this.naValue(null),valueConfig:{"class":"narrative"}}));a.append(new Bankingapp.ui.LabeledComponent({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_runningbalance"),"class":"inactive"},valueComponent:new Bankingapp.ui.Amount({currency:this.detailsData.currency,amount:this.detailsData.runningBalance,decorate:true})}));a.append(new Bankingapp.ui.OutputField({labelConfig:{value:resolve("demo_bankingapp_function_accountinfo_category"),"class":"inactive"},valueText:this.naValue(this.detailsData.categoryId),valueConfig:{"class":"category"}}));},formatDate:function(c,b){var a=$().dateParserWithoutTime(c);return a!=null&&a instanceof Date?a.dateFormat(b):null;}});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsResultComponent=Class.extend(Bankingapp.ui.DetailsComponent,{baseClass:"result",successClass:"success",fields:{status:"status",message:"message",title:"title",details:"details",label:"label",value:"value",timestamp:"timestamp",id:"id"},initComponent:function(){var q=this.detailsData[this.fields.message];var j=this.detailsData[this.fields.title];var a=this.detailsData[this.fields.details];var g=this.detailsData[this.fields.timestamp];var b=this.detailsData[this.fields.id];var c=this.detailsData[this.fields.status];var o=$("<table>",{"class":this.baseClass});if(c==="successful"){o.addClass(this.successClass);}var p=o.appendRow().addClass("result-top");var n=p.appendCell().addClass("left");n=p.appendCell().addClass("center");n=p.appendCell().addClass("right");p=o.appendRow().addClass("result-middle");n=p.appendCell().addClass("left");n=p.appendCell().addClass("center");var m=$("<div>");n.append(m);if(q){var l=$("<div>",{"class":"message-outer"});l.append($("<div>",{"class":"message-image"}));l.append(new Bankingapp.ui.Label(q,{"class":"message"}));m.append(l);}if(j){for(var d=0;d<j.length;d++){var e=new Bankingapp.ui.Label(j[d],{"class":"title"});e.addClass(d==0?" first":(d+1==j.length?" last":""));m.append(e);}}if(a){var f;for(var d=0;d<a.length;d++){f=a[d];var h=f[this.fields.label];var k=f[this.fields.value];detailField=new Bankingapp.ui.LabeledComponent({labelConfig:{value:h,"class":"inactive"},valueComponent:(typeof k=="object"?k:new Bankingapp.ui.Label(this.naValue(k),{"class":"value"})),containerConfig:{"class":"details"}});detailField.addClass(d==0?" first":(d+1==a.length?" last":""));m.append(detailField);}}if(g||b){m.append(new Bankingapp.ui.OutputField({labelConfig:{value:this.naValue(this.formatDate(g,resolve(this.displayDateFormatKey))),"class":"timestamp"},valueText:this.naValue(b),valueConfig:{"class":"id"},containerConfig:{"class":"footer"}}));}n=p.appendCell().addClass("right");p=o.appendRow().addClass("result-bottom");n=p.appendCell().addClass("left");n=p.appendCell().addClass("center");n=p.appendCell().addClass("right");this.append(o);},formatDate:function(c,b){var a=$().dateParserWithoutTime(c);return a!=null&&a instanceof Date?a.dateFormat(b):null;}});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsAccountCA=Class.extend(Bankingapp.ui.DetailsAccountComponent,{});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsAccountSA=Class.extend(Bankingapp.ui.DetailsAccountComponent,{});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsTransactionEXPENSE=Class.extend(Bankingapp.ui.DetailsTransactionComponent,{});Class.ns("Bankingapp.ui");Bankingapp.ui.DetailsTransactionINCOME=Class.extend(Bankingapp.ui.DetailsTransactionComponent,{});Class.ns("Bankingapp.ui");Bankingapp.ui.TransactionSummary=Class.extend(Bankingapp.ui.Component,{baseClass:"transactionsummary",baseElement:"<div>",titleInfoClass:"text titleInfo",titleClass:"title",textClass:"text",amountClass:"amountArrow",positiveClass:"positive",negativeClass:"negative",summaryData:null,header:null,footer:null,headerClass:"header",footerClass:"footer",fields:{titleInfo:"titleInfo",upperTitle:"upperTitle",upperText:["upperText"],amount:"amount",currency:"currency",lowerTitle:"lowerTitle",lowerText:["lowerText"]},constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):"")};Bankingapp.ui.TransactionSummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var a=$("<span>",{"class":"headercontainer"});if(this.header){a.append(this.header.addClass(this.baseClass+"-"+this.headerClass));}this.append(a);var b=this.summaryData[this.fields.titleInfo];if(b){this.append($("<span>",{"class":this.titleInfoClass}).append(b));}var j=this.summaryData[this.fields.upperTitle];if(j){this.append($("<span>",{"class":this.titleClass}).append(j));}for(var d=0;d<this.fields.upperText.length;d++){var h=this.summaryData[this.fields.upperText[d]];if(h){this.append($("<span>",{"class":this.textClass}).append(h));}}var e=this.summaryData[this.fields.amount];var g=this.summaryData[this.fields.currency];if(e!==undefined){var f=e<0?this.negativeClass:this.positiveClass;e=Math.abs(e);this.append($("<span>",{"class":this.amountClass+" upper "+f}));this.append(new Bankingapp.ui.Amount({currency:g,amount:e,decorate:false,baseClass:this.amountClass+" "+this.titleClass+" "+f}));this.append($("<span>",{"class":this.amountClass+" lower "+f}));}var c=this.summaryData[this.fields.lowerTitle];if(c){this.append($("<span>",{"class":"label "+this.titleClass}).append(c));}for(var d=0;d<this.fields.lowerText.length;d++){var h=this.summaryData[this.fields.lowerText[d]];if(h){this.append($("<span>",{"class":"label "+this.textClass}).append(h));}}if(this.footer){this.append(this.footer.addClass(this.baseClass+"-"+this.footerClass));}}});Class.ns("Bankingapp.ui");Bankingapp.ui.SignBlock=Class.extend(Bankingapp.ui.Component,{baseClass:"signBlock",signPasswordResourceKey:"bankingapp_component_signblock_signpassword",tokenResourceKey:"bankingapp_component_signblock_token",requestTokenButtonResourceKey:"bankingapp_component_signblock_requesttokenbutton",tokenSubmitResourceKey:"bankingapp_component_signblock_submit",submitButtonResourceKey:"bankingapp_component_signblock_submit",SIGNMODE_PASSWORD:"PASSWORD",SIGNMODE_TOKEN:"TOKEN",challenge:null,signMode:null,form:null,inputField:null,constructor:function(d){var b=this.applyConfig(d);var a={id:b&&b.id?b.id:this.id,"class":this.baseClass+(b&&b["class"]?(" "+b["class"]):"")};if((this.signMode==undefined)||(this.signMode==null)){var c=getApplicationOption("IS_TOKEN_ACTIVATED");if((c!=undefined)&&(c!=null)&&c.valueOf()){this.signMode=this.SIGNMODE_TOKEN;}else{this.signMode=this.SIGNMODE_PASSWORD;}}Bankingapp.ui.SignBlock.superclass.constructor.call(this,"<div>",a);this.render();},render:function(){this.form=new Bankingapp.ui.Form({id:"signForm"});this.append(this.form);if((this.signMode!=undefined)&&(this.signMode!=null)){if(this.signMode==this.SIGNMODE_TOKEN){this.renderSubmitButton(this.requestTokenButtonResourceKey,$.proxy(this.requestTokenButtonClickHandler,this));}else{if(this.signMode==this.SIGNMODE_PASSWORD){this.renderInputField(this.signPasswordResourceKey);this.renderSubmitButton(this.submitButtonResourceKey,$.proxy(this.submitHandler,this));}}}else{this.renderSubmitButton(this.submitButtonResourceKey,$.proxy(this.submitHandler,this));}},renderInputField:function(b,d){var c=$("<div>",{"class":"groupcontainer"});var a={type:"password",validation:{required:true},"class":this.baseInputClass};$.extend(a,d);this.inputField=new Bankingapp.ui.InputField(resolve(b),a);c.append(this.inputField);this.form.append(c);},renderSubmitButton:function(a,b){this.submitButton=new Bankingapp.ui.SubmitButton(resolve(a));this.form.append(this.submitButton);this.form.unbind("formSubmit");this.form.bind("formSubmit",b);},requestTokenButtonClickHandler:function(){this.submitButton.disable();Bankingapp.framework.Application.bind("onTokenReceived",$.proxy(this.onTokenReceived,this));requestToken(this.challenge);},onTokenReceived:function(b,a){this.submitButton.remove();this.renderInputField(this.tokenResourceKey,{disabled:true,value:a});this.renderSubmitButton(this.tokenSubmitResourceKey,$.proxy(this.submitHandler,this));},submitHandler:function(){this.trigger("formSubmitted");},getCredential:function(){var a=null;if((this.inputField!=undefined)&&(this.inputField!=null)){a=this.inputField.val();}return a;}});Class.ns("Bankingapp.ui");Bankingapp.ui.ProgressBar=Class.extend(Bankingapp.ui.Component,{baseClass:"progressbar",container:null,percent:null,linePercent:null,bar:null,level:null,color:null,baseElementClass:null,constructor:function(c,b,a){this.applyConfig(a);this.percent=Math.min(100,c);this.linePercent=Math.min(100,b);this.container=$.encoder.encodeForHTMLAttribute("class",this.baseClass,true);Bankingapp.ui.ProgressBar.superclass.constructor.call(this,"<div>",{"class":this.container});},initComponent:function(){this.render();this.animateProgressBar();},render:function(){if(this.linePercent!=0){$("<div>").addClass("markline").css("margin","0 "+this.linePercent+"%").appendTo(this);}var b=$("<div>").addClass("base").appendTo(this);if(this.linePercent>this.percent){var a=$("<div>").addClass("missingbar").width(this.linePercent+"%").appendTo(b);this.bar=$("<div>").addClass("bar barnew").appendTo(a);}else{this.bar=$("<div>").addClass("bar barnew").appendTo(b);}if(this.baseElementClass){b.addClass(this.baseElementClass);}if(this.level){this.bar.addClass(this.level);}else{if(this.color){this.bar.css("background-color",this.color);}}},animateProgressBar:function(){if(this.linePercent>this.percent){this.bar.width((this.percent/this.linePercent*100)+"%");}else{this.bar.width(Math.min(this.percent,100)+"%");}},setPercent:function(a){this.percent=a;}});Class.ns("Bankingapp.ui");Bankingapp.ui.BudgetListItem=Class.extend(Bankingapp.ui.ListItem,{baseDefaultClass:"budgetlistitem",warningLevel:null,alertLevel:null,linePercent:null,currency:null,imagesFolder:null,categoryIdField:"categoryId",descriptionField:"description",parentIdField:"parentId",budgetField:"budget",spentField:"spent",currencyField:"currency",imageField:"contentImage",level:null,hideZeroBudget:true,pfmCategoryMap:null,renderItem:function(){this.addClass(this.baseDefaultClass);var d=$("<div>",{"class":this.baseDefaultClass+"-outer"});var p=$("<div>",{"class":this.baseDefaultClass+"-inner"});var j=$("<div>",{"class":this.baseDefaultClass+"-content"});var f=$("<div>",{"class":this.baseDefaultClass+"-progress"});var l=this.pfmCategoryMap[this.itemData[this.categoryIdField]];var h=l[this.descriptionField];if(l[this.parentIdField]<10){var r=$('<div class="listItemImageContainer">');var i=$("<img>");i.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(l[this.imageField])});r.append(i);r.addClass("categoryicon pfmimage");j.append(r);}var c=this.itemData[this.budgetField]-this.itemData[this.spentField]||0;var g=(typeof this.itemData[this.budgetField]=="number")&&(this.itemData[this.budgetField]>0);var a=typeof this.itemData[this.spentField]=="number"&&g?(100*this.itemData[this.spentField]/this.itemData[this.budgetField]):0;var n=(c<0);var k=this.linePercent;if(a>=this.alertLevel){this.level="level3";}else{if(a>=this.warningLevel){this.level="level2";}else{this.level="level1";}}var q=new Bankingapp.ui.Amount({currency:(this.itemData[this.currencyField]||this.currency),amount:c,"class":"listitemtitle remainingamount "+this.level});var m=$("<div>",{"class":"budgetovertext "+this.level+(n?" over":" notover")}).append($.encoder.encodeForHTML(n?resolve("bankingapp_function_pfmbudget_over"):resolve("bankingapp_function_pfmbudget_left")));j.append($("<div>",{"class":"listitemtitle percent"}).append($.encoder.encodeForHTML(parseInt(a+0.5)+"%")));j.append($("<div>",{"class":"listitemtitle categoryname"}).append($.encoder.encodeForHTML(h)));if(g){j.append(q);}var o=$("<table>");var e=o.appendRow();var b=e.appendCell().addClass("progressbarcell");b.append(new Bankingapp.ui.ProgressBar(a,k,{level:this.level}));b=e.appendCell().addClass("budgetovercell");if(g){b.append(m);}f.append(o);p.append(j);p.append(f);d.append(p);d.appendTo(this);if(!this.active||(this.hideZeroBudget&&!g)){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.BudgetSummary=Class.extend(Bankingapp.ui.Component,{baseClass:"budgetsummary",baseElement:"<div>",budget:null,categoryId:null,currency:null,spent:null,warningLevel:null,alertLevel:null,linePercent:null,level:null,imagesFolder:null,pfmCategoryMap:null,imageField:"summaryImage",descriptionField:"description",parentIdField:"parentId",incomeField:"income",constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.BudgetSummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var e=$("<div>",{"class":this.baseClass+"-outer"});var q=$("<div>",{"class":this.baseClass+"-inner"});var k=$("<div>",{"class":this.baseClass+"-content"});var g=$("<div>",{"class":this.baseClass+"-progress"});var c=$("<div>",{"class":this.baseClass+"-detail"});var m=this.pfmCategoryMap[this.categoryId];var i=m[this.descriptionField];if(m&&m[this.parentIdField]){var s=$('<div class="imageContainer">');var j=$("<img>");j.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(m[this.imageField])});s.append(j);s.addClass("categoryicon pfmimage");k.append(s);}else{if(m){k.addClass("imageContainer expense");}else{k.addClass("imageContainer summary");}}var d=this.budget-this.spent;var a=(100*this.spent/this.budget)||0;var o=d<0;var l=this.linePercent;if(a>=this.alertLevel){this.level="level3";}else{if(a>=this.warningLevel){this.level="level2";}else{this.level="level1";}}var r=new Bankingapp.ui.Amount({currency:this.currency,amount:d,"class":"title remainingamount "+this.level});var n=$("<div>",{"class":"budgetovertext "+this.level+(o?" over":" notover")}).append($.encoder.encodeForHTML(o?resolve("bankingapp_function_pfmbudget_over"):resolve("bankingapp_function_pfmbudget_left")));k.append($("<div>",{"class":"title categoryname"}).append($.encoder.encodeForHTML(i)));k.append(r);var p=$("<table>");var f=p.appendRow();var b=f.appendCell().addClass("progressbarcell");b.append(new Bankingapp.ui.ProgressBar(a,l,{level:this.level}));b=f.appendCell().addClass("budgetovercell");b.append(n);g.append(p);c.append($("<div>",{"class":"title percent"}).append($.encoder.encodeForHTML(parseInt(a+0.5)+"%")));var h=$("<div>",{"class":"title spentandtotal"});h.append(new Bankingapp.ui.Amount({currency:this.currency,amount:this.spent,"class":"title spent "}));h.append($("<div>",{"class":"title separator"}).append(resolve("bankingapp_function_pfmbudget_spentandtotalseparator")));h.append(new Bankingapp.ui.Amount({currency:this.currency,amount:this.budget,"class":"title total "}));c.append(h);q.append(k);q.append(g);q.append(c);e.append(q);e.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.BaseAnalysisListItem=Class.extend(Bankingapp.ui.ListItem,{baseDefaultClass:"",totalAmount:null,date:null,categories:null,currency:null,imagesFolder:null,category:null,parentCategory:null,dataField:"data",amountField:"y",dateField:"date",analysisCategoryIdField:"id",colorField:"color",categoryIdField:"categoryId",parentIdField:"parentId",incomeField:"income",descriptionField:"description",imageField:"contentImage",pfmCategoryMap:null});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisTypeLevelCategoryListItem=Class.extend(Bankingapp.ui.BaseAnalysisListItem,{baseDefaultClass:"analysistypelevelcategorylistitem",renderItem:function(){this.addClass(this.baseDefaultClass);var f=$("<div>",{"class":this.baseDefaultClass+"-outer"});var e=$("<div>",{"class":this.baseDefaultClass+"-inner"});var d=$("<div>",{"class":this.baseDefaultClass+"-content"});this.category=this.pfmCategoryMap[this.itemData[this.analysisCategoryIdField]];f.addClass("category_"+this.category[this.categoryIdField]);var h=this.category[this.descriptionField];var c=null;var g=this.itemData[this.dataField];for(var b=0;b<g.length;b++){if(g[b][this.dateField]==this.date){c=g[b][this.amountField]||0;break;}}if(!this.category[this.incomeField]&&c>0){c=-c;}var a=new Bankingapp.ui.Amount({currency:this.currency,amount:c,"class":"listitemtitle",decorate:true});d.append($("<div>",{"class":"listitemtitle categoryname"}).append($.encoder.encodeForHTML(h)));d.append(a);e.append(d);f.append(e);f.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisCategoryListItem=Class.extend(Bankingapp.ui.BaseAnalysisListItem,{baseDefaultClass:"analysiscategorylistitem",renderItem:function(){this.addClass(this.baseDefaultClass);var n=$("<div>",{"class":this.baseDefaultClass+"-outer"});var a=$("<div>",{"class":this.baseDefaultClass+"-inner"});var b=$("<div>",{"class":this.baseDefaultClass+"-content"});var q=$("<div>",{"class":this.baseDefaultClass+"-progress"});this.category=this.pfmCategoryMap[this.itemData[this.analysisCategoryIdField]];var d=this.category[this.descriptionField];if(this.category&&this.category[this.parentIdField]){this.parentCategory=this.pfmCategoryMap[this.category[this.parentIdField]];var k=this.category[this.imageField];if(!k){k=this.parentCategory[this.imageField];}var l=$('<div class="listItemImageContainer">');var c=$("<img>");c.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(k)});l.append(c);l.addClass("categoryicon pfmimage");b.append(l);}var h=null;var f=this.itemData[this.dataField];for(var e=0;e<f.length;e++){if(f[e][this.dateField]==this.date){h=f[e][this.amountField]||0;break;}}var j=(100*h/this.totalAmount)||0;if(!this.category[this.incomeField]&&h>0){h=-h;}var g=new Bankingapp.ui.Amount({currency:this.currency,amount:h,"class":"listitemtitle",decorate:true});b.append($("<div>",{"class":"listitemtitle percent"}).append($.encoder.encodeForHTML(parseInt(j+0.5)+"%")));b.append($("<div>",{"class":"listitemtitle categoryname"}).append($.encoder.encodeForHTML(d)));b.append(g);var o=$("<table>");var p=o.appendRow();var m=p.appendCell().addClass("progressbarcell");m.append(new Bankingapp.ui.ProgressBar(j,0,{color:(this.itemData[this.colorField]||this.category[this.colorField]||(this.parentCategory?this.parentCategory[this.colorField]:null))}));q.append(o);a.append(b);a.append(q);n.append(a);n.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisTypeLevelPeriodListItem=Class.extend(Bankingapp.ui.BaseAnalysisListItem,{baseDefaultClass:"analysisperiodlistitem",chartData:null,categoryId:null,dataField:"data",renderItem:function(){this.addClass(this.baseDefaultClass+" typelevel");var l=$("<div>",{"class":this.baseDefaultClass+"-outer"});var b=$("<div>",{"class":this.baseDefaultClass+"-inner"});var c=$("<div>",{"class":this.baseDefaultClass+"-content"});var k=this.itemData;c.append($("<div>",{"class":"listitemtitle period"}).append($.encoder.encodeForHTML(k)));var a=$("<div>",{"class":"listitemtitle amountcontainer"});c.append(a);for(var e=0;e<this.chartData.length;e++){var g=null;this.category=this.selectCategory(this.categories,this.chartData[e][this.analysisCategoryIdField],this.categoryIdField);for(var d=0;d<this.chartData[e][this.dataField].length;d++){if(k==this.chartData[e][this.dataField][d][this.dateField]){g=this.chartData[e][this.dataField][d][this.amountField];break;}}if(!this.category[this.incomeField]&&g>0){g=-g;}else{if(g==null||g==undefined){g=0;}}var h;if(this.category[this.incomeField]){h="positive";}else{h="negative";}var f=new Bankingapp.ui.Amount({currency:this.currency,amount:g,"class":"listitemtitle",decorate:true,zeroClass:h});a.append(f);}b.append(c);l.append(b);l.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisPeriodListItem=Class.extend(Bankingapp.ui.BaseAnalysisListItem,{baseDefaultClass:"analysisperiodlistitem",categoryId:null,renderItem:function(){this.addClass(this.baseDefaultClass);var f=$("<div>",{"class":this.baseDefaultClass+"-outer"});var e=$("<div>",{"class":this.baseDefaultClass+"-inner"});var d=$("<div>",{"class":this.baseDefaultClass+"-content"});this.category=this.selectCategory(this.categories,this.categoryId,this.categoryIdField);var g=this.itemData[this.dateField];var c=this.itemData[this.amountField];if(!this.category[this.incomeField]&&c>0){c=-c;}var a=new Bankingapp.ui.Amount({currency:this.currency,amount:c,"class":"listitemtitle",decorate:true});d.append($("<div>",{"class":"listitemtitle period"}).append($.encoder.encodeForHTML(g)));var b=$("<div>",{"class":"listitemtitle amountcontainer"});d.append(b);b.append(a);e.append(d);f.append(e);f.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisCategoryList=Class.extend(Bankingapp.ui.List,{date:null,dropZeroAmount:true,dataField:"data",amountField:"y",dateField:"date",initComponent:function(){if(this.dropZeroAmount){this.dropZeroAmount();}this.appendItems();},dropZeroAmount:function(){var a=[];var e=null;var d=null;for(var c=0;c<this.listData.length;c++){e=this.listData[c][this.dataField];for(var b=0;b<e.length;b++){if(e[b][this.dateField]==this.date){d=e[b][this.amountField];break;}}if(d!=null&&d!=0){a.push(this.listData[c]);}}this.listData=a;}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisPeriodList=Class.extend(Bankingapp.ui.List,{dropZeroAmount:true,amountField:"y",chartDataField:"chartData",dataField:"data",dateField:"date",initComponent:function(){if(this.dropZeroAmount){this.dropZeroAmount();}this.appendItems();},dropZeroAmount:function(){var a=[];var e=0;var f=null;if(this.listData&&this.listData.length>0&&typeof this.listData[0]=="object"){for(var e=0;e<this.listData.length;e++){f=this.listData[e];if(f[this.amountField]!=null&&f[this.amountField]!=0){a.push(this.listData[e]);}}this.listData=a;}else{if(this.listData&&this.listData.length>0&&typeof this.listData[0]=="string"&&this.itemConfig[this.chartDataField]){for(var e=0;e<this.listData.length;e++){var d=false;f=this.listData[e];for(var c=0;c<this.itemConfig[this.chartDataField].length;c++){if(d){break;}chartData=this.itemConfig[this.chartDataField][c];for(var b=0;b<chartData[this.dataField].length;b++){if(chartData[this.dataField][b][this.dateField]==f){if(chartData[this.dataField][b][this.amountField]>0){d=true;}break;}}}if(d){a.push(this.listData[e]);}}this.listData=a;}}}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisCategorySummary=Class.extend(Bankingapp.ui.Component,{baseClass:"analysissummary",baseElement:"<div>",itemData:null,date:null,currency:null,categories:null,category:null,parentCategory:null,dataField:"data",amountField:"y",dateField:"date",analysisCategoryIdField:"id",categoryIdField:"categoryId",parentIdField:"parentId",incomeField:"income",descriptionField:"description",imagesFolder:null,pfmCategoryMap:null,imageField:"summaryImage",constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.AnalysisCategorySummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var n=$("<div>",{"class":this.baseClass+"-outer"});var a=$("<div>",{"class":this.baseClass+"-inner"});var b=$("<div>",{"class":this.baseClass+"-content"});var l=$("<div>",{"class":this.baseClass+"-detail"});if(this.itemData&&!$.isArray(this.itemData)&&this.pfmCategoryMap){this.category=this.pfmCategoryMap[this.itemData[this.analysisCategoryIdField]];if(this.category&&this.category[this.parentIdField]){this.parentCategory=this.pfmCategoryMap[this.category[this.parentIdField]];}}else{this.category=null;this.parentCategory=null;}var d=this.category?this.category[this.descriptionField]:resolve("bankingapp_function_pfmbudget_summary");var p=this.parentCategory?this.parentCategory[this.descriptionField]:null;if(this.category&&this.category[this.parentIdField]){var k=$('<div class="imageContainer">');var c=$("<img>");c.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(this.category[this.imageField])});k.append(c);k.addClass("categoryicon pfmimage");b.append(k);}else{n.addClass("imageContainer");if(this.category&&this.category[this.incomeField]){n.addClass("income");}else{if(this.category){n.addClass("expense");}else{n.addClass("summary");}}}var h=null;if($.isArray(this.itemData)){h=0;for(var e=0;e<this.itemData.length;e++){var g=this.itemData[e][this.dataField];for(var f=0;f<g.length;f++){if(g[f][this.dateField]==this.date){currentAmount=g[f][this.amountField]||0;break;}}var o=null;for(var f=0;f<this.categories.length;f++){if(this.categories[f][this.categoryIdField]==this.itemData[e][this.analysisCategoryIdField]){o=this.categories[f];break;}}if(!o[this.incomeField]&&currentAmount>0){currentAmount=-currentAmount;}h=h+currentAmount;}}else{var g=this.itemData[this.dataField];for(var f=0;f<g.length;f++){if(g[f][this.dateField]==this.date){h=g[f][this.amountField]||0;break;}}if(!this.category[this.incomeField]&&h>0){h=-h;}}var m=new Bankingapp.ui.Amount({currency:this.currency,amount:h,"class":"title"});l.append($("<div>",{"class":"title categoryname"}).append($.encoder.encodeForHTML(d)));if(p){l.append($("<div>",{"class":"title parentcategoryname"}).append($.encoder.encodeForHTML(p)));}b.append(l);b.append(m);a.append(b);n.append(a);n.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisPeriodSummary=Class.extend(Bankingapp.ui.Component,{baseClass:"analysisperiodsummary",baseElement:"<div>",itemData:null,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.AnalysisPeriodSummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var d=$("<div>",{"class":this.baseClass+"-outer"});var c=$("<div>",{"class":this.baseClass+"-inner"});var b=$("<div>",{"class":this.baseClass+"-content"});var e="";if(this.itemData&&$.isArray(this.itemData)){var f=resolve("bankingapp_function_pfmanalysis_typeseparator");for(var a=0;a<this.itemData.length;a++){e=e+this.itemData[a]+(a==this.itemData.length-1?"":f);}}else{if(this.itemData){e=this.itemData;}}b.append($("<div>",{"class":"title categoryname"}).append($.encoder.encodeForHTML(e)));c.append(b);d.append(c);d.appendTo(this);}});Class.ns("Bankingapp.ui");Bankingapp.ui.PeriodSelector=Class.extend(Bankingapp.ui.Component,{baseClass:"periodselector",baseElement:"<div>",periodList:null,lowerButton:null,higherButton:null,periodButton:null,selectedPeriodIndex:0,dropEmptyPeriods:true,amountField:"y",dateField:"date",constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.PeriodSelector.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var e=$("<div>",{"class":this.baseClass+"-outer"});var d=$("<div>",{"class":this.baseClass+"-inner"});var c=$("<div>",{"class":this.baseClass+"-content"});if(this.periodList&&$.isArray(this.periodList)&&this.periodList.length>0){if(typeof this.periodList[0]=="object"){this.createList(this.periodList);}}else{return;}this.setSelectedPeriodIndex(this.selectedPeriodIndex);this.lowerButton=new Bankingapp.ui.Button({id:"lowerButton",value:"","class":"lowerButton"});this.higherButton=new Bankingapp.ui.Button({id:"higherButton",value:"","class":"higherButton"});this.periodButton=new Bankingapp.ui.Button({id:"periodButton",value:this.periodList[this.getSelectedPeriodIndex()],"class":"periodButton"});this.lowerButton.bind("buttonClick",$.proxy(this.lowerClickHandler,this));this.higherButton.bind("buttonClick",$.proxy(this.higherClickHandler,this));this.periodButton.bind("buttonClick",$.proxy(this.periodClickHandler,this));this.updateButtons();var a=$("<div>",{"class":"buttonContainer lowerContainer"});var f=$("<div>",{"class":"buttonContainer higherContainer"});var b=$("<div>",{"class":"buttonContainer periodContainer"});a.append(this.lowerButton);b.append(this.periodButton);f.append(this.higherButton);c.append(a);c.append(b);c.append(f);d.append(c);e.append(d);e.appendTo(this);},createList:function(c){var b=[];for(var a=0;a<c.length;a++){if(!this.dropEmptyPeriods||(c[a][this.amountField]!=null&&c[a][this.amountField]!=0)){b.push(c[a][this.dateField]);}}this.periodList=b;},setSelectedPeriodIndex:function(a){if(a<0){this.selectedPeriodIndex=0;}else{if(a>this.periodList.length-1){this.selectedPeriodIndex=this.periodList.length-1;}else{this.selectedPeriodIndex=a;}}if(this.periodButton){this.updateButtons();}},getSelectedPeriodIndex:function(){return this.selectedPeriodIndex;},getSelectedPeriod:function(){return this.periodList[this.getSelectedPeriodIndex()];},hasLowerPeriod:function(){return this.getSelectedPeriodIndex()<1?false:true;},hasHigherPeriod:function(){return this.getSelectedPeriodIndex()<this.periodList.length-1?true:false;},lowerClickHandler:function(a){this.setSelectedPeriodIndex(this.getSelectedPeriodIndex()-1);this.trigger("periodChanged",a.data);},higherClickHandler:function(a){this.setSelectedPeriodIndex(this.getSelectedPeriodIndex()+1);this.trigger("periodChanged",a.data);},periodClickHandler:function(a){this.trigger("periodClicked",a.data);},updateButtons:function(){this.updateLowerButton();this.updatePeriodButton();this.updateHigherButton();},updateLowerButton:function(){if(this.hasLowerPeriod()){this.lowerButton.enable();}else{this.lowerButton.disable();}},updateHigherButton:function(){if(this.hasHigherPeriod()){this.higherButton.enable();}else{this.higherButton.disable();}},updatePeriodButton:function(){this.periodButton.setValue(this.periodList[this.getSelectedPeriodIndex()]);}});Class.ns("Bankingapp.ui");Bankingapp.ui.BaseChartComponent=Class.extend(Bankingapp.ui.Component,{baseClass:"chartarea",chartTypeClass:"barchart",baseElement:"<div>",id:"chartarea",chartContainerId:"chartcontainer",chartContainer:null,chartDetailsContainer:null,chartDetailsTable:null,amountField:"y",idField:"id",nameField:"name",colorField:"color",dataField:"data",dateField:"date",drilldownField:"drilldown",categoryIdField:"categoryId",parentField:"parentId",incomeField:"income",isIncome:null,chart:null,deviceDpi:null,deviceOs:null,chartData:null,CATEGORY_ID_STACK_DEPTH:null,currency:null,categories:null,siblingComponentHeight:0,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.BaseChartComponent.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){},setIsIncome:function(b){if(this.categories==null){return;}var a=(this.CATEGORY_ID_STACK_DEPTH==0?this.chartData[this.drilldownField][b][this.idField]:this.chartData[this.idField]);for(var c=0;c<this.categories.length;c++){if(this.categories[c][this.categoryIdField]==a){this.isIncome=this.categories[c][this.incomeField];}}},setColorForData:function(){var b=this.chartData[this.colorField];var a=this.chartData[this.drilldownField];var e=a.length;for(var c=0;c<a.length;c++){var d=0+(c/e)/2;a[c][this.colorField]=Highcharts.Color(b).brighten(d).get();}this.chartData[this.drilldownField]=a;},isPortrait:function(){return($(window).height()>$(window).width());},});Class.ns("Bankingapp.ui");Bankingapp.ui.BaseBarChartComponent=Class.extend(Bankingapp.ui.BaseChartComponent,{chartOptions:null,groupPaddingValue:0,tickInterval:1000,render:function(){$("<div>",{"class":"chartColumnWidth"}).appendTo(this);this.chartContainer=$("<div>",{id:this.chartContainerId,"class":"chartcontainer "+this.chartTypeClass});this.chartDetailsContainer=$("<div>",{id:"chartDetailsContainer","class":"chartdetailscontainer "+this.chartTypeClass});this.chartDetailsTable=$("<table>",{"class":"chartDetailsTable"});this.chartContainer.appendTo(this);this.chartDetailsContainer.append(this.chartDetailsTable);this.chartDetailsContainer.appendTo(this);this.createChartData();this.fillChartDetailsTable();if(this.isPortrait()){this.addClass("hidden");}$(window).resize($.proxy(this.onOrientationChange,this));},chartSeriesClickHandler:function(a){this.trigger("seriesClicked",a);},resizeChartContainerWidth:function(b){var c=$(".chartColumnWidth").width();var a=b*c;this.chartContainer.width(a);this.chartDetailsContainer.width(a);},resizeChartContainerHeight:function(c){this.css("padding-top",c);if(this.deviceDpi==null){this.deviceDpi=$().getResolution();}if(this.deviceOs==null){this.deviceOs=getDeviceInformation().os.toLowerCase();}var e=$(window).height();if(this.deviceOs=="ios"&&this.deviceDpi=="xhdpi"){e*=2;}this.height(e-c);var a=this.height();var d=this.chartDetailsContainer.height();var b=a-d;this.chartContainer.height(b);},createChartData:function(){},fillChartDetailsTable:function(){},onOrientationChange:function(){var a=this.isPortrait();if(!a){this.removeClass("hidden");this.resizeChartContainerHeight(this.siblingComponentHeight);this.updateChart();}else{this.addClass("hidden");}},});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisPieChart=Class.extend(Bankingapp.ui.BaseChartComponent,{chartTypeClass:"piechart",tableFooterTitleKey:"bankingapp_function_pfmanalysis_total",typeLevelTableFooterTitleKey:"bankingapp_function_pfmanalysis_balance",balance:null,date:null,typeName:null,render:function(){this.chartContainer=$("<div>",{id:this.chartContainerId,"class":"chartcontainer "+this.chartTypeClass});this.chartDetailsContainer=$("<div>",{id:"chartDetailsContainer","class":"chartdetailscontainer centerbox "+this.chartTypeClass});this.chartContainer.appendTo(this);this.chartDetailsContainer.appendTo(this);this.chartDetailsTable=$("<table>",{"class":"chartDetailsTable",cellspacing:"0",cellpadding:"0"});this.chartDetailsContainer.append(this.chartDetailsTable);this.fillChartDetailsTable();if(this.isPortrait()){this.addClass("hidden");}$(window).resize($.proxy(this.onOrientationChange,this));},fillChartDetailsTable:function(){var w=new Bankingapp.ui.Label(this.CATEGORY_ID_STACK_DEPTH==null||this.CATEGORY_ID_STACK_DEPTH==0?resolve("bankingapp_function_budget_summary"):this.chartData[this.nameField],{"class":"nametitle listitemtitle"});var t=null;if(this.CATEGORY_ID_STACK_DEPTH==2&&this.typeName){t=new Bankingapp.ui.Label(this.typeName,{"class":"listitemtitle parenttitle"});w.addClass("hasparentname");}var l=new Bankingapp.ui.Label(resolve(this.CATEGORY_ID_STACK_DEPTH==null||this.CATEGORY_ID_STACK_DEPTH==0?this.typeLevelTableFooterTitleKey:this.tableFooterTitleKey),{"class":"totalTitle"});this.chartDetailsTable.empty();var u=this.chartDetailsTable;u.hide();if(w!=null){var q=u.appendRow();w=$("<div>",{"class":"title"}).append(w);q.append($("<td>",{id:"tableTitle",colspan:"4"}).append(w));if(t!=null){q=u.appendRow();t=$("<div>",{"class":"title parenttitle"}).append(t);q.append($("<td>",{id:"tableTitle",colspan:"4"}).append(t));}var c=u.appendRow();var f=$("<div>",{"class":"diver"});c.append($("<td>",{colspan:"4"}).append(f));}if(this.CATEGORY_ID_STACK_DEPTH==2){this.setColorForData();}summary=0;for(var s=0;s<this.chartData[this.drilldownField].length;s++){var k=this.chartData[this.drilldownField][s];var v=null;this.chartData[this.drilldownField][s][this.amountField]=0;for(var r=0;r<k[this.dataField].length;r++){if(k[this.dataField][r][this.dateField]==this.date){v=k[this.dataField][r][this.amountField];this.chartData[this.drilldownField][s][this.amountField]=k[this.dataField][r][this.amountField];break;}}if(v>0){var m=u.appendRow();var o=$("<div>",{"class":"squarecolor",}).append("&nbsp;");o.css("background-color",k[this.colorField]);var a=m.appendCell();a.addClass("square");a.append(o);var h=$("<div>",{"class":"seriestitle"}).append(k[this.nameField]);a=m.appendCell();a.addClass("series");a.append(h);m.appendCell().append("&nbsp;");if(this.isIncome==null||this.CATEGORY_ID_STACK_DEPTH==0){this.setIsIncome(s);}if(!this.isIncome){v=-v;}var g=new Bankingapp.ui.Amount({currency:this.currency,amount:v,"class":"default-font listitemtitle remainingamount amountvalue amount",decorate:true});a=m.appendCell();a.addClass("amountcell");a.append(g);summary+=v;}}var b=u.appendRow();var e=$("<div>",{"class":"diver"});b.append($("<td>",{colspan:"4"}).append(e));var n=u.appendRow();var p=$("<div>",{"class":"listitemtitle"}).append(l);n.append($("<td>",{"class":"totalTr",colspan:"2"}).append(p));var d=new Bankingapp.ui.Amount({currency:this.currency,amount:summary,"class":"listitemtitle amountvalue",decorate:true});n.append($("<td>",{"class":"totalTr",colspan:"2"}).append(d));this.chartDetailsTable=u;u.show();},createChart:function(){this.repositionChart(this.siblingComponentHeight);this.chart=new Highcharts.Chart({chart:{renderTo:this.chartContainerId,type:"pie",animation:{duration:800,easing:"swing"}},credits:{enabled:false},title:null,yAxis:{title:{text:""}},plotOptions:{pie:{shadow:false}},tooltip:{enabled:false},legend:{enabled:false},series:[{enableMouseTracking:false,data:this.chartData[this.drilldownField],size:"80%",innerSize:"40%",showInLegend:false,dataLabels:{enabled:false},animation:{duration:800,easing:"swing"}}]});},updateChart:function(){if(this.isPortrait()){return;}if(this.chart==null){this.createChart();return;}this.chart.series[0].remove();this.chart.addSeries({enableMouseTracking:false,data:this.chartData[this.drilldownField],size:"80%",innerSize:"40%",showInLegend:false,dataLabels:{enabled:false},animation:{duration:800,easing:"swing"}},true,true);},updateChartComponent:function(a){this.isIncome=null;this.applyConfig(a);this.fillChartDetailsTable();if(!this.isPortrait()){this.updateChart();}},repositionChart:function(a){this.css("padding-top",a);if(this.deviceDpi==null){this.deviceDpi=$().getResolution();}if(this.deviceOs==null){this.deviceOs=getDeviceInformation().os.toLowerCase();}var b=$(window).height();if(this.deviceOs=="ios"&&this.deviceDpi=="xhdpi"){b*=2;}this.height(b-a);this.chartContainer.css({top:a,left:0,height:b-a});},onOrientationChange:function(){var a=this.isPortrait();if(!a){this.removeClass("hidden");this.updateChart();}else{this.addClass("hidden");if(this.chart){this.chart.destroy();this.chart=null;}}}});Class.ns("Bankingapp.ui");Bankingapp.ui.AnalysisBarChart=Class.extend(Bankingapp.ui.BaseBarChartComponent,{stackField:"stack",incomeStack:"income",expenseStack:"expense",chartOptions:null,groupPaddingValue:0,tickInterval:1000,chartCategories:null,fillChartDetailsTable:function(){if(this.CATEGORY_ID_STACK_DEPTH==0){for(var g=0;g<this.chartData[this.drilldownField].length;g++){this.setIsIncome(g);this.chartData[this.drilldownField][g][this.stackField]=this.isIncome?this.incomeStack:this.expenseStack;}this.groupPaddingValue=0.1;}else{if(this.CATEGORY_ID_STACK_DEPTH==2){this.setColorForData();}}var a=this.CATEGORY_ID_STACK_DEPTH==0?this.chartData[this.drilldownField]:[this.chartData];var h=this.chartDetailsTable.appendRow();for(var g=0;g<a[0][this.dataField].length;g++){var e=$("<div>",{"class":"periodname"}).append(a[0][this.dataField][g][this.dateField]);h.appendCell().append(e);}for(var g=0;g<a.length;g++){var c=this.chartDetailsTable.appendRow();if(this.isIncome==null||this.CATEGORY_ID_STACK_DEPTH==0){this.setIsIncome(g);}for(var d=0;d<a[g][this.dataField].length;d++){var b=a[g][this.dataField][d][this.amountField];if(!this.isIncome){b=-b;}var f=new Bankingapp.ui.Amount({currency:this.currency,amount:b,"class":"chartamountlabeldiv",decorate:true});c.appendCell().append(f);}}},createChart:function(){this.resizeChartContainerWidth(this.chartData[this.drilldownField][0][this.dataField].length);this.resizeChartContainerHeight(this.siblingComponentHeight);var a=this;this.chartOptions={chart:{renderTo:this.chartContainerId,defaultSeriesType:"column",animation:{duration:2000},events:{load:$.proxy(this.onChartLoad,this)}},credits:{enabled:false},title:null,yAxis:{title:null,gridLineWidth:2,tickInterval:this.tickInterval,labels:"",},xAxis:{categories:this.chartCategories,tickLength:0,lineWidth:4,labels:{enabled:false,}},plotOptions:{column:{stacking:"normal",borderWidth:0,shadow:false,groupPadding:this.groupPaddingValue},series:{allowPointSelect:false,dataLabels:{enabled:false,},point:{events:{click:function(b){a.chartSeriesClickHandler.call(a,b,this);},mouseOver:function(b){},mouseOut:function(b){}}}}},tooltip:{enabled:false,},legend:{enabled:false},};this.chart=new Highcharts.Chart(this.chartOptions);},updateChart:function(){if(this.isPortrait()){return;}if(this.chart==null){this.createChart();}while(this.chart.series.length>0){this.chart.series[0].remove(false);}if(this.CATEGORY_ID_STACK_DEPTH==0){for(var a=0;a<this.chartData[this.drilldownField].length;a++){this.chart.addSeries(this.chartData[this.drilldownField][a],false,true);}}else{for(var a=this.chartData[this.drilldownField].length-1;a>-1;a--){this.chart.addSeries(this.chartData[this.drilldownField][a],false,true);}}this.chart.redraw();},});Class.ns("Bankingapp.ui");Bankingapp.ui.BudgetBarChart=Class.extend(Bankingapp.ui.BaseBarChartComponent,{stackField:"stack",incomeStack:"income",expenseStack:"expense",chartOptions:null,groupPaddingValue:0,tickInterval:1000,categoryNameField:"description",budgetField:"budgetAmount",spentField:"spentAmount",imageField:"contentImage",chartData:null,barChartBackgroundLevel1:null,barChartBackgroundLevel2:null,barChartBackgroundLevel3:null,barChartBackgroundEmpty:null,isBarColorsSet:null,availableCategoryList:[],budgetData:null,alertLevel:null,warningLevel:null,parentCategory:1,updateColors:function(){if(this.chartData&&this.chartData.series&&this.chartData.series[1]){this.chartData.series[1].color=this.barChartBackgroundEmpty.css("background-color");}if(this.chartData&&this.chartData.series&&this.chartData.series[2]&&this.chartData.series[2].data&&this.chartData.series[2].data.length>0){for(var c=0;c<this.chartData.series[2].data.length;c++){var a=this.chartData.series[2].data[c].spentRatio;var b;if(a>=this.alertLevel){b=this.barChartBackgroundLevel3.css("background-color");}else{if(a>=this.warningLevel){b=this.barChartBackgroundLevel2.css("background-color");}else{b=this.barChartBackgroundLevel1.css("background-color");}}this.chartData.series[2].data[c].color=b;}}this.isBarColorsSet=true;},createChartData:function(){this.barChartBackgroundLevel1=$("<div>",{"class":"barChartBackground level1"}).appendTo(this);this.barChartBackgroundLevel2=$("<div>",{"class":"barChartBackground level2"}).appendTo(this);this.barChartBackgroundLevel3=$("<div>",{"class":"barChartBackground level3"}).appendTo(this);this.barChartBackgroundEmpty=$("<div>",{"class":"barChartBackground empty"}).appendTo(this);this.isBarColorsSet=false;var h=[];var c=[];var e=[];series=[{data:[],currency:this.currency,dataLabels:{enabled:true}},{name:"Budget",data:c,},{name:"Spent",data:h}];this.createAvailableCategoryList();for(var f=0;f<this.budgetData.length;f++){var g=this.budgetData[f];if(g[this.budgetField]>0){var d=this.getCategory(g[this.categoryIdField]);if(this.availableCategoryList.indexOf(d[this.categoryIdField])>-1){var b=g[this.spentField]/g[this.budgetField]*100;c.push({y:Math.max(0,g[this.budgetField]-g[this.spentField])});h.push({y:g[this.spentField],spentRatio:b});series[0].data.push({y:0,over:g[this.budgetField]-g[this.spentField]});var a=$("<img>");a.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(d[this.imageField])});e.push({icon:a,name:d[this.categoryNameField],categoryId:d[this.categoryIdField],id:f});}}}this.chartData={categories:e,series:series};},createAvailableCategoryList:function(){for(var a=0;a<this.categories.length;a++){if(this.categories[a][this.parentField]==this.parentCategory){this.availableCategoryList.push(this.categories[a][this.categoryIdField]);}}},fillChartDetailsTable:function(){var c=this.chartDetailsTable.appendRow();for(var b=0;b<this.chartData.categories.length;b++){var a;if(this.chartData.categories[b].icon!=null&&this.CATEGORY_ID_STACK_DEPTH==1){a=$("<div>",{"class":"categoryicon pfmimage"}).append(this.chartData.categories[b].icon);}else{a=$("<div>",{"class":"categoryname"}).append(this.chartData.categories[b].name);}c.appendCell().append(a);}},createChart:function(){this.resizeChartContainerWidth(this.chartData.categories.length);this.resizeChartContainerHeight(this.siblingComponentHeight);var a=this;this.chartOptions={chart:{renderTo:this.chartContainerId,defaultSeriesType:"column",animation:{duration:2000},events:{load:$.proxy(this.onChartLoad,this)}},credits:{enabled:false},title:null,yAxis:{title:null,gridLineWidth:2,tickInterval:this.tickInterval,labels:"",},xAxis:{categories:this.chartData.categories,tickLength:0,lineWidth:4,labels:{enabled:false,}},plotOptions:{column:{stacking:"normal",borderWidth:0,shadow:false,groupPadding:0},series:{allowPointSelect:false,dataLabels:{enabled:false,},point:{events:{click:function(b){a.chartSeriesClickHandler.call(a,b,this);},mouseOver:function(b){},mouseOut:function(b){}}}}},tooltip:{enabled:false,},legend:{enabled:false},};this.chart=new Highcharts.Chart(this.chartOptions);},updateChart:function(){if(this.isPortrait()){return;}if(!this.isBarColorsSet){this.updateColors();}if(this.chart==null){this.createChart();}while(this.chart.series.length>0){this.chart.series[0].remove(false);}for(var a=0;a<this.chartData.series.length;a++){this.chart.addSeries(this.chartData.series[a],false,true);}this.chart.redraw();},getCategory:function(b){for(var a=0;a<this.categories.length;a++){if(this.categories[a][this.categoryIdField]==b){return this.categories[a];break;}}return null;}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmTransactionListItem=Class.extend(Bankingapp.ui.ListItem,{partnerNameField:"partnerName",categoryIdField:"categoryId",valueDateField:"valueDate",amountField:"originalSubAmount",currencyField:"originalCurrency",baseClass:"transactionListItem",dateFormat:"d/m/Y",pfmCategoryMap:null,renderItem:function(){var a=this.itemData[this.partnerNameField];var g=$().dateParserWithTimezone(this.itemData[this.valueDateField]);var d=this.itemData[this.amountField];var e=this.itemData[this.currencyField];var c=this.itemData[this.categoryIdField];var b=this.getPfmCategoryName(c);var h=$("<table>");var i=h.appendRow();var f=i.appendCell({"class":"listItemContentContainer partnername"});f.append(new Bankingapp.ui.Label(a,{"class":"partnername"}));f=i.appendCell({"class":"listItemContentContainer valuedate"});f.append(new Bankingapp.ui.Label(g.dateFormat(this.dateFormat),{"class":"valuedate"}));i=h.appendRow();f=i.appendCell({"class":"listItemContentContainer category"});f.append(new Bankingapp.ui.Label(b,{"class":"category"}));f=i.appendCell({"class":"listItemContentContainer amount"});f.append(new Bankingapp.ui.Amount({decorate:true,currency:e,amount:d}));this.append(h);if(!this.active){this.addClass(this.inactiveClass);}},getPfmCategoryName:function(b){if((this.pfmCategoryMap==undefined)||(this.pfmCategoryMap==null)){return null;}var a=this.pfmCategoryMap[b];return((a!=undefined)&&(a!=null))?a.description:null;}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmTransactionPeriodListItem=Class.extend(Bankingapp.ui.ListItem,{periodField:"date",amountField:"y",baseClass:"periodListItem",currency:null,renderItem:function(){var period=eval("this.itemData."+this.periodField);var amount=eval("this.itemData."+this.amountField);var table=$("<table>");var row=table.appendRow();var cell=row.appendCell({"class":"listItemContentContainer period"});cell.append(new Bankingapp.ui.Label(period,{"class":"period"}));cell=row.appendCell({"class":"listItemContentContainer amount"});cell.append(new Bankingapp.ui.Amount({decorate:true,currency:this.currency,amount:amount}));this.append(table);if(!this.active){this.addClass(this.inactiveClass);}}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmTransactionsCategorySummary=Class.extend(Bankingapp.ui.Component,{baseClass:"analysissummary",baseElement:"<div>",amount:null,currency:null,categoryId:null,pfmCategoryMap:null,imageField:"summaryImage",descriptionField:"description",parentIdField:"parentId",incomeField:"income",constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.PfmTransactionsCategorySummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var j=$("<div>",{"class":this.baseClass+"-outer"});var b=$("<div>",{"class":this.baseClass+"-inner"});var c=$("<div>",{"class":this.baseClass+"-content"});var i=$("<div>",{"class":this.baseClass+"-detail"});var a=this.pfmCategoryMap[this.categoryId];var e=resolve("bankingapp_function_pfmbudget_summary");if(a){e=a[this.descriptionField];}if(a&&a[this.parentIdField]){var g=a[this.imageField];if(!g){var f=this.pfmCategoryMap[a[this.parentIdField]];g=f[this.imageField];}var h=$('<div class="imageContainer">');var d=$("<img>");d.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(g)});h.append(d);h.addClass("categoryicon pfmimage");c.append(h);}else{j.addClass("imageContainer");if(a&&a[this.incomeField]){j.addClass("income");}else{if(a){j.addClass("expense");}else{j.addClass("summary");}}}i.append($("<div>",{"class":"title categoryname"}).append($.encoder.encodeForHTML(e)));c.append(i);c.append(new Bankingapp.ui.Amount({currency:this.currency,amount:this.amount,"class":"title"}));b.append(c);j.append(b);j.appendTo(this);},update:function(a){this.applyConfig(a);this.empty();this.render();}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmTransactionSplitSummary=Class.extend(Bankingapp.ui.Component,{baseClass:"splitsummary",baseElement:"<div>",currency:null,totalAmount:null,sumAmount:null,sumAmountComponent:null,sumRow:null,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.PfmTransactionSplitSummary.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){var d=$("<div>",{"class":this.baseClass+"-outer"});var c=$("<div>",{"class":this.baseClass+"-inner"});var b=$("<div>",{"class":this.baseClass+"-content"});var a=$("<div>",{"class":"title totalrow"});a.append(new Bankingapp.ui.Label(resolve("bankingapp_function_pfmtransactions_splittransaction_totalamount")));a.append(new Bankingapp.ui.Amount({currency:this.currency,amount:this.totalAmount,"class":"totalamount"}));this.sumRow=$("<div>",{"class":"title sumrow"});this.sumRow.append(new Bankingapp.ui.Label(resolve("bankingapp_function_pfmtransactions_splittransaction_sumamount")));this.sumAmountComponent=new Bankingapp.ui.Amount({currency:this.currency,amount:this.sumAmount,"class":"sumamount"});this.sumRow.append(this.sumAmountComponent);b.append(a);b.append(this.sumRow);c.append(b);d.append(c);d.appendTo(this);},updateSumAmount:function(a){this.sumAmount=a;this.sumAmountComponent.remove();this.sumAmountComponent=new Bankingapp.ui.Amount({currency:this.currency,amount:this.sumAmount,"class":"sumamount"});this.sumRow.append(this.sumAmountComponent);}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmTransactionSliceElement=Class.extend(Bankingapp.ui.Component,{baseClass:"TransactionSliceElement",baseElement:"<div>",groupContainer:null,categoryComponent:null,sliceData:null,hidden:null,subAmount:null,imagesFolder:null,decimals:2,fullAmount:null,category:null,parentCategory:null,currency:null,categoryButton:null,amountField:null,sliderBar:null,valueLimit:null,sliceId:null,calculatedAmount:null,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.PfmTransactionSliceElement.superclass.constructor.call(this,this.baseElement,b);},initComponent:function(){this.render();},render:function(){this.imagesFolder=$().getImagesFolder();this.valueLimit=this.subAmount;var b=$("<div>",{"class":"outerContainer"});this.append(b);var a=$("<div>",{"class":"sliderContainer"});this.groupContainer=$("<div>",{"class":"groupContainer"});this.categoryComponent=new Bankingapp.ui.LabeledComponent({labelText:resolve("bankingapp_function_pfmtransactions_splittransaction_category"),valueComponent:this.categoryButton});this.groupContainer.append(this.categoryComponent);this.setCategory(this.category,this.parentCategory);var c=new String(getDeviceInformation().os).toLowerCase()!="ios"?"tel":"text";this.amountField=new Bankingapp.ui.AmountInput({labelText:resolve("bankingapp_function_pfmtransactions_splittransaction_amount"),currency:this.currency,showOptional:false,inputConfig:{type:c,inputMaskPattern:/[0-9.,\+\-]/,validation:{required:true}}});this.groupContainer.append(this.amountField);this.amountField.setValue(this.subAmount);this.amountField.focusout($.proxy(this.amountRewriteHandler,this));this.calculatedAmount=this.subAmount;if(this.hidden){this.groupContainer.append(new Bankingapp.ui.Label(resolve("bankingapp_function_pfmtransactions_splittransaction_hidden"),{"class":"separator"}));}b.append(this.groupContainer);this.sliderBar=new Bankingapp.ui.Slider();this.sliderBar.bind("slide",$.proxy(this.slideHandler,this));this.sliderBar.bind("sliderMove",$.proxy(this.sliderMoveHandler,this));a.append(this.sliderBar);b.append(a);this.sliderBar.setRatio(this.subAmount/this.fullAmount);this.setValueLimit(this.valueLimit);},getValueLimit:function(){return this.valueLimit;},setValueLimit:function(a){if(a<=this.fullAmount){this.valueLimit=Number(a);this.sliderBar.setLimit(this.valueLimit/this.fullAmount);}},getAmount:function(){return this.calculatedAmount;},setAmount:function(a){var b=Number(a);if(b>this.fullAmount){b=this.valueLimit;}this.calculatedAmount=b;this.amountField.setValue(this.calculatedAmount.toFixed(this.decimals));this.sliderBar.setRatio(this.calculatedAmount/this.fullAmount);this.trigger("amountChanged");},getHidden:function(){return this.hidden;},amountRewriteHandler:function(b,c){var a=this.amountField.val();this.setAmount(a);},slideHandler:function(b){var a=Number(this.valueLimit)/Number(this.fullAmount);if(this.sliderBar.getRatio()==this.sliderBar.getLimit()||this.sliderBar.getRatio()>a){this.sliderBar.setRatio(a);this.calculatedAmount=Number(this.valueLimit);}else{this.calculatedAmount=Number((this.fullAmount*this.sliderBar.getRatio()).toFixed(this.decimals));}this.amountField.setValue(this.calculatedAmount.toFixed(this.decimals));this.trigger("amountChanged");},sliderMoveHandler:function(d,c){var b=Number((this.fullAmount*Number(c)).toFixed(this.decimals));var a=Number(this.calculatedAmount-b);this.amountField.setValue(b);this.trigger("amountChanging",a);},categoryButtonHandler:function(a,b){this.trigger("changeCategory",this.sliceId);},getCategory:function(){return this.category;},setCategory:function(b,a){this.category=b;this.parentCategory=a;this.categoryButton=new Bankingapp.ui.PfmCategorySelector([this.category.description],{category:b,parentCategory:a,imagesFolder:this.imagesFolder,"class":"categorybutton"});this.categoryButton.bind("buttonClick",$.proxy(this.categoryButtonHandler,this));this.categoryComponent.setComponent(this.categoryButton);},});Class.ns("Bankingapp.ui");Bankingapp.ui.Slider=Class.extend(Bankingapp.ui.Component,{baseClass:"sliderBar",baseElement:"<div>",activeClass:"state_active",currentPositionX:0,sliderWidth:0,percentageDecimals:4,partInterval:0,isRtl:false,ratio:0,limit:1,sliderPartsCount:11,constructor:function(a){var c=this.applyConfig(a);var b={id:c&&c.id?c.id:this.id,"class":this.baseClass+(c&&c["class"]?(" "+c["class"]):""),};Bankingapp.ui.Slider.superclass.constructor.call(this,this.baseElement,b);if(isRtlLocale()){this.isRtl=true;}this.slider=$("<div>",{"class":"slider"});this.progress=$("<div>",{"class":"slider-progress"});this.progressFill=$("<div>",{"class":"slider-progress fill"});this.append(this.slider);this.append(this.progress);this.append(this.progressFill);this.element=this.slider[0];this.element.addEventListener("touchstart",this,false);this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);this.partInterval=(100/(this.sliderPartsCount-1)).toFixed(this.percentageDecimals);this.setRatio(this.ratio);window.addEventListener("resize",this,false);},handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"resize":this.onResize(a);break;}},onTouchStart:function(a){this.addClass(this.activeClass);this.sliderWidth=this.getWidth();if(this.ratio>0&&this.currentPositionX==0){this.currentPositionX=this.ratio*this.sliderWidth;}this.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,position:this.currentPositionX.valueOf()};this.isScrolling=undefined;a.stopPropagation();},onTouchMove:function(c){if(c.touches.length>1||c.scale&&c.scale!==1){return;}this.deltaX=(c.touches[0].pageX-this.start.pageX);if(typeof this.isScrolling=="undefined"){this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(c.touches[0].pageY-this.start.pageY));}if(!this.isScrolling){c.preventDefault();this.currentPositionX=this.start.position+this.deltaX;var a=this.calculateRatio();var b=a*100;this.slider.css(this.isRtl?"right":"left",b+"%");this.progressFill.css("width",b+"%");this.trigger("sliderMove",a);c.stopPropagation();}else{this.removeClass(this.activeClass);}},onTouchEnd:function(){this.ratio=this.calculateRatio();this.currentPositionX=this.currentPositionX>0?Math.min(this.currentPositionX,this.limit*this.sliderWidth):0;var e=0;var c=0;var d=this.ratio*100;var a=this.limit*100;var b=0;while(c<d&&b<this.sliderPartsCount&&a>c){e=(b>0)?(0+(b-1)*this.partInterval):0;c=(b<this.sliderPartsCount-1)?(0+b*this.partInterval):100;b++;}if(a.toFixed(this.percentageDecimals)<=c.toFixed(this.percentageDecimals)){c=a;}d=(d-e)<(c-d)?e:c;this.setRatio(d/100);this.trigger("slide",this.ratio);this.removeClass(this.activeClass);},onResize:function(){this.setRatio(this.ratio);},getWidth:function(){return this.width();},calculateRatio:function(){var a=this.currentPositionX>0?Math.min(this.currentPositionX,this.limit*this.sliderWidth):0;return(a)/(this.sliderWidth);},getRatio:function(){return this.ratio;},setRatio:function(a){this.ratio=a;this.sliderWidth=this.getWidth();this.currentPositionX=a*this.sliderWidth;var b=a*100;this.slider.css(this.isRtl?"right":"left",b+"%");this.progressFill.css("width",b+"%");},setLimit:function(a){this.limit=a;},getLimit:function(){return this.limit;}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmCategorySelector=Class.extend(Bankingapp.ui.ComplexButton,{baseClass:"categorySelector complexButton",category:null,parentCategory:null,innerBeforeOuter:true,imagesFolder:null,image:null,render:function(){var a=$("<div>",{"class":this.borderClass});this.outerDiv=$("<div>",{"class":this.baseOuterClass});this.innerDiv=$("<div>",{"class":this.baseInnerClass});a.append(this.outerDiv);if(this.innerBeforeOuter){this.outerDiv.append(this.innerDiv);this.renderOuterContent();this.renderInnerContent();}else{this.renderOuterContent();this.renderInnerContent();this.outerDiv.append(this.innerDiv);}this.append(a);},renderOuterContent:function(){this.imageContainer=$('<div class="imageContainer">');this.image=$("<img>");this.imageContainer.addClass("categoryicon pfmimage");this.imageContainer.append(this.image);this.outerDiv.append(this.imageContainer);var a=this.category.contentImage;a=((a==undefined)||(a==null))?this.parentCategory.contentImage:null;this.image.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(a)});},appendOuterContent:function(a){}});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmCategoriesList=Class.extend(Bankingapp.ui.List,{date:null,incomeField:"income",categoryIdField:"categoryId",parentIdField:"parentId",categoryList:null,isIncome:false,initComponent:function(){this.categoryList=this.createFilteredCategoryList(this.listData,this.isIncome);this.appendItems();},appendItems:function(){var a=null;a=this.categoryList;this.empty();var d=null;for(var b=0;b<a.length;b++){var c=new this.itemRenderer(a[b],this.getItemConfig(a[b]));if(this.itemClass){c.addClass(this.itemClass);}if(this.itemsArray.length==0){c.addClass(this.firstClass);}if(b==(a.length-1)){c.addClass(this.lastClass);}if(this.tableColumns==null){this.append(c);}else{if(d==null||d.children().length>=this.tableColumns){d=$("<tr>");this.append(d);}d.append(c);}this.registerItem(c,a[b]);}this.renderNoResult();},handleFirstLevelItemClick:function(b){try{b.stopImmediatePropagation();this.trigger("firstLevelItemClick",b.data);}catch(a){onErrorOccurred(a);}},handleSecondLevelItemClick:function(b){try{b.stopImmediatePropagation();this.trigger("secondLevelItemClick",b.data);}catch(a){onErrorOccurred(a);}},favouriteClickHandler:function(c,b){try{c.stopImmediatePropagation();this.trigger("favouriteClick",{data:c.data,favourite:b});}catch(a){onErrorOccurred(a);}},registerItem:function(a,b){this.itemsArray.push(a);if(this.idProperty&&b[this.idProperty]){this.itemsMap[b[this.idProperty]]=a;}if(a.getFirstLevel()){a.click(b,$.proxy(this.handleFirstLevelItemClick,this));}else{a.bind("itemClick",b,$.proxy(this.handleSecondLevelItemClick,this));a.bind("favouriteClick",b,$.proxy(this.favouriteClickHandler,this));}},setListItemsVisibility:function(a){for(var b=0;b<this.itemsArray.length;b++){if(this.itemsArray[b].getParentId()==a&&!this.itemsArray[b].getOpened()){this.itemsArray[b].setOpened(true);this.itemsArray[b].setVisibility();}else{if(this.itemsArray[b].getOpened()){this.itemsArray[b].setOpened(false);this.itemsArray[b].setVisibility();}}}},createFilteredCategoryList:function(b,g){var a=null;var h={};var f=[];for(var e=0;e<b.length;e++){if(b[e][this.categoryIdField]<10&&((b[e][this.incomeField]&&g)||(!b[e][this.incomeField]&&!g))){a=b[e][this.categoryIdField];}else{if(b[e][this.parentIdField]!=null&&b[e][this.parentIdField]!=undefined){if(h[b[e][this.parentIdField]]==null||h[b[e][this.parentIdField]]==undefined){h[b[e][this.parentIdField]]=[];}h[b[e][this.parentIdField]].push(b[e]);}}}if(h[a]!=null&&h[a]!=undefined&&$.isArray(h[a])){for(var e=0;e<h[a].length;e++){var d=h[a][e];f.push(d);if(h[d[this.categoryIdField]]!=null&&h[d[this.categoryIdField]]!=undefined&&$.isArray(h[d[this.categoryIdField]])){for(var c=0;c<h[d[this.categoryIdField]].length;c++){f.push(h[d[this.categoryIdField]][c]);}}}}return f;},});Class.ns("Bankingapp.ui");Bankingapp.ui.PfmCategoriesListItem=Class.extend(Bankingapp.ui.ListItem,{baseDefaultClass:"pfmcategorieslistitem",imagesFolder:null,categoryIdField:"categoryId",parentIdField:"parentId",incomeField:"income",descriptionField:"description",imageContainer:null,image:null,nameContainer:null,isFirstLevel:true,isFavourite:false,isOpened:false,favouriteList:[],pfmCategoryMap:null,initComponent:function(){this.renderItem();},renderItem:function(){this.addClass(this.baseDefaultClass);var d=$("<div>",{"class":this.baseDefaultClass+"-outer"});var c=$("<div>",{"class":this.baseDefaultClass+"-inner"});var b=$("<div>",{"class":this.baseDefaultClass+"-content"});var f=this.itemData[this.categoryIdField];var e=this.itemData[this.descriptionField];this.imageContainer=$('<div class="listItemImageContainer">');this.image=$("<img>");this.imageContainer.addClass("categoryicon pfmimage");b.append(this.imageContainer);this.nameContainer=$("<div>",{"class":"listitemtitle categoryname"}).append($.encoder.encodeForHTML(e));if(this.itemData[this.parentIdField]<10){var a=this.getPfmContentCategoryImage(f);this.imageContainer.append(this.image);this.image.attr({src:"data:image/png;base64,"+$.encoder.encodeForURL(a)});this.addClass("firstlevel");this.click($.proxy(this.clickHandler,this));}else{this.setFavourite($.inArray(f,this.favouriteList)>=0);this.isFirstLevel=false;this.addClass("secondlevel");this.updateStyleClass();this.imageContainer.click($.proxy(this.favouriteClickHandler,this));this.nameContainer.click($.proxy(this.itemClickHandler,this));}b.append(this.nameContainer);c.append(b);d.append(c);d.appendTo(this);this.setVisibility();},getParentId:function(){return this.itemData[this.parentIdField];},getFirstLevel:function(){return this.isFirstLevel;},getFavourite:function(){return this.isFavourite;},setFavourite:function(a){this.isFavourite=a;},changeFavourite:function(){this.setFavourite(this.getFavourite()?false:true);},setVisibility:function(){if(!this.isFirstLevel){if(this.getFavourite()||this.getOpened()){this.removeClass("hidden");}else{this.addClass("hidden");}}},getOpened:function(){return this.isOpened;},setOpened:function(a){this.isOpened=a;},updateStyleClass:function(){if(this.getFavourite()){this.addClass("favourite");}else{this.removeClass("favourite");}},itemClickHandler:function(b){try{b.stopImmediatePropagation();this.trigger("itemClick");}catch(a){onErrorOccurred(a);}},favouriteClickHandler:function(b){try{b.stopImmediatePropagation();this.changeFavourite();this.updateStyleClass();this.setVisibility();this.trigger("favouriteClick",this.getFavourite());}catch(a){onErrorOccurred(a);}},getPfmContentCategoryImage:function(b){var a=this.pfmCategoryMap?this.pfmCategoryMap[b]:null;return((a!=undefined)&&(a!=null))?a.contentImage:null;}});Class.ns("Bankingapp.ui");Bankingapp.ui.ImageView=Class.extend(Bankingapp.ui.Component,{imageId:null,imageQualifier:null,imageUrl:null,imageData:null,imageMime:null,imageWidth:null,imageHeight:null,imageWidthInPx:null,imageHeightInPx:null,constructor:function(b,d){this.applyConfig(b);var i=null;var g=null;if(this.imageWidth||this.imageHeight){var a=$("body").css("font-size");var h=a.indexOf("px");if(h>=0){a=a.substring(0,h);}i=Math.round(this.imageWidth*a);g=Math.round(this.imageHeight*a);var n=$("body").css("zoom");g=g/n;i=i/n;}else{if(this.imageWidthInPx||this.imageHeightInPx){i=this.imageWidthInPx;g=this.imageHeightInPx;}}var f={id:$.encoder.encodeForHTMLAttribute("id",this.id,true),};Bankingapp.ui.ImageView.superclass.constructor.call(this,"<img>",f);var l=null;if(this.imageData){l="data:"+this.imageMime+";base64,"+$.encoder.encodeForURL(this.imageData);}else{l="";if(this.imageQualifier==null){var k=getLocale();var m=getCurrentSkin();var e=$().getResolution();var c=getApplicationOption("CURRENT_ORIENTATION")?getApplicationOption("CURRENT_ORIENTATION"):"landscape";var j=m+"-"+e+"-"+k+"-"+c;l=this.imageUrl+"/"+this.imageId+"/"+j;}else{l=this.imageUrl+"/"+this.imageId+"/"+this.imageQualifier;}}this.attr(this.generateAttributes(l,i,g));if(d&&d["class"]){this.addClass($.encoder.encodeForHTMLAttribute("class",d["class"],true));}},generateAttributes:function(c,b,a){if(b!=null&&a!=null){return{src:c,height:Math.round(a),width:Math.round(b)};}else{return{src:c};}}});Class.ns("Bankingapp.ui");Bankingapp.ui.ListPickerButton=Class.extend(Bankingapp.ui.ComplexButton,{baseClass:"listPicker complexButton",ChangeContent:function(a){this.innerDiv.empty();this.appendInnerContent(a);},appendOuterContent:function(a){}});