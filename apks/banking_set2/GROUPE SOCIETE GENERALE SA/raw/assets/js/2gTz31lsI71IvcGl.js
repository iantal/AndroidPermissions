$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");$().loadJavaScript("/js/NqvpUjhTwDggG7lG.js");$().loadJavaScript("/js/CF0WiFs1SjIy0Szl.js");Class.ns("Functions.transferfunds.payment2phone");Functions.transferfunds.payment2phone.Result=Class.extend(Bankingapp.framework.View,{dateFormatPatternResourceKey:"bankingapp_common_dateFormatPattern",warningForwardKey:"bankingapp_function_payment2phone_warning_forward",pageWarningBeneficiaryTitle:"bankingapp_function_payment2phone_warning_title",container:null,homeButton:null,formDate:null,title:null,ct:null,messages:[],layoutRender:function(){this.container=$("<div>");this.ct=$("<div>",{"class":"formcontainer formcontainer"});this.container.append(this.ct);this.title="";this.title=resolve("bankingapp_function_payment2phone_result_details");var a=new Object();a.title=resolve(this.pageWarningBeneficiaryTitle);a.details=resolve(this.warningForwardKey);this.messages.push(a);return this.container;},registerDetailsTypes:function(){Bankingapp.ui.DynamicDetailsFactory.register("result",Bankingapp.ui.DetailsResultComponent);},run:function(){Bankingapp.framework.event.BrdServiceMessageHandler.handleMessages();var c=getFunctionAttribute(Functions.transferfunds.TransferUtils.PAYMENT2PHONE_SIGN_REPLY);this.formData=getFunctionAttribute(Functions.transferfunds.TransferUtils.PAYMENT2PHONE_FORMDATA);this.transactionId=c.transactionId;var a={status:"successful",message:resolve("bankingapp_function_payment2phone_result_success"),warning:this.messages,title:[resolve("bankingapp_function_payment2phone_result_bankname"),this.title],timestamp:c.created,id:c.transactionId,details:[{label:resolve("bankingapp_function_payment2phone_result_sourceaccount"),value:this.formData.sourceAccount.accountName+" ("+this.formData.sourceAccount.currency+")"},{label:resolve("bankingapp_function_payment2phone_result_partnername"),value:this.formData.beneficiaryName},{label:resolve("bankingapp_function_payment2phone_result_phone"),value:this.formData.phoneNumber},{label:resolve("bankingapp_function_payment2phone_result_amount"),value:new Bankingapp.functions.util.component.Amount({currency:this.formData.currency,amount:this.formData.amount,decorate:true})},{label:resolve("bankingapp_function_payment2phone_result_description"),value:this.formData.description},{label:resolve("bankingapp_function_payment2phone_result_securitykey"),value:c.processReply.secondaryCode}]};this.ct.append(new Functions.transferfunds.DetailsResultComponent({detailsData:a,displayDateFormatKey:"bankingapp_common_timeFormatPattern_minute"}));this.downloadProofOfPaymentButton=new Bankingapp.ui.ComplexButton(resolve("bankingapp_brd_function_transactionhistory_downloadpdf"),{id:"downloadButton","class":"downloadProofOfPaymentButton"});this.downloadProofOfPaymentButton.bind("buttonClick",$.proxy(this.downloadPdfClickHandler,this));this.ct.append(this.downloadProofOfPaymentButton);var b=new Bankingapp.ui.ComplexButton(resolve("bankingapp_function_payment2phone_back_to_payments"),{});this.ct.append(b);b.bind("buttonClick",$.proxy(this.backToPaymentsHandler,this));this.clearFunctionScope();Bankingapp.framework.event.ButtonHandler.setButtonHandler("BACK",$.proxy(this.backBtnHandler,this));},clearFunctionScope:function(){var a=getFunctionAttributeNames();for(var b=0;b<a.length;b++){removeFunctionAttribute(a[b]);}},backToPaymentsHandler:function(){this.goToPaymentsLandingPage();},backBtnHandler:function(a){this.goToPaymentsLandingPage();},goToPaymentsLandingPage:function(){goToPreviousView("view://brd/bankingapp/function/payments/payments");},downloadPdfClickHandler:function(a,b){console.log("downloadPdfClickHandler ...");if(this.transactionId){Functions.transferfunds.TransferUtils.getDocumentDownloadKey(this.transactionId);}else{console.log("The authentication reply is not available");showError(resolve("bankingapp_brd_function_payments_download_proofofpayments_failure"));}}});Bankingapp.framework.Application.setView(Functions.transferfunds.payment2phone.Result);