$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");$().loadJavaScript("/js/CF0WiFs1SjIy0Szl.js");$().loadJavaScript("/js/NqvpUjhTwDggG7lG.js");Class.ns("Bankingapp.functions.receivemoney.westernunion_receive");Bankingapp.functions.receivemoney.westernunion_receive.Result=Class.extend(Bankingapp.framework.View,{dateFormatPattern:resolve("bankingapp_common_dateFormatPattern_per"),container:null,homeButton:null,formDate:null,ct:null,layoutRender:function(){this.container=$("<div>");this.ct=$("<div>",{"class":"formcontainer result"});this.container.append(this.ct);return this.container;},run:function(){Bankingapp.framework.event.BrdServiceMessageHandler.handleMessages();var f=getFunctionAttribute(Functions.transferfunds.TransferUtils.WU_RECEIVE_SIGN_REPLY);this.formData=getFunctionAttribute(Functions.transferfunds.TransferUtils.WU_RECEIVE_FORMDATA);var d=getFunctionAttribute(Functions.transferfunds.TransferUtils.WU_RECEIVE_FORECAST_REPLY);var g=d.forecastReply;var a=g.fXAmountData;this.transactionId=f.transactionId;var h="";var c="successful";var i="bankingapp_brd_function_finances_westernunion_receive_result_success";if(f==undefined||f==null||f.status==undefined||f.status==null||f.status=="FAILED"){c="error";i="bankingapp_brd_function_finances_westernunion_receive_result_perform_failure";}h=resolve("bankingapp_brd_function_finances_westernunion_receive_result_details");var b={status:c,message:resolve(i),title:[resolve("bankingapp_brd_function_finances_westernunion_receive_result_bankname"),h],timestamp:f.created,id:f.transactionId,details:[]};if(this.formData.targetAccount!=undefined){b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_target_account_name"),value:this.formData.targetAccount.accountName+" ("+this.formData.targetAccount.currency+")"});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_target_account_number"),value:this.formData.targetAccount.accountNumber});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_target_account_holder"),value:this.formData.targetAccount.ownerName});}b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_mtcn"),value:this.formData.mtcn});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_received_amount"),value:a.toCurrency+" "+a.toAmount});if(a!=undefined&&a){b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_sent_amount"),value:a.fromCurrency+" "+a.fromAmount});if(a.fXRate&&a.fXRate!=1){b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_exchange_rate"),value:a.fXRate});}}b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_personal_message"),value:g.westernUnionReceiveData.personalMessage});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_sender_name"),value:g.westernUnionReceiveData.senderName});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_sender_address"),value:g.westernUnionReceiveData.senderAddress});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_sender_country"),value:resolve("bankingapp_function_insternationaltransfer_details_country_"+g.westernUnionReceiveData.senderCountry)});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_receiver_name"),value:g.westernUnionReceiveData.receiverName});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_receiver_address"),value:g.westernUnionReceiveData.receiverAddress});b.details.push({label:resolve("bankingapp_brd_function_finances_westernunion_receive_result_receiver_country"),value:resolve("bankingapp_function_insternationaltransfer_details_country_"+g.westernUnionReceiveData.receiverCountry)});this.ct.append(new Functions.transferfunds.DetailsResultComponent({detailsData:b,displayDateFormatKey:"bankingapp_brd_function_transfer_result_createTimeFormat"}));this.downloadProofOfPaymentButton=new Bankingapp.ui.ComplexButton(resolve("bankingapp_brd_function_transactionhistory_downloadpdf"),{id:"downloadButton","class":"downloadProofOfPaymentButton"});this.downloadProofOfPaymentButton.bind("buttonClick",$.proxy(this.downloadPdfClickHandler,this));this.ct.append(this.downloadProofOfPaymentButton);var e=new Bankingapp.ui.ComplexButton(resolve("bankingapp_brd_function_finances_westernunion_receive_result_back_to_payments"),{});this.ct.append(e);e.bind("buttonClick",$.proxy(this.backToPaymentsHandler,this));Bankingapp.framework.event.ButtonHandler.setButtonHandler("BACK",$.proxy(this.backBtnHandler,this));this.clearFunctionScope();},clearFunctionScope:function(){var a=getFunctionAttributeNames();if(a){for(var b=0;b<a.length;b++){removeFunctionAttribute(a[b]);}}},backToPaymentsHandler:function(){this.goToPaymentsLandingPage();},backBtnHandler:function(a){this.goToPaymentsLandingPage();},goToPaymentsLandingPage:function(){goToPreviousView("view://brd/bankingapp/function/receivemoney/landingpage");},downloadPdfClickHandler:function(a,b){console.log("downloadPdfClickHandler ...");if(this.transactionId){Functions.transferfunds.TransferUtils.getDocumentDownloadKey(this.transactionId);}else{console.log("The authentication reply is not available");showError(resolve("bankingapp_brd_function_payments_download_proofofpayments_failure"));}}});Bankingapp.framework.Application.setView(Bankingapp.functions.receivemoney.westernunion_receive.Result);