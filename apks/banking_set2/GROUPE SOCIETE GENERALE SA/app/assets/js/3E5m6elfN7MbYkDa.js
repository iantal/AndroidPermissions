$().loadJavaScript("/js/EY30pmSnIMcajXPT.js");$().loadJavaScript("/js/snosUZyjouIYavJ2.js");$().loadJavaScript("/js/utz2ow7EdUcbMKAs.js");Class.ns("Bankingapp.functions.interestrate");Bankingapp.functions.interestrate.HistoricalInterestRates=Class.extend(Bankingapp.framework.View,{container:null,historicListObject:null,interestRateElement:null,chartDateList:null,chartRateList:null,chartDateFormat:"m/d",chartCalculatedData:null,layoutRender:function(){this.interestRateElement=getFunctionAttribute("rateItem");console.log("passed",this.interestRateElement);this.constructChartData(this.interestRateElement.interestRateHistory);this.container=$("<div>",{id:"historicalInterestRateMainContainer"});return this.container;},run:function(){this.historicTitleContainer=$("<div>",{id:"historicTitleContainer","class":"historicTitleContainer"});var d=$("<img>");d.attr({src:$().getImagesFolder()+"landing_big_icon_chart.png"});var b=$("<div>",{id:"historicTitleImageCell","class":"historicTitleImageCell"});b.append($("<div>").append(d));var a=$("<div>",{id:"historicTitleTextCell","class":"historicTitleTextCell"});a.append($("<div>",{"class":"historicTitleText"}).append(this.interestRateElement.interestType+" "+this.interestRateElement.interestCategory));this.historicTitleContainer.append(b);this.historicTitleContainer.append(a);this.container.append(this.historicTitleContainer);if(this.interestRateElement.interestRateHistory!=null){this.chartContainer=$("<div>",{id:"chartContainer"});this.container.append(this.chartContainer);var c=new Highcharts.Chart({title:{text:null},chart:{renderTo:"chartContainer"},tooltip:{enabled:false},legend:{enabled:false},xAxis:{type:"datetime",ordinal:false,startOnTick:false,endOnTick:false,tickPixelInterval:150,labels:{formatter:function(){var f=new Date(this.value);var g=(f.getMonth()+1).toString();if(g.length==1){g="0"+g;}var e=f.getUTCDate().toString();if(e.length==1){e="0"+e;}var h=g+"/"+e;return h;}}},yAxis:{labels:{enabled:false},title:{text:null},gridLineWidth:0},series:[{data:this.chartCalculatedData}]});this.containerHistoricList=$("<div>",{id:"historicListContainer","class":"list maincontainer"});this.historicList=new Bankingapp.ui.List({baseClass:"list",listData:this.interestRateElement.interestRateHistory,itemRenderer:Bankingapp.ui.HistoricalInterestRateItem,noresultKey:"bankingapp_brd_function_interestrate_interest_rate",activeProperty:true,itemConfig:{baseClass:"accountListItem",interestRateDateField:"interestDate",interestRateField:"interestRate"}});this.containerHistoricList.append(this.historicList);this.container.append(this.containerHistoricList);}else{this.container.append(resolve("bankingapp_brd_function_interestrate_historical_nohistory"));}},constructChartData:function(c){var e=[];var a=[];for(var b in c){var d=new Date(c[b].interestDate).getTime();e.push(d);a.push(c[b].interestRate);}this.chartDateList=e;this.chartDateList.reverse();this.chartRateList=a;this.chartRateList.reverse();this.chartCalculatedData=Highcharts.calculateMissingValues(this.chartRateList,this.chartDateList);}});Bankingapp.framework.Application.setView(Bankingapp.functions.interestrate.HistoricalInterestRates);