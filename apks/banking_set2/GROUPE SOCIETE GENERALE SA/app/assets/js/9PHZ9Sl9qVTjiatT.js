Class.ns("Bankingapp.functions.accountinfo.blockedamounts");$().loadJavaScript("/js/GU3CiPYkRHS9HejP.js");$().loadJavaScript("/js/CF0WiFs1SjIy0Szl.js");$().loadJavaScript("/js/0A4YRnFx1DbUd3zN.js");Bankingapp.functions.accountinfo.blockedamounts.BlockedAmountsList=Class.extend(Bankingapp.framework.View,{FUNCTION_ATTRIBUTE_IBAN:"BLOCKED_AMOUNT_IBAN",FUNCTION_ATTRIBUTE_CURRENCY:"BLOCKED_AMOUNT_CURRENCY",FUNCTION_ATTRIBUTE_ACCOUNTNAME:"BLOCKED_AMOUNT_ACCOUNTNAME",FUNCTION_ATTRIBUTE_ACCOUNTTYPE:"BLOCKED_AMOUNT_ACCOUNTTYPE",layoutRender:function(a){debugLog("BlockedAmountsList layoutRender ...");this.container=$("<div>",{id:"blockedAmountsContainer","class":"list maincontainer"});this.topContainer=$("<div>");this.blockedAmountList=new Bankingapp.ui.HistoricList([],{itemRenderer:Bankingapp.functions.accountinfo.blockedamounts.BlockedAmountItem,id:"date",dateField:"date",dataDateFormat:resolve("bankingapp_common_parsedatepattern_withouttimezone"),displayDateFormat:resolve("bankingapp_common_dateFormatPattern"),showDateInPeriods:false,dataOrder:"desc"});this.getList();this.container.append(this.topContainer);this.container.append(this.blockedAmountList);return this.container;},getList:function(){var b=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_IBAN);var a=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_CURRENCY);debugLog("iban: "+b);var c={accountNumber:b,currency:a};Bankingapp.framework.Application.callService("/account/getBlockedAmounts",{BlockedAmountsRequest:c},$.proxy(this.handleListResult,this));},handleListResult:function(b){debugLog("handleListResult, "+b);if((b!=undefined)&&b!=null&&b.blockedAmounts!=undefined&&b.blockedAmounts!=null){debugLog("response.blockedAmounts.length: "+b.blockedAmounts.length);this.blockedAmountList.appendItems(b.blockedAmounts);var d=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_IBAN);var c=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_ACCOUNTNAME);var e=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_ACCOUNTTYPE);var a=getFunctionAttribute(this.FUNCTION_ATTRIBUTE_CURRENCY);var f="";if(d!=undefined&&e!=undefined){f=e+" </br>"+d;}this.topContainer.append(new Bankingapp.functions.util.component.TransactionSummary({summaryData:{titleInfo:"",upperTitle:"",upperText:"",amount:b.sumAmount==undefined?"":b.sumAmount,currency:(a==undefined?"":a),lowerTitle:(c==undefined?"":c),lowerText:f,creditDebitFlag:"D"}}));}else{debugLog("No blocked amounts");}}});Bankingapp.framework.Application.setView(Bankingapp.functions.accountinfo.blockedamounts.BlockedAmountsList);