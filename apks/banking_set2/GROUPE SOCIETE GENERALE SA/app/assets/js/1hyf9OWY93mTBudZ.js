Class.ns("Functions.transferfunds");Functions.transferfunds.TransferUtils=function(){return{SIGNMODE:"TOKEN",DEFAULT_CURRENCY:"RON",TREASURY_ACCOUNT:"TREZ",CUSTOMER_TYPE_CORPORATE:2,CURRENT_CUSTOMER:"CURRENT_CUSTOMER",PAYMENT_VALUEDATE_MAXDAYS:"PAYMENT_VALUEDATE_MAXDAYS",DOMESTICTRANSFER_INITDATA:"DOMESTICTRANSFER_INITDATA",DOMESTICTRANSFER_FORMDATA:"DOMESTICTRANSFER_FORMDATA",DOMESTICTRANSFER_FORECAST_REQUEST:"DOMESTICTRANSFER_FORECAST_REQUEST",DOMESTICTRANSFER_FORECAST_REPLY:"DOMESTICTRANSFER_FORECAST_REPLY",DOMESTICTRANSFER_SIGN_CREDENTIAL:"DOMESTICTRANSFER_SIGN_CREDENTIAL",DOMESTICTRANSFER_SIGN_REPLY:"DOMESTICTRANSFER_SIGN_REPLY",INTERNALTRANSFER_FORMDATA:"INTERNALTRANSFER_FORMDATA",INTERNALTRANSFER_FORECAST_REQUEST:"INTERNALTRANSFER_FORECAST_REQUEST",INTERNALTRANSFER_FORECAST_REPLY:"INTERNALTRANSFER_FORECAST_REPLY",INTERNALTRANSFER_SIGN_CREDENTIAL:"INTERNALTRANSFER_SIGN_CREDENTIAL",INTERNALTRANSFER_SIGN_REPLY:"INTERNALTRANSFER_SIGN_REPLY",PAYMENT2PHONE_FORMDATA:"PHONENUMBER_FORMDATA",PAYMENT2PHONE_INITDATA:"PAYMENT2PHONE_INITDATA",PAYMENT2PHONE_FORECAST_REQUEST:"PHONENUMBER_FORECAST_REQUEST",PAYMENT2PHONE_FORECAST_REPLY:"PHONENUMBER_FORECAST_REPLY",PAYMENT2PHONE_SIGN_CREDENTIAL:"PHONENUMBER_SIGN_CREDENTIAL",PAYMENT2PHONE_SIGN_REPLY:"PHONENUMBER_SIGN_REPLY",REQUESTMONEYTRANSFER_FORMDATA:"REQUESTMONEYTRANSFER_FORMDATA",REQUESTMONEYTRANSFER_INITDATA:"REQUESTMONEYTRANSFER_INITDATA",REQUESTMONEYTRANSFER_FORECAST_REQUEST:"REQUESTMONEYTRANSFER_FORECAST_REQUEST",REQUESTMONEYTRANSFER_FORECAST_REPLY:"REQUESTMONEYTRANSFER_FORECAST_REPLY",REQUESTMONEYTRANSFER_SIGN_CREDENTIAL:"REQUESTMONEYTRANSFER_SIGN_CREDENTIAL",REQUESTMONEYTRANSFER_SIGN_REPLY:"REQUESTMONEYTRANSFER_SIGN_REPLY",TRANSFERFUNDS_PARTNERLIST:"TRANSFERFUNDS_PARTNERLIST",BILLPAYMENTRANSFER_FORMDATA:"BILLPAYMENTRANSFER_FORMDATA",BILLPAYMENTRANSFER_FORECAST_REQUEST:"BILLPAYMENTRANSFER_FORECAST_REQUEST",BILLPAYMENTRANSFER_FORECAST_REPLY:"BILLPAYMENTRANSFER_FORECAST_REPLY",BILLPAYMENTRANSFER_SIGN_CREDENTIAL:"BILLPAYMENTRANSFER_SIGN_CREDENTIAL",BILLPAYMENTRANSFER_SIGN_REPLY:"BILLPAYMENTRANSFER_SIGN_REPLY",BUMPRANSFER_STEPCOUNT:6,BUMPRANSFER_BUMPDATA:"BUMPRANSFER_BUMPDATA",BUMPRANSFER_FORMDATA:"BUMPRANSFER_FORMDATA",BUMPRANSFER_FORECAST_REQUEST:"BUMPRANSFER_FORECAST_REQUEST",BUMPRANSFER_FORECAST_REPLY:"BUMPRANSFER_FORECAST_REPLY",BUMPRANSFER_SIGN_CREDENTIAL:"BUMPRANSFER_SIGN_CREDENTIAL",BUMPTRANSFER_SIGN_REPLY:"BUMPTRANSFER_SIGN_REPLY",QRTRANSFER_STEPCOUNT:6,QRTRANSFER_BENEFICIARYDATA:"QRTRANSFER_BENEFICIARYDATA",QRTRANSFER_TARGETCURRENCIES:"QRTRANSFER_TARGETCURRENCIES",QRTRANSFER_FORMDATA:"QRTRANSFER_FORMDATA",QRTRANSFER_FORECAST_REQUEST:"QRTRANSFER_FORECAST_REQUEST",QRTRANSFER_FORECAST_REPLY:"QRTRANSFER_FORECAST_REPLY",QRTRANSFER_SIGN_CREDENTIAL:"QRTRANSFER_SIGN_CREDENTIAL",QRTRANSFER_SIGN_REPLY:"QRTRANSFER_SIGN_REPLY",SPLITBILL_FORMDATA:"SPLITBILL_FORMDATA",SPLITBILL_FORECAST_REQUEST:"SPLITBILL_FORECAST_REQUEST",SPLITBILL_FORECAST_REPLY:"SPLITBILL_FORECAST_REPLY",SPLITBILL_SIGN_CREDENTIAL:"SPLITBILL_SIGN_CREDENTIAL",SPLITBILL_SIGN_REPLY:"SPLITBILL_SIGN_REPLY",OPENACCOUNT_STEPCOUNT_C:3,OPENACCOUNT_STEPCOUNT_D:5,OPENACCOUNT_FORMDATA:"OPENACCOUNT_FORMDATA",OPENACCOUNT_FORECAST_REQUEST:"OPENACCOUNT_FORECAST_REQUEST",OPENACCOUNT_FORECAST_REPLY:"OPENACCOUNT_FORECAST_REPLY",OPENACCOUNT_SIGN_CREDENTIAL:"OPENACCOUNT_SIGN_CREDENTIAL",OPENACCOUNT_SIGN_REPLY:"OPENACCOUNT_SIGN_REPLY",WU_RECEIVE_STEPCOUNT:4,WU_RECEIVE_FORMDATA:"WU_RECEIVE_FORMDATA",WU_RECEIVE_FORECAST_REQUEST:"WU_RECEIVE_FORECAST_REQUEST",WU_RECEIVE_FORECAST_REPLY:"WU_RECEIVE_FORECAST_REPLY",WU_RECEIVE_SIGN_CREDENTIAL:"WU_RECEIVE_SIGN_CREDENTIAL",WU_RECEIVE_SIGN_REPLY:"WU_RECEIVE_SIGN_REPLY",BRINGYOURMONEY_STEPCOUNT_1:4,BRINGYOURMONEY_STEPCOUNT_2:5,BRINGYOURMONEY_FORMDATA:"BRINGYOURMONEY_FORMDATA",BRINGYOURMONEY_INITDATA:"BRINGYOURMONEY_INITDATA",BRINGYOURMONEY_MPIDATA:"BRINGYOURMONEY_MPIDATA",BRINGYOURMONEY_FORECAST_REQUEST:"BRINGYOURMONEY_FORECAST_REQUEST",BRINGYOURMONEY_FORECAST_REPLY:"BRINGYOURMONEY_FORECAST_REPLY",BRINGYOURMONEY_SIGN_REPLY:"BRINGYOURMONEY_SIGN_REPLY",INTERNATIONALTRANSFER_INITDATA:"INTERNATIONALTRANSFER_INITDATA",INTERNATIONALTRANSFER_FORMDATA:"INTERNATIONALTRANSFER_FORMDATA",INTERNATIONALTRANSFER_FORECAST_REQUEST:"INTERNATIONALTRANSFER_FORECAST_REQUEST",INTERNATIONALTRANSFER_FORECAST_REPLY:"INTERNATIONALTRANSFER_FORECAST_REPLY",INTERNATIONALTRANSFER_SIGN_CREDENTIAL:"INTERNATIONALTRANSFER_SIGN_CREDENTIAL",INTERNATIONALTRANSFER_SIGN_REPLY:"INTERNATIONALTRANSFER_SIGN_REPLY",INTERNATIONALTRANSFER_STEPCOUNT:5,REFERENCE_FIELD_MAXLENGTH:16,isCorporateUser:function(){return getSessionAttribute(this.CURRENT_CUSTOMER).customerType==this.CUSTOMER_TYPE_CORPORATE;},isTrezTargetAccount:function(a){if(a.match(this.TREASURY_ACCOUNT)!=null){return true;}return false;},isCrossOverCurrency:function(b,a){return(b!=a);},isCrossOverCurrencyAndOwnBank:function(b,a,c){return(b!=a)&&c.indexOf("BRDE")==4;},isFeeTypeShown:function(a,b){if(b&&a){if(b.indexOf("BRDE")!=4&&a!=this.DEFAULT_CURRENCY){return true;}}return false;},getAmountInputFieldType:function(){return new String(getDeviceInformation().os).toLowerCase()!="ios"?"tel":"number";},getDocumentDownloadKey:function(b){console.log("getDocumentDownloadKey ...");if(!b){console.log("The transaction id is not available!");showError(resolve("bankingapp_brd_function_payments_download_proofofpayments_failure"));return;}var a={TransactionId:b};Bankingapp.framework.Application.callService("/statement/getStatementDownloadKey",{GetDocumentDownloadKeyRequest:a},$.proxy(this.handlePdfDownload,this));console.log("getDocumentDownloadKey ready!");},handlePdfDownload:function(b){console.log("handlePdfDownload ...");var a=getGatewayUrl()+"/statement/getTfwTransactionDetailsPdf/"+b.key;openBrowser(a);},formatCardNumber:function(d){console.log("formatCardNumber: "+d);if(this.isAlreadyMaskedCardNum(d)){console.log("already masked ...");return d;}var a=d.replace(/\s+/g,"").replace(/[^0-9]/gi,"");var c=a.match(/\d{4,24}/g);var b=c&&c[0]||"";var e=[];for(i=0,len=b.length;i<len;i+=4){e.push(b.substring(i,i+4));}if(e.length){return e.join(" ");}else{return d;}},maskCardNumber:function(a){console.log("maskCardNumber: "+a);if(this.isAlreadyMaskedCardNum(a)){console.log("already masked ...");return a;}return a.replace(/\d(?=\d{4})/g,"X").replace(/\d*(?=\s)/g,"XX");},isAlreadyMaskedCardNum:function(a){return(a.indexOf("X")>=0||a.indexOf("x")>=0||a.indexOf("*")>=0);}};}();