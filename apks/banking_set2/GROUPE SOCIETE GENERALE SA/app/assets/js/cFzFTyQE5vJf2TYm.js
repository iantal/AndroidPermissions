$().loadJavaScript("/js/1hyf9OWY93mTBudZ.js");Class.ns("Functions.transferfunds");Functions.transferfunds.LandingPage=Class.extend(Bankingapp.framework.View,{container:null,buttonList:null,ATTRIBUTE_CURRENT_TRUSTEE:"CURRENT_TRUSTEE",bumpService:"/bumptransfer/getBumpData",bumpDataAttributeName:"BUMP_DATA",layoutRender:function(){this.buttonList=[{title:resolve("bankingapp_function_transferfunds_landingpage_bt_domestic"),url:"view://brd/bankingapp/function/transferfunds/domestictransfer/sourceaccountselection","class":"domestictransfer",authorizationId:"domestictransfer/create"},{title:resolve("bankingapp_function_transferfunds_landingpage_bt_internal"),url:"view://brd/bankingapp/function/transferfunds/internaltransfer/sourceaccountselection","class":"internaltransfer",authorizationId:"internaltransfer/create"},{isQr:true,title:resolve("bankingapp_function_transferfunds_landingpage_bt_qrpayment"),"class":"qrpayment",authorizationId:"qrtransfersend/create"},{title:resolve("bankingapp_function_transferfunds_landingpage_bt_payment2phone"),url:"view://brd/bankingapp/function/transferfunds/payment2phone/sourceaccountselection","class":"payment2phone",authorizationId:"payment2phonetransfer/create"}];this.container=$("<div>",{id:"landingPageCt","class":"landingPage maincontainer"});this.container.append(new Bankingapp.ui.ProgressIndicator(5,0));this.container.append(new Bankingapp.ui.Label(resolve("demo_bankingapp_function_transferfunds_landingpage_iwantto"),{"class":"separator"}));for(var b=0;b<this.buttonList.length;b++){var a=new Bankingapp.ui.LandingPageButton(this.buttonList[b].title,{"class":this.buttonList[b]["class"],authorizationId:this.buttonList[b].authorizationId});this.container.append(a);if(this.buttonList[b].isBump==true){a.bind("buttonClick",this.buttonList[b],$.proxy(this.bumpClickHandler,this));}else{if(this.buttonList[b].isQr==true){a.bind("buttonClick",this.buttonList[b],$.proxy(this.qrClickHandler,this));}else{a.bind("buttonClick",this.buttonList[b],$.proxy(this.listItemClickHandler,this));}}}return this.container;},listItemClickHandler:function(a){if(a.data.url.indexOf("domestictransfer")!=-1){removeFunctionAttribute(Functions.transferfunds.TransferUtils.TRANSFERFUNDS_PARTNERLIST);removeFunctionAttribute(Functions.transferfunds.TransferUtils.DOMESTICTRANSFER_FORMDATA);}else{if(a.data.url.indexOf("internaltransfer")!=-1){removeFunctionAttribute(Functions.transferfunds.TransferUtils.INTERNALTRANSFER_FORMDATA);}else{if(a.data.url.indexOf("payment2phone")!=-1){removeFunctionAttribute(Functions.transferfunds.TransferUtils.PAYMENT2PHONE_FORMDATA);}}}loadView(a.data.url,null);},bumpClickHandler:function(a){var b=getSessionAttribute(this.ATTRIBUTE_CURRENT_TRUSTEE);bumpReceive(b.name,this.bumpService,Bankingapp.framework.Application.proxy(this.bumpCallback,this,true));},bumpCallback:function(a){removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_BUMPDATA);removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_FORMDATA);removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_FORECAST_REQUEST);removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_FORECAST_REPLY);removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_SIGN_CREDENTIAL);removeFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPTRANSFER_SIGN_REPLY);var b={};b.beneficiaryName=a.beneficiaryName;b.beneficiaryAddress=a.beneficiaryAddress;b.targetAccountNumber=a.targetAccountNumber;b.targetAccountCurrency=a.targetAccountCurrency;setFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_BUMPDATA,b);console.log(Functions.transferfunds.TransferUtils.BUMPRANSFER_BUMPDATA);console.log(getFunctionAttribute(Functions.transferfunds.TransferUtils.BUMPRANSFER_BUMPDATA));loadView("view://brd/bankingapp/function/transferfunds/bumppayment/beneficiarydetails");},qrClickHandler:function(a){removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_BENEFICIARYDATA);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_TARGETCURRENCIES);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORMDATA);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORECAST_REQUEST);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_FORECAST_REPLY);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_SIGN_CREDENTIAL);removeFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_SIGN_REPLY);showBarcodeReader({barcodeTypes:[Bankingapp.constant.Constant.BARCODE_TYPES.QRCODE],callback:Bankingapp.framework.Application.proxy(this.qrCodeReadCallback,this,true)});},qrCodeReadCallback:function(b){var a=b.value;parsePaymentUrl({url:encodeURI(a),callback:Bankingapp.framework.Application.proxy(this.parsePaymentUrlCallback,this,true)});},parsePaymentUrlCallback:function(a){setFunctionAttribute(Functions.transferfunds.TransferUtils.QRTRANSFER_BENEFICIARYDATA,a);loadView("view://brd/bankingapp/function/transferfunds/qrpayment/beneficiarydetails");}});Bankingapp.framework.Application.setView(Functions.transferfunds.LandingPage);