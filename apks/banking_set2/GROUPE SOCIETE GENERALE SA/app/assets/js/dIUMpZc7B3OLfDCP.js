$().loadJavaScript("/js/KAcDLELn6aH5JstN.js");Class.ns("Bankingapp.functions.login");Bankingapp.functions.login.Login=Class.extend(Bankingapp.functions.login.AbstractLogin,{container:null,button:null,form:null,inputFieldContainer:null,loginIdField:null,passwordField:null,currentProgressStep:0,ProgressSteps:3,layoutRender:function(){var a=getFunctionAttribute("activation");Bankingapp.framework.Application.bind("onResume",$.proxy(this.onResume,this));Bankingapp.framework.Application.bind("onErrorMessageReceived",$.proxy(this.onErrorMessageReceived,this));this.container=$("<div>",{id:"loginMainContainer","class":"login maincontainer"});if(a==true){this.container.append(new Bankingapp.ui.ProgressIndicator(this.ProgressSteps,this.currentProgressStep));}this.form=new Bankingapp.ui.Form({id:"loginform",submitHandler:$.proxy(this.submitHandler,this)});this.container.append(this.form);if(a==true){this.form.append(new Bankingapp.ui.Label(resolve("bankingapp_function_login_activation_login_please"),{"class":"separator"}));}this.inputFieldContainer=$("<div>",{id:"inputFieldContainer","class":"groupContainer"});this.form.append(this.inputFieldContainer);this.loginIdField=new Bankingapp.ui.InputField(resolve("bankingapp_function_login_loginid"),{id:"loginid",tabindex:"1",name:"loginId","class":"inputos",validation:{required:true,maxlength:20}},{"for":null},{"class":""});this.passwordField=new Bankingapp.ui.InputField(resolve("bankingapp_function_login_password"),{id:"password",tabindex:"2",name:"password",type:"password",validation:{required:true,whitelist:false}},{"for":null},{"class":""});this.inputFieldContainer.append(this.loginIdField);this.inputFieldContainer.append(this.passwordField);this.button=new Bankingapp.ui.SubmitButton(resolve("bankingapp_function_login_login"),{tabindex:"3"});this.form.append(this.button);return this.container;},run:function(){},onResume:function(){this.clear();},onErrorMessageReceived:function(){this.clear();},submitHandler:function(){this.form.disable();callService({serviceName:"/security/pegasus_security_check",request:{AuthenticationElementRequest:{LoginID:this.loginIdField.val(),Credentials:this.passwordField.val()}},callback:Bankingapp.framework.Application.proxy(this.handleLoginResult,this,true)});},clear:function(){this.loginIdField.setValue("");this.passwordField.setValue("");this.form.enable();}});Bankingapp.framework.Application.setView(Bankingapp.functions.login.Login);